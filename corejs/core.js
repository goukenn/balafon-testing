//author: C.A.D. BONDJE DOUE
//libname: balafon.js
//version: 4.6.0.0408
//copyright: igkdev @ 2013 - 2025
//license: igkdev.com/balafon/balafonjs/license
//generate: 20250709 19:18:20
'use strict';(function(window){const __module_refs=[];(function(window){if((typeof(window.igk)!='undefined')&&(window.igk.__REFID__)){return;}let _options={debug:false};let _sc=0;if(document.scripts &&(_sc=document.scripts[document.scripts.length- 1])){var _location=_sc['src'];if(_location &&(new URL(_location)).pathname.endsWith('/igk.js')){_options.debug=true;}}const DEBUG=_options.debug;var m_scriptTag=null;var yes=!0;var no=false;var readyFunc=[];var m_readyGlobalFunc=[];var m_tag_obj=[];var m_ready_calling=false;var m_scriptNode=null;var __nsigk=null;var sm_regEventContext=new Array();var m_attribs={};const IGK_UNDEF="undefined";const IGK_FUNC="function";const IGK_CLASS="class";const IGK_OBJECT="object";var __eventObjectManager=null;const __libName="BalafonJS";const __version="4.0.20.0701";const __author="C.A.D. BONDJE DOUE";const __devscript="igk.js";var __lang=[];var __initDocSetting=0;var __scriptsEval={};var __platform={};var __igk_settings={nosymbol:0 };var m_LibScript="";var __debug_z=0;var m_provider=['webkit','ms','moz','o'];var _rgx={attribs:/([^\s]+)\s*=\s*(((")([^"]*)("))|((')([^']*)(')))/g,ff:/Firefox\/([0-9]+\.[0-9]+)/,ios:/IOS/};var __isdev;var _context_;__lang[0xEA001]="failed to transform xml with xsl . {0}";var __global=null;function __init_console(){__debug_z=$igk("#debug-z").first();if(__debug_z){var d=__igk_settings["console"];if(d){for(var i=0;i<d.length;i++){var dv=__debug_z.add('div');switch(d[i].t){case-1:dv.addClass('igk-danger');break;case 1:dv.addClass('igk-info');default:break;}dv.setHtml(d[i].m);}}}delete(__igk_settings["console"]);};if(typeof(window.console)==IGK_UNDEF){window.console={error:function(m){__debug_z=__debug_z ? __debug_z :$igk("#debug-z").first();if(__debug_z){__debug_z.add('div').addClass("igk-danger").setHtml(m);}else{var c=__igk_settings["console"]||[];c.push({t:-1,m:m});__igk_settings["console"]=c;}}};m_readyGlobalFunc.push(__init_console);}if(typeof(console.debug)==IGK_UNDEF){console.debug=function(m){__debug_z=__debug_z ? __debug_z :$igk("#debug-z").first();if(__debug_z){__debug_z.add('div').addClass("igk-info").setHtml(m);}else{var c=__igk_settings["console"]||[];c.push({t:1,m:m});__igk_settings["console"]=c;}};}(function(){let c=window.navigator.userAgentData;if(typeof(c)!=IGK_UNDEF){__platform.osType=c.platform;__platform.osAgent=c.brands.map(function(i){return i.brand+"/"+ i.version+" ";}).join();}else{__platform.osType="Unknow";__platform.osAgent=navigator.userAgent;}})();function __dom_innerHTML(i){if("innerHTML" in i)return i.innerHTML;if("nodeType" in i){var k=0;var s="";return s;}return "/!\\ NotSupported";}function igk_object(){};function igk_class(){};igk_class.prototype=new igk_object();function igk_namespace(){};function igk_winui_reg_event(item,method,func,useCapture){var g=method.split(' ');var s=0;var o=1;while(o &&(s=g.pop())){var eventHandler=igk.winui.getEventHandler(s);if(eventHandler !=null){o=o && eventHandler.reg_event(item,func,useCapture);}else o=o && igk_winui_reg_system_event(item,s,func,useCapture);}};igk_namespace.prototype=new igk_object();function igk_is_string(t){return typeof(t)=='string';};function igk_is_notdef(t){return typeof(t)==IGK_UNDEF;};function igk_is_object(t){return typeof(t)=='object';};function igk_reg_tag_obj(n,p){if(m_tag_obj[n]){m_tag_obj[n]=p;}else{m_tag_obj[n]=p;m_tag_obj.push({n:n,data:p});}};function igk_stop_event(ev){ev.preventDefault();ev.stopPropagation();};function igk_str_trim(m){if(m==null){throw new igk.exception('bad');}if(m.trim)return m.trim();while(m &&(m.length>0)&&(m[0]==' ')){m=m.substring(1);}while(m &&(m.length>0)&&(m[m.length- 1]==' ')){m=m.substring(0,m.length- 1);}return m;};function igk_url(u){return new(function(){this.uri=u;})();};function igk_is_coers(uri){var cu=window.URL||igk_url;var c=0;if(typeof(cu)=='function'){c=new cu(uri);}else{if(typeof(URL.createObjectURL)!='function')return-1;return 0;}if(igk.validator.isUri(uri)){if((window.location.protocol !=c.protocol)||(window.location.host !=c.host)){return 1;}return 0;}return 0;};function igk_io_getData(uri,callback,mimetype){if(!uri)return null;var _promise=new igk.system.Promise();if(igk_is_coers(uri)){igk.ajx.get(uri,null,function(xhr){if(this.isReady()){var _o={uri:uri,source:"xhr","from":'igk_io_getData',data:null};_o.data=xhr.responseText;callback(_o);}});return _promise;};if(/^file:\/\//.test(uri)){if(window.Fetch){Fetch(uri).then(function(){}).error(function(){});}return;}if(igk.navigator.isIE()){var _o={uri:uri,"from":'igk_io_getData',};igk.ajx.get(uri,null,function(xhr){if(this.isReady()){_o.data=xhr.responseText;callback(_o);}else{if((xhr.readyState==4)&&(xhr.status !=200)){_o.data=null;_o.errorCode=xhr.status;callback(_o);}}});return;};var ob=igk.createNode('object');var __loaded=!1;ob.o.style.visibility='hidden';ob.o.style.position='absolute';ob.o.width=4;ob.o.height=4;var _data_first=0;_data_first=igk.navigator.isChrome()||igk.navigator.isFirefox()||/Google Inc\./.test(navigator.vendor);if(igk.navigator.isIEEdge()){ob.o.type="text/xml";}else ob.o.type=mimetype||"text/xml";ob.addClass("bdr-1");ob.reg_event("load",function(evt){var _o={uri:uri,source:ob.o,"from":'igk_io_getData',data:null};if(callback){var o=ob.o;if(ob.o.data==""){var e=callback.error;if(e)e();else callback(_o);}else{var _data='';try{if(ob.o.contentDocument){var c=(ob.o.contentDocument.firstElementChild||ob.o.contentDocument.firstChild);_data=c.innerText||c.textContent;}else{throw new Error("no content document : "+ uri+" for "+ ob.o.type);}_o.data=_data;callback(_o);}catch(e){igk.log("Failed: loading ===> "+ uri);_o.error=1;_o.errormsg=igk.R.error_failedtoload;}}}_promise.resolve();setTimeout(function(){ob.remove();},100);}).reg_event("error",function(evt){ob.remove();var e=callback.error;if(__loaded||(igk.navigator.isFirefox()&& igk.navigator.getFirefoxVersion()>=50)){if(e)e();else if(callback){callback({source:ob,data:null,error:1});}_promise.reject();return;}if(e)e();else if(callback){callback({source:ob,data:null,error:1});}_promise.reject();});var _body=igk.dom.body();ob.o.data=uri;_body.prepend(ob);return _promise;};function igk_select_exp(p){var m_items=[];function loader(t){m_items.push(t);}var m=new RegExp("[ ]?[\.# ]{0,1}[^\.# ]+","ig");p.replace(m,loader);var q={pattern:p,getCount:function(){return m_items.length;},check:function(item,offset){for(var i=offset;i<m_items.length;i++){var p=m_items[i];switch(p[0]){case '.':if(!igk_item_match_class(p.substring(1),item)){return !1;}break;case '#':if(item.id !=p.substring(1)){return !1;}break;case " ":if(item.tagName.toLowerCase()!=p.substring(1)){return !1;}}}return !0;},select:function(selector,item){if(!item)return null;var pk=null;var v_it=null;var b=false;var depth=false;function __select(pk){if(!b){var sq=$igk(item).select(pk);if(sq.getCount()>0){selector.load(sq);}}else{var isel=null;if(depth){isel=selector.select(pk);}else{isel=selector.select('?'+ pk);}selector.clear();selector.load(isel);}b=true;}for(var j=0;j<m_items.length;j++){v_it=null;pk=m_items[j];switch(pk[0]){case '.':case '#':__select(pk);continue;case ' ':while((pk=pk.substring(1))&&(pk[0]==' ')){}if(pk){depth=!0;__select(pk);depth=false;}break;case '[':console.log('css read attribute not implement');break;case "$":console.debug("is dollar error. not implement");break;default:break;}}if(!b){var v_it=item.getElementsByTagName(p);if(v_it){for(var i=0;i<v_it.length;i++){var s=v_it[i];if(this.check(s,1)){selector.push(s);}}}}}};if(q.getCount()==0)return null;return q;}function igk_getScriptLocation(){var idx=0;var e=0;function _readUri(h,starti){var tg=h.substring(starti).split(':');var uri='';if(tg.length>2){uri=tg.slice(0,tg.length- 2).join(':');}idx=starti+ uri.length;return uri;};function _readChromeUri(h){var idx=h.indexOf('(');var ch=0;if(idx !=-1){idx=1;var depth=1;while((depth>0)&& idx<h.length){ch=h[idx];if(ch==')')depth--;else if(ch=='('){depth++;uri='';}else uri+=ch;idx++;}var tb=uri.trim().split(':');if(tb.length>2){uri=_readUri(uri,0);l=tb[tb.length- 2];c=tb[tb.length- 1];}}else{var tb=h.split(" ");h=tb[tb.length- 1];uri=_readUri(h,0);l=h.substring(idx+ 1,idx=h.indexOf(':',idx+ 1));c=h.substring(idx+ 1).trim();}var e={location:uri,line:l,column:c};return e;};var _nav=igk.navigator;var uri="";var c=0;var l=0;try{throw new Error('[BJS]:getscriptlocation');}catch(ex){if(ex.stack){var tdb=(ex.stack+'').split('\n');var idx=1;var stackinfo=[];if(/^Error:/.test(tdb[0]))idx++;if(_nav.isChrome())idx++;while((stackinfo.length==0)&&(idx<tdb.length)){if(/(at eval code|> eval:)/.test(tdb[idx])){idx++;continue;}tdb[idx].replace(/([@ ]{0,1})([^ \(\)]+):([0-9]+):([0-9]+)/,function(x,b,u,l,c){var p=0;var _eval=0;var _cidx=-1;if(u=='eval'){_eval=1;}if((_cidx=u.indexOf('@'))!=-1){u=u.substr(_cidx+ 1);}stackinfo.push({src:tdb[idx],text:x,'func':p,location:u,line:parseInt(l||'0'),column:parseInt(c||'0'),index:idx,'eval':_eval,stack:tdb});return tdb[idx];});idx++;}if(stackinfo.length==1){e=stackinfo[0];}}}return e;}function igk_item_match_class(p,n){if(!n)return !1;var q=new RegExp("(\\s|^)("+ p+")(\\s{1}|$)","i");if(q.exec(""+ n.className)){return !0;}return !1;};function igk_item_inherit_class(p,n){var q=n;while(q){if(igk_item_match_class(p,q)){return !0;}q=q.parentNode;}return !1;};function igk_freeEventContext(){igk_unreadyAll();if(sm_regEventContext.length>0){igk_clearEventContent(sm_regEventContext);if(sm_regEventContext.length !=0){console.debug("[igk.js] igk_freeEventContext [for some reson not cleared]");}}}function igk_show_notify_error(t,m){igk.winui.notify.showErrorInfo(t,m);};function igk_show_notify_msg(t,m,c){igk.winui.notify.showMsBox(t,m,c);};function igk_get_script_src(){if(typeof(script_src_lnk)!=IGK_UNDEF){return script_src_lnk;}var p=igk_getLastScript();if(p){return p.getAttribute("src");}return null;}function igk_unRegEventContext(chain){var r=sm_regEventContext.length;var s=[];for(var i=0;i<r;i++){if(sm_regEventContext[i]==chain){s.push(sm_regEventContext[i]);}}sm_regEventContext.pop(chain);return(r>sm_regEventContext.length);}function igk_get_html_item_definition_value(item){if(item==null)return "<div class=\"igk-notify igk-notify-danger\">item is null</div>";var msg="";var func="";var e=igk.createNode("div");msg+="<div><div class=\"igk-notify-title\" style=\"color:white;\">"+ item.toString()+"</div><div class=\"igk-title-4\">Properties</div><ul>";func+="<div class=\"igk-title-4\">Functions</div><ul>";var tab=[];for(var i in item){tab.push(i);}igk.system.array.sort(tab);for(var i=0;i<tab.length;i++){try{var n=tab[i];var txt="<div class=\"dispb igk-bigger\">"+ n+"=</div>";if(typeof(item[n])==IGK_FUNC){func+="<li class=\"igk-col-lg-12-2\" >"+ txt+"</li>";}else msg+="<li class=\"igk-col-lg-12-2\" >"+ txt+"<pre class=\"dispb\" style='background-color:white;'>"+ item[tab[i]]+"</pre>"+"</li>";}catch(ex){igk.winui.debug.addMsg("error i :"+ i+" : "+ ex);}}func+="</ul><div class=\"disptable clearb\"> </div></div>";msg+="</ul><div class=\"disptable clearb\"> </div></div>";e.setHtml(msg+ func);return e.o.outerHTML;}function igk_get_html_item_definition(item){if(item==null)return "<div class=\"igk-notify igk-notify-danger\">item is null</div>";var msg="";var func="";var e=igk.createNode("div");msg+="<div><div class=\"igk-notify-title\" style=\"color:white;\">"+ item+"</div><div class=\"igk-title-4\">Properties</div><ul>";func+="<div class=\"igk-title-4\">Functions</div><ul>";var tab=[];for(var i in item){tab.push(i);}igk.system.array.sort(tab);for(var i=0;i<tab.length;i++){try{var n=tab[i];if(typeof(item[n])==IGK_FUNC){func+="<li class=\"igk-col-lg-5-1\" >"+ n+"</li>";}else msg+="<li class=\"igk-col-lg-5-1\" >"+ n+"</li>";}catch(ex){igk.winui.debug.addMsg("error i :"+ i+" : "+ ex);}}func+="</ul><div class=\"disptable clearb\"> </div></div>";msg+="</ul><div class=\"disptable clearb\"> </div></div>";e.setHtml(msg+ func);return e.o.outerHTML;}function igk_getRegEventContextByOwner(o){if(o==null)return null;var k=sm_regEventContext;for(var i=0;i<k.length;i++){if(k[i].o==o)return k[i];}return null;}function igk_getRegEventContext(prop,reg,callback){var k=sm_regEventContext;for(var i=0;i<k.length;i++){if(k[i].properties==prop)return k[i];}if(reg){var c=callback();sm_regEventContext.push(c);return c;}return null;}function igk_clearEventContent(context){var ctab=new Array();var k=context;if((k==null)||(k.length==0))return;for(var i=0;i<k.length;i++){ctab.push(k[i]);}for(var j=0;j<ctab.length;j++){var r=ctab[j];if(r.unregEventContext){r.unregEventContext();}}}function igk_unreadyAll(){var tab=readyFunc;for(var i=0;i<tab.length;i++){igk.unready(tab[i]);}readyFunc=[];}function a(a){return IGK_UNDEF===typeof a;}function b(b){return a(b)||(null===b);}function igkJSError(msg){console.debug("igkJSError: "+ typeof(this));this.name="igkerror";this.message=msg;this.level=1;this.toString=function(){return this.message;};}function __igksetAttribute(ns,n,v){var d=ns.__igk__.attr;if(d)d[n]=v;};function igk_getCurrentScript(){if(m_scriptNode)return m_scriptNode;if(document.currentScript)return document.currentScript;var s=document.scripts;return s.length>0 ? s[s.length- 1]:null;}function igk_getAjxInitiator(){return __ajxInitiator;}function igk_namespaceBuilder(t,a,c,d,callback){var h=0;var i="";var ns="";var ps="";var win=t;var _iswin=(t==window);if(typeof(win)=='undefined'){throw 'win is not defined';}var _fileSrc=(d && d.fileSrc)||igk_getCurrentScript().src;if((_fileSrc=="")&&(_iswin)){_fileSrc="@"+ m_LibScript;}this.build=function(){function __igksysNameSpace(n,ps){var m_type=new function(){igk_appendProp(this,{getFullName:function(){return n;},toString:function(){return "class:igk:systemType";}});};var tn=new igk_namespace();var mps=ps;var _hierarchie={getParent:function(){if(mps)return igk_get_namespace(mps);return null;}};igk_defineProperty(tn,"namespace",{get:function(){return n;},set:function(){throw "not allowed";}});igk_defineProperty(tn,"type",{get:function(){return IGK_CLASS;}});igk_defineProperty(tn,"fullname",{get:function(){return n;}});igk_defineProperty(tn,"hierarchie",{get:function(){return _hierarchie;}});igk_appendProp(tn,{getParent:function(){return this.hierarchie.getParent();},getType:function(){return m_type;},toString:function(){return "namespace["+ this.namespace+"]";}});igk_defineProperty(tn,"__igk__",{get:function(){const p={"src":_fileSrc,"attr":d,"namespace":this.namespace,"hierarchie":_hierarchie};return p;}});return tn;};const sep='.';for(var f=0 <=a.indexOf(sep)? a.split(sep):[a],h=0;h<f.length;h++){i=f[h];ps=ns;if(h>0)ns+=sep;ns+=i;(!(i in win)||(typeof(win[i])=='undefine')||b(win[i]))&&(win[i]=__igksysNameSpace(ns,ps));win=win[i];}if(d){m_attribs[a]=d;}if(!b(c)){igk_appendProp(win,c);if(callback)callback(win);}return win;};}function createPNS(t,a,c,d,callback){if(!a||(typeof(a)!='string'))throw new igkJSError("[igk] - wrong argument: namespace "+ a);var g=new igk_namespaceBuilder(t,a,c,d,callback);return g.build();}function igk_get_namespace(n,prop){if(typeof(n)!='string')return null;var t=n.split('.');var def=prop||window;var win=def[t[0]];if(win){for(var i=1;win && i<t.length;i++){win=win[t[i]];}return win;}return null;}function igk_console_debug(msg){if(igk.DEBUG && console && console.debug){console.debug(msg);}}if(typeof(console)==IGK_UNDEF){createNS("window",{console:new(function(){igk_appendProp(this,{write:function(msg){alert(msg);},debug:function(m){}});})()});}if(typeof(getComputedStyle)==IGK_UNDEF){createNS("window",{getComputedStyle:function(item,selector){if(!item)return null;function __getstylev(i,p){if(i.style){var h=i.style[p];if(h)return h;else if(i.parentNode){return __getstylev(i.parentNode,p);}else if(i !=igk.dom.body().o){return __getstylev(igk.dom.body().o,p);}}return '';};function __initStyle(item){var d=igk.createNode('div');var m={};var t="";m.cssText='';for(var i in d.o.style){if(i !="cssText"){m[i]=__getstylev(item,i);t+=" "+ i+":"+ m[i]+";";}}m.cssText=t;return m;};return __initStyle(item,selector);}});}function igk_callfunction(name,params){igk_console_debug("call function");var func=null;if(!name)throw Error("wrong argument: namespace ");var h=0;var i="";var ns="";var a=name;var t=window;const sep='.';for(var win=t,f=(0 <=a.indexOf(sep))? a.split(sep):[a],h=0;h<f.length;h++){if(!f[h]){func=null;break;}i=f[h];if(h>0)ns+=sep;ns+=i;win=win[i];if(!win){func=null;break;}else func=win;}if(func){func.apply(window,params);}else{console.debug("function "+ name+" doen't exists");}}function igk_getEmValue(q,property){if(!q)return 1.0;var f=q.getComputedStyle("fontSize");var e=0.0;var p=null;var r=1.0;if(property !="fontSize"){e=q.getComputedStyle(property);r=Math.round(igk.getNumber(e)/ igk.getNumber(f));}else{p=q.getParentNode();if(p !=null){e=p.getComputedStyle(property);r=Math.round(igk.getNumber(f)/ igk.getNumber(e));}}return r;}function igk_getNumber(value,cibling,property){var ex=/(((-{0,1})[0-9]+(\.[0-9]+){0,1})(px|em|ch|%){0,1})$/;var t=ex.exec(value);if(t){if(t[5]){switch(t[5]){case "px":break;case "em":if(cibling && property){var r=parseFloat(t[2]);var e=igk_getEmValue(cibling,property);var h=igk_getNumber($igk(cibling).getComputedStyle(property));var o=(r / e)*h;return o;}break;case "%":break;case 'ch':break;}}return parseFloat(t[2]);}return 0;}function igk_getInt(value){var t=/((-{0,1})[0-9]+(\.[0-9]+){0,1})(px|em|%|ch)*$/.exec(value);if(t){if(arguments.length>1)arguments[1].unit=t[0];return parseInt(t[1]);}return 0;}function igk_getUnit(value){var t=/([0-9]+(\.[0-9]+){0,1})(px|em|pt|cm|mm|rem|%|ch|vh|vw)*$/.exec(value);if(t){if(typeof(t[3])==igk.constants.undef){return "px";}return t[3];}return "";}function igk_getPixel(value,cibling,property){switch(value){case "auto":if(cibling && cibling.parentNode){var v=igk_getPixel($igk(cibling.parentNode).getComputedStyle(property));return v;}break;default:var ex=/(((-{0,1})[0-9]+(\.[0-9]+){0,1})(px|em|%|ch){0,1})$/;var t=ex.exec(value);if(t){var d=parseFloat(t[2]);if(t[5]){switch(t[5]){case "em":var e=igk_getEmValue(cibling,property);var h=igk_getNumber($igk(cibling).getComputedStyle(property));var o=(d / e)*h;return o;break;case "%":if(cibling && cibling.parentNode){var v=igk_getPixel($igk(cibling.parentNode).getComputedStyle(property));d=v*(d / 100.0);return d;}else{console.debug("no cibling : and cibling no parent "+ property);}break;case "px":default:break;}}return parseFloat(t[2]);}break;}return 0;}function igk_getv(obj,keys,defaultvalue){if(obj){if(obj[keys])return obj[keys];}return defaultvalue;}function igk_newGUID(){var result='';var hexcodes="0123456789abcdef".split("");for(var index=0;index<32;index++){var value=Math.floor(Math.random()*16);switch(index){case 8:result+='-';break;case 12:value=4;result+='-';break;case 16:value=value & 3|8;result+='-';break;case 20:result+='-';break;}result+=hexcodes[value];}return result;};function createNS(a,c,d,callback){return createPNS(window,a,c,d,callback);};function igk_get_form_posturi(form){var msg="";var e=null;var p=[];for(var i=0;i<form.length;i++){e=form.elements[i];switch(e.type){case "radio":case "checkbox":if(e.checked){if(p[p.id]){var m=p[p.id];if(!m.push){t=[];t.push(m);}else m.push(e.value);}else p[e.id]=e.value;}break;case "file":break;default:p[e.id]=e.value;break;}}e=0;for(var i in p){if(e !=0)msg+="&";msg+=i+"="+ p[i];e=1;}return msg;};function igk_defineProperty(target,name,property){if(!target)return;try{var s=typeof(Object.defineProperty);if(s=='function'){var prop={};if(property.get)prop.get=property.get;if(property.set)prop.set=property.set;prop.configurable=igk_getv(property,"configurable",true);prop.enumerable=igk_getv(property,"enumerable",true);if(!property.set && !property.get)prop.writable=igk_getv(property,"writable",false);var k=Object.defineProperty(target,name,prop);return k;}else{if(property.nopropfunc){property.nopropfunc.apply(target);}else{var t={toString:function(){return "data";}};target[name]=t;}}}catch(ex){if(property.nopropfunc){property.nopropfunc.apply(target);}else{var t={toString:function(){return property.get();}};if(igk && igk.navigator && !igk.navigator.isSafari())target[name]=t;}}};function igk_defineGetValue(s){return function(){return s};}function igk_defineEnum(o,t){if(!o)o={};var _is=(o.isEnum && o.isEnum());if(_is){for(var i in t){igk_defineProperty(o,i,{get:igk_defineGetValue(t[i])});o.addEnum(i,t[i]);}}else{for(var i in t){igk_defineProperty(o,i,{get:igk_defineGetValue(t[i])});}}o.name=function(rawValue){let tvalue=o.getValues();for(let i in tvalue){if(tvalue[i]==rawValue){return i;}}return undefined;};o.addEnum=function(i,v){t[i]=v;};o.isEnum=function(){return 1;};o.isValuePresent=function(i){return i in t;};o.getValues=function(){return t;};o.getComboboxEnumValue=function(){var t=this.getValues();var g=[];for(var i in t){g.push({name:i,val:i});}g.sort(function(a,b){return a.name.localeCompare(b.name);});return g;};return o;}function igk_appendProp(t,e,override){override=typeof(override)==IGK_UNDEF ? !0 :override;if(t && e){for(var j in e){try{t[j]=e[j];}catch(exception){igk.console_debug(" exception : "+ j+" "+ exception);}}}return t;};function __igk(name){if(window.igk && window.igk.DEBUG){}if(name==window){throw("/!\\ Call to __igk function on [window] is not allowed. It will break the igk js framework namespace hierarchi."+"if you want to register event please use 'igk_winui_reg_event instead'");}var item=null;if(typeof(name)=="string"){var e=$igk(document).select(name);return e;}else if(typeof(name)=="igk.selector"){item=name;}else{item=name;}if(item==null)return null;if(item.o && item.o.igk)return item;if(window.igk){window.igk.initprop(item);}return item.igk;};function igk_show_prop(i,element){var msg="";var space="\n";var s="";if(element !=null)space="<br />";try{var ig={"outerHTML":1,"innerHTML":1};for(s in i){if(s in ig)continue;try{msg+=s+"="+ i[s]+ space;}catch(Exception){msg+=s+"; ex:["+ Exception+"]"+ space;}}if(element==null){console.log(msg);}else{$igk(element).o.innerHTML=msg;}}catch(ex){msg="can't evaluate object";igk.winui.notify.showError(msg);}}function igk_show_prop_keys(i,element){var msg="";var space="\n";var s="";if(element !=null)space="<br />";try{for(s in i){try{msg+=s+""+ space;}catch(Exception){msg+=s+"; ex:["+ Exception+"]"+ space;}}if(element==null)console.error(msg);else{$igk(element).o.innerHTML=msg;}}catch(ex){igk.show_notify_error("Exception","can't evaluate object");}}function igk_show_event(i,element){var msg="";var space="\n";if(element !=null)space="<br />";for(var s in i){if(/^on/.test(s)){try{msg+=s+"="+ i[s]+ space;}catch(Exception){}}}if(element==null){igk.winui.notify.showError(msg);}else{$igk(element).o.innerHTML=msg;}}function igk_get_prop(i){var msg="";for(var s in i){try{msg+=s+"="+ i[s]+"<br />\n";}catch(Exception){}}return msg;}function igk_preload_image(node,async){if((node==null)||(typeof(node.getElementsByTagName)==igk.constants.undef))return;function __preload(){var v_timg=node.getElementsByTagName("igk-img");if(!v_timg||(v_timg.length<=0)){return;}var v_tab=new Array();for(var s=0;s<v_timg.length;s++){v_tab[s]=v_timg[s];}var v_img=null;var v_div=null;var v_cimg=null;var v_preload={init:function(img,source){$igk(img).reg_event("load",function(evt){if(source.parentNode)source.parentNode.replaceChild(img,source);});},replace:function(img,source){if(source.parentNode)source.parentNode.replaceChild(img,source);},copyAttribute:function(source,dest){for(var x=0;x<source.attributes.length;x++){var j=source.attributes[x];if(j.name=="src")continue;try{dest.setAttribute(j.name,j.value);}catch(Exception){console.debug("error");}}}};var i=0,v_host=null;for(;i<v_tab.length;i++){let w=v_tab[i].getAttribute('width');let h=v_tab[i].getAttribute('height');if(w||h){}var src=v_tab[i].getAttribute("src");if(src){v_host=$igk(document.createElement("span"));v_host.addClass("igk-img-host");v_cimg=document.createElement("img");if(w||h){v_cimg.setAttribute('width',w);v_cimg.setAttribute('height',h);}v_cimg.source=v_tab[i];v_cimg.src=src;v_host.o.appendChild(v_cimg);if(/^data:/.test(src)){v_preload.copyAttribute(v_tab[i],v_cimg);v_preload.replace(v_host.o,v_tab[i]);v_host.addClass('loaded');}else{if(v_cimg.complete &&((v_cimg.width+ v_cimg.height)>0)){v_preload.copyAttribute(v_tab[i],v_cimg);v_preload.replace(v_cimg,v_tab[i]);}else{v_img=v_cimg;v_preload.init(v_img,v_tab[i]);v_preload.copyAttribute(v_tab[i],v_img);}}}}}__preload();}function igk_preload_anim_image(node){if((node==null)||(typeof(node.getElementsByTagName)==igk.constants.undef))return;var v_timg=node.getElementsByTagName("igk-anim-img");if(v_timg.length<=0)return;var v_tab=new Array();for(var s=0;s<v_timg.length;s++){v_tab[s]=v_timg[s];}var v_img=null;var v_div=null;var v_cimg=null;var v_preload={replace:function(img,source){try{if(source.parentNode){source.parentNode.replaceChild(img.o,source);}}catch(ex){igk.winui.notify.showError("Error : "+ ex+" "+ img);}},copyAttribute:function(source,dest){for(var x=0;x<source.attributes.length;x++){var j=source.attributes[x];if(j.name=="src")continue;try{}catch(Exception){console.debug("error");}}}};var i=0;for(;i<v_tab.length;i++){var src=v_tab[i].getAttribute("src");var v_width=v_tab[i].getAttribute("width");var v_height=v_tab[i].getAttribute("height");if(src){v_cimg=igk.createNode("span");v_cimg.source=v_tab[i];v_cimg.src=src;$igk(v_cimg).setCss({width:v_width,height:v_height,cursor:"pointer",backgroundImage:"url('"+ src+"')",overflow:"hidden",backgroundImageRepeat:"no-repeat",display:"inline-block",margin:"0px",padding:"0px"});v_preload.copyAttribute(v_tab[i],v_cimg);v_preload.replace(v_cimg,v_tab[i]);$igk(v_cimg).reg_event("mouseover",function(){$igk(this).addClass("btnover").setCss({backgroundPosition:-this.clientWidth+"px"});});$igk(v_cimg).reg_event("mouseleave",function(){$igk(this).rmClass("btnover").setCss({backgroundPosition:"0px 0px"});});$igk(v_cimg).reg_event("mousedown",function(){$igk(this).addClass("btndown").setCss({backgroundPosition:-(2*this.clientWidth)+"px 0px"});});}}}function igk_base64encode(str){return igk.utils.Base64.encode(str);}function igk_remove_all_script(x){var t=x.getElementsByTagName("script");var c=t.length;for(var i=0;i<c;i++){t[0].parentNode.removeChild(t[0]);}}function igk_array_copy(tab){var c=tab.length;var btab=new Array();for(var i=0;i<c;i++){btab[i]=tab[i];}return btab;}function igk_is_array(tab){return tab instanceof Array;}function igk_eval_all_script(item){if(item==null){return;}var s=$igk(item);var v_script="";var c=null;var tab=null;var i=0;if(s==null){return;}try{if(s.o.getElementsByTagName){tab=igk_array_copy(s.o.getElementsByTagName("script"));c=tab.length;if(c>0){for(i=0;i<c;i++){if(!tab[i]){console.log('not define '+ tab[i]+" i="+ i+" c="+ c+" tab.length="+ tab.length+" \n "+ tab[i- 1].innerHTML);continue;}var j=tab[i];v_script=j.innerHTML;igk_eval(v_script,j.parentNode,j);}}}}catch(ex){igk.show_notify_error("Exception","igk_eval_all_script:\nERROR: "+ ex+"<br />\n"+"The script have error : "+ v_script+"\ni="+ i+" \ntab.length="+ tab.length+"<div class='tracebox'> "+ ex.stack+"</div>");}}function igk_isdefine(i,d){if(typeof(i)==IGK_UNDEF){if(typeof(d)==IGK_UNDEF){return !1;}return d;}return i;}function igk_eval(s,sn,n){if(!s||(s.length==0)||n.tagName !=="SCRIPT"){return;}m_scriptNode=n;igk.evaluating=!0;(new Function(s)).apply(window,[m_scriptNode]);m_scriptNode=null;igk.evaluating=false;}function igk_append_script_to_head(item){var tab=item.getElementsByTagName("script");var c=tab.length;var head=null;if(!document.getElementsByTagName("head")[0]){head=igk.createNode("head");}else{head=document.getElementsByTagName("head")[0];}for(var i=0;i<c;i++){var scriptText=tab[i].text;var scriptFile=tab[i].src;var scriptTag=igk.createNode("script");if((scriptFile !=null)&&(scriptFile !="")){scriptTag.src=scriptFile;}scriptTag.text=scriptText;head.appendChild(scriptTag);}}function igk_confirm_lnk(lnk){var frm=igk_getParentByTagName(lnk,'form');if(frm){frm.confirm.value=1;frm.action=lnk.href;frm.submit();}}function igk_getLastScript(){var t=document.getElementsByTagName('script');if(t.length>0)return t[t.length- 1];return null;}function igk_getParentByTagName(e,tagname){if((e==null)||(typeof(tagname)!="string"))return null;if(e.parentNode==null)return null;if((e.parentNode.tagName !=null)&&(e.parentNode.tagName.toLowerCase()==tagname.toLowerCase()))return e.parentNode;return igk_getParentByTagName(e.parentNode,tagname);}function igk_getParentScriptByTagName(tagname){var p=m_scriptNode;var q=null;if(p !=null){q=p.parentNode;if(tagname){if(q.tagName.toLowerCase()!=tagname.toLowerCase())return igk_getParentByTagName(q,tagname);}return q;}if(tagname !=null)return igk_getParentByTagName(igk_getLastScript(),tagname);else{return igk_getLastScript().parentNode;}}function igk_getParentById(e,id){if((e==null)||(id==null))return null;var p=e.parentNode;if(!id.toLowerCase){igk.show_notify_error("Error","ERROR FOR: "+ e+" Request "+ id);return null;}var i=id.toLowerCase();if(p==null)return null;if((p.id !=null)&&(p.id.toLowerCase()==i))return p;return igk_getParentById(p,id);}function igk_getfirstchild(e,tag){var c=[];var t=e.childNodes;var p=null;for(var i=0;i<t.length;i++){p=t[i];if(p.tagName &&(p.tagName.toLowerCase()==tag.toLowerCase())){c[c.length]=p;}}return c;}function igk_getChildsByAttr(item,attribute){if((item==null)||(attribute==null)||(!item.childNodes))return null;var t=item.childNodes;var p=null;var b=null;var i=0;var isok=!0;var ret=new Array();var iret=null;for(var i=0;i<t.length;i++){p=t[i];isok=!0;for(var j in attribute){if(!p.getAttribute||(p.getAttribute(j)!=attribute[j])){isok=false;break;}}if(isok){ret[ret.length]=p;}iret=igk_getChildsByAttr(p,attribute);if(iret !=null){for(j=0;j<iret.length;j++){ret[ret.length]=iret[j];}}}return ret;}function igk_checkOnePropertyExists(item,proplist){if(item==null)return !1;var t=proplist.split(' ');for(var s in t){if(typeof(item[t[s]])!==IGK_UNDEF)return !0;}return !1;}function igk_checkAllPropertyExists(item,proplist){if(item==null)return !1;var t=proplist.split(' ');for(var s in t){if(typeof(item[t[s]])===IGK_UNDEF)return !1;}return !0;}function igk_getChildById(item,id){if((item==null)||(id==null))return null;var t=item.childNodes;var p=null;var b=null;var i=0;for(var i=0;i<t.length;i++){p=t[i];if(p.id &&(p.id.toLowerCase()==id.toLowerCase())){return p;}else{b=igk_getChildById(p,id);if(b !=null)return b;}}return null;}function igk_getvi(item,prop){if(item[prop]){return item[prop];}else if(item.igk && item.igk["get"+ prop]){return item.igk["get"+ prop];}return 0;}function is_observe(){return typeof(window.ResizeObserver)!='undefined';};function igk_init_powered(n){const ln=$igk(n);const bfirst=$igk('body').first();let scrollingTimeout=null;let scrolling=false;let t=bfirst.qselect('.igk-parentscroll[igk-type=controller]').first()||bfirst.qselect('.igk-powered-viewer').first()||bfirst.qselect('.igk-parentscroll').first();Object.defineProperty(ln,'parentScroll',{get(){return t;}});if(t){async function _updateBottomSize(offw){let bottom=t.getComputedStyle('padding-bottom');let height=ln.getComputedStyle('height');if(offw>0){t.setCss({paddingBottom:'calc('+ bottom+' + '+ height+')'});}};function _resizeInvoke(){let alignl=ln.supportClass('alignl');let offw=Math.round(t.width()- t.o.clientWidth);let def=null;if((offw==0)&& scrolling){offw=11;}if(!alignl){def={display:'inline-block',left:null,right:'calc('+ (offw)+'px)'};}else{$def={left:'0px',right:'auto'};}ln.setCss(def);}is_observe()&&(new ResizeObserver(_resizeInvoke)).observe(t.o);ln.setCss({position:'fixed',display:'inline-block'});let tacTimeout=null;async function acTimeout(){_resizeInvoke();};t.on('scroll',async function(){scrolling=true;clearTimeout(scrollingTimeout);clearTimeout(acTimeout);tacTimeout=setTimeout(acTimeout,20);scrollingTimeout=setTimeout(async function(){scrolling=false;_resizeInvoke();},2000);});_resizeInvoke();}};function igk_powered_manager(node,ciblingnode){if(!node)return;function init(node,poweredhost){var node=node;var s=poweredhost;var animinfo={duration:200,interval:10,animtype:"timeout",context:"init_powered_manager",effect:"circ",effectmode:"easeinout"};function update_size(){var animprop={right:"0px",bottom:"0px"};if($igk(s).fn.hasVScrollBar()){var _q=$igk(s).add("div").addClass("posab fitw fith").setHtml("width:info");var h=s.offsetWidth- _q.o.offsetWidth;_q.remove();animprop.right=(h+ 2)+"px";}if($igk(s).fn.hasHScrollBar()){var _q=$igk(s).add("div").addClass("posab fitw fith").setHtml("height:info");var h=s.offsetHeight- _q.o.offsetHeight;_q.remove();animprop.bottom=(h+ 2)+"px";}$igk(node).animate(animprop,animinfo);}var v_self=this;v_self.toString=function(){return "igk_powered_manager";};var m_eventContext=igk.winui.RegEventContext(this,$igk(this));if(m_eventContext){m_eventContext.reg_window("resize",function(){update_size();});};update_size();function __doc_changed(){update_size();};igk.publisher.register("sys://doc/changed",__doc_changed);};var s=ciblingnode ? ciblingnode :document.getElementById(ciblingnode);if(s){var q=new init(node,s);}else{console.debug("/!\\ parent cibling not found");}};function igk_getdir(uri){if(uri==null)return null;var d=uri.split('/');var o="";for(var s=0;s<d.length- 1;s++){if(s !=0)o+="/";o+=d[s];}return o;};function igk_initobj(n,d){if(!n)return d;for(var i in d){if(i in n){continue;}n[i]=d[i];}return n;};m_scriptTag=igk_getLastScript();let fc_false=function(){return !1};const igk=createNS("igk",{},{desc:"global igk js namespace"});const _ENVIRONMENT=createNS("igk.ENVIRONMENT",{},{desc:"Environment information"});createNS("igk.ctrl",{},{desc:"manage controller"});createNS("igk.system",{},{desc:"global system igk js namespace"});createNS("igk.type",{},{desc:"global igk js namespace"});createNS("igk.JSON",(function(){var source=null;return{getSource(){return source;},setSource:function(src){source=src;},parse:function(js,target){var q=null;source=target;try{if((js !=null)&&(typeof(js)=="string"))q=(new Function('source','return '+ js+'')).apply(0,[source]);}catch(ex){q=js;}this.target=null;source=null;return q;},convertToString:function(jsonobj){if(typeof(JSON)!='undefined' && JSON.stringify){return JSON.stringify(jsonobj);}var r="{";var k=0;var prop=[];for(var i in jsonobj){if((typeof(jsonobj[i])==IGK_FUNC)||(typeof(jsonobj[i])==IGK_UNDEF)){continue;}if(k>0)r+=",";if(typeof(jsonobj[i])=="object"){prop.push(jsonobj[i]);r+="\""+ i+"\": ";}else r+="\""+ i+"\":"+ jsonobj[i];k++;}r+="}";return r;}};})(),{desc:"global namespace . JSON helper"});createNS("igk.navigator",{isIE:function(){return false},getLang:function(){return 'fr';},isChrome:fc_false,isSafari:fc_false,isIEEdge:fc_false,isFirefox:fc_false,},{desc:"global navigator properties"});createNS("igk.reflection",{},{desc:"global igk js namespace"});createNS("igk.exception",{},{desc:"global igk exception class"});createNS("igk.os",{},{desc:"balafon os utility function"});createNS("igk.android",{},{desc:"balafon android utility namespace"});createNS("igk.winui",{},{desc:"winui global igk js namespace. manage interface"});createNS("igk.winui.fn",{},{desc:"utility functions"});createNS("igk.winui.notify",{},{desc:"winui.notify global igk js namespace"});createNS("igk.html",{getDefinition:igk_get_html_item_definition,getDefinitionValue:igk_get_html_item_definition_value,},{desc:"igk.html namespace. to manage dom element"});createNS("igk.html5",{},{desc:"igk.html5 namespace"});igk.log=function(msg,tag,t){if(!igk.DEBUG){return;}var fc=null;switch(t){case "i":fc=console.log;break;case "e":fc=console.error;break;case "w":fc=console.warning;break;default:fc=console.debug;break;};tag=tag||'BJS';if(fc){if(typeof(msg)=="string")fc("["+ tag+"] - "+ msg);else{fc("["+ tag+"]");fc(msg);}}};igk.isObject=function(i){return i && typeof(i)=='object';};createNS("igk.log",{debug:function(m){if(igk.DEBUG){igk.log(m);}},error:function(m){if(igk.DEBUG){console.error(m);}},write:function(m){console.log(m);$igk(igk.winui.events.global()).raiseEvent('igk_log',m);}},{desc:'manage log'});createNS("igk.attribute",{setAttribute:__igksetAttribute});createNS('igk.system.log',{createLog(tag){const log={tagname:tag,};['error','log','warn','info'].forEach(element=>{log[element]=function(){const c=arguments;if(typeof(c[0])=='string'){c[0]='['+ log.tagname+'] - '+ c[0];}else{if(Array.isArray(c))c.unshift('['+ log.tagname+'] - ');}console[element].apply(null,c);}});return log;}});createNS("igk.system.io",{getdir:igk_getdir,getlocationdir:function(inf){if(inf){let location=inf;if(typeof(inf)=='object'){({location}=inf);}return igk_getdir(location);}return null;},getData:igk_io_getData,getExtension:function(n){return n.split('.').pop();},getLocation:function(){return document.location.href;},baseUri:function(){var uri=""+ window.location;var t="";uri.replace(/^([^#;\?]+)/g,function(m,c,s){t=m;});while((t.length>0)&&(t[t.length- 1]=="/")){t=t.substr(0,t.length- 1);}return t;},baseUriDomain:function(){var port="";var loc=window.location;var is_secure=(/^https/.test(loc.protocol));if(((!is_secure)&&(loc.port !='')&&(loc.port !=80))||(is_secure &&(loc.port !='')&&(loc.port !=443))){port+=':'+ loc.port;}return loc.protocol+"//"+ loc.hostname+ port;},rootUri:function(){var t=document.head.getElementsByTagName("base");if(t.length==0){var s=igk.getDocumentSetting();var h=0;if(s)h=s.baseuri;return(h||(igk.system.io.baseUriDomain()))+"/";}else{return document.baseURI||t[0].href;}},URL:function(uri){var _NS=igk.system.io;var src=uri;var relative=0;var _opts={relative:0,isLocal:0,uri:uri,request:''};if(/^(\.(\.)?\/|\/[^\/]+)/.test(uri)){_opts.relative=1;_opts.isLocal=1;_opts.protocol=window.location.protocol;var tab=uri.split('/');var i=0;var luri='';var ruri=_NS.rootUri();for(var j=0;j<tab.length;j++){switch(tab[j]){case '..':if(i){luri=luri.substring(0,luri.lastIndexOf('/'));}else{ruri=ruri.substring(0,ruri.lastIndexOf('/'));}break;case '.':break;default:if(luri.length>0)luri+="/";luri+=tab[j];i=1;break;}}_opts.uri=ruri+'/'+ luri;_opts.request='/'+ luri;}else{if(uri.startsWith(_NS.rootUri())){_opts.isLocal=1;_opts.uri=uri;_opts.protocol=window.location.protocol;_opts.request="/"+ uri.substring(_NS.baseUriDomain().length+ 1);}else if(/^(((http(s)?|ftp|sw):)?\/\/)/.test(uri)){_opts.uri=uri;_opts.request="";}}igk.appendProperties(this,{toString:function(){return _opts.uri;}});igk.defineProperty(this,"relative",{get:function(){return _opts.relative;}});igk.defineProperty(this,"isLocal",{get:function(){return _opts.isLocal;}});igk.defineProperty(this,"uri",{get:function(){return _opts.uri;}});igk.defineProperty(this,"request",{get:function(){return _opts.request;}});},loadLangRes:function(uri,lang,callback,error){var e=null;var _getRes=0;var _chtml=igk.dom.html();var _lang=lang||(_chtml ? _chtml.getAttribute("lang"):null)||igk.navigator.getLang();var _loc=igk.system.io.getdir(uri);var _uri=igk.resources.getLangLocation(_loc,_lang);var _promise={then:function(callback){this.__then=callback;}};try{if(igk.navigator.isSafari())throw('safari not handle async - await');(new Function(["_getRes = async function (){","var o=0; ","try{","o  = await igk.ajx.asyncget(_uri,null, 'text/json');","o  = typeof(o)=='string' && o.length>0 ? JSON.parse(o) : null;","return  o;","}catch(ex){"," console.error(ex);","}","return null;","};"].join(" "))).apply();}catch(ex){_getRes=function(){if(!document.body){igk.ajx.get(_uri,null,function(xhr){if(this.isReady()){if(e.__then__){e.__then__(JSON.parse(xhr.responseText));}}});}else{igk.system.io.getData(_uri,function(o){if(e.__then__ && o.data && o.data.length>0)e.__then__(JSON.parse(o.data));else if(e.__catch__)e.__catch__("/!\\ loadLangRes : "+ _uri+"  "+ o.data);},"application/json");}var e={"then":function(t){this.__then__=t;return this;},"catch":function(t){this.__catch__=t;return this;}};return e;}}if(typeof(_getRes)=='function'){_getRes().then(function(o){callback(o);if(_promise.__then){_promise.__then();}}).catch(function(e){console.debug(e);console.error("[BJS] - there is an error : "+ e+"\nUri:"+ _uri);});}}});createNS("igk.resources",{getLangLocation(_loc,t){if(!_loc){return null;}if(!t){t=igk.dom.html().getAttribute("lang")||igk.navigator.getLang();}return _loc+'/Lang/res.'+ t+'.json';},});if(typeof(igk.resources.lang)=='undefined'){igk.resources.lang=function(n){if(n in igk.resources.lang){return igk.resources.lang[n];}return n;};igk_appendProp(igk.resources.lang,{"Hello":"Bonjour","Welcome":"Bienvenue","BalafonJS":"BalafonJS",});}createNS("igk.system.Db",{getIndexedDb:function(){return window.indexDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB;}});igk_defineProperty(_ENVIRONMENT,"DEV",{get:function(){return DEBUG;}});(function(){igk.system.Promise=function(){var _t=[];var _e=[];this._t=_t;this._e=_e;};igk_appendProp(igk.system.Promise.prototype,{resolve:function(args){for(var j=0;j<this._t.length;j++){this._t[j].apply(this,args);}},reject:function(args){for(var j=0;j<this._e.length;j++){this._e[j].apply(this,args);}},then:function(callback){this._t.push(callback);return this;},error:function(callback){this._e.push(callback);return this;}});})();igk.system.promiseCall=function(){var _p={};return{then:function(func){igk.appendChain(_p,'then',func);return this;},error:function(func){igk.appendChain(_p,'error',func);return this;},resolve:function(){if('then' in _p){_p.then();}},failed:function(){if('error' in _p){_p.error();}}};};let _NS=createNS("igk",{getQueryOptions:function(s){var e={};s.replace(/(;)?([^;]+)=([^;]+)/ig,function(m,t,n,v){e[n]=v.trim();});return e;},getDocumentSetting:function(){return __initDocSetting;},isInteger:function(n){var f=Number.isInteger||_is_integer;return f(n);},invokeAsync:function(callback,args){return setTimeout(function(){callback.call(null,args);},1);},isFunc:function(n){return n=='function';},configure:function(o){for(var i in o){if(typeof(o[i])=='function')continue;__igk_settings[i]=o[i];}},regex:function(){return _rgx;},getSettings:function(){return __igk_settings;},object:igk_object,is_notdef:igk_is_notdef,is_string:igk_is_string,is_object:igk_is_object,reg_tag_component:igk_reg_tag_obj,regEventContextByOwner:igk_getRegEventContextByOwner,die:function(msg,code){throw code+" : "+ msg;},geti:function(t){if(t)return 1;return 0;},stop_event:igk_stop_event,bool_parse:function(t){if(igk_is_string(t)){var s=t.toLowerCase();if((s.length==0)||(s=="false")||(s=="0"))return !1;return !0;}if(t)return !0;return !1;}},{desc:"global igk.object base class namespace"});igk_defineProperty(_NS,'context',{get(){return _context_;},set(v){_context_=v;}});_NS=createNS("igk.namespaces",{xhtml:"http://www.w3.org/1999/xhtml",xml:"http://www.w3.org/1999/xhtml",xsl:"http://wwww.w3.org/1999/XSL/Transform",svg:"http://www.w3.org/2000/svg"});igk_defineProperty(_NS,"igk",{get:function(){return "https://schemas.igkdev.com/balafonjs"}});createNS("igk.convert",{toHtmlColor:function(i){var c=igk.system.colorFromString(i);if(c)return c.toHtml();return 0;}});var __jsload={};var __jstoload={};createNS("igk.js",{load:function(s){if(s in __jsload)return;var p=document.createElement("script");var e=0;p.type="text/javascript";p.language="javascript";p.async=true;p.onerror=function(){console.error("failed to load "+ s);$igk(p).remove();delete(__jsload[s]);e=1;};p.onload=function(e){console.debug("laod complete "+ p.readyState);};igk.ajx.get(s,null,function(xhr){if(this.isReady()){p.innerHTML=xhr.responseText;}},true);document.head.appendChild(p);__jsload[s]=1;},require:function(scs,sync,host){var syncdata=0;host=host||document.head;function __loadscript(i){if((i<0)||(i>=scs.length)){return;}var u=scs[i];if(__jsload[u]||!__jstoload[u]){i++;syncdata.skipped++;if(def.c>=0){__loadscript(i);}return;}__jsload[u]=1;__jstoload[u]=0;var sc=document.createElement("script");sc.src=u;def.e[u]=i;sc.onload=(function(i,u){return function(){syncdata.loaded++;syncdata.files=igk.isDefine(syncdata.files,[]);syncdata.files.push(u);delete(def.e[u]);i++;if(i>scs.length- 1){__invoke();}else{__loadscript(i);}$igk(sc).remove();};})(i,u);sc.onerror=function(){console.error("/!\\ failed:"+ u);};document.head.appendChild(sc);};var prop={};var def={c:0,e:{}};var u=0;sync=sync||0;function _fail(message){if(prop.failed)prop.failed.apply(o,[message]);};var _scripts=[];var o={promise:function(callback,h){prop.callback=callback;prop.host=h;if(def.c<=0){__invoke();}return this;},fail:function(callback){prop.failed=callback;return this;},load:function(callback){prop.load=callback;return this;}};function _loadinScript(u,type,index){return function(xhr){if(this.isReady()){__jsload[u]=xhr.responseText;try{var s=document.createElement("script");s.type=type||"text/javascript";s.innerHTML=__jsload[u];_scripts.push(s);if(prop.load){prop.load(s);}delete(def.e[u]);def.c--;}catch(ex){console.error("error loading : "+ ex);}if(def.c==0){__invoke();}}};};function __invoke(){for(var g=0;g<_scripts.length;g++){host.appendChild(_scripts[g]);}_scripts=[];var m=0;if(prop.host)m=$igk(prop.host).o;if(prop.callback)prop.callback.apply(o,[m,syncdata]);};function _loadFormalScript(u,i){var sc=document.createElement("script");sc.src=u;def.e[u]=i;def.c++;sc.onload=(function(i,u){return function(){if(prop.load){prop.load(sc);}delete(def.e[u]);def.c--;if(def.c==0){__invoke();}};})(i,u);sc.onerror=function(){console.error("/!\\ failed: "+ u);_fail();};host.appendChild(sc);};if(sync){def.c=scs.length;syncdata={loaded:0,skipped:0,status:typeof(null)};for(var i=0;i<scs.length;i++){if(!__jstoload[scs[i]])__jstoload[scs[i]]=1;}__loadscript(0);}else{var _type=null;for(var i=0;i<scs.length;i++){u=scs[i];_type=null;if(typeof(u)=='object'){_type=u.type;u=u.uri;}if(__jsload[u]){def.c--;continue;}if(u in scs){igk.ajx.get(u,null,_loadingScript(u,_type,i));continue;};__jsload[u]=1;_loadFormalScript(u,i);}}return o;},getLoadedScript:function(){return __jsload;},loadInlineScript:function(){var d=igk.getParentScript();var sc=$igk(igk.getCurrentScript());if(!d)return;var l=[];$igk(d).select('script').each_all(function(){var s=this.o.src;var r=this.getAttribute("reloaded");if(s &&(!(s in __jsload)||r)){if(r){l.push(s);l[s]=null;delete(__jsload[s]);delete(__jstoload[s]);}else{l.push(s);}}this.remove();});if(l.length>0)igk.js.require(l,true,d).promise(function(){sc.remove();});}});igk.scripts={};igk.scripts["@injectlocation"]="((typeof(getLocalScriptUri) !='undefined')?"+"getLocalScriptUri():"+"igk.system.io.getlocationdir(igk.getScriptLocation()))";(function(){createNS("igk.evts",{stop:igk.stop_event});igk.evts.dom=["sys://dom/pageloaded","sys://dom/bodyreplaced","sys://ddom/nodetextchanged"];})();createNS("igk.reflection",{getFunctions:function(item){if(!item)return null;var r=[];for(var i in item){if(typeof(item[i])==IGK_FUNC){r.push(i);}}return r;},getProperties:function(e){var t=[];if(typeof(e)!=IGK_UNDEF){if(typeof(e)=='string'){for(var i in e){if(!igk.isInteger(i)&&(typeof(e[i])!="function")){t.push(i);}}}else{for(var i in e){if(typeof(e[i])!="function"){t.push(i);}}}}return t;}});createNS("igk.html5",{animate:igk_animate,cancelAnimate:igk_animate_cancel});__nsigk=igk;window.$igk=function(n){var m=__igk(n);if(m==null){console.error('found - ['+ n+']');}return m;};window.$ns_igk=__nsigk;window.ns_igk=__nsigk;window.igk.wln=console.debug;igk_appendProp(window.$igk,{create(s){return igk.dom.loadDocument(s);},createNode(d){return igk.createNode(d);},isFunction(n){return typeof(n)=='function';},isObject(n){return typeof(n)=='object';},isString(n){return typeof(n)=='string';},extendNodeProperties(p){igk_appendProp(__igk_nodeProperty.prototype,p);}});if(typeof(matchMedia)=='undefined'){window.matchMedia=function(){return 0;};}igk_appendProp(igk.object.prototype,{toString:function(){return "igk.object";},getType:function(){return igk.object;}});function igk_regex_constant(){return{tagName:/^[\w_]+[\w0-9_\-]*$/,className:/^\.[\w_]+[\w0-9_\-]*$/,idSearch:/^#[\w\-_]+(\[[\w\-_]*\])?$/}}function isUndef(d){return(d=="unknown")||(d==IGK_UNDEF)||(typeof(d)==IGK_UNDEF);}function isNumber(d){return !isUndef(d)&& typeof(d)=='number';}const _FM_="BalafonJS";function __igk_nodeProperty(element){var m_o=element;var m_self=this;var m_anim;var m_timeOutList=[];var m_unregfuncs=[];var m_config={};var m_data={};igk_defineProperty(this,"o",{get:function(){return m_o;},nopropfunc:function(){this.o=m_o;}});igk_defineProperty(this,"t",{get:function(){return $igk(m_o.parentNode);},nopropfunc:function(){this.t=$igk(m_o.parentNode);}});igk_defineProperty(this,"timeOutList",{get:function(){return m_timeOutList;}});createPNS(this,"fn",{o:element,igk:m_self,vscrollWidth:function(){return this.o.offsetWidth- this.o.clientWidth;},hscrollHeight:function(){return this.o.offsetHeight- this.o.clientHeight;},hasVScrollBar:function(){var h=this.igk.getHeight();if(this.o.scrollHeight>this.o.clientHeight){return true;}return(this.o.clientHeight>0)&&(this.o.offsetHeight>h);},hasHScrollBar:function(){var w=this.igk.getWidth();if(this.o.scrollWidth>this.o.clientWidth){return true;}return(this.o.clientWidth>0)&&(this.o.offsetWidth>w);}});createPNS(this,"data",{contains:function(k){if(typeof(m_data[k])!=IGK_UNDEF)return !0;return !1;},add:function(k,v){m_data[k]=v;},remove:function(k){delete(m_data[k]);},getData:function(){return m_data;}});this.getUnregfunc=function(){return m_unregfuncs;};this.getConf=function(){return m_config;};if(!this.isSr()){var m_bE="igk-eventcreated";igk_appendProp(this,{raiseEventCreated:function(n){var e=this.o[m_bE];if(e){e.name=n;this.raiseEvent(m_bE);}else{console.error("no event to raise : "+ n);}},postRegisterEvent:function(n,func){if(!n||!func)return;if(n=="igk-eventcreated"){this.reg_event(n,func);}else{if(typeof(this.o[n])==IGK_UNDEF){var _b=this;this.reg_event(m_bE,function _postevent(evt){if(evt.name==n){_b.unreg_event(m_bE,_postevent);_b.reg_event(n,func);}});}else{this.reg_event(n,func);}}}});this.addEvent("igk-eventcreated",{name:null});var tag=element.tagName;if(tag){var b=igk.system.createExtensionProperty(tag,"igk.dom.extension",this);}}};function __extensionPrototype(tag){this.ctag=tag;igk_defineProperty(this,"tagName",{get:function(){return this.ctag}});igk_defineProperty(this,"IsExtension",{get:function(){return true;}});this.__proto__=__igk_nodeProperty.prototype;};var __prop=__igk_nodeProperty.prototype;function _get_computeded_number(n,p){var h=n.getComputedStyle(p);return igk.getNumber(h,n.o,p);};igk_appendProp(__prop,{setConfig:function(k,v){this.getConf()[k]=v;},getConfig:function(k){var m_config=this.getConf();return k in m_config ? m_config[k]:null;},getConfigKeys:function(){var t=[];var m_config=this.getConf();for(var i in m_config){t.push(i);}return t;},toString:function(){return "igk_node_properties["+ this.o+"]";},get:function(s,d){if(typeof(d)=='undefined'){d=0;}var _t=s.split('/');var _q=this;for(var i=0;i<_t.length- 1;i++){if(_q[_t[i]])_q=_q[_t[i]];else{_q[_t[i]]={};_q=_q[_t[i]];}}return _q[_t[i]]? _q[_t[i]]:d;},unregister:function(){var m_unregfuncs=this.getUnregfunc();igk.winui.unreg_system_event_object(this);for(var i=0;i<m_unregfuncs.length;i++){m_unregfuncs[i].apply(this);}},getParentCtrl:function(func){return $igk(igk.ctrl.getParentController(this.o));},registerUnregCallback:function(func){if(func){m_unregfuncs.push(func);}},add:function(t,properties){if(typeof(t)=="string"){var c=$igk(this.appendNChild(t));c.setProperties(properties);return c;}return this.appendChild(t);},addText:function(s){var i=document.createTextNode(s);return this.add(i);},addComment:function(txt){var i=document.createComment(txt);return this.add(i);},addXml:function(tag){var _export=$igk(document.createElementNS(igk.namespace.XML,tag));this.add(_export);return _export;},addNode:function(tag){var _export=document.createElementNS(this.o.namespaceURI,tag);this.o.appendChild(_export);return _export;},isOnDocument:function(){var q=0;if(this.isSr())return 0;q=this;let b=igk.dom.body().o;while((q=q.o.parentNode)&&(q !=b)){q=$igk(q);}return q==b;},prepend:function(n){var i=null;if(typeof(n)=="string")i=igk.createNode(n);else i=$igk(n);if(i==null)return null;if(this.o.firstChild==null){this.o.appendChild(i.o);}else{this.o.insertBefore(i.o,this.o.firstChild);}return i;},replace:function(i,by){if(!this.isSr()){this.o.replaceChild($igk(by).o,$igk(i).o);}else{this.o.each(this.replace,arguments);}return this;},fullscreen:function(){if(!this.isSr()){var fc=igk.fn.getItemFunc(this.o,"requestFullScreen");if(fc){igk.publisher.publish("sys://dom/beforefullsizeRequest");fc.apply(this.o);}}return this;},addSpace:function(){if(this.isSr()){this.each(this.addSpace,arguments);}else this.o.appendChild(igk.createHtml("&nbsp;").o);return this;},setOpacity:function(v){if(this.isSr()){this.o.each(this.setOpacity,arguments);return this;}else{this.o.style.opacity=v;if(this.o.style.filter){this.o.style["filter"]="alpha(opacity="+ (v*100)+")";}this.o.style["-moz-opacity"]=v;this.o.style["-khtml-opacity"]=v;}return this;},setBoxShadow:function(offsetX,offsetY,blur,color){this.o.style["boxShadow"]=offsetX+" "+ offsetY+" "+ blur+" "+ color;},setTextShadow:function(offsetX,offsetY,blur,color){this.o.style["textShadow"]=offsetX+" "+ offsetY+" "+ blur+" "+ color;},focus:function(){if(this.o.focus)this.o.focus();},click:function(){if(this.o.click){this.o.click();}else{var e=document.createEvent('HTMLEvents');e.initEvent("click",true,true);this.o.dispatchEvent(e);}return this;},clone:function(){var cl=igk.createNode(this.o.tagName.toLowerCase(),this.o.namespaceURI);cl.copyAttributes(this);if(this.o.childNodes.length>0){for(var i=0;i<this.o.childNodes.length;i++){if(this.o.childNodes[i].tagName)cl.add($igk(this.o.childNodes[i]).clone());else{cl.o.appendChild(document.createTextNode($igk(this.o.childNodes[i]).text()));}}}return cl;},copyAttributes:function(i){i=$igk(i);if((i==null)||!i.o.hasAttributes||!i.o.attributes)return;var j="";for(var k=0;k<i.o.attributes.length;k++){j=i.o.attributes[k];try{this.o.setAttribute(j.name,j.value);}catch(Exception){console.debug("error when try to copy "+ j.name);}}return this;},each:function(func,args){if(this.o.each)this.o.each(func,args);return this;},each_all:function(func,args){if(this.o.each_all)this.o.each_all(func,args);return this;},getItemAt:function(index){if(this.o.getItemAt){return this.o.getItemAt(index);}return null;},index:function(){var k=0;e=this.o;while(('previousCibling' in e)&&((e=e.previousCibling)!=null)){k++;}return k;},first:function(){if(this.o.getItemAt){return this.o.getItemAt(0);}return null;},last:function(){if(this.o.getItemAt){return this.o.getItemAt(this.o.getCount()- 1);}return null;},found:function(){if(this.o.getItemAt){return this.o.getCount()>0;}return !1;},getNodeAt:function(index){if(this.o.getNodeAt){return this.o.getNodeAt(index);}return this.o.ChildNodes[index];},getCount:function(){if(this.o.getCount)return this.o.getCount();return 0;},isSr:function(){if(this.o.each)return !0;return !1;},getChildCount:function(){if(this.o.childNodes){return this.o.childNodes.length;}return 0;},timeOut:function(time,func){var q=this;var s=this.timeOutList.length;var i=setTimeout(function(){func.apply(q);q.timeOutList.pop(s);},time);q.timeOutList.push(i);return this;},clearTimeOut:function(){while(this.timeOutList.length>0){clearTimeout(this.timeOutList[0]);this.timeOutList.pop(0);}return this;},on:function(method,func,useCapture){if(this.o.each){this.o.each(this.on,arguments);return this;}else{igk_winui_reg_event(this.o,method,func,useCapture);return this;}},waitInterval:function(duration,func){if(this.isSr()){this.o.waitInterval(duration,func);}else{var q=this;setTimeout(function(){func.apply(q)},duration);}return this;},css:function(value){if(this.o.each){this.o.each(this.css,arguments);return this;}else{if($igk.isString(value))this.o.style=value;else{this.setCss(value);}return !0;}},getCssSelector:function(){var o=0;var cl=0;o=this.o.tagName.toLowerCase();if(this.o.id)o+="#"+ this.o.id;cl=this.o.className;if(cl){var t=cl.split(" ");for(var k=0;k<t.length;k++){o+='.'+ t[k];}}return o;},getCssValue:function(){var o="";var v,d;var prop=igk.css.getProperties();var q=this;var check=typeof(window.getDefaultComputedStyle)=='function' ? function(n,d){return window.getDefaultComputedStyle(q.o).getPropertyValue(n)!=d;}:function(n,d){var domStyle=igk.css.getDomStyle();return(d !=domStyle[n]);};for(var i in prop){v=i;if((d=this.getComputedStyle(i))&& check(i,d)){o+=v+":"+ d+"; ";}}return o;},disablecontextmenu:function(){if(this.isSr()){this.o.each(this.editable,arguments);return this;}else{this.on("contextmenu",igk.winui.events.cancelBehaviour);}return this;},selectable:function(v){if(this.isSr()){this.o.each(this.selectable,arguments);return this;}else{if(!v){igk.ctrl.selectionmanagement.disable_selection(this);}else{igk.ctrl.selectionmanagement.enableSelection(this);}}return this;},editable:function(v){if(this.isSr()){this.o.each(this.editable,arguments);return this;}else{this.o.contentEditable=v;}return this;},autocorrect:function(v){if(this.isSr()){this.o.each(this.autocorrect,arguments);return this;}else{this.o.setAttribute("spellcheck",v);}return this;},setCss:function(properties){if(this.isSr()){this.o.each(this.setCss,arguments);return this;}else{igk.css.setProperties(this.o,properties);}return this;},height:function(){return _get_computeded_number(this,'height');},width:function(){return _get_computeded_number(this,'width');},hasHCroll(){return(this.o.scrollTopMax||(this.o.scrollHeight- this.o.offsetHeight))>0;},getScrollParent(){function getoffsetParent(p){while(p){if((p.scrollHeight>p.clientHeight)||(p.scrollWidth>p.clientWidth)){return p;}p=p.offsetParent;}return null;}let c=getoffsetParent(this.o.offsetParent);if(c)return $igk(c);return null;},setCssAssert:function(c,p){if(c){this.setCss(p);}return this;},setProperties:function(properties){if(!properties)return this;if(this.isSr()){this.o.each(this.setProperties,arguments);}else{for(var i in properties){try{this.o[i]=properties[i];}catch(Ex){console.debug("can't  set property "+ i);}}}return this;},hide:function(){this.setCss({"display":"none"});},show:function(){this.setCss({"display":"inline-block"});},fadein:function(interval,duration,opacityOrProperties,callback){window.igk.animation.fadein(this.o,interval,duration,opacityOrProperties,callback);return this;},fadeout:function(interval,duration,opacityOrProperties,callback){window.igk.animation.fadeout(this.o,interval,duration,opacityOrProperties,callback);return this;},getoffsetParent:function(){if(this.isSr()){return this;}return $igk(igk.winui.GetRealOffsetParent(this.o));},getscrollParent:function(){if(this.isSr()){return this;}return $igk(igk.winui.GetRealScrollParent(this.o));},appendProperties:function(properties,override){if(!properties)return this;if(this.isSr()){this.each(this.appendProperties,arguments);return this;}else{igk.appendProperties(this,properties,override);}return this;},dispatchEvent:function(evt){if(this.o.dispatchEvent){this.o.dispatchEvent(evt);}else{if(document.dispatchEvent){document.dispatchEvent(evt);}}},raiseEvent:function(n,p,callback){if(!this.isSr()){var e=this.o[n];if(e !=null){if(arguments.length>1){igk.appendProperties(e,arguments[1]);}try{if(this.o.dispatchEvent){this.o.dispatchEvent(e);}else{if(document.dispatchEvent)document.dispatchEvent(e);else{document.documentElement[n]++;}}}catch(ex){console.debug(n+" "+ ex.message+" ");}}if(callback){callback(e);}}return this;},addEvent:function(n,p){var q=this;if(!this.isSr()){var e=null;if(typeof(Event)==IGK_FUNC){var _init={};if(p.cancelable){_init.cancelable=true;}if(p.composed){_init.composed=true;}if(p.bubbles){_init.bubbles=true;}e=new Event(n,_init);}else{if(document.createEvent){e=document.createEvent('CustomEvent');e.initCustomEvent(n,true,false,{});igk_appendProp(e,p);igk_appendProp(e,{fordoc:true});}else{e=new __igk_event(q,p,n);}}if(e !=null){try{this.o[n]=e;this.raiseEventCreated(n);}catch(e){}}}return this;},getParentBody:function(){if(this.isSr()){return null;}var q=this.o;while(q &&(q.tagName.toLowerCase()!="body")){q=q.parentNode;}return q;},disabled:function(d){if(this.isSr()){this.o.each(this.disabled,arguments);}else{if(d){this.o.setAttribute("disabled","disabled");}else{this.o.removeAttribute("disabled");}}return this;},addClass(classname){function __appendClass(t,tab){var ch=0;var s="";var k="";var st={};if(t.o.className && !t.o.className.indexOf){console.error("object.className is not a string (probably svg case) : "+ t.o.className);return ch;}var ucl=typeof(t.o.classList)!='undefined';for(var i=0;i<tab.length;i++){k=igk_str_trim(tab[i]);if((k.length==0)||st[k]){continue;}st[k]=1;if(ucl){t.o.classList.add(k);continue;}if((k.length==0)||(t.o.className &&(t.o.className.indexOf(k)!==-1)))continue;if(s.length>0)s+=" ";s+=k;ch=!0;}if(!ucl &&(s.length>0)){if(t.o.className==" ")t.o.className=igk_str_trim(ts);else{t.o.className=igk_str_trim(t.o.className+" "+ s);}}return ch;};function __rmClass(t,tab){var g=t.o.className.split(' ');var ch=0;var s="";var ucl=t.o.classList;if(ucl){tab.map(function(i){ucl.remove(i);});return 1;}for(var i=0;i<g.length;i++){if(g[i]in tab){ch=1;}else{if(s.length>0)s+=" ";s+=g[i];}}t.o.className=s;return ch;};if(this.isSr()){this.o.each(this.addClass,arguments);return this;}else{var tab=[];if((typeof(classname)==="string")){if(classname.length>0){var ch=false;if(typeof(this.o.className)==IGK_UNDEF){this.o.className=classname;ch=true;}else{tab=classname.split(" ");ch=__appendClass(this,tab);}}}else{var rm=[];var s="";for(var i in classname){s=igk_str_trim(i);if(((typeof(classname[i])=="function")&& classname[i]())||classname[i]){tab.push(s);}else{rm.push(s);}}ch=__appendClass(this,tab)||__rmClass(this,rm);}if(ch){igk.publisher.publish("sys://dom/classchanged",{target:this,className:classname});}}return this;},rmClass:function(classname){if(typeof classname==="string"){classname=igk_str_trim(classname);if(classname.length==0){return this;}if(this.isSr()){this.o.each(this.rmClass,arguments);return this;}else{var tab=classname.split(" ");var cur=this.o.className.split(" ");var rms="";var index=0;var s="";if(cur){for(var i=0;i<tab.length;i++){s=tab[i];index=cur.indexOf(s);if(index !=-1){delete(cur[index]);}}var h=igk_str_trim(cur.join(" "));if(h.length==0){this.o.className="";this.o.removeAttribute("class");}else{this.o.className=h;}}}}return this;},rmAllClass:function(rg){if(typeof rg==="string"){if(this.isSr()){this.o.each(this.rmClass,arguments);return this;}else{var cur=this.o.className;var tab;var _rg;if(cur){tab=cur.split(" ");_rg=new RegExp(rg);var o="";for(var i=0;i<tab.length;i++){if(_rg.test(tab[i])){continue;}o+=tab[i]+" ";}cur=o;var h=igk_str_trim(cur);this.o.className=h;igk.success=1;}else igk.success=0;}}return this;},rpClass:function(oldcl,newcl){if(typeof oldcl==="string"){if(this.isSr()){this.o.each(this.rpClass,arguments);return this;}else{var tab=oldcl.split(" ");var cur=this.o.className;var rms="";var index=0;var s="";var removing=false;if(cur){for(var i=0;i<tab.length;i++){s=tab[i];index=cur.indexOf(s);while((index>=0)&&((index+ s.length)<=cur.length)){cur=cur.replace(tab[i],"");index=cur.indexOf(tab[i]);removing=!0;}}var h=igk_str_trim(cur);if(newcl)h+=" "+ newcl;this.o.className=h;}}}return this;},supportClass(classname){if(this.isSr()){return !1;}if(this.o.classList){return this.o.classList.contains(classname);}var cl=this.o.className;var exp="($|[\\s]?)("+ classname+"){1}($|[\\s]+)";var rg=new RegExp(exp,"g");if(rg.test(cl)){return !0;}return !1;},toggleClass:function(cl){if(this.isSr()){return !1;}else{if(this.supportClass(cl)){this.rmClass(cl);}else{this.addClass(cl);}}return this;},qselect:function(pattern){if(this.isSr()){return this.o.qselect(pattern);}return igk.qselect(this.o,pattern);},select:function(pattern){if(this.isSr()){return this.o.select(pattern);}return igk.select(this.o,pattern);},wait:function(t,func){var q=this;function _wait_callback(){if(!func.apply(q)){setTimeout(_wait_callback,t);}}setTimeout(_wait_callback,t);},getForm:function(){if(this.o.form)return this.o.form;return igk.getParentByTagName(this.o,"form");},getAttributeCount:function(){if(this.o.attributes)return this.o.attributes.length;return 0;},replaceOwner:function(d){if(d){m_o=d;}},replaceTagWith:function(nTagName){if(this.isSr()){this.o.each(this.replaceTagWith,arguments)}else{var d=igk.createNode(nTagName);d.setHtml(this.o.innerHTML);igk.dom.copyAttributes(this.o,d.o);igk.dom.replaceChild(this.o,d.o);this.replaceOwner(d.o);}return this;},view:function(p){if(this.isSr()){return this;}p=p||this.getscrollParent();if(p){if(p.o.scroll)p.o.scroll(this.o.offsetLeft,this.o.offsetTop);}return this;},scroll:function(x,y){this.o.scrollLeft=x;this.o.scrollTop=y;if(this.o.scrollLeft !=x){console.error("/!\\ scroll x not changed: "+ this.o.scrollLeft+"=>"+ x);}if(this.o.scrollTop !=y){console.error("/!\\ scroll y not changed: "+ this.o.scrollTop+"=>"+ y);}},animate:function(propertyToAnimate,animationProperty){if(this.isSr()){this.each(this.animate,arguments);}else{igk.animation.animate(this.o,propertyToAnimate,animationProperty);}return this;},animateUpdate:function(animationProperty){igk.animation.animateUpdate(this.o,animationProperty);return this;},scrollTo:function(t,property,callback){if((t==null)||typeof(t)!='object')return;if((property==null)||(typeof(property)==IGK_UNDEF)){property={duration:500,interval:20,effect:"linear",effectmode:"easeinout"};}var ts=igk.fn.isItemStyleSupport(this.o,"transition");var trf=igk.fn.isItemStyleSupport(this.o,"transform");var it=$igk(t);var self=this;var counter=0;var m_il=new igk.system.collections.list();var scrollprop=null;var m_duration_ms=property ? igk.datetime.timeToMs(property.duration):null;var mout=null;function __init_scroll(){var offsetParent=it.getscrollParent();if(offsetParent==null){return null;}return new(function(){var q=this;var orientation="vertical";var distance=0;var d=0;var o=self.o;var v_loc=self.getLocation();var startpos=0,endpos=0,endscroll=0;var pos=0;v_loc.y+=self.o.scrollTop;v_loc.x+=self.o.scrollLeft;var v_ttloc=it.getLocation();v_ttloc.y+=it.o.scrollTop;v_ttloc.x+=it.o.scrollLeft;var v_tloc=it.getscrollLocation(offsetParent.o);if(!property.orientation){var pp=it.getOffsetScreenLocation(self);orientation=pp.orientation;}else{orientation=property.orientation ? property.orientation :"vertical";}if(orientation=="vertical"){startpos=v_loc.y;endscroll=v_tloc.y;d=endscroll- startpos;q.dir=(d>0)? "godown" :"goup";}else{startpos=v_loc.x;endscroll=v_tloc.x;d=endscroll- startpos;q.dir=(d>0)? "goright" :"goleft";}distance=Math.abs(d);var sign=d>=0 ? 1 :-1;q.distance=distance;q.sign=sign;q.target=t;igk.appendProperties(this,{getTransform:function(){if(orientation=="vertical")return "TranslateY("+ (-sign*distance)+"px)";return "TranslateX("+ (-sign*distance)+"px)";},getStartTransform:function(){if(orientation=="vertical")return "TranslateY("+ startpos+"px)";return "TranslateX("+ startpos+"px)";},resetTransform:function(){if(orientation=="vertical")return "TranslateY(0px)";return "TranslateX(0px)";},getStartScroll:function(){return startpos;},X:function(){if(orientation=="horizontal")return startpos+ (sign*distance);return 0;},Y:function(){if(orientation=="vertical")return startpos+ (sign*distance);return 0;}});})();};function __clearTransition(){self.select('>>').each_all(function(){if(!this.o.nodeType||(this.o.nodeType !=1)||(this.o.tagName.toLowerCase()=='script'))return;if(!this.o.style||(property.filter && property.filter(this))){return;}this.rmClass("igk-trans-all-200ms").setCss({transform:scrollprop.resetTransform(),transitionDuration:null});});var pp=scrollprop;self.scroll(pp.X(),pp.Y());if(callback){callback({"type":"transition",target:t,x:pp.X(),y:pp.Y()});}}function __transition_end(evt){var g=$igk(igk.winui.eventTarget(evt));m_il.remove(g);counter--;if(counter<=0){__clearTransition();}else{if(mout)clearTimeout(mout);mout=setTimeout(function(){if(counter>0){__clearTransition();counter=0;}},500);}igk.winui.unreg_event(this,'transitionend',__transition_end);};if(ts && trf){scrollprop=__init_scroll();counter=0;if(scrollprop && scrollprop.distance !=0){if(!scrollprop.getTransform){throw("[IGK] no scrollprop.getTransform function found");return;}counter=0;self.select('>>').each_all(function(){if(!this.o.nodeType||(this.o.nodeType !=1)||(this.o.tagName.toLowerCase()=='script'))return;if(!this.o.style||(property.filter && property.filter(this))){return;}counter++;m_il.add(this);this.reg_event("transitionend",__transition_end);this.addClass("igk-trans-all-200ms").setCss({"transform":scrollprop.getTransform()});});}else{if(callback)callback();}return;}if(m_anim && m_anim.scrolling){m_anim.scrolling.stop();}if(property==null){target.scrollIntoView();if(callback !=null)callback({"type":"scrollIntoView"});return !0;}var anim1=igk.animation.init(this,property.interval,property.duration,function(){var self=this;self.offsetParent=$igk(t).getscrollParent();if(self.offsetParent==null)return;var d=0;var q=self.getOwner().o;var v_loc=self.getOwner().getLocation();v_loc.y+=q.scrollTop;v_loc.x+=q.scrollLeft;var v_tloc=$igk(t).getscrollLocation(self.offsetParent.o);self.speed=property.speed ? property.speed :0.05;if(!property.orientation){if(v_loc.y==v_tloc.y)self.orientation="horizontal";else self.orientation="vertical";}else{self.orientation=property.orientation ? property.orientation :"vertical";}self.pos=0;if(self.orientation=="vertical"){self.startpos=v_loc.y;self.endscroll=v_tloc.y;d=self.endscroll- self.startpos;self.dir=(d>0)? "godown" :"goup";}else{self.startpos=q.scrollLeft;self.endscroll=v_tloc.x;d=self.endscroll- self.startpos;self.dir=(d>0)? "goright" :"goleft";}self.distance=Math.abs(d);},function(){var d=this.distance;if(d==0){return !0;}var v_o=this.offsetParent !=null ? this.offsetParent :this.getOwner();var y=0;var end=false;var f=this.getStepfactor();var sign=(this.dir=="goleft")||(this.dir=="goup")?-1 :1;y=this.startpos+ (sign*f*d);this.pos=y;end=(this.getEllapsed()/ this.getDuration())>=1.0;switch(this.dir){case "godown":v_o.scroll(0,y);break;case "goup":v_o.scroll(0,y);break;case "goright":v_o.scroll(y,0);break;case "goleft":v_o.scroll(y,0);break;default:return !1;}return !end;},function(){var v_o=this.getOwner();if(m_anim && m_anim.__anim && m_anim.__anim.scrolling)delete m_anim.__anim.scrolling;if(callback)callback({"type":"igk.animation"});});m_anim=createPNS(this,"__anim",{"scrolling":anim1});m_anim.type="scrolling";anim1.properties=property;anim1.start();return !0;},getParentByTagName:function(tag){return igk_getParentByTagName(this.o,tag);},getParentById:function(id){return igk_getParentById(this.o,id);},remove:function(){if(this.isSr()){this.o.each(this.remove,arguments);}else{if(this.o.parentNode)this.o.parentNode.removeChild(this.o);}return this;},transEnd:function(n,t){var q=this;function __function_end(evt){if(evt.target==q.o){if(typeof(n)=="function")n.apply(q);else{if(n in q){q[n].apply(q);}}q.unreg_event("transitionend",__function_end);}};if(this.isSr()){this.o.each(q.transEnd,arguments);}else{this.reg_event("transitionend",__function_end);}return q;},loadStringAsHtml:function(s,evalscript){if(this.o.each){this.o.each(this.loadStringAsHtml,arguments);}else{if(typeof(this.o.appendChild)!="undefined"){var m=igk.createNode("dummyNode");m.setHtml(s);if(m.o.childNodes.length==1){var p=m.o.childNodes[0];var c=p.childNodes.length;this.o.innerHTML="";while(c>0){this.o.appendChild(p.childNodes[0]);c--;}}}if(evalscript)igk.system.evalScript(this.o);}return this;},istouchable:function(){if((typeof(this.o.ontouchstart)!=IGK_UNDEF)&&(typeof(this.o.ontouchend)!=IGK_UNDEF)&&(typeof(this.o.ontouchmove)!=IGK_UNDEF)&&(typeof(this.o.ontouchcancel)!=IGK_UNDEF))return !0;return !1;},isCssSupportTransition:function(){return igk.fn.isItemSupport(this.o.style,['transition','webkitTransition','msTransition','oTransition']);},isCssSupportAnimation:function(){return igk.fn.isItemSupport(this.o.style,['animation','webkitAnimation','msAnimation','oTransition']);},setTransitionDelay:function(time){if(this.o.each){this.o.each(this.setTransitionDelay,arguments);}else igk.css.setTransitionDelay(this,time);return this;},setTransition:function(k){if(this.o.each){this.o.each(this.setTransition,arguments);}else this.setCss({transition:k});return this;},setTransitionDuration(time){if(this.o.each){this.o.each(this.setTransitionDuration,arguments);}else igk.css.setTransitionDuration(this,time);return this;},replaceWith(t){if(this.o.each){this.o.each(this.replaceWith,arguments);}else{this.clearAttributes();igk.dom.copyAttributes(this.o,$igk(t).o);this.setHtml($igk(t).getHtml());}return this;},replaceBy:function(t){if(this.o.each){this.o.each(this.replaceBy,arguments);}else{var p=this.o.parentNode;if(p){this.insertBefore($igk(t).o);this.remove();}}return this;},clearAttributes:function(){while(this.o.attributes.length>0){this.o.removeAttribute(this.o.attributes[0].name);}return this;},text:function(){if(this.o.each){this.o.each(this.text,arguments);}else{return this.o.textContent||this.o.text||this.o.innerText;}},setHtml:function(v,evalScript){if(this.o.each){this.o.each(this.setHtml,arguments);}else{try{this.o.innerHTML=v;if(evalScript){igk.system.evalScript(this.o);}}catch(ex){console.debug("set:InnerHtml failed : "+ v+"\n"+ ex);}}return this;},getText:function(){var s="";if(this.o.innerHTML){s=igk.html.string(this.getHtml());}return s;},text:function(){return this.getHtml()||this.o.textContent;},val:function(){if(this.o.each){this.o.each(this.setHtml,arguments);}else{if(arguments.length>0){if('value' in this.o){this.o.value=arguments[0];}}return this.o.value;}return this;},getHtml:function(){var s="";if(this.o.each){var fc=this;var args=arguments;this.o.each_all(function(){s+=fc.getHtml.apply(this,args);});}else{return('innerHTML' in this.o)? this.o.innerHTML :__dom_innerHTML(this.o);}return s;},getOuterHtml:function(){if(this.o.outerHTML)return this.o.outerHTML;var s="";if(this.o.each){s+=this.o.each(this.getOuterHtml,arguments);}else{if(typeof(this.o.tagName)!=IGK_UNDEF){s="<"+ this.o.tagName;if(this.o.hasAttributes){s+=" ";for(var i=0;i<this.o.attributes.length;i++){var g=this.o.attributes[i];if(i !=0)s+=" ";s+=g.name+"=\""+ g.value+"\"";}}s+=">";for(var i=0;i<this.o.childNodes.length;i++){s+=$igk(this.o.childNodes[i]).getOuterHtml();}s+="</"+ this.o.tagName+">";}else{s+=this.o.wholeText;}}return s;},evalScript:function(){if(this.o.each){this.o.each(this.evalScript,arguments);}else{igk.system.evalScript(this.o);}return this;},init:function(){if(this.o.each){this.o.each(this.init,arguments);}else igk.ajx.fn.initnode(this.o);return this;},render:function(){var s="";if(this.o.each){s+=this.o.each(this.renber,arguments);}else{return this.o.outerHTML;}return s;},getAllAttribs:function(){var msg="";var attrs=null;if(this.o.attributes){attrs=this.o.attributes;var ln=attrs.length;for(var h=0;h<ln;h++){try{var j=attrs[h];if(j)msg+=j.name+" ";}catch(ex){console.debug("error on "+ h);}}}return msg;},getParentNode:function(){return $igk(this.o.parentNode);},getStyle:function(name){if(!this.isSr()){return igk.css.getValue(this.o,name);}return "no-value";},getComputedStyle:function(n,select){if(!this.isSr()){if(window.getComputedStyle){if(this.o.nodeType &&(this.o.nodeType==3)){return null;}var q=window.getComputedStyle(this.o,select);return igk.css.getStyleValue(q,n);}return null;}return "no-value";},getComputedEmSize(p,target){return igk.css.getComputedEmSize(this,p,target);},getComputedStylePropertyValue:function(n,select){if(!this.isSr()){var s=null;if(window.getComputedStyle &&(s=window.getComputedStyle(this.o,select))){var q=window.getComputedStyle(this.o,select).getPropertyValue(n);return q;}return null;}return "no-value";},setAttributes:function(properties){if(!properties)return;for(var i in properties){this.o.setAttribute(i,properties[i]);}return this;},setAttribute:function(name,value){if(this.o.each){this.o.each(this.setAttribute,arguments);}else this.o.setAttribute(name,value);return this;},setAttributeAssert:function(condition,name,value){if(condition){this.setAttribute(name,value);}return this;},setSize:function(w,h){if(h==null)h=w;this.setCss({"width":w,"height":h});return this;},getAttribute:function(value){if(typeof(this.o.getAttribute)=='function')return this.o.getAttribute(value);return null;},getChildById:function(id){return igk_getChildById(this.o,id);},getChildsByAttr:function(properties){return igk_getChildsByAttr(this.o,properties);},getParent:function(tagname){if(tagname){return this.getParentByTagName(tagname);}return $igk(this.o.parentNode);},getParentForm:function(){return this.getParentByTagName("form");},getPixel:function(propName,o){return igk.getPixel(this.getComputedStyle(propName),o||this.o,propName);},appendChild:function(name){var item=null;if(typeof(name)=="string"){item=document.getElementById(name);}else{item=name;}if(item !=null){var s=$igk(item);this.o.appendChild(s.o);return s;}},appendNChild:function(tagname){const e=igk.system.getNS('igk.system.html.dom.createElement');let item=null;if(e && e.support){item=e(tagname).root;}else{item=this.createElement(tagname);}this.appendChild(item);return item;},insertBefore:function(item){var p=0;if(item &&(p=this.o.parentNode)){if(p.firstChild==this.o){if(p.prepend)p.prepend(item);else{p.insertBefore(item,p.firstChild);}}else p.insertBefore(item,this.o);}return this;},insertAfter:function(item){if(item && this.o.parentNode){if(this.o.parentNode.lastChild==this.o)this.o.parentNode.appendChild(item);else this.o.parentNode.insertBefore(item,this.o.nextSibling);}return this;},firstChild:function(){return(this.o.firstChild)? $igk(this.o.firstChild):null;},firstNode:function(type){var r=null;this.select('>>').each(function(){if(this.o.nodeType==type){r=this.o;return !1;}return !0;});return r;},prependChild:function(node){if(this.o.firstChild)this.o.insertBefore(node,this.o.firstChild);else{this.o.appendChild(node);}},reg_event:function(method,func,opts){if(this.o.each){this.o.each(this.reg_event,arguments);}else{igk_winui_reg_event(this.o,method,func,opts);}return this;},unreg_event:function(method,func){if(this.o.each){this.o.each(this.unreg_event,arguments);}else{igk.winui.unreg_event(this.o,method,func);}return this;},getOffsetScreenLocation:function(t){var v1=t.getScreenLocation();var v2={x:this.o.offsetLeft,y:this.o.offsetTop};var q=this.o.offsetParent;var v3={x:0,y:0 };var v4=this.getScreenLocation();var p=this.o;var o="horizontal";while(q &&(q !=igk.dom.body().o)){if(q==t.o){if(t.o.offsetWidth<v2.x){}if(((v4.x==0)&&(v4.y !=0))||(t.o.offsetHeight<v2.y)){o="vertical";}break;}p=q;q=q.offsetParent;v2.x+=p.offsetLeft;v2.y+=p.offsetTop;v4.x-=p.offsetLeft;v4.y-=p.offsetTop;}return{orientation:o,x:v4.x,y:v4.y};}});__prop.getElementsByTagName=function(tag){if(this.o.getElementsByTagName)return this.o.getElementsByTagName(tag);};__prop.getWidth=function(){return this.o.clientWidth;};__prop.getglobalWidth=function(){return this.o.clientWidth+ this.o.scrollWidth;};__prop.getglobalHeight=function(){return this.o.cliclientHeight+ this.o.scrollHeight;};__prop.getHeight=function(){return this.o.clientHeight;};__prop.getTop=function(){return this.getLocation().y;};__prop.getLeft=function(){return this.getLocation().x;};__prop.getSize=function(){return{w:this.getWidth(),h:this.getHeight(),toString:function(){return "w:"+ this.w+" h:"+ this.h;}};};__prop.getLocation=function(){return igk.winui.GetScreenPosition(this.o);};__prop.getScreenLocation=function(){return igk.winui.GetRealScreenPosition(this.o);};__prop.getOffsetBounds=function(){var p=this;var real_size={x:0,y:0,h:0,w:0 };for(var n=0;n<p.o.childNodes.length;n++){var c=$igk(p.o.childNodes[n]);var loc=c.getScreenLocation();var boc=c.getScreenBounds();real_size.x=Math.min(loc.x,real_size.x);real_size.y=Math.min(loc.y,real_size.y);real_size.w=Math.max(loc.x+ boc.w,real_size.w);real_size.h=Math.max(loc.y+ boc.h,real_size.h);}loc=p.getScreenLocation();real_size.w-=loc.x;real_size.h-=loc.y;return real_size;};__prop.getBoundingClientRect=function(){var g=this.o.getBoundingClientRect ? this.o.getBoundingClientRect():{x:0,y:0,width:0,height:0,left:0,top:0,right:0,bottom:0,toString:function(){"igk.boundingClientRect[]"}};if(!g.x)g.x=g.left;if(!g.y)g.y=g.top;return g;};__prop.getScreenBounds=function(){var l=igk.winui.GetRealScreenPosition(this.o);var s=this.getSize();return{x:l.x,y:l.y,w:s.w,h:s.h,contains:function(x,y){return(l.x<=x)&&((l.x+ s.w)>=x)&&(l.y<=y)&&((l.x+ s.h)>=y);},toString:function(){return "getScreenBounds["+ igk.system.stringProperties(this)+"]";}};};__prop.getisVisible=function(){var j=this;if(!j.getpresentOnDocument()){return false;}var loc=j.getBoundingClientRect();var size=igk.winui.screenSize();var vsb=((loc.x>=0)&&(loc.x<=size.width)&&(loc.y>=0)&&(loc.y<=size.height));return vsb;};__prop.getpresentOnDocument=function(doc){var j=this.o;var _doc=doc||document;while(j &&(j !=_doc)){j=j.parentNode;}return(j !=null);};__prop.getscrollLeft=function(){if(this.o.pageXOffset){return this.o.pageXOffset;}else if(this.o.scrollLeft)return this.o.scrollLeft;return 0;};__prop.getscrollTop=function(){if(this.o.pageYOffset){return this.o.pageYOffset;}else if(this.o.scrollTop)return this.o.scrollTop;return 0;};__prop.getscrollLocation=function(targetParent){return igk.winui.GetScrollPosition(this.o,targetParent);};__prop.getscrollMaxTop=function(){if(this.o.scrollTopMax)return this.o.scrollTopMax;else return this.o.offsetHeight;};__prop.getscrollMaxLeft=function(){if(this.o.scrollLeftMax)return this.o.scrollLeftMax;else return this.o.offsetWidth;};__prop.createElement=function(tagname){if(this.o.namespaceURI==null){var c=document.createElementNS(null,tagname);return c;}return igk.createNode(tagname,this.o.namespaceURI||igk.namespaces.xml);};__prop.isChildOf=function(target){var q=this.o.parentNode;while(q){if(q==target)return !0;q=q.parentNode;}return !1;};__prop.collapse=function(property,callback){if(m_anim && m_anim.collapsing){m_anim.collapsing.stop();}var anim1=igk.animation.init(this,property.interval,property.duration,function(){},function(){},function(){if(m_anim && m_anim.__anim && m_anim.__anim.collapsing)delete m_anim.__anim.collapsing;if(callback)callback();});m_anim=createPNS(this,"__anim",{"collapsing":anim1});m_anim.type="scrolling";anim1.start();return !0;};__prop.expand=function(property,callback){if(m_anim && m_anim.expanding){m_anim.expanding.stop();}var anim1=igk.animation.init(this,property.interval,property.duration,function(){},function(){},function(){if(m_anim && m_anim.__anim && m_anim.__anim.expanding)delete m_anim.__anim.expanding;if(callback)callback();});m_anim=createPNS(this,"__anim",{"expanding":anim1});m_anim.type="scrolling";anim1.start();return !0;};function __igk_event(q,p,n){var self=this;function __ecall(evt){if(evt.propertyName==n){igk.winui.getEventObjectManager && igk.winui.getEventObjectManager().raise(self.target.o,n);}}document.documentElement.attachEvent('onpropertychange',__ecall);if(p)igk_appendProp(this,p);igk_appendProp(this,{fordoc:true,target:q,unregister:function(){document.documentElement.detachEvent('onpropertychange',__ecall);}});};function igk_extendProperty(o,n,p){if(!o)return !1;var h=Object.getOwnPropertyDescriptor(o,n)||Object.getOwnPropertyDescriptor(o,n);var e={};if(('get' in p)&&('get' in h)){e.get=function(){return p.get.apply(this,[h.get]);};}if(('set' in p)&&('set' in h)){e.set=function(v){return p.set.apply(this,[v,h.set]);};}igk.defineProperty(o,n,e);};createNS("igk",{DEBUG:false,release:"17/01/15",evaluating:false,elog:function(msg,tag){tag=tag||_FM_;console.error("["+ (_FM_)+"]"+":"+ msg);},createObj:function(s,d){if(isUndef(d))d=0;var o={};var t=s.split('|');for(var s=0;s<t.length;s++){o[t[s]]=d;}return o;},isUndef:isUndef,isNumber,initObj:igk_initobj,env:{flags:{}},createNode:function(tag,ns){let e=igk.system.getNS('igk.system.html.dom.createElement');if(e && e.support){return __igk(e(tag,ns).root);}if(!tag)return 0;if(ns && document.createElementNS)return __igk(document.createElementNS(ns,tag));tag=tag.toLowerCase();return __igk(document.createElement(tag));},createNSComponent:function(ns,classname){var lst=igk.winui.getClassList();var g=lst["ns://"]&& lst["ns://"][ns]&& lst["ns://"][ns][classname];if(g){var s=null;if(g.data.create){s=g.data.create.apply(window,igk.system.array.slice(arguments,2));}else{s=igk.createNode("div");s.addClass(classname);}igk.ajx.fn.initnode(s.o);return s;}return null;},createComponent:function(classname){var lst=igk.winui.getClassList();var g=lst[classname];if(g){var s=null;if(g.data.create){s=g.data.create.apply(window,igk.system.array.slice(arguments,1));}else{s=igk.createNode("div");s.addClass(classname);}igk.ajx.fn.initnode(s.o);return s;}return null;},createText:function(s){return __igk(document.createTextNode(s));},createHtml:function(s){var o=igk.createNode("div").setHtml("&nbsp;").o;return igk.createText(o.textContent);},clearTimeout:function(timeout){window.clearTimeout(timeout);},evalScript:igk_eval,typeofs:function(n){return typeof(n)=='string';},typeoff:function(n){return typeof(n)=='function';},loadScript:function(filename){if(!filename)return;var uri=null;var p=m_scriptTag;if(p){uri=igk.constants.http_scheme+ document.domain+ igk_getdir(window.location.pathname+"")+"/"+ igk_getdir(p.getAttribute("src"))+"/"+ filename;}if(!uri){return;}igk.ajx.get(uri,null,function(xhr){if(this.isReady()){var s=igk.createNode("script");s.setAttribute("type","text/javascript");s.setAttribute("language","javascript");s.o.innerHTML=xhr.responseText;document.head.appendChild(s);}});},getScriptLocation:igk_getScriptLocation,loadPlugins:function(plugins){if(!plugins)return;var t=plugins.split(',');var uri=null;var p=m_scriptTag;if(p){uri=igk.constants.http_scheme+ document.domain+"/"+ igk_getdir(window.location.pathname+"")+"/"+ igk_getdir(p.getAttribute("src"))+"/plugins";}if(!uri){return;}for(var i=0;i<t.length;i++){igk.ajx.get(uri+"/"+ t[i]+"/plugin.js",null,function(xhr){if(this.isReady()){var s=igk.createNode("script");s.setAttribute("type","text/javascript");s.setAttribute("language","javascript");s.setHtml(xhr.responseText);document.head.appendChild(s.o);}});}},preload:function(u){igk.ajx.get(u,null,function(xhr){if(this.isReady()){var s=igk.createNode("script");s.setAttribute("type","text/javascript");s.setAttribute("language","javascript");s.setHtml(xhr.responseText);var b=document.head||igk.dom.body().o;if(b)b.appendChild(s.o);}});},canInvoke:function(){return(window.external)&&(('notify' in window.external)||(typeof(window.external.callFunc)!=igk.constants.undef));},invoke:function(method,params){var n=0;var fc=null;var _out=0;var _json={method:method};if(params){if(typeof(params)=='object'){params=igk.JSON.convertToString(params);}_json.param=params;}if((igk.navigator.IEVersion()<=7.0)||('notify' in window.external)){try{_out=window.external.notify(igk.JSON.convertToString(_json));}catch(ex){igk.winui.notify.showMsg("<div class=\"igk-notify-danger\">Execption: External JS Notify ["+ method+"] not invoked <br /> "+ ex+"</div");}return _out;}fc=('callFunc' in window.external)? window.external.callFunc :null;if(n){try{if(n){_out=window.external.notify(igk.JSON.convertToString(_json));}else{_out=fc(_json);}}catch(ex){igk.winui.notify.showMsg("<div class=\"igk-notify-danger\">Execption: External JS Notify ["+ method+"] not invoked <br /> "+ ex+"</div");}}else{igk.winui.notify.showMsBox(__libName,"<div class=\"igk-notify-danger\">No external function defined ["+ method+" : "+ n+"]</div>","igk-info");}return _out;},constants:{http_scheme:"http://",https_scheme:"https://",namespace:"http://www.igkdev.com","undef":IGK_UNDEF,"true":true,"false":false,regex:igk_regex_constant()},"selector_showlist":function(s){var ss="";s.each(function(){ss+=" "+ this.o.tagName+":"+ this.o+"\n";return !0;});},eval_all_script:igk_eval_all_script,init_document:function(s){if(igk.ctrl.init_controller){igk.ctrl.init_controller();}else{$igk(igk.winui.events.global()).reg_event('igk_controller_ready',function(){igk.ctrl.init_controller();});}igk.ready(function(){igk_preload_image(document);igk_preload_anim_image(document);});__applyPreloadDocument(document);__initDocSetting=s;},alert:function(m,t){igk_show_notify_msg(t||'alert',m);},console_debug:igk_console_debug,show_prop:igk_show_prop,show_notify_prop:function(e){igk.winui.notify.showMsg(igk.html.getDefinition(e));},show_notify_prop_v:function(e){igk.winui.notify.showMsg(igk.html.getDefinitionValue(e));},show_notify_msg:igk_show_notify_msg,show_notify_error:igk_show_notify_error,get_v:function(o,k,d){if(typeof(o[k])!=IGK_UNDEF){return o[k];}else if(typeof(d)==IGK_UNDEF)return null;return d;},show_prop_keys:igk_show_prop_keys,preload_image:igk_preload_image,show_event:igk_show_event,getParentScriptByTagName:igk_getParentScriptByTagName,getParentScriptForm:function(){return igk_getParentScriptByTagName("form");},getElementsByTagName:function(e,tag){return e.getElementsByTagName(tag);},getParentScript:function(){return igk_getParentScriptByTagName(null);},getLastScript:igk_getLastScript,getCurrentScript:igk_getCurrentScript,rmCurrentScript:function(){var s=igk.getCurrentScript();if(s){$igk(s).remove();}},initpowered:igk_init_powered,getParentByTagName:igk_getParentByTagName,getParentById:igk_getParentById,appendProperties:igk_appendProp,defineProperty:igk_defineProperty,extendProperty:igk_extendProperty,activateField:function(data,definition){const r={};for(let i in definition){if(i in data){r[i]=data[i];}else{r[i]=definition[i];}};return r;},setProperty:function(o,n,v){var t=n.split('.');var win=o;if(win){let k=t.pop();for(var i=0;win && i<t.length;i++){win=win[t[i]];}if(win &&(typeof(win)=='object')){win[k]=v;return win;}}return null;},defineEnum:igk_defineEnum,checkOnePropertyExists:igk_checkOnePropertyExists,checkAllPropertyExists:igk_checkAllPropertyExists,callfunction:igk_callfunction,appendChain:function(q,n,func){switch(typeof(q[n])){case 'function':var fc=q[n];q[n]=function(){fc.apply(q,arguments);func.apply(q,arguments);};return 1;case 'undefined':q[n]=func;return 1;}return 0;},prependChain:function(q,n,func){switch(typeof(q[n])){case 'function':var fc=q[n];q[n]=function(){func.apply(q,arguments);fc.apply(q,arguments);};return 1;case 'undefined':q[n]=func;return 1;}return 0;},pushFunction:function(f,fc){var _s=f;if(_s==null)return fc;_s=function(){f.apply(this,arguments);fc.apply(this,arguments);};return _s;},check:function(item,pattern){var m=igk_select_exp(pattern.substring(1));if(m.check(item,0)){return !0;}return !1;},qselect:function(item,pattern){var v_sl=new igk.selector();if(item.querySelectorAll){var p=item.querySelectorAll(pattern);for(var i=0;i<p.length;i++){v_sl.push($igk(p[i]));}}return $igk(v_sl);},select:function(item,pattern){var b=null;let v_s=!1;var v_sl=new igk.selector();if(!item||(pattern==null)||((pattern=pattern.trim())&& pattern.length==0)||(v_s=/['`\[\]]/.exec(pattern))){return v_s ? this.qselect(item,pattern):$igk(v_sl);}if(/^>/.test(pattern)&&(pattern !='>>')){let cp=pattern;while(cp[0]=='>'){cp=cp.substring(1);}item.childNodes.forEach((a)=>{if(a.matches(cp)){v_sl.push(a);}});return $igk(v_sl);}if(pattern.indexOf('>>')==-1){var v_root_chain=pattern.split('>');if(v_root_chain.length>1){let c=document.querySelectorAll(pattern);c.forEach(i=>{v_sl.push(i);});return $igk(v_sl);}}var v_list=pattern.split(',');if(v_list.length>1){for(var sm=0;sm<v_list.length;sm++){var v_cq=igk.select(item,v_list[sm]);if(v_cq.getCount()>0){v_sl.load(v_cq);}}return v_sl;}if(/^\^\?/.test(pattern)){pattern=pattern.substring(2);return $igk(pattern);}if(pattern=="::"){v_sl.push($igk(item).o.parentNode);return $igk(v_sl);}if(pattern=="??"){v_sl.push(igk.dom.body().o);return $igk(v_sl);}if(pattern.indexOf('?')==0){var m=igk_select_exp(pattern.substring(1));if(m.check(item,0)){v_sl.push(item);}return $igk(v_sl);}if(pattern.indexOf('^')==0){var spattern=pattern.split(" ");pattern=spattern[0];if((/^\^[\w\-_]+$/.exec(pattern))){b=$igk($igk(item).getParentByTagName(pattern.substring(1)));if(b)v_sl.push(b);}else if((/^\^#[\w\-_]+$/.exec(pattern))){b=$igk(item).getParentById(pattern.substring(2));if(b)v_sl.push(b);}else if((/^\^\./.exec(pattern))){pattern=pattern.substring(2);var s=$igk(item).o.parentNode;var rx=new RegExp("(^| )("+ pattern+")(\\s|$)","i");while(s !=null){if(rx.exec(""+ s.className)){v_sl.push(s);}s=s.parentNode;}}if((spattern.length>1)&&(v_sl.getCount()==1)){return $igk(v_sl).first().select(spattern.slice(1).join(" "));}return $igk(v_sl);}if(pattern.indexOf('+')==0){var h=$igk(item).o.nextSibling;var spattern=pattern.substr(1).split(" ");pattern=spattern[0];while(h){if(igk.css.isMatch(h,pattern)){v_sl.push(h);}h=h.nextSibling;}return $igk(v_sl);}var v_it=null;var s=null;var exp=null;var fid=false;if(typeof(pattern)=="string"){switch(pattern){case ">>":for(var i=0;i<item.childNodes.length;i++){s=item.childNodes[i];v_sl.push(s);}return $igk(v_sl);break;default:if(/^>:([\w_#\.]+[\w\-_0-9 ]*)$/.exec(pattern)){pattern=pattern.substring(2);for(var i=0;i<item.childNodes.length;i++){s=item.childNodes[i];if(v_sl.isMatch(pattern,s)){v_sl.push(s);}}return $igk(v_sl);}break;}if(!item.getElementsByTagName){if(igk.DEBUG)console.debug("/!\ selection will failed because element not support getElementByTagName");return $igk(v_sl);}v_it=item.getElementsByTagName("*");if(pattern=="*"){for(var i=0;i<v_it.length;i++){s=v_it[i];v_sl.push(s);}}else{if(/^:([\w_]+[\w\-_0-9]*)$/.exec(pattern)){pattern=pattern.substring(1);for(var i=0;i<v_it.length;i++){s=v_it[i];if(s.getAttribute(pattern)){v_sl.push(s);}}}else if(/^:\^([\w_]+[\w\-_0-9]*)$/.exec(pattern)){pattern=pattern.substring(2);for(var i=0;i<v_it.length;i++){s=v_it[i];var msg=$igk(s).getAllAttribs();if(RegExp(""+ pattern+"","i").test(msg)){v_sl.push(s);}}}else if((/^\.[\w\-_]+$/.exec(pattern))){pattern=pattern.substring(1);for(var i=0;i<v_it.length;i++){s=v_it[i];if(igk_item_match_class(pattern,s)){v_sl.push(s);}}}else if((/^\>[\w\-_]+$/.exec(pattern))){pattern=pattern.substring(1);exp=new RegExp("("+ pattern+")","i");for(var i=0;i<v_it.length;i++){s=v_it[i];if((s.parentNode==item)&& exp.exec(""+ s.tagName)){v_sl.push(s);}}}else{if((igk.constants.regex.idSearch.exec(pattern))){fid=!0;pattern=pattern.substring(1);for(var i=0;i<v_it.length;i++){s=v_it[i];if(new RegExp("^("+ pattern+")$","i").exec(""+ s.id)){v_sl.push(s);}}}else{var m=igk_select_exp(pattern);if(m !=null){m.select(v_sl,item);}else{v_it=item.getElementsByTagName(pattern);for(var i=0;i<v_it.length;i++){s=v_it[i];v_sl.push(s);}}}}}}return $igk(v_sl);},load:function(func){if(func==null)return;if(document.readyState=="loading"){igk_winui_reg_event(window,"load",func);}else{func.apply(window);}},is_readyRegister:function(func){for(var i=0;i<readyFunc.length;i++){if(func==readyFunc[i])return !0;}return !1;},readyCountFunc:function(){return readyFunc.length;},readyGlobal:function(func){if(document.readyState=="complete"){func.apply(document);}else{m_readyGlobalFunc[m_readyGlobalFunc.length]=func;}},isdevelop:function(){if(typeof(__isdev)=='undefined'){__isdev=igk.getScriptLocation().location.split('/').pop()==__devscript;}return __isdev;},readyinvoke:function(n){var s=igk_getCurrentScript();var t=igk.system.array.slice(arguments,1);igk.ready(function(){var ns=igk.system.getNS(n);if(typeof(ns)=='function'){var bck=m_scriptNode;m_scriptNode=s;ns.apply(s,t);m_scriptNode=bck;}else if(igk.isdevelop()){console.debug(n+" : not found");}});},isDefine:igk_isdefine,onContentLoad:function(func,priority){priority=igk.isDefine(priority,10);var k="igk.event.contentLoad";var g=igk.system.getNS(k)||igk.system.createNS(k,{isRegister:0 });func={fn:func,priority:priority};if(g.callback)g.callback.push(func);else g.callback=[func];if(!g.isRegister){document.addEventListener('DOMContentLoaded',function(evt){g.callback.sort(function(e,i){var c=e.priority- i.priority;if(c !=0)c /=Math.abs(c);return c;});for(var i=0;i<g.callback.length;i++){var fc=g.callback[i];fc.fn.apply(document,[evt]);}delete(window[k]);});g.isRegister=1;}},ready:function(func,sys,complete){function _async_call(e,document,i){setTimeout(function(){e.apply(document,[i]);},10);}if((func==null)||(func==0)){if((document.readyState !=="complete")||m_ready_calling)return;m_ready_calling=!0;var e=null;if(m_readyGlobalFunc.length>0){for(var i=0;i<m_readyGlobalFunc.length;i++){e=m_readyGlobalFunc[i];try{_async_call(e,document,i);}catch(ex){igk.winui.notify.showError("<div class=\"igk-title-5\">igk.js ReadyGlobal function call failed </div> <br />"+ ex+"<br /><quote>"+ ex.stack+"</quote><pre style=\"max-height:200px; overflow-y:auto;\">"+ e+"</pre>");}}m_readyGlobalFunc=[];}if(readyFunc.length>0){for(var i=0;i<readyFunc.length;i++){e=readyFunc[i];try{_async_call(e,document,"f"+ i);}catch(ex){if(igk.DEBUG){var ox="";if(ex.stack)ox=(ex.stack+"").replace("\n","<br />");igk.winui.notify.showError("<div class=\"igk-title-5\">igk.js Ready function call failed </div> <br />"+ ex+"<br /><quote>"+ ox+"</quote><pre class='error-code' style=\"max-height:200px; overflow-y:auto;\"><code>"+ e+"</code></pre>");}else{console.error(ex);}}}}readyFunc=[];m_ready_calling=false;if(complete){component.call();}}else{if(m_ready_calling||(document.readyState=="complete")){func.apply(document);}else{readyFunc[readyFunc.length]=func;}}},unready:function(func){var s=[];for(var i=0;i<readyFunc.length;i++){if(readyFunc[i]==func){continue;}s.push(readyFunc[i]);}readyFunc=s;},getElementsByAttribute:function(properties){if(!properties)return null;var d=document.getElementsByTagName("*");var out=[];var b=!0;for(var i=0;i<d.length;i++){for(var k in properties){if(d[i].getAttribute(k)==properties[k]){out.push(d[i]);}}}return out;},selector:function(){var m_items=[];igk_appendProp(this,{getCount:function(){return m_items.length;},push:function(item){m_items.push(item);this.length=this.getCount();},isSr:function(){return !0;},toString:function(){return "igk.selector["+ this.getCount()+"]";},each:function(func,args){args=args ? args :[];for(var i=0;i<this.getCount();i++){if((func)&& func.apply && !func.apply($igk(m_items[i]),args)){break;}}return this;},waitInterval:function(duration,func){function __func_waiter(i,func){var self=this;igk_appendProp(this,{next:null,wait:function(){func.apply(i,arguments);if(self.next)self.next.start();},start:function(){this.timeout=setTimeout(this.wait,duration);}});}var iduration=duration;var h=null;var t=null;for(var i=0;i<this.getCount();i++){if(i==0){h=new __func_waiter($igk(m_items[i]),func);t=h;}else{h.next=new __func_waiter($igk(m_items[i]),func);h=h.next;}}if(t !=null){t.start();}return this;},each_all:function(func,args){if(func){if(typeof(args)==IGK_UNDEF)args=[];const count=this.getCount();args.unshift({count});for(var i=0;i<count;i++){func.apply($igk(m_items[i]),args);}}return this;},getItemAt:function(index){if((index>=0)&&(index<this.getCount()))return $igk(m_items[index]);return null;},getLastItem:function(){var c=this.getCount();return c>0 ? this.getItemAt(c- 1):null;},getFirstItem:function(){var c=this.getCount();return c>0 ? this.first():null;},getNodeAt:function(index){if((index>=0)&&(index<this.getCount()))return m_items[index];return null;},isMatch:function(p,n){if(igk.constants.regex.tagName.exec(p)){return n.tagName &&(n.tagName.toLowerCase()==p.toLowerCase());}else if(igk.constants.regex.className.exec(p)){return igk_item_match_class(p,n);}else if(igk.constants.regex.idSearch.exec(p)){return(new RegExp("^("+ p+")$","ig")).exec(""+ n.id);}return !1;},select:function(pattern){var v_s=new igk.selector();if(this.getCount()==0){return v_s;}for(var i=0;i<this.getCount();i++){var g=igk.select(m_items[i],pattern);if(g &&(g.getCount()>0)){for(var j=0;j<g.getCount();j++){v_s.push(g.getNodeAt(j));}}}return $igk(v_s);},load:function(g){if(g && g.isSr()){for(var j=0;j<g.getCount();j++){this.push(g.getNodeAt(j));}}},clear:function(){m_items=new Array();},first(){return null;}});igk.initprop(this);},initprop:function(element){if(typeof(element.igk)==igk.constants.undef){(function(){this.igk=new __igk_nodeProperty(element);this.igk.$=window.igk;}).apply(element);}if(typeof(element.$)==igk.constants.undef){(function(){this.global=window.igk;}).apply(element);}},getNumber:igk_getNumber,getUnit:igk_getUnit,getPixel:igk_getPixel,getNumberLength(v){if(typeof(v)=='string'){if(/(\d+(\.\d+)?)(px|%|pt|pica|ch|in)?/.test(v)){return v;}}return 0;}});igk_appendProp(igk,{exception:function(msg){this.name="IGKException";this.level="";if(typeof(msg)=="string"){this.message="Error:"+ msg;}else if(typeof(msg)=="object"){igk_appendProp(this,msg);}this.toString=function(){return this.name+" : "+ this.message;};}});igk_defineProperty(igk,"platform",{get(){return __platform;}});(function(){var m_publisher={};var m_staticReg={};var m_publisherobj=new function(){igk.appendProperties(this,{toString:function(){return "publisher obj";}});};var m_cinf={};createNS("igk.publisher",{createEventData:function(t,ctx){return{target:t,context:ctx};},register:function(n,func){if(!n||!func)return !1;var e=null;if(m_publisher[n]){e=m_publisher[n];}else{e={k:n,s:new igk.system.collections.list(),toString:function(){return "publisher-entity";}};m_publisher[n]=e;}e.s.add(func);},unregister:function(n,func){var e=m_publisher[n];if(typeof(e)==IGK_UNDEF)return;e.s.remove(func);if(e.s.getCount()==0){delete(m_publisher[n]);}},publish:function(n,prop){var e=m_publisher[n];if(typeof(e)==IGK_UNDEF)return;var tab=[];for(var i=0;i<e.s.getCount();i++){tab.push(e.s.getItemAt(0));}for(var i=0;i<tab.length;i++){m_cinf={name:n,caller:tab[i],funcs:e.s};m_cinf.caller.apply(m_cinf,[prop]);}},getName:function(obj,ns,name){if(obj instanceof igk.object){if(obj.type=="class"){return name;}}else{for(var i in ns){if(obj.constructor==ns[i])return i;}}},inheritFrom:function(src,parent){if((typeof(src)=='function')&&(typeof(parent)=='function')){var p=new parent();src.prototype=p;src.prototype.$parent=p;src.prototype.$super=function(m){var r=arguments.length>1 ? igk.system.array.slice(arguments,1):null;this.$parent[m].apply(this,r);};return !0;}return !1;},registerStatic:function(ns,name,func){var fname=[ns.namespace,name].join('.');if(m_staticReg[fname]){return;}m_staticReg[fname]=1;func.call(ns);},createPublisherEvent:function(prop){var c=new igk.publisher.event();igk.appendProperties(c,prop);return c;},event:function(){igk.appendProperties(this,{toString:function(){return "publisher event";}});},getCount:function(n){n=n||this.name;if(!n)return-1;var e=m_publisher[n];if(typeof(e)==IGK_UNDEF)return-2;return e.s.getCount();}});})();var _js_version=-1;createNS("igk.os",{destroysession:function(uri,callback){igk.ajx.send({uri:uri,method:'DELETE',contentType:'application/json',func:function(xhr){if(this.isReady()){if(callback){callback.apply(this,[xhr]);}}},param:'{destroysession:1}'});},javascriptVersion:function(){if(_js_version !=-1)return _js_version;var _body=igk.dom.body();var t=["1.1","1.2","1.3","1.4","1.5","1.6","1.7","1.8","1.8.1","1.8.5","1.9"];for(var i=0;i<t.length;i++){var s=igk.createNode("script");if(i==0){s.o["type"]="text/javascript";s.setHtml("var _jver='1.1';");}else{s.o.setAttribute("language","javascript"+ t[i]);s.setHtml("_jver='"+ t[i]+"';");}_body.add(s);s.remove();}_js_version=_jver;return _js_version;},checkupdate:function(uri){var q=$igk(igk.getParentScript());(function(){igk.io.file.load(uri,{error(){q.remove();},complete(){var w=$igk("#dialog.error").first();if(w){var m=w.select(".msg").first().clone();igk.show_notify_error(w.select(".title").first().getHtml(),m.getHtmll());}q.remove();}});})();},update:function(u){var w=$igk("#dialog.wait").first();if(w){var m=w.select(".msg").first().clone();igk.winui.notify.showMsBox(w.select(".title").first().getHtml(),m,'default',1);igk.ajx.fn.initnode(m.o);}igk.io.file.load(u,function(d){igk.winui.notify.close(function(){var w=$igk("#dialog.os-complete").first();if(w){igk.winui.notify.showMsBox(w.select(".title").first().getHtml(),w.select(".msg").first().getHtml());}else{igk.winui.notify.showMsBox("OS","Update complete");}var k=igk.utils.getBodyContent(d.data);var m=igk.createNode('div').setHtml(k);var uk=m.select('ruri').first().o.innerHTML;if(uk){igk.ajx.post(uk+"/?c=c_sc&f=forceview",null,igk.ajx.fn.replace_body);}});});},install:function(f,msg){var q=igk.createNode("div");ns_igk.ajx.postform(f,f.getAttribute('action'),function(xhr){if(this.isReady()){f.reset();q.remove();igk.ajx.replaceBody(xhr.responseText,true);igk.winui.notify.showMsBox("OS",msg.complete);}});$igk(f).o.appendChild(q.o);q.setHtml(msg.wait);}});createNS("igk.features",{});(function(){var _passive=false;try{var opts={};igk_defineProperty(opts,'passive',{get:function(){_passive=true;}});if(window.addEventListener){window.addEventListener('test',null,opts);}}catch(e){}igk_defineProperty(igk.features,'supportPassive',{get:function(){return _passive;}});igk_defineProperty(igk.features,'supportBackgroundWorker',{get:function(){return typeof(window.Worker)!=='undefined';}});})();createNS("igk.fn",{isset:function(i){if((i==null)||(typeof(i)==IGK_UNDEF))return !1;return !0;}},{desc:"igk utility fonctions"});var prop_toextend;createNS("igk.fn",{getItemFunc:function(it,n,fallback){if(n in it)return it[n];var c="";var r=n[0].toUpperCase()+ n.substring(1);for(var i=0;i<m_provider.length;i++){c=m_provider[i]+ r;if(c in it)return it[c];}return fallback;},getWindowFunc:function(n,fallback){return igk.fn.getItemFunc(window,n,fallback);},isItemStyleSupport:function(item,name){if(!item||!item.style)return !1;var t=[name.toLowerCase()];var h=m_provider;var k=name.charAt(0).toUpperCase()+ name.substring(1).toLowerCase();for(var i=0;i<h.length;i++){t.push(h[i]+ k);}return igk.fn.isItemSupport(item.style,t);},isItemSupport:function(e,tab){if(!e||!tab)return !1;for(var i=0;i<tab.length;i++){if(typeof(e[tab[i]])!=IGK_UNDEF)return !0;}return !1;},isItemSupportAll:function(e,tab){if(!e||!tab)return !1;for(var i=0;i<tab.length;i++){if(typeof(e[tab[i]])==IGK_UNDEF)return !1;}return !0;},getItemProperty:function(i,n){var g=prop_toextend||(function(){return prop_toextend={isFullScreen:["webkitIsFullScreen","mozFullScreen"],fullscreenElement:["webkitFullScreenElement","mozFullScreenElement"],fullscreenEnabled:["webkitFullScreenEnabled","mozFullScreenEnabled"]};})();if(n in i)return n;var tab=g[n];for(var m=0;m<tab.length;m++){if(tab[m]in i){return tab[m];}}return 0;}});function def_property(o,n){igk_defineProperty($igk(o),n,{get:function(){return o[igk.fn.getItemProperty(o,n)];}});}def_property(window.document,"isFullScreen");def_property(window.document,"fullscreenElement");def_property(window.document,"fullscreenEnabled");createNS("igk.ext",{call:function(name,p){return igk.invoke(name,p);},buildJSONData:function(t){if((t==null)||(typeof(t)==IGK_UNDEF))return "";var ob={};$igk(t).select(".dial-item").each_all(function(){var id=this.getAttribute("id");switch(this.o.tagName.toLowerCase()){case "select":ob[id]=this.o.value;break;default:var o=this.getAttribute("type")||"text";switch(o){case "checkbox":if(this.o.checked)ob[id]=this.o.value;break;default:ob[id]=this.o.value;break;}break;}});var s=JSON.stringify(ob);return s;}});var _colors={transparent:"Transparent",black:"#000",navy:"#00007F",darkblue:"#00008C",mediumblue:"#00C",blue:"#00F",darkgreen:"#006300",green:"#007F00",teal:"#007F7F",darkcyan:"#008C8C",deepskyblue:"#00BFFF",darkturquoise:"#00CED1",mediumspringgreen:"#00F999",lime:"#0F0",springgreen:"#00FF7F",aqua:"#0FF",cyan:"#0FF",midnightblue:"#191970",dodgerblue:"#1E8EFF",lightseagreen:"#21B2AA",forestgreen:"#218C21",seagreen:"#2D8C56",darkslategrey:"#2D4F4F",darkslategray:"#2D4F4F",limegreen:"#3C3",mediumseagreen:"#3DB270",turquoise:"#3FE0D1",royalblue:"#3F68E0",steelblue:"#4482B5",darkslateblue:"#473D8C",mediumturquoise:"#47D1CC",indigo:"#490082",darkolivegreen:"#546B2D",cadetblue:"#5E9EA0",cornflowerblue:"#6393ED",mediumaquamarine:"#6CA",dimgray:"#686868",dimgrey:"#686868",slateblue:"#6B59CC",olivedrab:"#6B8E23",slategrey:"#707F8E",slategray:"#707F8E",lightslategray:"#778799",lightslategrey:"#778799",mediumslateblue:"#7A68ED",lawngreen:"#7CFC00",chartreuse:"#7FFF00",aquamarine:"#7FFFD3",maroon:"#7F0000",purple:"#7F007F",olive:"#7F7F00",grey:"#7F7F7F",gray:"#7F7F7F",skyblue:"#87CEEA",lightskyblue:"#87CEF9",blueviolet:"#892BE2",darkred:"#8C0000",darkmagenta:"#8C008C",saddlebrown:"#8C4411",darkseagreen:"#8EBC8E",lightgreen:"#8EED8E",mediumpurple:"#9370D8",darkviolet:"#9300D3",palegreen:"#99F999",darkorchid:"#93C",yellowgreen:"#9C3",sienna:"#A0512D",brown:"#A52828",darkgrey:"#A8A8A8",darkgray:"#A8A8A8",lightblue:"#ADD8E5",greenyellow:"#ADFF2D",paleturquoise:"#AFEDED",lightsteelblue:"#AFC4DD",powderblue:"#AFE0E5",firebrick:"#B22121",darkgoldenrod:"#B7870A",mediumorchid:"#BA54D3",rosybrown:"#BC8E8E",darkkhaki:"#BCB76B",silver:"#BFBFBF",mediumvioletred:"#C61484",indianred:"#CC5B5B",peru:"#CC843F",chocolate:"#D1681E",tan:"#D1B58C",lightgrey:"#D3D3D3",lightgray:"#D3D3D3",palevioletred:"#D87093",thistle:"#D8BFD8",orchid:"#D870D6",goldenrod:"#D8A521",crimson:"#DB143D",gainsboro:"#DBDBDB",plum:"#DDA0DD",burlywood:"#DDB787",lightcyan:"#E0FFFF",lavender:"#E5E5F9",darksalmon:"#E8967A",violet:"#ED82ED",palegoldenrod:"#EDE8AA",lightcoral:"#EF7F7F",khaki:"#EFE58C",aliceblue:"#EFF7FF",honeydew:"#EFFFEF",azure:"#EFFFFF",sandybrown:"#F4A360",wheat:"#F4DDB2",beige:"#F4F4DB",whitesmoke:"#F4F4F4",mintcream:"#F4FFF9",ghostwhite:"#F7F7FF",salmon:"#F97F72",antiquewhite:"#F9EAD6",linen:"#F9EFE5",lightgoldenrodyellow:"#F9F9D1",oldlace:"#FCF4E5",red:"#F00",magenta:"#F0F",fuchsia:"#F0F",deeppink:"#FF1493",orangered:"#F40",tomato:"#FF6347",hotpink:"#FF68B5",coral:"#FF7F4F",darkorange:"#FF8C00",lightsalmon:"#FFA07A",orange:"#FFA500",lightpink:"#FFB5C1",pink:"#FFBFCC",gold:"#FFD600",peachpuff:"#FFD8BA",navajowhite:"#FFDDAD",moccasin:"#FFE2B5",bisque:"#FFE2C4",mistyrose:"#FFE2E0",blanchedalmond:"#FFEACC",papayawhip:"#FFEFD6",lavenderblush:"#FFEFF4",seashell:"#FFF4ED",cornsilk:"#FFF7DB",lemonchiffon:"#FFF9CC",floralwhite:"#FFF9EF",snow:"#FFF9F9",yellow:"#FF0",lightyellow:"#FFFFE0",ivory:"#FFFFEF",white:"#FFF"};createNS("igk.system.colors",{});for(var c in _colors){igk_defineProperty(igk.system.colors,c,{get:(function(c){return function(){return _colors[c];}})(c),configurable:false,enumerable:true});}createNS("igk.Number",{parseByte:function(i){if(i>255)return 255;if(i<0)return 0;return i;}});createNS("igk.system.color",{HSVtoColor:function(h,s,v){var r,g,b;var c=v*s;var x=c*(1- Math.abs(((h / 60.0)% 2)- 1));var m=v- c;if(h<60){r=c;g=x;b=0;}else if(h<120){r=x;g=c;b=0;}else if(h<180){r=0;g=c;b=x;}else if(h<240){r=0;g=x;b=c;}else if(h<300){r=x;g=0;b=c;}else{r=c;g=0;b=x;}return{r:igk.Number.parseByte(r*255),g:igk.Number.parseByte(g*255),b:igk.Number.parseByte(b*255)};}});function _setall(t,s){for(var i=0;i<t.length;i++){t[i]=s;}}createNS("igk.system.colors",{toFloatArray:function(n){var c;if(igk.isInteger(n)){c="#"+ n.toString(16);}else{c=igk.system.colors[n.toLowerCase()];}var t=new Float32Array(4);if(c){if(c[0]=="#"){var s=c.substring(1);switch(s.length){case 1:_setall(t,parseInt((s+ s),16)/ 255.0);break;case 3:t[0]=1.0;t[1]=parseInt((s[0]+ s[0]),16)/ 255.0;t[2]=parseInt((s[1]+ s[1]),16)/ 255.0;t[3]=parseInt((s[2]+ s[2]),16)/ 255.0;break;case 4:t[0]=parseInt((s[0]+ s[0]),16)/ 255.0;t[1]=parseInt((s[1]+ s[1]),16)/ 255.0;t[2]=parseInt((s[2]+ s[2]),16)/ 255.0;t[3]=parseInt((s[3]+ s[3]),16)/ 255.0;break;case 6:t[0]=1.0;t[1]=parseInt((s[0]+ s[1]),16)/ 255.0;t[2]=parseInt((s[2]+ s[3]),16)/ 255.0;t[3]=parseInt((s[4]+ s[5]),16)/ 255.0;break;case 8:t[0]=parseInt((s[0]+ s[1]),16)/ 255.0;t[1]=parseInt((s[2]+ s[3]),16)/ 255.0;t[2]=parseInt((s[4]+ s[5]),16)/ 255.0;t[3]=parseInt((s[6]+ s[7]),16)/ 255.0;break;}}}return{a:t[0],r:t[1],g:t[2],b:t[3]};}});createNS("igk.char",{isKeyCodeNumber:function(keyCode){return(keyCode>=46)&&(keyCode<69);},isChar:function(key){var t=/^[\w\d]$/.exec(key,true);return(t !=null);},isControl:function(keyCode){return(keyCode<=40);}});createNS("igk.datetime",{timeToMs:function(d){if(typeof(d)=='string'){d=igk_str_trim(d);if(igk.system.string.endWith(d,'s')){return parseInt(d.substr(0,d.length- 1)*1000);}return parseInt(d)+"ms";}if(typeof(d)=='number'){return parseInt(d)+"ms";}return 0;}});function __igk_get_activeXDocument(){var progIDs=["Msxml2.DOMDocument.6.0","Msxml2.DOMDocument.5.0","Msxml2.DOMDocument.4.0","Msxml2.DOMDocument.3.0","MSXML2.DOMDocument","MSXML.DOMDocument","htmlfile"];for(var i=0;i<progIDs.length;i++){try{return new ActiveXObject(progIDs[i]);}catch(e){};}return null;};function __new_activeDocumentObject(){var d=__igk_get_activeXDocument();if(!d)return null;return new(function(d){var m_d=d;igk_defineProperty(this,"async",{get:function(){return m_d.async;},set:function(v){m_d.async=v;}});igk_defineProperty(this,"readyState",{get:function(){return m_d.readyState;}});igk_defineProperty(this,"firstChild",{get:function(){return m_d;}});igk_appendProp(this,{load:function(f){return m_d.load(f);},loadXML:function(s){return m_d.loadXML(s);},onreadystatechange:null,addEventListener:function(method,func,capture){m_d["on"+ method]=func;},removeEventListener:function(method,func){m_d["on"+ method]=null;},toString:function(){return "[object://igk:activeXDocument]";}});})(d);}function __dom_get_root(e){var r=null;$igk(e).select(">>").each(function(){if(this.o.nodeType==1){r=this.o;return false;}return true;});return r;};function __replace_xml_doc(d,txt){var r=igk.dom.loadXML(txt);if(r){d.replaceChild(r,d.documentElement);}};var __html=0;var __body=0;createNS("igk.dom",{body:function(){if(__body && __body.parentNode){return __body;}__body=$igk(document).select('body').first();if(!__body)throw '[BJS] - body not yet loaded';return __body;},html:function(){if(!__html){var c=document.getElementsByTagName('html');if(c.length>0)__html=$igk(c[0]);}return __html;},replaceTagWith:function(q,tag){var d=igk.createNode(tag);d.setHtml(q.o.innerHTML);igk.dom.copyAttributes(q.o,d.o);igk.dom.replaceChild(q.o,d.o);return d;},rectContains:function(domRect,x,y){return((x>=domRect.x)&&(x<=domRect.right))&&((y>=domRect.y)&&(y<=domRect.bottom));},createXMLDocument:function(tagName){if(igk.navigator.$ActiveXObject()){return __igk_get_activeXDocument();}return igk.dom.createDocument(tagName||"xml");},activeXDocument:function(){return __new_activeDocumentObject();},createDocument:function(t,ns){t=t||"xml";var d=null;var m_cb=null;var cs=1;ns=ns||"http://www.w3.org/1999/xhtml";if(document.implementation){if(typeof(document.implementation.createDocument)!=igk.constants.undef){d=document.implementation.createDocument(null,t,null);}}else{if(igk.navigator.$ActiveXObject()){d=__new_activeDocumentObject();cs=0;}}if(d){if(cs && !d.load){d.load=function(l,callback){m_cb=callback;var fc=d.async ? function(xhr){var e=document.createEvent("HTMLEvents");e.initEvent("readystatechange",false,false);e.readyState=xhr.readyState;e.xhr=xhr;if((xhr.readyState==4)&&(xhr.status==200)){__replace_xml_doc(d,xhr.responseText);if(m_cb)m_cb();}d.dispatchEvent(e);}:null;var g=igk.ajx.get(l,null,fc,d.async,false,{});if(!d.async){__replace_xml_doc(d,g.xhr.responseText);}return d;};d.async=1;}else if(d.load && d.async){var bfc=d.load;d.load=function(l,callback){m_cb=callback;bfc.apply(this,[l]);return d;};__igk(d).reg_event("readystatechange",function(){if(m_cb &&((d.readyState=="complete")||(d.readyState==4))){m_cb();}});}}return d;},getPropertiesTab:function(t){var o=[];for(var i in t){if(typeof(t[i])=="function")continue;o[i]=t[i];}return o;},compare:function(tab,t){var o=[];var c={};for(var i in t){if(typeof(t[i])=="function")continue;o[i]=t[i];if(tab[i]!=o[i])c[i]=o[i];}return c;},replaceChild:function(target,node){if(target)target.parentNode.replaceChild(node,target);},copyAttributes:function(f,n,a){if((f==null)||(n==null)||(!n.hasAttributes))return;var j="";for(var i=0;i<f.attributes.length;i++){j=f.attributes[i];try{if((a !=null)&&(a[j.name]==1))continue;n.setAttribute(j.name,j.value);}catch(Exception){}}},transformXSL:function(xml,xsl){if(!xml||!xsl)return null;var ex=null;if(document.implementation && document.implementation.createDocument &&(typeof(XSLTProcessor)!=igk.constants.undef)){var xsltProcessor=new XSLTProcessor();xsltProcessor.importStylesheet(xsl);ex=xsltProcessor.transformToFragment(xml,document);if(ex){ex=__dom_get_root(ex);}}else if(igk.navigator.$ActiveXObject()||(xml.responseType=="msxml-document")){if(xml.responseType=="msxml-document"){ex=xml.transformNode(xsl);}else{var srcTree=new ActiveXObject("Msxml2.DOMDocument.6.0");srcTree.async=false;srcTree.loadXML($igk(xml.documentElement).getOuterHtml());if(srcTree.parseError.errorCode !=0)console.debug("srcTree : error code "+ srcTree.parseError.errorCode+" : "+ srcTree.parseError.reason);var xsltTree=new ActiveXObject("Msxml2.DOMDocument.6.0");xsltTree.async=false;xsltTree.validateOnParse=false;xsltTree.loadXML($igk(xsl.documentElement).getOuterHtml());if(xsltTree.parseError.errorCode !=0)console.debug("xsl : error code "+ xsltTree.parseError.errorCode+" : "+ xsltTree.parseError.reason);ex=igk.dom.loadXML(srcTree.transformNode(xsltTree));}}return ex;},transformXSLString:function(sxml,sxsl){var ex=null;if(igk.navigator.$ActiveXObject()){var srcTree=new ActiveXObject("Msxml2.DOMDocument.6.0");srcTree.async=false;srcTree.loadXML(sxml);if(srcTree.parseError.errorCode !=0){console.debug("srcTree : error code "+ srcTree.parseError.errorCode+" : "+ srcTree.parseError.reason);return 0;}var xsltTree=new ActiveXObject("Msxml2.DOMDocument.6.0");xsltTree.async=false;xsltTree.validateOnParse=false;xsltTree.loadXML(sxsl);if(xsltTree.parseError.errorCode !=0){console.debug("xsl : error code "+ xsltTree.parseError.errorCode+" : "+ xsltTree.parseError.reason);return 0;}ex=igk.dom.loadXML(srcTree.transformNode(xsltTree));}else{if(document.implementation && document.implementation.createDocument){var xsltProcessor=new XSLTProcessor();var xsl=igk.dom.loadXML(sxsl);var xml=igk.dom.loadXML(sxml);if(xsl && xml){var dsl=document.implementation.createDocument(null,'xml',null);dsl.replaceChild(xsl,dsl.documentElement);var dxl=document.implementation.createDocument(null,'xml',null);dxl.replaceChild(xml,dxl.documentElement);xsltProcessor.importStylesheet(dsl);ex=xsltProcessor.transformToFragment(dxl,document);}}}return ex;},transformXSLUri:function(u_xml,u_xsl,callback){var doc=igk.dom.createDocument();var ex=null;if(callback){doc.async=true;doc.load && doc.load(u_xml,function(evt){var doc2=igk.dom.createDocument();doc2.async=false;doc2.validateOnParse=false;var xsl=doc2.load(u_xsl);var _ch=igk.navigator.isChrome()||igk.navigator.isSafari();if(_ch){var dh=null;dh=doc2.getElementsByTagName("html");if(dh.length==1){$igk(dh[0]).replaceTagWith("igk-html");}}ex=igk.dom.transformXSL(doc,xsl);if(_ch &&(ex.tagName.toLowerCase()=="igk-html")){ex=$igk(ex).replaceTagWith("html").o;$igk(ex).select(" igk-th,igk-td,igk-tr,igk-table").each(function(){this.replaceTagWith(this.o.tagName.substring(4).toLowerCase());return true;});}ex && callback(ex);});}else{doc.async=false;doc.load && doc.load(u_xml,function(evt){var doc2=igk.dom.createDocument();doc2.async=false;var xsl=doc2.load(u_xsl);ex=igk.dom.transformXSL(doc,xsl);});return ex;}},loadXML:function(s){var r=null;var _ch=igk.navigator.isChrome()||igk.navigator.isSafari();if(_ch){s=s.replace(/(\<(\/)?)(html|table|th|tr|td)( [^>]+)?>/gi,'$1igk-$3$4>',s);}if("DOMParser" in window){var g=(new window.DOMParser()).parseFromString(s,"text/xml");r=__dom_get_root(g);if(r && r.tagName.toLowerCase()=="parsererror"){return null;}}else{r=igk.dom.activeXDocument();r.load(s);}return r;}});(function(){var m_xsltransform=[];createNS("igk.dom.xslt",{initTransform:function(){var p=$igk(igk.getParentScript());if(!p){return;}var _s_ns=igk.system.string;var _x=p.select('.xml').first();var _y=p.select('.xslt').first();var _g=0;if(_x && _y){var _sxml=_s_ns.rmComment(_x.getHtml());var _sxsl=_s_ns.rmComment(_y.getHtml());var _dxsl=_sxsl;var opts=igk.JSON.parse(_y.getAttribute("xslt:data"));var rgx=0;if(opts){for(var s in opts){rgx=new RegExp("%"+ s+"%","g");_dxsl=_dxsl.replace(rgx,opts[s]);}}try{_g=igk.dom.transformXSLString(_sxml,_dxsl);_y.remove();if(_g)p.o.replaceChild(_g,_x.o);var _callback=0;var o={xml:_sxml,xsl:_sxsl,type:"xmltransform",idx:m_xsltransform.length,options:opts,initResult:function(callback){callback(p);_callback=callback;},reload:function(opts){console.debug("reload");console.debug(opts);var c=this.idx;var _dxsl=_sxsl;if(opts){for(var s in opts){rgx=new RegExp("%"+ s+"%","g");_dxsl=_dxsl.replace(rgx,opts[s]);}}var _tg=igk.dom.transformXSLString(_sxml,_dxsl);p.setHtml('').add(_tg);_g=_tg;_callback(p);}};m_xsltransform.push(o);return o;}catch(ex){console.error(ex);}}}});igk.appendProperties(igk.dom.xslt.initTransform,{lastTransform:function(){if(m_xsltransform.length>0)return m_xsltransform[m_xsltransform.length- 1];return null;}});})();function igk_form_geturi(frm){var u=$igk(frm).getAttribute("igk-ajx-form-uri");if(u)return u;return frm.getAttribute("action");};function igk_form_ajx_getfunc(frm){var s=$igk(frm).getAttribute("igk-ajx-form-target");var q=null;if(s){q=$igk(s).first();}if(q && !q.isSr()){return igk.ajx.fn.replace_content(q.o);}return null;};function igk_form_submit(frm){if(frm){var ajxform=$igk(frm).getAttribute("igk-ajx-form");if(ajxform){ns_igk.ajx.postform(frm,igk_form_geturi(frm),igk_form_ajx_getfunc(frm));}else{frm.submit();}}}createNS("igk.form",{keypress_validate:function(i,event){var frm=null;if(event.keyCode==13){event.preventDefault();frm=window.igk.getParentByTagName(i,'form');igk_form_submit(frm);return !1;}return !0;},submitonclick:function(l){var q=window.igk.getParentByTagName(l,'form');if(q){igk_form_submit(q);return !1;}return !0;},confirmLink:function(e,msg){var f=igk.getParentByTagName(e,'form');if(f){if(confirm(msg)){f.action=''+ e.href;f.confirm.value=1;f.submit();}}},updateTarget:function(form,cibling){if(!cibling||!form)return;var q=form;for(var i in cibling){if(typeof(q[i])!='undefined' &&(q[i].type !='undefined')){switch(q[i].type){case "checkbox":case "radio":if(q[i].checked)cibling[i]=q[i].value;else cibling[i]='';break;default:cibling[i]=q[i].value;break;}}}},posturi:function(uri,method){var frm=igk.createNode("form");frm.setCss({"display":"none"});igk.dom.body().appendChild(frm.o);frm.o.method=method ? method :"POST";frm.o.action=uri;frm.o.submit();},form_tojson:function(form){if(!form)return null;var p=[];var e=null;var k="";for(var i=0;i<form.length;i++){e=form.elements[i];k=e.id;if(!k)continue;if(igk.system.string.endWith(k,"[]")){k=igk.system.string.remove(k,k.length- 2,2);if(typeof(p[k])=="undefined"){p[k]=[];}}switch(e.type){case "radio":case "checkbox":var vv=e.value;if(!e.checked){vv="";}if(p[k]){var m=p[k];if(typeof(m)!="string"){m.push(vv);p[k]=m;}else{var t=[];t.push(m);t.push(vv);p[k]=t;}}else p[k]=vv;break;case "file":break;default:if(p[k]){var m=p[k];if(typeof(m)!="string"){m.push(e.value);p[k]=m;}else{var t=[];t.push(m);t.push(e.value);p[k]=t;}}else{p[k]=e.value;}break;}}e=0;var msg="";for(var i in p){if(e !=0)msg+=",";if(p[i].push)msg+=i+":["+ p[i]+"]";else msg+=i+":"+ p[i];e=1;}return "{"+ msg+"}";},parse:function(frm){var m="";m=igk_get_form_posturi(frm);return m;}});createNS("igk.form.ajxform",{submit:function(frm){ns_igk.ajx.postform(frm,igk_form_geturi(frm),function(xhr){if(this.isReady()){var v=$igk(frm).select(".response").first();if(v){igk.ajx.fn.replace_content(v.o);}else{igk.ajx.fn.replace_or_append_to_body.apply(this,[xhr]);}}});}});createNS("igk.web",{setcookies:function(name,value,exdays,path,domain){var exdate=new Date();if(exdays)exdate.setDate(exdate.getDate()+ exdays);var c_value=escape(value)+ ((exdays==null)? "" :"; expires="+ exdate.toUTCString());c_value+="; SameSite=Strict";if(path)c_value+="; Path="+ path;domain=domain||'.'+ document.location.hostname;if(domain){c_value+='; Domain='+ domain;}c_value+='; Secure';document.cookie=name+"="+ c_value;},getcookies:function(name){var c_value=document.cookie;var c_start=c_value.indexOf(" "+ name+"=");if(c_start==-1){c_start=c_value.indexOf(name+"=");}if(c_start==-1){c_value=null;}else{c_start=c_value.indexOf("=",c_start)+ 1;var c_end=c_value.indexOf(";",c_start);if(c_end==-1){c_end=c_value.length;}c_value=unescape(c_value.substring(c_start,c_end));}return c_value;},clearcookies:function(){document.cookie=null;},rmcookies:function(name){var s=document.cookie+"";var i=s.indexOf(name);if(i>=0){document.cookie=name+"=;expires=-10";}}});createNS("igk.web.storage",{get:function(k,v){if(window.sessionStorage){return window.sessionStorage[k]||v;}},set:function(k,v){if(window.sessionStorage){window.sessionStorage[k]=v;}},getLocal:function(k,v){if(window.localStorage){return window.localStorage[k]||v;}},storeLocal:function(k,v){if(window.localStorage){window.localStorage[k]=v;}}});(function(){if(typeof(Event)==IGK_UNDEF){Event={prototype:{},toString:function(){return "[object igk.event]";}};}if((typeof(Event.prototype.preventDefault)==IGK_UNDEF)){Event.prototype.preventDefault=function(){};}return !0;})();var m_currentModule=null;var m_module_info=null;var m_module_loaded={};var m_moduleList={};function igk_get_trace_info(_m,e,c){if(e.stack){var s=e.stack+"";var t=s.trim().split("\n");var li=[];var regex=new RegExp("((ftp|http|https)://([^:]+:[0-9]+(/([^:]+))?|[^:]+))");for(var i=0;i<t.length;i++){if(regex.test(t[i])){li.push(t[i]);}}c=c||li.length- 1;var tt=li[c];if(tt){var uri=regex.exec(tt)[0];_m.module_src=uri;_m.dir=uri.substring(0,uri.lastIndexOf("/"));}_m.stack=e.stack;_m.stack_list=li;}else{var src=igk_getScriptSrc();if(src !=null){_m.modedule_src=src;_m.dir=src.substring(0,src.lastIndexOf("/"));}else{console.error("/!\\ cant get module path"+ igk_getScriptSrc());return 0;}}return 1;}function igk_defineModule(n){m_currentModule=n;var e=new Error();var _m={name:n,module_src:null,dir:null};igk.error.lastError=e;var v_script=document.currentScript;if(v_script){var u=(v_script.src+"");_m.initScript=v_script;_m.dir=u.substring(0,u.lastIndexOf("/"));m_moduleList[n]=_m;m_module_info=_m;}else{if(igk_get_trace_info(_m,e,1)){m_module_info=_m;m_moduleList[n]=_m;}else{m_module_info=null;}}return _m;};function igk_getModule(n){n=n||m_currentModule;return m_moduleList[n];};function igk_getScriptSrc(){var g=document.scripts;if(g){return g[g.length- 1].src;}return null;};m_LibScript=igk_getScriptSrc();function createObject(T,t,args){for(var j in T.prototype){if(j in t){var check=window.Object.getOwnPropertyDescriptor(t.prototype,j);if(check && !check.writable){continue;}}t[j]=T.prototype[j];}T.apply(t,args);};createNS("igk.system",{createExtensionProperty(p,ns,obj){var prop=ns;var _n=igk_get_namespace(ns);if(typeof(_n)=="undefined"){_n=createNS(prop,{});}if(typeof(_n[p])=="undefined"){var ob=new __extensionPrototype(p);igk_defineProperty(_n,p,{get:function(){return ob;}});}if(obj)Object.setPrototypeOf(obj,_n[p]);return _n[p];},defineOption(n,ob){let op=igk.system.createNS(n,ob);return op;},stringProperties:function(o){var m="";var k=0;for(var i in o){if(typeof(o[i])=="function")continue;if(k==1)m+=",";m+=i+":"+ o[i];k=1;}return m;},createNS(){return createNS.apply(this,arguments);},createPNS:createPNS,getScriptSrc:igk_getScriptSrc,appendProp:igk.appendProperties,module(){return igk_defineModule.apply(this,arguments);},isClass(o,t,opts){var r=o instanceof igk_namespace;if(t)throw opts.msg;return r;},isInherit(o,A){if(!o||(typeof(o)!='object'))return false;var c=Object.getPrototypeOf(o);while(c){if(c==A){return true;}c=c.prototype;if(c==Object)break;}return false;},createClass(ns,tn,constructor,opts){if(!igk.system.class){igk.system.class=function(){};}if(!constructor){console.error("createClass constructor required");return null;}var p=null;if(typeof(tn)=='object'){var g=tn;tn=g.name;p=g.parent;if(('parent' in g)&& !igk.isDefine(p)){throw("[igk] - parent not found for "+ g.name+" "+ p);}}var fc=0;fc=function(){if(this==ns){throw(opts ? opts.msg :null)||igk.R.gets("<< new >> operator is require");}if(p){createObject(p,this,arguments);}constructor.apply(this,arguments);igk.appendProperties(this,{getTypeFullName:function(){return ns.fullname+'.'+ tn;},getType:function(){return tn;},isInstanceOf:function(t){return igk.system.isInherit(this,t);}});};fc.Name=tn;fc.__source__='class';fc.__name__=tn;igk.defineProperty(fc,'fullname',{get:function(){return ns.fullname+'.'+ tn;}});fc.__fullname__=ns.fullname+'.'+ tn;if(typeof(p)=='string'){var r=igk.system.getNS(p);if(r==null){var bfc=fc;fc=function(){var k=igk.system.getNS(p);if(k){bfc.prototype=k;ns[tn]=bfc;}else{throw("not found : "+ p);}p=k;return new bfc();};}else{p=r;fc.prototype=p;}}else{if(p){fc.prototype=p;}}igk.system.createNS(ns.fullname,{tn:fc});igk.defineProperty(fc,'name',{get:function(){return tn;}});ns[tn]=fc;return fc;},createClassList:function(ns,e){if(!ns)return 0;var g=0;for(var i in e){if(typeof(g=e[i])=="function"){ns[i]=igk.system.createClass(ns,i,g);}}},getClassList:function(ns){if(typeof(ns)=='string')ns=igk.system.getNS(ns);var tab=[];for(var s in ns){if(typeof(ns[s])=='function' &&(ts=ns[s].__source__)&&(ts=='class')){tab.push({name:s,ns:ns.fullname,func:ns[s]});}}return tab;},getBindFunctions:function(n){var r={};if(typeof(n)=='object'){for(var i in n){if(typeof(n[i])=='function')r[i]=n[i].bind(n);}}return r;},evalScript:function(item){if(item==null)return;var t=item.getElementsByTagName("script");for(var i=0;i<t.length;i++){igk.evalScript(t[i].innerHTML,t[i].parentNode,t[i]);}},toString:function(){return "igk.system";},getNS:igk_get_namespace,require:function(n){var t=igk_get_namespace(n);if(!t)throw new Error('namespace '+ n+' not found');return t;},include:function(u){var src=null;igk.ajx.post(u,null,function(xhr){if(this.isReady()){src=xhr.responseText;if(src)igk_eval(src);}});}});createNS("igk.system.diagnostic",{traceinfo:igk_get_trace_info,debug:function(m){console.debug(m);},assert:function(c,m){if(c)console.assert(c,m);}});function _s(t){if((t+"").length<=1)return "0"+ t;return t;};(function(){var _cnode=0;var S=igk.system;var _CNS=igk.system.color||{};function __ColorClass(r,g,b,a){this.r=r;this.g=g;this.b=b;this.a=a ? a :1.0;igk.appendProperties(this,{toString:function(){var r=this.r;var g=this.g;var b=this.b;var a=this.a;if(a==1.0)return "rgb("+ r+","+ g+","+ b+")";return "rgba("+ r+","+ g+","+ b+","+ a+")";},toHtml:function(){var r=this.r;var g=this.g;var b=this.b;var a=this.a;var decColor=(r<<16)+ (g<<8)+ b;if(decColor==0)if(this.a==0)return "#00000000";else return "#000";return "#"+ decColor.toString(16).padStart(6,'0');},toColorf:function(p){var _r=Math.round;p=Math.pow(100,(p||5));return{a:1.0,r:_r((this.r / 255.0)*p)/ p,g:_r((this.g / 255.0)*p)/ p,b:_r((this.b / 255.0)*p)/ p};},toInt:function(){return(this.r<<16)+ (this.g<<8)+ this.b;},getLuminance:function(){var r,g,b,cl=this;r=cl.r;g=cl.g;b=cl.b;return((r*299)+ (g*587)+ (b*114))/ (255*1000.0);}});};igk.appendProperties(__ColorClass,_CNS);igk.appendProperties(igk.system,{color:__ColorClass,colorGetA:function(v){if(!v)return 0;if(typeof(v)=='string'){if(v.toLowerCase()=="transparent"){return 0;}if(/^#/.exec(v)){v=v.substring(1);switch(v.length){case 8:var result=/^([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(v);return Math.round(parseInt(result[1],16)*100/ 255)/ 100;break;case 4:var result=/^([a-f\d]{1})([a-f\d]{1})([a-f\d]{1})([a-f\d]{1})$/i.exec(v);return Math.round(parseInt(result[1]+ result[1],16)*100/ 255)/ 100;break;}}}return 1;},colorFromString:function(value){var r=0;var g=0;var b=0;var a=1.0;if(value){var t=/rgb\(([^\)])+\)/.exec(value,"i");if(t){var rgb=value.substring(4,value.length- 1).replace(/ /g,'').split(',');r=parseInt(rgb[0]);g=parseInt(rgb[1]);b=parseInt(rgb[2]);}else if((t=/rgba\(([^\)])+\)/.exec(value,"i"))){var rgb=value.substring(5,value.length- 1).replace(/ /g,'').split(',');r=parseInt(rgb[0]);g=parseInt(rgb[1]);b=parseInt(rgb[2]);a=parseFloat(rgb[3]);}else if(/^#/.exec(value)){value=value.substring(1);switch(value.length){case 6:var result=/^([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(value);r=parseInt(result[1],16);g=parseInt(result[2],16);b=parseInt(result[3],16);break;case 8:var result=/^([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(value);a=parseInt(result[1],16)/ 255.0;r=parseInt(result[2],16);g=parseInt(result[3],16);b=parseInt(result[4],16);break;case 4:var result=/^([a-f\d]{1})([a-f\d]{1})([a-f\d]{1})([a-f\d]{1})$/i.exec(value);a=parseInt(result[1]+ result[1],16)/ 255.0;r=parseInt(result[2]+ result[2],16);g=parseInt(result[3]+ result[3],16);b=parseInt(result[4]+ result[4],16);break;case 3:var result=/^([a-f\d]{1})([a-f\d]{1})([a-f\d]{1})$/i.exec(value);r=parseInt(result[1]+ result[1],16);g=parseInt(result[2]+ result[2],16);b=parseInt(result[3]+ result[3],16);break;}}else{if(igk.system.color[value.toLowerCase()]){return igk.system.colorFromString(igk.color[value.toLowerCase()]);}}}return new igk.system.color(r,g,b,a);},colorfFromString:function(value){return igk.system.colorFromString(value).toColorf();},hsl2rgb:function(h,l,v){if(!_cnode){_cnode=igk.createNode("div");if(igk.navigator.getProperty('cssDomRequire'))igk.dom.body().add(_cnode);}_cnode.setCss({backgroundColor:'hsl('+ h+','+ l+'%, '+ v+'%)'});return S.colorFromString(_cnode.getComputedStyle('backgroundColor'));},hsl2rgbf:function(h,l,v){if(!_cnode){_cnode=igk.createNode("div");}_cnode.setCss({backgroundColor:'hsl('+ h+','+ l+'%, '+ v+'%)'});return S.colorfFromString(_cnode.getComputedStyle('backgroundColor'));},rgb2hsl:function(r,g,b){var min;var max;var delta;var r=r / 255.0;var g=g / 255.0;var b=b / 255.0;var h;var s;var v;min=Math.min(Math.min(r,g),b);max=Math.max(Math.max(r,g),b);v=max;delta=max- min;if(max==0 ||delta==0){s=0;h=0;}else{s=delta / max;if(r==max){h=(g- b)/ delta;}else if(g==max){h=2+ (b- r)/ delta;}else{h=4+ (r- g)/ delta;}}h*=60;if(h<0){h+=360;}return{h:h,s:(s*100),l:(v*100)};}});})();createNS("igk.system.Date",{format:function(date,format){var _date=new Date(date);var s=format;s=s.replace(/(Y|m|d|H|i|s)/g,function(m){switch(m){case "Y":return _date.getFullYear();case "m":return _s(_date.getMonth()+ 1);case "d":return _s(_date.getDate());case "H":return _s(_date.getHours());case "i":return _s(_date.getMinutes());case "s":return _s(_date.getSeconds());}});return s;}});function _baseUri(){const{protocol,host}=document.location;return protocol+"//"+ host;};createNS("igk.system.module",{load:function(n,callback,base){var _m=m_module_info;var _s=null;if(!base &&(!_m||!_m.dir))return;const _uri=(base ? _baseUri():_m.dir)+ n;if(_m && !(n in m_module_loaded)){m_module_loaded[n]=1;var q=igk.createNode("script");q.setAttribute("defer",1);if(document.head)$igk(document.head).add(q);q.reg_event("load",function(evt){if(callback){callback(q);}});q.o.src=_uri;}},getFileUri:function(f){if(igk.validator.isUri(f))return f;var _m=m_module_info;return _m.dir+ f;},getModuleLocation:function(){return m_module_info ? m_module_info.dir :null;},getModule:igk_getModule});igk.defineProperty(igk.system.module,"loadedModules",{get:function(){return m_module_loaded;}});igk.defineProperty(igk.system.module,"currentModuleInfo",{get:function(){return m_module_info;}});var _app_link=null;createNS("igk.system.apps",{});igk.defineProperty(igk.system.apps,"link",{get:function(){return _app_link;}});createNS("igk.system.styles",{textShadow:function(x,y,offset,color){this.x=x;this.y=y;this.offset=offset,this.color=igk.system.createFromString(color);this.toString=function(){return "igk.system.styles.textshadow";};},textShadowCreate:function(s){if(s=="none"){return new igk.system.styles.textShadow(0,0,0,"transparent");}else{var tab=s.split(" ");if(tab.length==4){return new igk.system.styles.textShadow(igk.getNumber(tab[0]),igk.getNumber(tab[1]),igk.getNumber(tab[2]),tab[3]);}return null;}}});var m_lastError;createNS("igk.error",{});igk_defineProperty(igk.error,"lastError",{get:function(){return m_lastError;},set:function(v){m_lastError=v;}});createNS("igk.system.collections",{list:function(){var m_list=[];igk.appendProperties(this,{getCount:function(){return m_list.length;},toString:function(){return "igk.system.collections.list#"+ this.getCount()},add:function(item){m_list.push(item);},clear:function(){if(this.getCount()>0){m_list=[];}},remove:function(item){var cp=[];var c=false;for(var s=0;s<m_list.length;s++){if(m_list[s]==item)continue;cp.push(m_list[s]);c=!0;}m_list=cp;return c;},removeAt:function(index){var cp=[];var c=false;for(var s=0;s<m_list.length;s++){if(s==index)continue;cp.push(m_list[s]);c=!0;}m_list=cp;return c;},indexOf:function(item){if(!item)return-1;for(var i=0;i<this.getCount();i++){if(m_list[i]==item){return i;}}return-1;},getItemAt:function(index){if((index>=0)&&(index<this.getCount()))return m_list[index];return null;},to_array:function(){var t=[];for(var i=0;i<this.getCount();i++){t.push(m_list[i]);}return t;},contains:function(item){if(!item)return !1;for(var i=0;i<this.getCount();i++){if(m_list[i]==item){return !0;}}return !1;},forEach:function(callback){if(callback){var c=this.getCount();for(var i=0;i<c;i++){callback(m_list[i],i);}}return this;}});},dictionary:function(){var m_keys=new igk.system.collections.list();var m_values=new igk.system.collections.list();var m_index=-1;var m_ck=null;var m_cv=null;igk.appendProperties(this,{it:function(){m_index=0;m_ck=null;m_cv=null;},clear:function(){m_keys.clear();m_values.clear();m_ck=null;m_cv=null;m_index=0;},moveNext:function(){if(m_index<this.getCount()){m_ck=m_keys.getItemAt(m_index);m_cv=m_values.getItemAt(m_index);m_index++;return !0;}else{m_ck=null;m_cv=null;return !1;}},getcurrentKey:function(){return m_ck;},getcurrentValue:function(){return m_cv;},toString:function(){return "igk.system.collections.dictionary#[count:"+ this.getCount()+"]";},getKeys:function(){return m_keys.to_array();},getValues:function(){return m_values.to_array();},containKey:function(key){return(m_keys.indexOf(key)!=-1);},getItem:function(key){var i=m_keys.indexOf(key);if(i==-1)return null;return m_values.getItemAt(i);},getCount:function(){return m_keys.getCount();},add:function(key,value){if(!key)return;var i=m_keys.indexOf(key);if(i==-1){m_keys.add(key);m_values.add(value);}},remove:function(key){var i=m_keys.indexOf(key);if(i !=-1){m_keys.removeAt(i);m_values.removeAt(i);return 1;}return 0;}});}});createNS("igk.system.array",{isContain:function(t,u){if(t){if(t.contains){return t.contains(u);}else{for(var i=0;i<t.length;i++){if(t[i]==u)return !0;}}}return !1;},slice:function(tab,startindex){var v_otab=[];for(var i=startindex;i<tab.length;i++){v_otab.push(tab[i]);}return v_otab;},sort:function(tab){if(tab){if(tab && Array && Array.sort){return Array.sort(tab);}else if(tab.sort){tab.sort(function(a,b){var ta=typeof(a);var tb=typeof(b);if(ta==tb){switch(ta){case 'number':if(a<b)return-1;if(a==b)return 0;return 1;break;default:break;}}return(a+'').localeCompare(b+'');});}return tab;}}});function _CustomEvent(event,params){params=params||{bubbles:false,cancelable:false,detail:undefined};var evt=document.createEvent('CustomEvent');evt.initCustomEvent(event,params.bubbles,params.cancelable,params.detail);return evt;}createNS("igk.winui.events",{raise:function(t,n){if(igk.Event){var evt=igk.Event.createEvent(n);if(arguments.length>2){igk.appendProperties(evt,arguments[2]);}t.dispatchEvent(evt);return;}if(window.Event){try{var evt=new Event(n);if(arguments.length>2){igk.appendProperties(evt,arguments[2]);}t.dispatchEvent(evt);createNS("igk.Event",{createEvent:function(n){return new Event(n);}});}catch(ex){createNS("igk.Event",{createEvent:function(n){return new _CustomEvent(n,null);}});var evt=igk.Event.createEvent(n);if(arguments.length>2){igk.appendProperties(evt,arguments[2]);}t.dispatchEvent(evt);}}},createEvent:_CustomEvent,regKeyPress:function(fc){igk_winui_reg_event(document,"keypress keyup",fc);},unregKeyPress:function(fc){igk.winui.unreg_event(document,"keypress keyup",fc);},global:function(){if(!__global){__global=document.createElement('div');$igk(__global).addEvent('igk_controller_ready',{});}return __global;},clean:function(item,n){let w=$igk(item);let e=w.o[n];if(e &&(e.constructor.name=='Event')){w.unreg_event(n);w.o[n]=null;}}});(function(){var maillink=null;createNS("igk.mail",{sendmail:function(mail){if(maillink==null)maillink=igk.createNode('a');var a=maillink;a.o.href='mailto:'+ mail;igk.dom.body().appendChild(a.o);a.o.click();}});})();(function(){var m_iframes=[];function _get_loaded_text(item){var c="";if(item){try{if(item.contentDocument)item=item.contentDocument;else if(item.object){item=item.object;}}catch(ex){}if(item.childNodes==null)return;var x=item.childNodes.length;for(var i=0;i<x;i++){if(item.childNodes[i]){c+=$igk(item.childNodes[i]).getOuterHtml();}}}return c;};createNS("igk.file",{getcontents:function(uri,callback,async){if(uri==null)return null;var c="";if(typeof(async)==IGK_UNDEF)async=!0;if(!async){igk.ajx.get(uri,null,function(xhr){if(this.isReady()){callback.apply(window,[xhr.responseText]);}},false);return;}var wait=!0;var q=igk.createNode("iframe");q.addClass("no-vibility").setAttribute("src",uri).setAttribute("async",false).reg_event("load",function(e){wait=false;e.preventDefault();c=_get_loaded_text(q.o);q.o.parentNode.removeChild(q.o);if(callback)callback.apply(window,[c]);});if(document.head){document.head.appendChild(q.o);}else{console.debug('c = ');var h=document.getElementsByTagName('head')[0];if(h)h.appendChild(q.o);}},get_loaded_text:_get_loaded_text});})();function __ctrl_ctr(){this.name="ctrl";};createNS("igk.html.ctrl",{ctrl:__ctrl_ctr,checkbox:new(function(){__ctrl_ctr.apply(this);igk_appendProp(this,{toggle:igk_check_all,init:function(t,c){igk.html.ctrl.checkbox.toggle(t,$igk(t).getParentByTagName('table'),t.checked,true,c);},toString:function(){return "[igk.Obj igk.html.ctrl.checkbox]";}});})(),btn:new(function(){igk_appendProp(this,{toString:function(){return "[igk.Obj igk.html.ctrl.btn]";}});})()});createNS("igk.system.string",{split:function(str,ch){var i=0;var r=[];var w="";while(i<str.length){if(str[i]==ch){r.push(w);w="";}else w+=str[i];i++;}if(w.trim().length>0){r.push(w);}return r;},rmComment:function(s){var vi=s.substr(4);return vi.substring(0,vi.length- 3);}});var _str_=window.String.prototype;if(!_str_.padStart){_str_.padStart=function(n,s){var g="";while(this.length<n){n--;g+=s;}return g+ this;};}createNS("igk.system.regex",{item_match_class:igk_item_match_class,item_inherit_class:igk_item_inherit_class,split:function(pattern,v){var q=new RegExp(pattern);var s=new RegExp("^("+ pattern+")+$");if(igk.isUndef(v)){throw "is undefr(is undef "+ pattern;return v;}if(!v.match(s)){return[v];}var r=[];while((v.length>0)&& v.match(q)){r.push(RegExp.$1);v=v.replace(q,"");}return r;}});createNS("igk.system.fonts",{installFont:function(a,uri){var s=a.getAttribute('igk-font-name');uri=uri+'&n='+ s;var frm=$igk(a).getParentForm();s=a.getAttribute("id");var top=a.offsetParent.scrollTop;igk.ajx.get(uri,null,function(xhr){if(this.isReady()){var i=igk.createNode("dummy");this.setResponseTo(i.o);var n=i.select("form").first();if(n){if(n.o.parentNode){n.o.parentNode.replaceChild(n,frm);}else{console.debug(";-) No parent found for "+ frm);}n.select("#"+ s).each(function(){this.o.offsetParent.scrollTop=top;return !1;});if(igk.system.apps.link)igk.system.apps.link.reload();}}});}});function igk_animate(callback){var animFrame=igk.animation.getAnimationFrame();var animObj={cancel:function(){igk.html.canva.cancel(this.id);}};function __doCall(){if(callback(1000/ 60)){setTimeout(__doCall,1000/ 60);}};function __runCall(){if(callback()){animObj.id=animFrame(__runCall);}};if(typeof(animFrame)=="undefined"){__doCall();}else{animObj.id=animFrame(__runCall);return animObj;}};function igk_animate_cancel(id){var _canimFrame=igk.animation.getAnimationCancelFrame();if(_canimFrame){return _canimFrame(id);}};function igk_create_event_ojectManager(){var m_obj=new igk.system.collections.list();var m_value=new igk.system.collections.list();var m_key=null;var m_ukey=null;var m_unreg=0;igk.appendProperties(this,{raise:function(item,method){if(!item)return;m_key=item;var i=m_obj.indexOf(item);if(i !=-1){var dic=m_value.getItemAt(i);if(dic.containKey(method)){var funcs=dic.getItem(method).funcs;var args=[item[method]];for(var s=0;s<funcs.getCount();s++){funcs.getItemAt(s).apply(item,args);}}}},register:function(item,method,func){if(!item||!func||(typeof(func)!=IGK_FUNC)||(m_key==item))return;m_key=item;var i=m_obj.indexOf(item);var o=null;if(i==-1){o={target:item,funcs:new igk.system.collections.list(),method:method};o.funcs.add(func);var dic=new igk.system.collections.dictionary();dic.add(method,o);m_obj.add(item);m_value.add(dic);}else{var dic=m_value.getItemAt(i);if(dic){if(dic.containKey(method)){dic.getItem(method).funcs.add(func);}else{var o={target:item,funcs:new igk.system.collections.list(),method:method};o.funcs.add(func);dic.add(method,o);}}}m_key=null;},unregister:function(item,method,func){if(m_unreg)return m_unreg=1;var o=null;if(item==window)o=item;else o=$igk(item).o;if((!item)||(m_ukey==item))return;m_ukey=item;var i=m_obj.indexOf(o);var dic=null;if(i !=-1){dic=m_value.getItemAt(i);var tab=dic.getValues();if(method){if(typeof(func)=='undefined'){for(var t=0;t<tab.length;t++){if(tab[t].method==method){var c=tab[t].funcs.to_array();for(var x=0;x<c.length;x++){igk.winui.unreg_event(o,tab[t].method,c[x]);}dic.remove(method);continue;}}}else{for(var t=0;t<tab.length;t++){if(tab[t].method==method){var c=tab[t].funcs.to_array();for(var x=0;x<c.length;x++){if(c[x]==func){igk.winui.unreg_event(o,tab[t].method,c[x]);}}continue;}}}m_ukey=null;m_unreg=0;return;}for(var t=0;t<tab.length;t++){var c=tab[t].funcs.to_array();for(var x=0;x<c.length;x++){igk.winui.unreg_event(o,tab[t].method,c[x]);}}m_obj.removeAt(i);m_value.removeAt(i);}m_unreg=0;m_ukey=null;},toString:function(){return "igk.winui.eventObjectManager";},unregister_child:function(q){if(q)$igk(q).select("*").each(function(){this.unregister();return !0;});}});return this;};function igk_winui_get_event_handler(method){if(typeof(this.eventRegister)==IGK_UNDEF){this.eventRegister=new function(){this.m_manager={};igk.appendProperties(this,{getMethod:function(name){if(typeof(this.m_manager[name])!=IGK_UNDEF){return this.m_manager[name];}return null;},registerEvent:function(name,obj){if(typeof(this.m_manager[name])==IGK_UNDEF){this.m_manager[name]=obj;}},toString:function(){return "method register ";}});};igk.system.createNS("igk.winui.events",{register:this.eventRegister,exceptionEvent:new(function(){var m_t={};m_t["mouseleave"]={replace:"mouseout"};igk.appendProperties(this,{contain:function(m){return typeof(m_t[m])!=IGK_UNDEF;},getMethod:function(m){if(typeof(m_t[m])!=IGK_UNDEF){return m_t[m].replace;}return null;},toString:function(){return "[object igk.winui.events.exceptionEvent]";}});})()});}return this.eventRegister.getMethod(method);};function igk_winui_reg_system_event(item,method,func,useCapture){if(item==null)return !1;if(typeof(item[method])==igk.constants.undef){if(item["on"+ method]+""==igk.constants.undef){var e=igk.winui.events.exceptionEvent;if(e.contain(method)){return igk_winui_reg_system_event(item,e.getMethod(method),func,useCapture);}console.debug("/!\\ can't register event on"+ method);return !1;}}if(item.addEventListener){var t=item.addEventListener(method,func,typeof(useCapture)=='object' ? useCapture :false);igk.winui.getEventObjectManager().register(item,method,func);return !0;}else if(item.attachEvent){if(igk.DEBUG){console.debug("attachevent "+ method);}if(igk.navigator.IEVersion()==7){var ftp=function(evt){evt.preventDefault=function(){};func.apply(item,[evt]);};item.attachEvent("on"+ method,ftp);igk.winui.getEventObjectManager().register(item,method,ftp);}else{var p=item.attachEvent("on"+ method,func);igk.winui.getEventObjectManager().register(item,method,func);if(method=="igk-trackchange"){$igk(item).raiseEvent("igk-trackchange");}}return !0;}else{var m=item["on"+ method];if(typeof(m)=="function"){item["on"+ method]=function(){m.apply(this,arguments);func.apply(this,arguments);}}else{item["on"+ method]=func;}igk.winui.getEventObjectManager().register(item,method,func);}return !0;};(function(){var m_class_control=[];var m_class_list=null;var m_init=0;var m_rg=0;var m_rcg;function __initClassControl(n){var q=$igk(this);if(q.fn.isClassControl){console.debug("is already a class control "+ q.fn.controlName);return;}if(!m_rcg)m_rcg=new RegExp("((^| )+)("+ m_rg+")($| )");var t=this.className;if(m_rcg.test(t)){var m=m_rcg.exec(t);var n=m[3];var g=m_class_control[n];if(!g){console.debug('test '+ t);console.debug(m);console.debug(m[2]);return;}var c=g.func;c.apply(q,[n,g.data]);q.fn.isClassControl=1;q.fn.ControlName=n;}};createNS("igk.winui",{getEventHandler:igk_winui_get_event_handler,reg_system_event:igk_winui_reg_system_event,getEventObjectManager:function(){if(__eventObjectManager==null){__eventObjectManager=new igk_create_event_ojectManager();}return __eventObjectManager;},reloadClassList:function(){m_class_list=null;return igk.winui.getClassList();},getClassList:function(){if(m_class_list !=null)return m_class_list;var t=[];var nslist={};for(var i in m_class_control){t.push(i);t[i]=m_class_control[i];if(m_class_control[i].ns){if(!nslist[m_class_control[i].ns])nslist[m_class_control[i].ns]=[];nslist[m_class_control[i].ns].push(t[i]);}else{if(!nslist[igk.constants.namespace])nslist[igk.constants.namespace]=[];nslist[igk.constants.namespace][i]=t[i];nslist[igk.constants.namespace].push(t[i]);}}t["ns://"]=nslist;m_class_list=t;return t;},initClassObj:function(n){igk_init_node_class_obj.apply(n);},initClassControl:function(n,c,inf){if(!m_init && igk.ctrl.registerReady){m_init=1;igk.ctrl.registerReady(__initClassControl);}if(m_class_control[n])return;m_class_control[n]={data:inf||1,func:c,n:n};if(m_rg)m_rg+='|'+ n;else if(m_rg==0){m_rg=n;}else m_rg+=n;m_rcg=null;}});function igk_init_node_class_obj(){var c=this;var b=m_class_control;var fc=null;for(var i in b){fc=b[i].data.func;if(fc){if(igk_item_match_class(b[i].n,c)){fc.apply($igk(c));}else $igk(c).select('.'+ b[i].n).each(function(){fc.apply(this);return !0;});}}}})();igk_defineProperty(igk,'version',{get:function(){return __version;}});igk_defineProperty(igk,'author',{get:function(){return __author;}});createNS("igk.android",{init:function(ds){if(igk.navigator.isAndroid()){igk.dom.body().addClass("igk-android");var m=igk.createNode("meta");m.setAttribute("name","viewport");m.setAttribute("content",ds);$igk(document.head).add(m);}}});(function(){var m_dlgx=[];var m_d=0;function __setupview(div){div.setCss({"height":"auto"});var _h=div.getHeight();var p=-(_h / 2.0);var pn=div.getParentNode();var t=0;var h=div.getHeight()+"px";var oflow=false;if(pn){t=pn.getHeight()/ 2.0;}else{t=div.getTop();}if((t+ p)<0){if(pn.getHeight()<div.getHeight()){h=pn.getHeight()+"px";oflow=true;}}div.setCss({"marginTop":p+"px"});}function __hide_dialog(q){q.rmClass("igk-show");if(q.data["ms-dialog-dispose"]){q.remove();m_dlgx.pop();}if(m_dlgx.length==0){igk.winui.events.unregKeyPress(__key_press);}q.data["ms-dialog-init"]=null;}function __key_press(evt){switch(evt.keyCode){case 27:var q=m_dlgx.pop();if(q)__hide_dialog(q);evt.preventDefault();evt.stopPropagation();return !1;}}function __show_dialog(s){s.addClass("igk-show");function __init(){if(!this.data["ms-dialog-init"]){var q=this;__setupview(q);q.select(".igk-btn-close").each(function(){var a=this;a.addClass("igk-btn igk-btn-close");a.reg_event("click",function(evt){evt.stopPropagation();evt.preventDefault();__hide_dialog(q);});});this.data["ms-dialog-init"]=1;if(m_dlgx.length==0){igk.winui.events.regKeyPress(__key_press);}m_dlgx.push(q);}return !0;};if(s.isSr()){s.each(__init);}else{__init.apply(s);}};createNS("igk.winui",{showDialog:function(id){var s=$igk(id);if(s !=null){__show_dialog(s);}},hideDialog:function(id){var s=$igk(id);if(s !=null){s.each(function(){if(this.hide)this.hide();});}},showDialogUri:function(uri){if(m_d==1){return;}m_d=1;igk.ajx.post(uri,null,function(xhr){if(this.isReady()){var n=igk.winui.createDialog();n.add("div").setHtml(xhr.responseText);igk.dom.body().appendChild(n);__show_dialog(n);m_d=0;}});},createDialog:function(id,data){var n=igk.createNode("div");n.setAttribute("id",id);n.addClass("igk-ms-dialog");var a=n.add("a").setAttribute("href","#").addClass("igk-btn-close");a.setHtml(igk.R.btn_close);a.on("click",function(){n.remove();});n.data["ms-dialog-dispose"]=1;if(data){n.add(data);}n.init();return n;}});})();(function(){var _keyns=createNS("igk.winui.inputKeys",{});var _keys={Enter:13,Escape:27,Left:37,Up:38,Right:39,Down:40 };function _defkey(k){return function(){return _keys[k];};};function _getCode(event){return event.charCode||event.keyCode;};for(var k in _keys){igk_defineProperty(_keyns,k,{get:_defkey(k)});}createNS("igk.winui",{keyPress:function(event,code,callback){var c=_getCode(event);if(c==code){callback(event);event.preventDefault();event.stopPropagation();}},keyUp:function(event,code,callback){var c=_getCode(event);if(c==code){callback(event);event.preventDefault();event.stopPropagation();}}});})();(function(){var m_ptrframe=null;createNS("igk.winui",{openUrl:function(u,n,p){var hwn=window.open(u,n,p);return hwn;},print:function(u){var _prf=document.domain+"::/prf";var _n=(window[_prf]==null);var _wnd=window[_prf]||window.open(u,_prf,"fullscreen=0, toolbar=0,resizable=0,menubar=0,title=0, width=420, height=500, left=-9999, top=0");var _el=igk_winui_reg_event;var _echain=null;var _tchain=null;var _P={resolve:function(){},then:function(callback){if(_tchain==null)_tchain=callback;else _tchain=function(){_tchain.apply(_P);callback.apply(_P);};return this;},error:function(callback){if(_echain==null)_echain=callback;else _echain=function(){_echain.apply(_P);_echain.apply(_P);};return this;}};if(_wnd){try{if(_n){_el(_wnd,'load',function(){if(_wnd.hide)_wnd.hide();_wnd.print();if(!igk.navigator.isChrome())_wnd.close();});}else{_wnd.location=u;}}catch(ex){console.debug("[igk.winui.print] - can't register load event  - "+ ex);}}return _P;},printUrl:function(u){if(m_ptrframe==null){m_ptrframe=igk.createNode("iframe");m_ptrframe.reg_event("load",function(){m_ptrframe.o.contentWindow.focus();m_ptrframe.o.contentWindow.print();});m_ptrframe.addClass("dispn");igk.dom.body().appendChild(m_ptrframe.o);}m_ptrframe.o["href"]=u;m_ptrframe.o["src"]=u;},confirm:function(t,m,callback){var div=igk.createNode("div");div.setCss({maxWidth:"480px",margin:"auto"});div.add("div").setHtml(m);var b=div.add("div");b.addClass("igk-action-bar igk-pull-right").setCss({backgroundColor:"transparent"});var btn=b.add("input").setAttributes({type:'button',value:'confirm'}).addClass("igk-btn");btn.reg_event("click",function(evt){evt.preventDefault();if(callback)callback.apply(this,evt);igk.winui.notify.close();});igk.winui.notify.showMsBox(t,div);}});})();(function(){createNS("igk.winui",{'click':function(u){return function(e){e.stopPropagation();e.preventDefault();var a=document.createElement("a");a.href=u;igk.dom.body().appendChild(a);$igk(a).click();};}});})();(function(){var Left=1;var Right=2;var Middle=3;var None=0;function getButton(t){switch(t){case 0:return Left;case 1:return Middle;case 2:return Right;}return None;};var tev={};tev["mousemove"]=function(e){if((e.buttons==e.button)&&(e.button==0)){return None;}switch(e.buttons){case 1:return Left;case 4:return Middle;case 2:return Right;}return getButton(e.button);};tev["mousedown"]=function(e){return getButton(e.button);};tev["mouseup"]=function(e){if((e.buttons==e.button)&&(e.button==0)){return Left;}return getButton(e.button);};igk.winui.mouseButton=function(evt){if(igk.navigator.isIE()&& igk.navigator.IEVersion()<10){switch(evt.button){case 1:return Left;case 4:return Middle;case 2:return Right;}}else{if(evt.type in tev)return tev[evt.type].apply(null,[evt]);switch(evt.button){case 0:if((evt.buttons==0)&&(evt.type=="mousemove")){return None;}return Left;case 1:return Middle;case 2:return Right;}}return None;};igk_defineProperty(igk.winui.mouseButton,"Left",{get:function(){return Left;}});igk_defineProperty(igk.winui.mouseButton,"Right",{get:function(){return Right;}});igk_defineProperty(igk.winui.mouseButton,"Middle",{get:function(){return Middle;}});igk_defineProperty(igk.winui.mouseButton,"None",{get:function(){return None;}});createNS("igk.winui.mouseButton",{});igk.winui.eventTarget=function(evt){if(evt.target)return evt.target;if(evt.srcElement)return evt.srcElement;return null;};igk.winui.headDocument=function(){if(document.head)return document.head;document.head=document.getElementsByTagName("head")[0];return document.head;};})();(function(){var dialogs=[];var init=0;function HDialog(d){var self=this;this.closeDialog=function(){var q=0;while(q=dialogs.pop()){d.unreg_event(q.closeDialog);if(q==d){return 1;}}init=0;igk.winui.events.unregKeyPress(__close_dialog);return 0;};};function __close_dialog(e){if((dialogs.length>0)&&(e.type=='keyup')&&(e.keyCode==igk.winui.inputKeys.Escape)){dialogs[dialogs.length- 1].close();e.preventDefault();e.stopPropagation();}};igk.system.createNS("igk.winui.dialogs",{register:function(d){var _d=new HDialog(d);d.on("close",_d.closeDialog);dialogs.push(d);if(!init){igk.winui.events.regKeyPress(__close_dialog);init=1;}},getlastDialog:function(){if(dialogs.length>0){return dialogs[dialogs.length- 1];}return null;},isOpen:function(){return dialogs.length>0;}});})();(function(){var engines={};var default_e=null;igk.system.createNS("igk.winui.engine",{register:function(n,o){engines[n]=o;},setDefaultEngine:function(n){default_e=n;},getEngine:function(n,t,R){n=n||default_e;var s=null;if(n){if(n in engines){s=engines[n];if(t){s.host=t;}if(R)s.setAsset(R);return s;}}if(default_e &&(n !=default_e)&&(default_e in engines)){s=engines[default_e];if(t)s.host=t;if(R)s.setAsset(R);return s;}return null;},getEngineNameList:function(){var t=[];for(var i in engines)t.push(i);t.sort();return t;},formBuilderEngine:function(){var host;var R=null;igk.defineProperty(this,"host",{get:function(){return host;},set:function(v){host=$igk(v);if(host.o && !host.engine){host.engine=new hostEngine(this);}}});this.setAsset=function(r){R=r;};function _getRes(id){return(R ? R[id]:null)||id;};this.getRes=_getRes;this.add=function(t){this.host.add(t);return this;};}});function hostEngine(){var m_items={};this.getItem=function(n){if(n in m_items)return m_items[n];return null;};this.register=function(n,h){m_items[n]=h;};this.clear=function(n,h){m_items={};};this.getFields=function(){return m_items;};};})();(function(){var m_capture;var m_r=false;var m_event_capture=false;var m_bck={};var m_oldCaptureID=null;function __capturemouse(evt){if(m_r){evt.stopPropagation();return;}if(m_capture && m_event_capture){var t=null;if(typeof(evt.constructor)=='function'){t=new evt.constructor(evt.type,evt);}else{if(/mouse/.test(evt.type)){t=document.createEvent("MouseEvents");t.initMouseEvent(evt.type,evt.bubbles,evt.cancelable,evt.view,evt.detail,evt.screenX,evt.screenY,evt.clientX,evt.clientY,evt.ctrlKey,evt.altKey,evt.shiftKey,evt.metaKey,evt.button,null);}if(!t)return;}t.EventTarget=m_capture;t["igk-event-source"]="mouse-capture";m_r=!0;m_capture.dispatchEvent(t);}evt.stopPropagation();m_r=false;};function _captureId(id){return id||(igk.navigator.isChrome()? 1 :0);}igk.system.createNS("igk.winui.mouseCapture",{getCapture:function(){return m_capture;},setCapture:function(n,i){i=_captureId(i);if((n !=null)&&(m_capture !=n)){m_capture=n;let fc=n.setPointerCapture||n.setCapture;if(fc){fc.apply(n,[i]);}else{m_event_capture=true;igk_winui_reg_event(window,"mousemove",__capturemouse);igk_winui_reg_event(window,"mouseup",__capturemouse);m_bck["ondragstart"]=m_capture["ondragstart"];m_bck["ondrop"]=m_capture["ondrop"];m_capture["ondragstart"]=igk.winui.fn.cancelEventArgs;m_capture["ondrop"]=igk.winui.fn.cancelEventArgs;igk.dom.body().setCss({pointerEvents:'none'});$igk(n).setCss({pointerEvents:'auto'});}}},releaseCapture:function(e){if(!m_capture){return;}try{let _id=_captureId(null);if(m_capture.setCapture){if(m_capture.setPointerCapture){m_capture.setPointerCapture(_id);}else{if(m_capture.setCapture){m_capture.setCapture(_id);}}}}catch{console.error("change the capture id to is---- ")}if(m_capture.releasePointerCapture){let id=_captureId(m_oldCaptureID);try{m_capture.releasePointerCapture(id);}catch(ex){console.error("failed to realese pointer capture.",(ex.message||ex),e,"for : ",id);}}else{if(document.releaseCapture)document.releaseCapture();}if(m_event_capture){igk.winui.unreg_event(window,"mousemove",__capturemouse);igk.winui.unreg_event(window,"mouseup",__capturemouse);m_capture["ondragstart"]=m_bck["ondragstart"];m_capture["ondrop"]=m_bck["ondrop"];igk.dom.body().setCss({pointerEvents:'auto'});}m_capture=null;m_event_capture=false;}})})();(function(){createNS("igk.winui.history",{push:function(uri,data,t){if(typeof(window.history.pushState)=="function"){window.history.pushState(data,t,uri);}else{console.debug("no history state available");}},replace:function(uri,data){if(typeof(window.history.replaceState)=="function"){let p=new URL(uri);if(document.location.host==p.host){window.history.replaceState(data,null,uri);}}else{console.debug("no history state available");}}});function __popstate(e){e.preventDefault();};})();(function(){var m_contextMenu;function __ctr(){var m_target=igk.createNode("ul");m_target.addClass("igk-context-menu");var q=this;m_target.addClass("posfix");function __click(evt){q.close();}function __scroll(evt){var b=$igk(q.contextCibling).getScreenLocation();var p=q.ciblingpos;if((p.x !=b.x)||(p.y !=b.y)){q.close();}}function __loadItemTo(n,t){t=$igk(t);for(var i=0;i<t.getChildCount();i++){__loadItem(n.add("li"),t.o.childNodes[i]);}};function __loadItem(n,t){if(!t.tagName)return;switch(t.tagName.toLowerCase()){case "li":if(t.childNodes.length==1){if(igk.html.isTextNode(t.childNodes[0])){var ajx=t.getAttribute("ajx")==1;var complete="ns_igk.ajx.fn.replace_content(this.igk.contextMenu.contextCibling)";var c=t.getAttribute("complete");if(c){complete=c;}var g=t.getAttribute("class");if(g !=null)n.setAttribute("class",g);n.add("a").setAttribute("href",t.getAttribute("uri")).appendProperties({"contextMenu":q}).setAttributeAssert(ajx,"onclick","javascript: ns_igk.ajx.post(this.href,null,"+ complete+"); return !1;").setHtml(t.innerHTML);}else{__loadItemTo(n.add("ul").addClass("igk-context-sub"),t.childNodes[0]);}}else if(t.childNodes.length>1){var ul=n.add("ul").addClass("igk-context-sub");__loadItemTo(ul,t);}break;case "sep":n.addClass("igk-context-menu-sep");break;}}igk.appendProperties(this,{contextTarget:null,contextCibling:null,getTarget:function(){return m_target;},load:function(d){m_target.setHtml(null);var dummy=igk.createNode("div");dummy.setHtml(d);__loadItemTo(m_target,dummy);},close:function(){igk.winui.unreg_event(document,"click",__click);igk.qselect(".overflow-y-a").unreg_event("scroll",__scroll);var q=m_target;m_target.addClass("igk-trans-all-200ms").setCss({"opacity":0.0 }).timeOut(400,function(){m_target.rmClass("igk-trans-all-200ms igk-show");q.o.parentNode.removeChild(q.o);q.clearTimeOut();});},show:function(t,c,l){this.contextTarget=t;this.contextCibling=c;this.pos=l;this.ciblingpos=$igk(c).getScreenLocation();igk.dom.body().appendChild(m_target.o);m_target.addClass("posfix igk-show").setCss({left:l.x+"px",top:l.y+"px"}).addClass("igk-trans-all-200ms").setCss({opacity:1}).timeOut(400,function(){m_target.rmClass("igk-trans-all-200ms");});igk_winui_reg_event(document,"click",__click);igk.qselect(".overflow-y-a").reg_event("scroll",__scroll);},toString:function(){return "igk.winui.contextmenu";}});};m_contextMenu=new __ctr();igk_defineProperty(igk.winui,'contextMenu',{get:function(){return m_contextMenu;},nopropfunc:function(){this.contextMenu=m_contextMenu;}});igk.winui.initClassControl("igk-context-menu",function(){var id=$igk(this.getAttribute("igk:for"));if(!id)return;var q=this;var v=0;q.close=function(){igk.winui.unreg_event(document,"click",__q_click);igk.qselect(".overflow-y-a").unreg_event("scroll",__q_scroll);q.addClass("igk-trans-all-200ms").setCss({"opacity":0.0 }).timeOut(400,function(){q.rmClass("igk-trans-all-200ms igk-show");q.clearTimeOut();});v=0;};function __q_click(evt){q.close();};function __q_scroll(evt){q.close();};q.show=function(){q.addClass("posfix igk-show").addClass("igk-trans-all-200ms").setCss({opacity:1}).timeOut(400,function(){q.rmClass("igk-trans-all-200ms");});igk_winui_reg_event(document,"click",__q_click);igk.qselect(".overflow-y-a").reg_event("scroll",__q_scroll);};$igk(id).reg_event("click",function(evt){if(v==0){q.show();evt.preventDefault();evt.stopPropagation();v=1;}}).setCss({"cursor":"pointer"});},{desc:"igk context menu"});})();igk.system.createNS("igk.winui.notifyctrl",{init:function(t){igk.ready(function(){new igk.winui.notifyctrl.run(t).start();});},run:function(target){this.target=$igk(target);this.noautohide=this.target.getAttribute("igk-no-auto-hide");var q=this;this.start=function(){var self=this;if(q.noautohide==1)return;setTimeout(function(){igk.animation.fadeout(self.target.o,20,500,1.0,function(){self.target.setCss({"display":"none"}).remove();});},2000);};}});createNS("igk.winui.events",{stopPropagation:function(e){if((e !=null)&&(e.stopPropagation)){e.stopPropagation();}},preventDefault:function(e){if(e){if(e.preventDefault)e.preventDefault();}},cancelBehaviour:function(e){e.preventDefault();e.stopPropagation();}});(function(){var m=[];createNS("igk.winui.events.fn",{handleKeypressExit:function(p){m.push(p);var fc=function(evt){switch(evt.keyCode){case 27:console.debug("close frame");if(igk.winui.framebox.currentFrame==null){var t=m.pop();if(p.complete){p.complete.apply(this,[evt]);igk.winui.unreg_event(document,"keypress",fc);}}break;}};return fc;}});})();igk.winui.controlUtils={HasChildContainPoint:function(item,point){var loc=igk.winui.GetRealScreenPosition(item);var o=((point.x>=0.0)&&(point.x<=item.clientWidth)&&(point.y>=0.0)&&(point.y<=item.clientHeight));return o;}};createNS("igk.animation",{init:function(o,interval,duration,initcallbackfunc,updatecallbackfunc,endcallbackfunc,properties){var m_timeout=null;var m_updatecallback=null;var m_o=o;var m_interval=interval;var m_duration=duration;var m_updatecallback=updatecallbackfunc;var m_initcallback=initcallbackfunc;var m_endcallback=endcallbackfunc;var m_ellapsed=0.0;var m_properties=properties;var m_opupdate=null;function __animInstance(){this.getOwner=function(){return m_o;};this.getInterval=function(){return m_interval;};this.getDuration=function(){return m_duration;};this.getEllapsed=function(){return m_ellapsed;};this.getStepfactor=function(){if(m_opupdate){var v_delta=Math.round(m_opupdate(m_ellapsed / m_duration)*100)/ 100;return v_delta;}return this.getEllapsed()/ this.getDuration();};this.start=function(){m_initcallback.apply(this);m_opupdate=igk.animation.getEffect(this.properties.effect,this.properties.effectmode);this.update();};this.update=function(){var self=this;m_ellapsed+=m_interval;if((m_ellapsed<=m_duration)&&(m_updatecallback.apply(this))){m_timeout=setTimeout(function(){self.update();},this.getInterval());}else{m_endcallback.apply(this);}};this.stop=function(){if(m_timeout){igk.clearTimeout(m_timeout);m_timeout=null;}m_ellapsed=0;};this.reset=function(){this.stop();m_initcallback.apply(this);};this.toString=function(){return "igk.animation.instance";};};return new __animInstance();},InitBgAdorator:function(element,frequency,interval,fadeinterval,israndom,getimguri,defindex,updateuri){var q=new igk.animation.adorator(element,frequency,interval,fadeinterval,israndom);igk.ajx.get(getimguri,null,function(xhr){if(this.isReady()){var d=igk.createNode('datas');d.setHtml(xhr.responseText);var tt=d.getElementsByTagName('igk-img');d.select('igk-img').each_all(function(){q.add(this.getAttribute("src"));});setTimeout(function(){q.start(function(){igk.ajx.get(updateuri+ q.index,null,null);});},400);}});},adorator:function(element,frequency,interval,fadeinterval,israndom){if(element==null)throw "element is null";this.element=element;igk.initprop(this.element);this.frequency=frequency;this.interval=interval;this.fadeinterval=fadeinterval;this.israndom=israndom;this.images=new Array();this.index=0;this.lasttimeout=null;this.defaultset=false;this.muststart=false;this.setDefaultIndex=function(index){if(this.images){if((index>=0)&&(index<this.images.length)){this.index=index;}this.defaultset=!0;}};this.toString=function(){return "igk.animation.adorator";};this._setStyle=function(e){e.style.width="100%";e.style.height="100%";e.style.position="absolute";e.style.top="0px";e.style.left="0px";e.style.display="block";e.className="igk-bgadorator-block";};this.loadImages=function(imgs){function __regimage(item,e){item._setStyle(e.o);item.images[item.images.length]=e;e.parentNode.removeChild(e);};var truncated=false;if(imgs.length>0){for(var i=0;i<imgs.length;i++){if(!imgs[i].complete){var self=this;var timgs=imgs;if(self.loaded){igk.clearTimeout(self.loaded);}self.loaded=setTimeout(function(){self.loadImages(timgs);},400);truncated=!0;return;}}}if(!truncated){var e=null;this.images=new Array();var self=this;var c=imgs.length;for(var i=0;i<c;i++){e=imgs[0];if(e){__regimage(self,e);}}if(this.muststart){this.start();}}else{console.error("Some Image(s) truncated");}};this.add=function(uri){var e=igk.createNode("img");e.o.src=uri;this._setStyle(e.o);this.images[this.images.length]=e;};this._init=function(){if((!this.images)&&(this.images.length<=0))return;var t=this.element.getElementsByTagName("img");var e=null;if(t.length>0){e=t[0];}else{this.element.insertBefore(this.images[0],this.element.childNodes[0]);e=this.images[0];igk.animation.fadein(e,this.frequency,this.fadeinterval);}};this.start=function(notifyfunction){if((!this.images)||(this.images.length<=0)){this.notifyfunction=notifyfunction;this.muststart=!0;return;}var t=this.element.getElementsByTagName("img");var e=null;if(t.length>0){e=t[0];}else{var v_re=this.images[0].o;var v_ce=this.element.childNodes[0];if((v_re !=null)&&(v_ce !=null)){this.element.insertBefore(v_re,v_ce);}e=this.images[0].o;igk.animation.fadein(e,this.frequency,this.fadeinterval);}var d=!this.defaultset;this.notifyfunction=notifyfunction;if(!this.defaultset){this.setDefaultIndex(Math.floor((Math.random()*this.images.length)));if(this.notifyfunction){this.notifyfunction();}}var img=this.images[this.index].o;if(img && e &&(img !==e)){this.element.replaceChild(img,e);igk.animation.fadein(img,this.frequency,this.fadeinterval);}var self=this;if(this.lasttimeout){igk.clearTimeout(this.lasttimeout);this.lasttimeout=null;}this.lasttimeout=setTimeout(function(){self.update();},this.interval);this.muststart=false;};this.update=function(){var self=this;var i=0;if(this.israndom){i=Math.floor((Math.random()*this.images.length));}else{i=((this.index+ 1)% this.images.length);}if(i==this.index)return;this.index=i;var e=this.element.getElementsByTagName("img")[0];var img=null;if(typeof(e)==IGK_UNDEF){}else{img=this.images[this.index];if(img==null){throw "element is null at "+ this.index;}if(e !=img.o){try{if(img)$igk(e).insertAfter(img);if(e)igk.animation.fadeout(e,this.frequency,this.fadeinterval,1,function(){if(e.parentNode){e.parentNode.removeChild(e);}});if(img)igk.animation.fadein(img,this.frequency,this.fadeinterval);}catch(ex){igk.show_notify_error("Exception","Exception__adorator__ : index="+ this.index+" <br />"+ ex+"<p class=\"igk-trace\">"+ ex.stack+"</p>");}}this.lasttimeout=setTimeout(function(){self.update();},this.interval);if(this.notifyfunction){this.notifyfunction();}}};this.stop=function(){if(this.lasttimeout){igk.clearTimeout(this.lasttimeout);this.lasttimeout=null;}};},context:function(element,style,duration,updatetype){if(element==null)throw "Context failed : Operation Not Allowed element is null";function __regAnimationContext(context,item,style){var i=null;if(typeof(item.igk.animationContext)==igk.constants.undef){i=new __primarycontext(element,style);item.igk.animationContext=new function(){var m_contexts=[];igk.appendProperties(this,{pushContext:function(style,context){m_contexts[style]=context;},getContext:function(style){if(typeof(m_contexts[style])==IGK_UNDEF){return m_contexts[style];}return null;}});};item.igk.animationContext.pushContext(style,i);}else{i=item.igk.animationContext.getContext(style);if(i==null){i=new __primarycontext(element,style);item.igk.animationContext.pushContext(style,i);}}return i;}function __primarycontext(element,style){this.element=element;this.style=style;this.interval=20;this.duration=duration ? duration :1000;this.updatetype=updatetype||"timeout";this.step=0.1;this.ellapsed=0.0;this.opacity=1.0;this.endopacity=1.0;this.callback=null;this.toString=function(){return "igk.animation.context";};this.start=function(){switch(this.style){case "fadein":case "fadeout":this.element.igk.setOpacity(this.opacity);break;}this.step=this.interval / this.duration;var q=this;if(this.updatetype=="timeout"){this.lasttimeout=setTimeout(function(){q.update();},this.interval);}else{this.lasttimeout=setInterval(function(){q.update();if(q.end){clearInterval(this.lasttimeout);}},this.interval);}};this.update=function(){var end=false;switch(this.style){case 'fadein':this.opacity+=this.step;if(this.opacity>this.endopacity){this.opacity=this.endopacity;end=!0;}break;case 'fadeout':this.opacity-=this.step;if(this.opacity<this.endopacity){this.opacity=this.endopacity;end=!0;}break;}this.element.igk.setOpacity(this.opacity);var q=this;if(!end){if(this.lasttimeout){igk.clearTimeout(this.lasttimeout);}this.lasttimeout=setTimeout(function(){q.update();},this.interval);}else{this.stop();if(this.callback){this.callback();}}};this.stop=function(){if(this.updatetype=="timeout"){if(this.lasttimeout){igk.clearTimeout(this.lasttimeout);this.lasttimeout=null;}}else{if(this.lasttimeout){clearInterval(this.lasttimeout);this.lasttimeout=null;}}};};;return __regAnimationContext(this,element,style);},fadecontext:function(element,style,duration){if(element==null)throw "Context failed : Operation Not Allowed element is null";igk.animation.context.apply(this,new Array(element,style,duration));},fadein:function(element,interval,duration,opacity,callback){if(element==null)return;var c=igk.animation.context($igk(element).o,'fadein');c.stop();c.interval=interval;c.duration=duration ? duration :1000;if(typeof(opacity)=="object"){c.opacity=opacity.from ? opacity.from :0;c.endopacity=opacity.to ? opacity.to :1;}else{c.opacity=opacity ? opacity :0;c.endopacity=1;}c.callback=callback;c.start();return c;},fadeout:function(element,interval,duration,opacity,callback){if(element==null)return;var op=1;var ep=0;if(typeof(opacity)=="object"){op=opacity.from ? opacity.from :1;ep=opacity.to ? opacity.to :0;}else{op=opacity ? opacity :1;ep=0;}if((callback==null)&& $igk(element).isCssSupportTransition()){$igk(element).setCss({opacity:op}).addClass("igk-transition-easeinout").setTransitionDuration(((duration ? duration :1000)/ 1000.0)+'s').setCss({opacity:ep});return;}var d=duration ? duration :1000;var c=igk.animation.context($igk(element).o,'fadeout',d);c.stop();c.interval=interval;c.duration=d;c.opacity=op;c.endopacity=ep;c.callback=callback;c.start();return c;},toString:function(){return "igk.animation";},autohide:function(item,startat){setTimeout(function(){igk.animation.fadeout(item,20,500,1.0,function(){$igk(item).setCss({"display":"none"});$igk(item).remove();});},startat);},animate:function(element,properties,animinfo){if(element==null){return;}var contextname=igk_getv(animinfo,"context",'animate');var v_animtype=igk_getv(animinfo,"animtype",'timeout');var v_duration=animinfo ?(animinfo.duration ? animinfo.duration :1000):1000;var v_animeffect=igk_getv(animinfo,"effect",'linear');var v_animeffectmode=igk_getv(animinfo,"effectmode",'easein');var v_update=igk_getv(animinfo,"update",null);var v_complete=igk_getv(animinfo,"complete",null);var c=igk.animation.context($igk(element).o,contextname,v_duration,v_animtype);c.stop();c.interval=animinfo ?(animinfo.interval ? animinfo.interval :20):20;c.callback=animinfo ?(animinfo.complete||null):null;c.updatecallback=animinfo ?(animinfo.update||null):null;var k=new function(){this.time=0;this.steps=new Array();};var s=null;var m=null;var step=null;var out_func=igk.animation.getEffect(v_animeffect,v_animeffectmode);for(var i in properties){switch((i+"").toLowerCase()){case "textshadow":s=window.igk.system.styles.textShadowCreate($igk(element).getComputedStyle(i));m=window.igk.system.styles.textShadowCreate(properties[i]);break;case "color":case "backgroundcolor":case "bordercolor":{s=window.igk.system.colorFromString($igk(element).getComputedStyle(i));m=window.igk.system.colorFromString(properties[i]);k.steps[i]={step:{r:(m.r- s.r),g:(m.g- s.g),b:(m.b- s.b),toString:function(){return "("+ this.r+","+ this.g+","+ this.b+")";}},start:s,end:m,pos:{r:0,g:0,b:0 },name:i,unit:igk_getUnit(m)};}break;default:s=igk_getNumber($igk(element).getComputedStyle(i));m=igk_getNumber(properties[i],$igk(element),i);k.steps[i]={step:(m- s),start:s,end:m,pos:0,name:i,unit:igk_getUnit(m)};}}c.update=function(){var q=this;var end=false;var v_delta=0.0;k.time+=q.interval;v_delta=Math.round(out_func(k.time / q.duration)*100)/ 100;for(var i in k.steps){if((i=="length"))continue;var h=k.steps[i];if((typeof(h.step)=='undefined')||(h.step==0))continue;var item={};var v=0;var key=i.toLowerCase();switch(key){case "opacity":h.pos=v_delta*h.step;v=(h.start+ h.pos);break;case "color":case "backgroundcolor":case "bordercolor":h.pos.r=(v_delta*h.step.r);h.pos.g=(v_delta*h.step.g);h.pos.b=(v_delta*h.step.b);var r=parseInt(h.start.r+ h.pos.r);var g=parseInt(h.start.g+ h.pos.g);var b=parseInt(h.start.b+ h.pos.b);v=new igk.system.color(r,g,b);v=v.toHtml();break;default:h.pos=v_delta*(h.end- h.start);v=parseInt((h.start+ h.pos))+""+ h.unit;break;}item[i]=v;$igk(this.element).setCss(item);}if(this.updatecallback){this.ellapsed=k.time;this.updatecallback.apply(this);}end=k.time>=q.duration;if(!end){if(q.updatetype=="timeout"){if(this.lasttimeout){igk.clearTimeout(this.lasttimeout);}this.lasttimeout=setTimeout(function(){q.update();},this.interval);}}else{$igk(this.element).setCss(properties);this.stop();if(this.callback){this.callback();}}this.end=end;};c.start();return c;},animateUpdate:function(element,animinfo){if((element==null)||(animinfo==null)||(typeof(animinfo.update)===IGK_UNDEF))return;var contextname=igk_getv(animinfo,"context",'animateUpdate');var v_animtype=igk_getv(animinfo,"animtype",'timeout');var v_duration=animinfo ?(animinfo.duration ? animinfo.duration :1000):1000;var c=igk.animation.context($igk(element).o,contextname,v_duration,v_animtype);c.stop();c.interval=animinfo ?(animinfo.interval ? animinfo.interval :20):20;c.duration=v_duration;c.callback=animinfo ? animinfo.complete :null;var k=new function(){this.time=0;};c.update=function(){var q=this;var end=false;k.time+=q.interval;animinfo.update.apply(this,[k]);end=k.time>=q.duration;if(!end){if(this.lasttimeout)igk.clearTimeout(this.lasttimeout);this.lasttimeout=setTimeout(function(){q.update();},this.interval);}else{$igk(this.element).setCss(properties);this.stop();if(this.callback){this.callback();}}};c.start();return c;},getAnimationFrame:function(){return igk.fn.getWindowFunc("requestAnimationFrame",__getAnimationFrame);},getAnimationCancelFrame:function(){return igk.fn.getWindowFunc("cancelAnimationFrame",__cancelAnimationFrame);}});var m_animFrames=[];var lastTime=0;function __getAnimationFrame(callback){var currTime=new Date().getTime();var timeToCall=Math.max(0,16- (currTime- lastTime));var id=window.setTimeout(function(){callback(currTime+ timeToCall);},timeToCall);lastTime=currTime+ timeToCall;return id;}function __cancelAnimationFrame(id){window.clearTimeout(id);}igk_appendProp(igk.animation,{effects:new function(){igk_appendProp(this,{"linear":function(progress){return progress;},"quad":function(progress){return Math.pow(progress,2);},"quint":function(progress){return Math.pow(progress,2);},"pow":function(progress,pow){return Math.pow(progress,pow||2);},"circ":function(progress){return 1- Math.sin(Math.acos(progress));},"back":function(progress){return Math.pow(progress,2)*((1.5+ 1)*progress- 1.5);},"bounce":function(progress){for(var a=0,b=1,result;1;a+=b,b /=2){if(progress>=(7- 4*a)/ 11){return-Math.pow((11- 6*a- 11*progress)/ 4,2)+ Math.pow(b,2);}}},"makeEaseInOut":function(delta){return function(progress){if(progress<.5)return delta(2*progress)/ 2;else return(2- delta(2*(1- progress)))/ 2;};},"makeEaseOut":function(delta){return function(progress){return 1- delta(1- progress);};},toString:function(){return "igk.anmation.effects";}});},getEffect:function(animeffect,animeffectmode){if(!animeffect)animeffect="linear";if(!animeffectmode)animeffect="easein";var out_func=igk.animation.effects[animeffect];switch(animeffectmode){case "easein":break;case "easeout":out_func=igk.animation.effects.makeEaseOut(out_func);break;case "easeinout":out_func=igk.animation.effects.makeEaseInOut(out_func);break;}return out_func;}});createNS("igk.validator",{isUri:function(s){return /(http(s){0,1}|ftp|file):\/\/(.)+$/.test(s);},toString:function(){return igk.validator.fullname;}});function __ajx_initfunc(func){if(typeof(func)=='string'){var g=$igk(func);if(g.getCount()>0){func=function(xhr){if(this.isReady()){g.setHtml(xhr.responseText).init();}};}}func=func||igk.ajx.fn.replace_or_append_to_body;return function(xhr){if(xhr.readyState==2){if(xhr.status==200){if(xhr.getResponseHeader("Content-Type").toLowerCase().indexOf("application/force-download")!=-1){xhr.responseType="blob";}}}if(this.isReady()&&(xhr.responseType=="blob")&& !this.noBlob){var ctype=xhr.getResponseHeader("Content-Type");var mime_type=xhr.getResponseHeader("Content-Mime-Type")||xhr.getResponseHeader("Content-Type");var cname="download.txt";var pos=0;if((pos=ctype.indexOf("name=\""))!=-1){pos+=6;cname=ctype.substring(pos,ctype.indexOf('"',pos)).trim();}igk.io.file.download(mime_type,cname,xhr.response);return;}if(typeof(func)=="function")func.apply(this,[xhr]);};};(function(){var m_ajx_monitorListener;var m_hxhr;var sm_join={};var m_ajxhe=0;var m_exajxdata=0;function __ajx_setExtraData(ajx,extradata){extradata=extradata||m_exajxdata;if(extradata){igk_appendProp(ajx,extradata);if('responseType' in extradata){ajx.xhr.responseType=extradata.responseType;}if('contentType' in extradata){ajx.xhr.contentType=extradata.contentType;}}m_exajxdata=0;};(function(){var _ajx_info={initializer:null};createNS("igk.ajx",{replaceNodeWithHtmlResponse(q,t){let s=igk.createNode('dummy');s.setHtml(t);let rp=false;let _next=q;let _p=$igk(q.o.parentNode);let _c=s.o.childNodes.length;while(s.o.childNodes.length>0){let tq=s.o.childNodes[0];if(_next.nextSibling){_p.o.insertBefore(tq,_next.nextSibling);}else{_p.o.appendChild(tq);}if(!rp){q.remove()}_next=tq;rp=true;_c--;if(_c<0){break;}}_p.init();},bindHeader:function(p){m_ajxhe=p;},bindExtraData:function(exdata){m_exajxdata=exdata;},setHeader:function(xhr){xhr.setRequestHeader("IGK-X-REQUESTED-WITH","XMLHttpRequest");if(m_ajxhe){for(var m in m_ajxhe){xhr.setRequestHeader(m,m_ajxhe[m]);}m_ajxhe=0;}},setMonitorListener:function(monitor){m_ajx_monitorListener=monitor;},isMonitoring:function(){return m_ajx_monitorListener !=null;},getCurrentXhr:function(){return m_hxhr;},GetParentHost:function(){return m_hxhr ? m_hxhr.source :null;},evalNode:function(n){if(typeof(n)!="string"){if(n.tagName && n.tagName.toLowerCase()=="script"){var pn=n.parentNode ? n.parentNode :igk.dom.body().o;try{var v_script=$igk(n).getHtml();if(igk_str_trim(v_script).length>0){igk.evalScript(v_script,pn,n);}if(n.getAttribute("autoremove"))$igk(n).remove();}catch(ex){console.debug(ex);}}else{igk_preload_image(n);var ct=$igk(n).select("script");const _loaded={};ct.each(function(){var _t=this.getAttribute('type');let _ids=this.getAttribute('id');if(_t=='text/balafonjs'){__bindbalafonjs.apply(this);}else{if(_t in __scriptsEval){var fc=__scriptsEval[_t];fc.apply(this);}else{igk_eval(this.getHtml(),this.o,this.o);}}return this;});}}},replaceBody:function(text,unregister){var c=window.igk.utils.getBodyContent(text);try{if(unregister){igk.winui.getEventObjectManager().unregister(document);igk.winui.getEventObjectManager().unregister(window);igk.winui.getEventObjectManager().unregister_child(igk.dom.body().o);}igk.dom.body().setHtml("");igk.dom.body().setHtml(c);igk.ajx.fn.initnode(igk.dom.body().o);igk.publisher.publish(igk.evts.dom[1],{evt:{text:text,target:igk.dom.body().o}});}catch(ex){igk.winui.notify.showErrorInfo("Javascript Exception","replaceBody Evaluation failed <br />"+ ex);console.error(ex);}},a_postResponse:function(a,parentTag){window.igk.ajx.post(a.href,null,new window.igk.ajx.targetResponse(a,parentTag).update);return !1;},a_getResponse:function(a,parentTag){window.igk.ajx.get(a.href,null,new window.igk.ajx.targetResponse(a,parentTag).update);return !1;},aposturi:function(uri,targetNodeId){window.igk.ajx.post(uri,null,function(xhr){if(this.isReady()){this.setResponseTo(document.getElementById(targetNodeId),true);}});},ageturi:function(uri,targetNodeId){var q=$igk(targetNodeId);if(q && uri){igk.ajx.get(uri,null,function(xhr){if(this.isReady()){this.replaceResponseNode(q.o);}});}},responseNode:function(nodeId){var m_target=document.getElementById(nodeId);if(m_target){window.igk.appendProperties(this,{"response":function(xhr){if(this.isReady()){this.setResponseTo(m_target,true);}}});}},getResponseNodeFunction:function(cibling,parentNodeTag){var b=$igk(cibling).getParentByTagName(parentNodeTag);if(b){return function(xhr){if(this.isReady()){this.setResponseTo(b);}};}return null;},responseBody:function(){window.igk.appendProperties(this,{"response":function(xhr){if(this.isReady()){window.igk.ajx.replaceBody(xhr.responseText,true);}}});},targetResponse:function(item,parentTag){var m_target=null;if(parentTag){m_target=$igk(item).getParentByTagName(parentTag);}else m_target=item;if(m_target==null)return null;window.igk.appendProperties(this,{update:function(xhr){if(this.isReady()){this.setResponseTo(m_target,true);}},toString:function(){return "igk.ajx.targetResponse";}});},ajx:function(monitorlistener){var xhr=null;if(igk.isFunc(typeof(window.XMLHttpRequest))){xhr=new window.XMLHttpRequest();}else{if(igk.navigator.$ActiveXObject()){try{xhr=new ActiveXObject("Microsoft.XMLHTTP");}catch(ex){throw("No Ajax Support");}}}if((xhr==null)||(xhr.readyState+""==igk.constants.undef)){throw("No Ajax Support");}if(monitorlistener){const{withCredentials}=monitorlistener;xhr.withCredentials=withCredentials;}this.xhr=xhr;this.saveState=false;this.uri=null;this.postargs=null;this.method="GET";this.synchronize=false;this.noBlob=false;this.setResponseMethod=function(method){var q=this;if(method){switch(typeof(method)){case "function":q.responseMethod=method;q.xhr.onreadystatechange=function(){if(q.responseMethod){m_hxhr=q;igk.context='xhr';q.responseMethod(this);m_hxhr=null;igk.context=null;}};break;case 'object':var fc=method.complete ? function(){method.complete.apply(method,[q.xhr,method]);}:null;q.xhr.onreadystatechange=null;q.xhr.onload=fc;q.xhr.onerror=method.error;break;}}};function __initheader(){igk.ajx.setHeader(this.xhr);if(!igk.isFunc(typeof(document.domain))){this.xhr.setRequestHeader("IGK-FROM","igkdev");}};this.send=function(method,url,postargs,sync){this.uri=url;this.asynchronize=typeof(sync)==igk.constants.undef ? true :sync;this.postargs=postargs;this.method=method;this.xhr.open(method,url,this.asynchronize);if(this["ajx.xhr"]){igk_appendProp(this.xhr,this["ajx.xhr"]);}__initheader.apply(this);if(postargs){if(typeof(postargs)=="string"){this.xhr.setRequestHeader("Content-Type",this.contentType||"application/x-www-form-urlencoded;charset=iso-8859-1");}}if(monitorlistener){this.xhr.onloadstart=monitorlistener.loadstart;this.xhr.onloadend=monitorlistener.loadend;this.xhr.onprogress=monitorlistener.loadprogress;this.xhr.withCredentials=monitorlistener.withCredentials;}this.xhr.send(postargs);};},postWebRequest:function(uri,action,param,func,headers,async,savestate,extradata){if(typeof(async)==igk.constants.undef)async=!0;var ajx=new igk.ajx.ajx();ajx.saveState=(savestate)? true :false;__ajx_setExtraData(ajx,extradata);igk.appendProperties(ajx,{serviceResponse:function(){var d=document.createElementNS(igk.namespaces.xhtml,"dummy");$igk(d).setHtml(ajx.xhr.responseText);var r=$igk(d).select(action+"_result").first();if(r){return r.o.innerHTML;}return 0;}});ajx.setResponseMethod(__ajx_initfunc(func));ajx.xhr.open("POST",uri,async);ajx.xhr.setRequestHeader("Content-Type","text/plain");igk.ajx.setHeader(ajx.xhr);ajx.xhr.setRequestHeader("SOAPACTION",action);var v_params="";for(var i in param){v_params+="<"+ i+">"+ param[i]+"</"+ i+">";}var v_body="<"+ action+">"+ v_params+"</"+ action+">";var packet='<?xml version="1.0" encoding="utf-8"?><soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema"><soap:Body>'+ v_body+'</soap:Body></soap:Envelope>';ajx.xhr.send(packet);return ajx;},post(uri,param,func,async,savestate,extradata){return igk.ajx.send(uri,'POST',param,func,async,savestate,extradata);},apost(uri,param,func,savestate,extradata){return igk.ajx.post(uri,param,func,true,savestate,extradata);},get(uri,param,func,async,savestate,extradata){var ajx=new igk.ajx.ajx(m_ajx_monitorListener);if(typeof(async)==igk.constants.undef)async=!0;ajx.saveState=(savestate==igk.constants.undef)? true :false;__ajx_setExtraData(ajx,extradata);ajx.setResponseMethod(__ajx_initfunc(func));ajx.send("GET",uri,param,async);return ajx;},aget(uri,param,func,extradata){return igk.ajx.get(uri,param,func,true,extradata);},join:function(n){if(n in sm_join){sm_join[n].abort();}sm_join[n]=this;return igk.ajx;},send(uri,method,param,func,async,savestate,extradata){if(typeof(async)==igk.constants.undef)async=!0;var contentType=null;if(typeof(uri)=='object'){method=uri.method||method;param=uri.param||param;func=uri.func||func;contentType=uri.contentType||contentType;uri=uri.uri||uri;}var ajx=null;try{ajx=new igk.ajx.ajx(m_ajx_monitorListener);ajx.saveState=(savestate)? true :false;ajx.contentType=contentType;__ajx_setExtraData(ajx,extradata);ajx.setResponseMethod(__ajx_initfunc(func));ajx.send(method,uri,param,typeof(async)==igk.constants.undef ? !0 :async);}catch(e){igk.log.write("ajx log error : Error ::::: ");igk.show_notify_prop_v(e);}return ajx;},postform:function(form,uri,func,sync,callback){if(!form)return;uri=uri||form.getAttribute("action");var method=(form.getAttribute("method")||"POST").toUpperCase();var msg="";var e=null;var p=[];var send=0;if(window.tinyMCE){window.tinyMCE.triggerSave();}var fc=method=="POST" ? igk.ajx.post :igk.ajx.get;function __appendForm(id,value){if(p[id]){var tab=p[id];if(igk_is_array(tab)){tab.push(value);}else{var tt=[];tt.push(tab);tt.push(value);p[id]=tt;}}else p[id]=value;}if(igk.winui.lineWaiter){var lw=igk.winui.lineWaiter.prependTo(form);var tf=func;$igk(form).select(".actions").addClass("dispn");func=function(xhr){if(tf &&(typeof(tf)=='function')){tf.apply(this,[xhr]);}if(this.isReady()){lw.remove();$igk(form).select(".actions").rmClass("dispn");}else if(xhr.readyState==4){lw.remove();}};}if(window.FormData){var frmData=null;var enctype=form.getAttribute("enctype");if(enctype=="application/json"){var obj=0;var data=0;if(obj=form.getAttribute("form-data")){data=obj;if(typeof(data)=='object')data=JSON.stringify(data);}else{obj={};igk.winui.form.serialize(form,obj);data=JSON.stringify(obj);}igk.ajx.send({uri:uri,method:method,contentType:'application/json',func:function(xhr){if(this.isReady()){if(typeof(func)=="function"){func.apply(this,[xhr]);}}},param:data});}else{frmData=new FormData(form);if(window.event && window.event.submitter){var i=window.event.submitter;var n=i.getAttribute("name");if(n){frmData.append(n,i.getAttribute("value"));}}else{form.querySelectorAll("input[type='submit']").forEach(function(i){var n=i.getAttribute("name");if(n){frmData.append(n,i.getAttribute("value"));}});}if(enctype=="application/x-www-form-urlencoded"){frmData=encodeQueryFromData(frmData);}callback && callback({type:'frmdata',data:frmData});fc(uri,frmData,func,(sync==igk.constants.undef)? sync :true,true,{contentType:"application/x-www-form-urlencoded",source:$igk(form)});send=1;}}else{for(var i=0;i<form.length;i++){e=form.elements[i];switch(e.type){case "radio":case "checkbox":if(e.checked){__appendForm(e.id,e.value);}break;case "file":if(e.files.length>0){frmData.append(e.id,e.files[0]);}break;default:__appendForm(e.id,e.value);break;}}e=0;for(var i in p){if(e !=0)msg+="&";if(igk_is_array(p[i])){for(var t in p[i]){if(e !=0)msg+="&";msg+=i+"="+ p[i][t];e=1;}}else msg+=i+"="+ p[i];e=1;}callback && callback({type:'msg',data:msg});fc(uri,msg,func,(sync==igk.constants.undef)? sync :true,true,{source:form});send=1;}return send;},asyncget:function(uri,param,mimetype){var Prom=window.Promise;if(!Prom)return false;try{var b=igk.dom.body();}catch(ex){var p=new Promise(function(r,j){var fc=function(o){r(o);};fc.error=function(){j('[BJS] failed to get : '+ uri);};igk.ajx.get(uri,null,function(xhr){console.debug("for : "+ xhr.status);if(this.isReady()){fc(xhr.responseText);}});});return p;}mimetype=mimetype||'text/plain';var p=new Promise(function(r,j){var fc=function(o){r(o.data);};fc.error=function(){j(new Error('[BJS] - objdata failed: '+ uri+', '+ mimetype));};igk.system.io.getData(uri,fc,mimetype);});return p;},uploadInputFile:function(inputfile,uri,async,responseCallback,startcallBack,progressCallback,doneCallback){const _ln=inputfile.files.length;let _task=[];let _max=_ln;let _error_fc=null;if(typeof(uri)=='object'){_max=typeof(uri.max)!='undefined' ? uri.max :_max;_error_fc=uri.error;uri=uri.uri;}if(_ln>_max){if(_error_fc){_error_fc(uri,'not allowed to upload more than {0} file(s).',_max);}return;}if(_ln>0){if(_ln==1)return igk.ajx.uploadFile(null,inputfile.files[0],uri,async,responseCallback,startcallBack,progressCallback,doneCallback);let _min=Math.min(_max,_ln);for(let i=0;i<_min;i++){_task.push((function(i){const g=inputfile.files[i];let args=[i,g];return new Promise(function(resolve,reject){igk.ajx.uploadFile(null,g,uri,async,function(xhr){if((xhr.status>0)&&(xhr.status !=200)){reject(xhr)}else{responseCallback.apply(this,[xhr,i,g]);}},function(){startcallBack.apply(this,args);},function(){progressCallback.apply(this,args);},function(){doneCallback.apply(this,args);resolve(i,g);});});})(i));}return Promise.all(_task).then(function(){});}},setUploadFileInitializer(fc){_ajx_info.initializer=fc;},uploadFileInitializer(xhr){let _fc=_ajx_info.initializer;if(_fc){_fc(xhr);}},uploadFile:function(osrc,file,uri,async,responseCallback,startcallBack,progressCallback,doneCallback,method){if(!file){console.error("/!\\ file not define");return;}var bob=null;var reader=null;var v_ajx=new igk.ajx.ajx();v_ajx.source=osrc;var self=this;var xhr=v_ajx.xhr;var m=method ? method :'blob';responseCallback=responseCallback||igk.ajx.fn.replace_or_append_to_body;if(igk.navigator.isIE()&& igk.navigator.IEVersion()){v_ajx.setResponseMethod(function(xhr){if(this.isReady()){igk.ajx.post(uri+'&ie=1',null,responseCallback);}});}else{v_ajx.setResponseMethod(responseCallback);}xhr.open("POST",uri,async);v_ajx.xhr.upload.onerror=function(evt){igk.winui.notify.showErrorInfo("Error","/!\\ uploaded failed: "+ uri+"<br />"+" "+ evt);console.debug("Error : "+ v_ajx.xhr.statusText);console.debug(v_ajx.xhr);};if(async){v_ajx.xhr.upload.onprogress=function(evt){if(progressCallback){progressCallback.apply(this,arguments);}};v_ajx.xhr.upload.onload=function(evt){if(doneCallback){doneCallback.apply(this,arguments);}};v_ajx.xhr.upload.onloadstart=function(evt){if(startcallBack){startcallBack.apply(this,arguments);}}}xhr.overrideMimeType('text/plain; charset=x-user-defined-binary');xhr.setRequestHeader("Cache-Control","no-cache");igk.ajx.setHeader(xhr);xhr.setRequestHeader("IGK-UPLOADFILE",true);xhr.setRequestHeader("IGK-FILE-NAME",file.name);xhr.setRequestHeader("IGK-UP-FILE-SIZE",file.size);xhr.setRequestHeader("IGK-UP-FILE-TYPE",file.type);igk.ajx.uploadFileInitializer(xhr);var type=file.type;type="application/octet-stream";xhr.setRequestHeader("Content-Type",type+"; charset=utf-8; boundary="+ Math.random().toString().substr(2));var r=file;var filer=false;if(m !='blob'){if(typeof(FileReader)!=IGK_UNDEF)filer=new FileReader();if(!filer){return;}reader=filer;reader.onload=function(evt){var t=igk.winui.eventTarget(evt);if(xhr.sendAsBinary)xhr.sendAsBinary(t.result);else{xhr.send(t.result);}};if(reader.readAsBinaryString)reader.readAsBinaryString(r);else reader.readAsText(r);}else{if(r.slice){bob=r.slice(0,file.size);try{xhr.send(bob);}catch(ex){igk.winui.notify.showErrorInfo("JS Exception ",""+ ex);}}}},load:function(f,callback){var async=0;var param=null;var ajx=new igk.ajx.ajx();ajx.saveState=1;ajx.setResponseMethod(callback);ajx.send("GET",f,param,async);return ajx;},toString:function(){return "igk.ajx";},globalMonitorListener:function(){igk.appendProperties(this,{loadstart:function(evt){igk.publisher.publish('sys://ajx/loadstart',{evt:evt});},loadend:function(evt){igk.publisher.publish('sys://ajx/loadend',{evt:evt});},loadprogress:function(evt){igk.publisher.publish('sys://ajx/loadprogress',{evt:evt});}});}});})();function encodeQueryFromData(frmData){var s='';function encode(s){return encodeURIComponent(s).replace(/%20/g,'+');}for(var pair of frmData.entries()){if(typeof pair[1]=='string'){s+=(s ? '&' :'')+ encode(pair[0])+'='+ encode(pair[1]);}}return s;};createNS("igk.ajx",{fetch:function(uri,data){if(!window.Promise){throw("Promise not found - old browser");}var p=new Promise(function(resolv,reject){igk.ajx.aget(uri,data,function(xhr){if(this.isReady()){resolv.apply(xhr);}else if(xhr.readyState==4){reject.apply(xhr);}});});return p;},postFormData:function(uri,data){var f=igk.dom.body().add("form");f.setAttribute("action",uri);f.setAttribute("method","POST");f.setAttribute("enctype","multipart/form-data");for(var i in data){f.add("input").setAttribute("name",i).setAttribute("value",(typeof(data[i])=='object')? JSON.stringify(data[i]):data[i]);}f.o.submit();}});m_ajx_monitorListener=new igk.ajx.globalMonitorListener();igk_appendProp(igk.ajx.ajx.prototype,{isReady:function(){return(this.xhr.readyState==4)&&(this.xhr.status==200);},json:function(){var r=this.xhr.responseText;if(r){return JSON.parse(r);}},isFailed:function(){if((this.xhr.readyState==4))return(this.xhr.status !=200);return true;},toString:function(){return "igk.ajx";},setResponseTo:function(q,unregister){if(q &&(typeof(q.innerHTML)!=IGK_UNDEF)){if(q==igk.dom.body().o){this.replaceBody();}else{if(unregister){igk.winui.getEventObjectManager().unregister_child(q);}q.innerHTML=this.xhr.responseText;igk.ajx.fn.initnode(q);}}},replaceBody:function(){igk.ajx.replaceBody(this.xhr.responseText,true);},replaceResponseNode:function(node,preload){var i=igk.createNode("dummy");var p=typeof(preload)==igk.constants.undef ? !0 :preload;var t=this.xhr.responseText;i.setHtml(t);if(node && node.parentNode){var pt=$igk(node.parentNode);var _ini=[];var _c=(node.previousSibling==null)? pt.o.firstChild :node;while(i.o.firstChild){_ini.push(i.o.firstChild);pt.o.insertBefore(i.o.firstChild,_c);}$igk(node).remove();for(var i=0;i<_ini.length;i++){if(_ini[i].nodeType==1)igk.ajx.fn.initnode(_ini[i]);}}},appendResponseTo:function(q){var s=igk.createNode("dummy");s.setHtml(this.xhr.responseText);var f=s.o.firstChild;var h=s.o.firstChild;while(f){q.appendChild(f);igk.ajx.evalNode(f);f=f.nextSibling;}},prependResponseTo:function(q){var s=igk.createNode("dummy");s.o.innerHTML=this.xhr.responseText;var m=q.o.firstChild;var f=s.o.firstChild;var c=f;while(f){c=c.nextSibling;q.insertBefore(f,m);igk.ajx.evalNode(f);f=c;}},abort:function(){this.xhr.abort();}});})();createNS("igk.soap",{query:function(data){var ns="http://schemas.xmlsoap.org/soap/envelope/";var r='<?xml version="1.0" encoding="utf-8"?><soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:xsd="http://www.w3.org/2001/XMLSchema">';var g=igk.createNode("soap:Body",ns);var m=data.method;if(m){var fm=g.add(igk.createNode(m,ns));if(data.params){for(var i in data.params){fm.add(i).setHtml(data.params[i]);}}}r+=g.o.outerHTML;r+="</soap:Envelope>";igk.ajx.post(data.uri,r,function(xhr){if(this.isReady()){var q=igk.createNode("div");q.setHtml(xhr.responseText);if(xhr.status==200){if(m && data.ready){var g=q.getElementsByTagName(m+"_result")[0];data.ready({data:g.innerHTML});}}else{var g=q.getElementsByTagName("faultstring")[0];if(data.error && g)data.error({data:g.innerHTML});}}});}},{desc:"used to handle soap request"});(function(){var m_nodeReady=[];var m_initBeforeReady=[];var m_ajx_host=null;var _postdata=[];function _bready(c){var l=m_initBeforeReady.length;if(l<=0)return;var m=$igk(c);for(var i=0;i<l;i++){m_initBeforeReady[i].apply(m);}};function _initnode(c){if(!c){return;}_bready(c);igk.ajx.evalNode(c);igk.ctrl.callBindAttribData(c);igk.ajx.fn.nodeReady(c);var p=igk.publisher;p.publish("sys://node/init",{target:c,rootDepth:0 });p.publish("sys://doc/changed",{target:c,context:'initnode'});};createNS("igk.ajx.fn",{none:function(){},complete_ready:function(select){return function(xhr,q){var s=q.select(select).first();if(s)s.setHtml(xhr.responseText).init();};},postData:function(uri,n,t,m){if(uri in _postdata){_postdata[uri].abort();}var fc=null;if(typeof(t)=='string'){var g=$igk(t).first();if(g)fc=igk.ajx.fn.replace_content(g.o);}else if(typeof(t)=='function'){fc=t;}else{fc=igk.ajx.fn.replace_or_append_to_body;}var v=n.value;if(typeof(v)=='object')v=igk.JSON.convertToString(v);var _send=igk.ajx.post;var _data=n.id+"="+ v;if(!m){_send=igk.ajx.get;uri+=((uri.indexOf("?")==-1)? "?" :"&")+ _data;}g=_send(uri,_data,function(xhr){if(this.isReady()){if(fc)fc.apply(this,[xhr]);delete(_postdata[uri]);}});_postdata[uri]=g;},appendTo:function(t){return function(xhr){if(this.isReady()){igk.ajx.fn.append_to(xhr,t);}}},scriptReplaceContent:function(m,u,t){var fc=igk.ajx.get;if(m=="post")fc=igk.ajx.post;function rp(xhr){if(this.isReady()){if(igk.winui.lineWaiter)igk.winui.lineWaiter.remove(t);igk.ajx.fn.replace_content(t).apply(this,[xhr]);}else if((xhr.status !=200)&&(xhr.readyState==4)){igk.winui.lineWaiter.remove(t);if(igk.ENVIRONMENT.debug)$igk(t).setHtml(igk.R.gets("AJX - Error"));}}if(igk.winui.lineWaiter){igk.winui.lineWaiter.prependTo(t);}fc.apply(window,[u,null,rp]);},getfortarget:function(u,t){if(!t)return;igk.ajx.get(u,null,function(xhr){if(this.isReady()){this.setResponseTo(t);igk.ajx.fn.initnode(t);}});},replace_body:function(xhr){if(this.isReady()){this.replaceBody();}},replace_node:function(host){return function(xhr){if(this.isReady()){this.replaceResponseNode(host,false);}}},replace_content:function(host){return function(xhr){if(this.isReady()){var g=igk.utils.getBodyContent(xhr.responseText,1);if(g !=null){igk.dom.body().setHtml('');igk.ajx.fn.replace_or_append_to(igk.dom.body().o).apply(this,[xhr]);}else{this.setResponseTo(host,true);}}};},replace_or_append_to:function(t){return function(xhr){if(this.isReady()){var q=igk.createNode("dummy");q.setHtml(xhr.responseText);var i=q.o.childNodes.length;if(i>0){var vo=new igk.selector();while(i>0){var c=q.o.childNodes[0];var p=0;if(igk.ajx.fn.ctrl_replacement(c)==false){if(c.id){var ki=document.getElementById(c.id);if(ki){p=1;ki.parentNode.replaceChild(c,ki);}}}else{p=1;}if(p==0)t.appendChild(c);igk.ajx.fn.initnode(c);i--;vo.push(c);}}igk.publisher.publish(igk.evts.dom[2],{target:t,src:xhr.responseText});}};},replace_or_append_to_body:function(xhr){if(this.isReady()){var g=igk.utils.getBodyContent(xhr.responseText,1);if(g !=null)igk.dom.body().setHtml('');igk.ajx.fn.replace_or_append_to(igk.dom.body().o).apply(this,[xhr]);}},append_to_body:function(xhr){if(this.isReady()){igk.ajx.fn.append_to(xhr,igk.dom.body().o);}},prepend_to_body:function(xhr){if(this.isReady()){igk.ajx.fn.prepend_to(xhr,igk.dom.body().o);}},ctrl_replacement:function(c){if(c && c.tagName &&(c.tagName.toLowerCase()=='igk:replace-ctrl')){var q=$igk(c);var st=q.getAttribute("target");var h=q.getAttribute("hash");if(st){var t=$igk(st).first();if(t){var s=q.select(">>");if(s.getCount()==1){s.each(function(){t.replaceBy(this);igk.ajx.fn.initnode(this.o);return !1;})}else{var m="";s.each(function(){m+=this.o.outerHTML;return !0;});t.setHtml(m);igk.ajx.fn.initnode(t.o);}q.remove();if(h){document.location.hash=h;}return !0;}}q.select(">>").each(function(){var g=$igk("#"+ this.o.id).first();if(g &&(g.getAttribute('igk-type')=="controller")){g.replaceBy(this);igk.ajx.fn.initnode(this.o);}return !0;});$igk(c).remove();return !0;}return !1;},append_to:function(xhr,target){if(xhr.responseText.length>0){var q=igk.createNode("div");var txt=igk.utils.treatBodyContent(xhr.responseText);q.setHtml(txt);var i=q.o.childNodes.length;if(i>0){var vo=new igk.selector();var ct=0;while(i>0){var c=q.o.childNodes[ct];if(igk.ajx.fn.ctrl_replacement(c)==false){if(c.tagName &&(c.tagName.toLowerCase()=='igk-body')&&($igk(target).o==igk.dom.body().o)){igk.dom.body().replaceWith(c);igk.ajx.fn.initbody();ct++;}else{target.appendChild(c);igk.ajx.fn.initnode(c);}}i--;vo.push(c);}return vo;}}return null;},prepend_to:function(xhr,t){if(xhr.responseText.length>0){var q=igk.createNode("div");q.setHtml(xhr.responseText);var i=q.o.childNodes.length;while(i>0){var c=q.o.childNodes[0];if(igk.ajx.fn.ctrl_replacement(c)==false){$igk(t).prependChild(c);igk.ajx.fn.initnode(c);}i--;}}},nodeReady:function(c){if(c.tagName && /(no)?script/.test(c.tagName.toLowerCase()))return;if(m_nodeReady &&(m_nodeReady.length>0)){for(var i=0;i<m_nodeReady.length;i++){m_nodeReady[i].apply(c);}}},registerNodeReady:function(f){if(typeof(f)=="function")m_nodeReady.push(f);},unregisterNodeReady:function(f){var s=[];for(var i=0;i<m_nodeReady.length;i++){if(m_nodeReady[i]==func){continue;}s.push(readyFunc[i]);}m_nodeReady=s;},initBeforeReady:function(f){if(typeof(f)=="function")m_initBeforeReady.push(f);},uninitBeforeReady:function(f){var c=[];for(var i=0;i<m_initBeforeReady.length;i++){if(m_initBeforeReady[i]==f)continue;c.push(m_initBeforeReady[i]);}m_initBeforeReady=c;},initbody:function(){igk.ajx.fn.initnode(igk.dom.body().o);igk.publisher.publish("system/bodychange",{target:igk.dom.body().o});},bindto:function(n,h){return function(xhr){if(this.isReady()){this.setResponseTo(n);igk.ajx.fn.initnode(n.o);if(h)window.igk.winui.saveHistory(h);}}},initnode:function(c){if(!c)return;if(typeof(c.nodeType)=="undefined"){throw new Error("BAD dom node initialization ... element is not a node : "+ c);}function bindNode(n){this.c=n;var q=this;igk.appendProperties(this,{init:function(){_initnode(q.c);}});};if(document.readyState !='complete'){igk.ready(new bindNode(c).init);return;}_initnode(c);},setHost(h){if(typeof(h)=='string'){m_ajx_host=igk.dom.body().qselect(h);}else{m_ajx_host=h;}}});})();igk.animation.constants={gL:"gotoleft",gR:"gotoright",gT:"gototop",gB:"gotobottom",DIR_VERTICAL:"vertical",DIR_HORIZONTAL:"horizontal"};function igk_setcss_bound(i,rect){$igk(i).setCss({"left":rect.x+"px","top":rect.y+"px","width":rect.width+"px","height":rect.height+"px"});}function igk_debug_show_heararchi(node){var q=frm;while(q){igk.console_debug(q.tagName+":"+ q.id);q=q.parentNode;}}function igk_debug(msg){if(igk.DEBUG){igk.console_debug(msg);}}function igk_debug_t(tag,msg){if(igk.DEBUG){igk.console_debug("["+ tag+"]-"+ msg);}}createNS("igk.utils",{getv:igk_getv,get_form_posturi:igk_get_form_posturi,submit_fromenter:function(k,evt){if(evt.keyCode &&(evt.keyCode==13)){k.form.submit();return !1;}return !0;},treatBodyContent:function(txt){if(!txt)throw("/!\\ txt not define");return txt.replace(/(<\/?)body( .+?)?>/gi,'$1IGK-BODY$2>',txt);},getBodyContent:function(text,bonly){var s="";var t=igk.createNode("div");if(text){s=igk.utils.treatBodyContent(text);t.setHtml(s);}var tt=t.getElementsByTagName("IGK-BODY");if(tt.length==1){var out=tt[0].innerHTML;return out;}if(bonly)return null;return s;}});igk.utils.Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(input){var output="";var chr1,chr2,chr3,enc1,enc2,enc3,enc4;var i=0;input=igk.utils.Base64._utf8_encode(input);while(i<input.length){chr1=input.charCodeAt(i++);chr2=input.charCodeAt(i++);chr3=input.charCodeAt(i++);enc1=chr1>>2;enc2=((chr1 & 3)<<4)|(chr2>>4);enc3=((chr2 & 15)<<2)|(chr3>>6);enc4=chr3 & 63;if(isNaN(chr2)){enc3=enc4=64;}else if(isNaN(chr3)){enc4=64;}output=output+ this._keyStr.charAt(enc1)+ this._keyStr.charAt(enc2)+ this._keyStr.charAt(enc3)+ this._keyStr.charAt(enc4);}return output;},decode:function(input){var output="";var chr1,chr2,chr3;var enc1,enc2,enc3,enc4;var i=0;input=input.replace(/[^A-Za-z0-9\+\/\=]/g,"");while(i<input.length){enc1=this._keyStr.indexOf(input.charAt(i++));enc2=this._keyStr.indexOf(input.charAt(i++));enc3=this._keyStr.indexOf(input.charAt(i++));enc4=this._keyStr.indexOf(input.charAt(i++));chr1=(enc1<<2)|(enc2>>4);chr2=((enc2 & 15)<<4)|(enc3>>2);chr3=((enc3 & 3)<<6)|enc4;output=output+ String.fromCharCode(chr1);if(enc3 !=64){output=output+ String.fromCharCode(chr2);}if(enc4 !=64){output=output+ String.fromCharCode(chr3);}}output=igk.utils.Base64._utf8_decode(output);return output;},_utf8_encode:function(string){if(!string)return null;string=string.replace(/\r\n/g,"\n");var utftext="";for(var n=0;n<string.length;n++){var c=string.charCodeAt(n);if(c<128){utftext+=String.fromCharCode(c);}else if((c>127)&&(c<2048)){utftext+=String.fromCharCode((c>>6)|192);utftext+=String.fromCharCode((c & 63)|128);}else{utftext+=String.fromCharCode((c>>12)|224);utftext+=String.fromCharCode(((c>>6)& 63)|128);utftext+=String.fromCharCode((c & 63)|128);}}return utftext;},_utf8_decode:function(utftext){var string="";var i=0;var c=0;var c1=0;var c2=0;while(i<utftext.length){c=utftext.charCodeAt(i);if(c<128){string+=String.fromCharCode(c);i++;}else if((c>191)&&(c<224)){c2=utftext.charCodeAt(i+ 1);string+=String.fromCharCode(((c & 31)<<6)|(c2 & 63));i+=2;}else{c2=utftext.charCodeAt(i+ 1);c3=utftext.charCodeAt(i+ 2);string+=String.fromCharCode(((c & 15)<<12)|((c2 & 63)<<6)|(c3 & 63));i+=3;}}return string;}};function igk_check_change(uri,every){var obj={uri:uri,interval:every,doaction:function(){var self=this;igk.ajx.post(uri,null,function(xhr){if(this.isReady()){if(xhr.responseText.length>0){var q=igk.createNode("data");igk_remove_all_script(q);var tdata=q.getElementsByTagName("data");if(tdata.length !=1){var t=document.getElementById("changeresponse");if(t==null){t=igk.createNode("div");t.id="changeresponse";igk.dom.body().appendChild(t);}}setTimeout(function(){self.doaction();},self.interval);}}});}};obj.doaction();}function igk_confirm_article_del(item){if(confirm("voulez vous vraiment supprimer l'article ?\nNote: la suppression es irrversible")){item.href=item.href+'&confirm=1';return !0;}return !1;}function igk_check_all(parent,node,value,toggle,target){if(node==null){console.debug("igk_check_all: node is null. perhaps IGKcontext failed");return;}var t=null;if(!target)t=$igk(node).select("input");else t=$igk(node).select(target);function __update(){if((this.o !=parent)&&(this.o.type=="checkbox")){if(toggle){if(this.o.checked==value){this.o.checked=!value;}else{this.o.checked=value;}}else{this.o.checked=value;}}return !0;};if(t){if(t.isSr())t.each(__update);else{__update.apply(t);}}}var m_preloadFunctions=[];function __applyPreloadDocument(document){for(var i=0;i<m_preloadFunctions.length;i++){m_preloadFunctions[i].apply(document);}};function __registerHtmlPreloadDocumentCallBack(name,callback){if(callback && name){if(!m_preloadFunctions[name]){var c={funcs:[],funcCount:function(){return this.funcs.length;},apply:function(target){for(var i=0;i<this.funcs.length;i++){this.funcs[i].apply(target);}},add:function(callback){if(callback){this.funcs.push(callback);}},remove:function(callback){for(var i=0;i<this.funcs.length;i++){if(callback==this.funcs[i]){this.funcs.pop(this.funcs[i]);}}},toString:function(){return "functionRegister";}};m_preloadFunctions[name]=c;m_preloadFunctions.push(c);}var s=m_preloadFunctions[name];s.add(callback);}};function __unregisterHtmlPreloadDocumentCallBack(name,callback){if(m_preloadFunctions[name]){m_preloadFunctions.remove(callback);}}createNS("igk.configmenu",{init:function(p){var t=p.getElementsByTagName("a");var a=null;for(var i=0;i<t.length;i++){a=t[i];a.onclick=function(){return igk.configmenu.navigate(this,this.getAttribute('page'));};}},navigate:function(i,p){var frm=igk.getParentById(i,'form');if(frm==null)return;frm.action=i.href;frm.menu.value=p;frm.submit();return !1;}});createNS('igk.ctrl',{bindPreloadDocument:__registerHtmlPreloadDocumentCallBack});createNS('igk.ctrl.utils',{check_all:igk_check_all});createNS("igk.winui.gui",{rectangleSnippet:function(o){this.o=o;this.bound=new igk.math.rectangle(0,0,8,8);this.view=igk.createNode("div");$igk(this.view).setCss({"position":"absolute","border":"1px solid black","backgroundColor":"transparent"});$igk(this.view).setProperties({"class":"dark_op90"});igk_setcss_bound(this.view,this.bound);this.o.view.appendChild(this.view);this.setBound=function(rc){this.bound=rc;igk_setcss_bound(this.view,this.bound);}}});createNS("igk.winui.rectangleSelector",{init:function(target){if(!target)return null;$igk(target).setCss({"position":"absolute","left":"0px","top":"0px","width":"400px","height":"400px","border":"1px dotted gray","backgroundColor":"transparent","zIndex":"500"});var m_bound=new igk.math.rectangle();$igk(m_bound).setProperties({x:10,y:10,width:400,height:250 });function __updatesize(){var m_rc=0;var m_snippets=this.snippets;igk_setcss_bound(this.view,this.bound);m_rc=new igk.math.rectangle(0 + this.bound.width / 2,0,0,0);m_rc.inflate(4,4);m_snippets[0].setBound(m_rc);m_rc=new igk.math.rectangle(0 + this.bound.width,this.bound.height / 2,0,0);m_rc.inflate(4,4);m_snippets[1].setBound(m_rc);m_rc=new igk.math.rectangle(0 + this.bound.width / 2,+this.bound.height,0,0);m_rc.inflate(4,4);m_snippets[2].setBound(m_rc);m_rc=new igk.math.rectangle(0,+this.bound.height / 2,0,0);m_rc.inflate(4,4);m_snippets[3].setBound(m_rc);};function __initSippets(t){var m_snippets=new Array();m_snippets[0]=new igk.winui.rectangleSnippet(t);m_snippets[1]=new igk.winui.rectangleSnippet(t);m_snippets[2]=new igk.winui.rectangleSnippet(t);m_snippets[3]=new igk.winui.rectangleSnippet(t);return m_snippets;}return new function(){this.view=target;this.bound=m_bound;this.update=__updatesize;this.toString=function(){return "igk.winui.rectangleSelector";};this.snippets=__initSippets(this);this.update();};}});createNS("igk",{css:new(function(){igk.appendProperties(this,{getProperties:function(){return props;},getDomStyle:function(){if(domProp==null){domProp={};var rb=igk.createNode("body");rb.setCss({"display":"none","clear":"both","width":"auto"});document.body.appendChild(rb.o);for(var i in props){domProp[i]=rb.getComputedStyle(props[i]);if(i=="width"){console.debug(i+" x = "+ domProp[i]);}}rb.remove();}return domProp;},getValue:function(item,name){var tprops=this.getProperties();var d=igk.createNode("div");var kr=tprops[name.toLowerCase()];if(tprops[kr]){return item.style[tprops[kr]];}return item.style[name];},});return this;})()});function _is_integer(n){return parseInt(n)+""==n+"";};const _ready_func=function(){var t=this.tagName ? this.tagName.toLowerCase():"";if(m_tag_obj[t]&& m_tag_obj[t].func){m_tag_obj[t].func.apply(this);}};if(igk.ctrl.registerReady){igk.ctrl.registerReady(_ready_func);}else{$igk(igk.winui.events.global()).reg_event('igk_controller_ready',function(){igk.ctrl.registerReady(_ready_func);});}var igk_rmScript=function(){var c=igk_getCurrentScript();if(c && !c.src){$igk(c).remove();}};createNS("igk.balafonjs.utils",{closeDialog:function(){igk_rmScript();},closeNotify:function(g){igk.winui.notify.close();if(g)igk_rmScript();}},{desc:'balafon utility functions namespace'});createNS("igk.winui.eventArgs",{progress:function(evt){var q=this;var m_evt=evt;igk.appendProperties(this,{getEventSource:function(){return m_evt;},getTotalSize:function(){return m_evt.TotalSize;},getUploadedSize:function(){return m_evt.position;}});}});(function(){var m_f=[];var m_i=null;function _get_parentscroll(p){var q=$igk(p);var c=q.getscrollParent();if(p && p.target){c=q.select(p.target);}else{c=q.select('^.igk-parentscroll').getNodeAt(0);}return c;}function fixscrollmanager(t,p,c){var q=$igk(t);$igk(c).reg_event("scroll",function(evt){if(p && p.update){p.update.apply(q,[{parent:c,scroll:{x:c.scrollLeft,y:c.scrollTop}}]);}});return this;};createNS("igk.winui.fn.fixscroll",{init:function(p){var q=igk.getParentScript();igk.ready(function(){if((q==null)||igk.system.array.isContain(m_f,q)){return;}var c=_get_parentscroll(q);if(c){m_f.push(q);return new fixscrollmanager(q,p,c);}});}});})();createNS("igk.storage",{});createNS("igk.winui.fn",{cancelEventArgs:function(evt){evt.preventDefault();evt.stopPropagation();return !1;},close_all_frames:function(){if(igk.winui.notify.closeAlls)igk.winui.notify.closeAlls();igk.ready(function(){var t=[];igk.dom.body().select(".igk-notify-box").each_all(function(){var q=this;q.remove();});});},isNodeVisible:function(n){throw "not implement[isNodeVisible]";},navigateTo:function(t,pr){var v_t=null;return function(){var c=null;if(typeof(t)=='string'){c=$igk(t).first();}else{c=$igk(t);}if(c){var p=$igk(c.o.offsetParent);if(p){p.scrollTo(c,pr);}}else{igk.show_notify_error("Item not found",t);}};}});(function(){var keys={};var m_lang={fr:['fr','fr-FR','fr-Be'],en:['en','en-En','en-US']};var _res={};function init_res(_res,loc){igk.appendProperties(_res,{getLang(){var s=igk.navigator.getLang().split(',')[0];for(var i in m_lang){if(igk.system.array.isContain(m_lang[i],s))return i;}return s;},gets:function(k){if(__lang[k]){return __lang[k];}return k;},format:function(n){var txt_=n;if(/(string)/.test(typeof(_res[n])))txt_=_res[n];if(arguments.length>1){var tab=igk.system.array.slice(arguments,1);txt_=txt_.replace(/\{([0-9]+)\}/g,function(m,s){return tab[s];});}return txt_;},getLocation:function(){return loc;},"__":function(n){if(n in igk.R){return igk.R[n];}return n;}});};igk.defineProperty(igk,'R',{get:function(){return _res;}});function _loadResource(loc,mime,opts){mime=mime||"text/plain";var _getRes=0;var _src=["_getRes = async function (){","try{","var o  = await igk.ajx.asyncget(loc,null, mime);","o  = o ? opts.then(o) : null;","return  o;","}catch(ex){"," console.error('get resource failed: '+loc+ '\nMessage:'+(ex.message || ex));","}","return null;","};"].join(" ");try{if(igk.navigator.isSafari())throw('safari not handle aync await');(new Function(_src)).apply();}catch(ex){_getRes=function(){var _ext=igk.navigator.isIE()? ".ejson" :".json";var e={"then":function(t){this.__then__=t;return this;},"catch":function(t){this.__catch__=t;return this;}};igk.system.io.getData(loc,function(o){if(e.__then__ && o.data &&(o.data.length>0)){e.__then__(opts.then(o.data));}else if(e.__catch__){e.__catch__("/!\\ failed: "+ loc);}},"application/xml");return e;};}if(typeof(_getRes)!='undefined'){_getRes().then(function(o){_res=o;init_res();})["catch"](function(e){var error=1;if(igk.log)igk.log.write("[BJS] - "+ e);});}};igk.ready(function(){var _lang=igk.dom.html().getAttribute("lang")||igk.navigator.getLang();var dir=igk.system.io.getlocationdir(igk.getScriptLocation());if(!dir||(dir[0]!='/'))return;var loc=igk.resources.getLangLocation(dir,_lang);if(igk.resources.lang[_lang]){init_res(igk.resources.lang[_lang],loc);return;}var g=null;var _storage=window.localStorage;if(typeof(_storage)!='undefined')g=_storage.getItem("lang/"+ _lang);if(g==null){_loadResource(loc,"text/json",{then:function(o){if(_storage)_storage.setItem("lang/"+ _lang,o);return igk.JSON.parse(o);}});}else{igk.invokeAsync(function(){_res=igk.JSON.parse(g);init_res(_res,loc);});}});})();(function(){function __sendFile(evt,target,async,update,startCallback,progressCallback,doneCallBack){var p=target.getProperties();if(p.buzy){return;}p.buzy=!0;if(evt.dataTransfer && igk.system.array.isContain(evt.dataTransfer.types,"Files")){var _t=evt.dataTransfer.files.length;var _m=_t;p.total=_t;p.current=0;var _r=function(){_t--;if(_t<=0){p.buzy=null;p.current=0;}else{p.current=_m- _t;}doneCallBack.apply(this,arguments);};for(var i=0;i<_m;i++){if(target.support(evt.dataTransfer.files[i].type)){igk.ajx.uploadFile(null,evt.dataTransfer.files[i],target.getUri(),async,update,startCallback,progressCallback,_r );}else{_t--;p.total=_t;}}}else{console.debug(evt.dataTransfer.types);igk.winui.notify.showMsBox("Warning","[ BJS ] - Send file to serveur failed","warning");}};createNS("igk.winui.dragdrop.fn",{upload_file:function(evt){evt.preventDefault();evt.stopPropagation();var target=this;var p=target.getProperties();__sendFile(evt,target,p.async,p.update,p.start,p.progress,p.done);}});})();const __freeEventContext=function(){if(igk_freeEventContext){igk_freeEventContext();}};function __global_ready(){if(document.readyState=="complete"){_context_="global_ready";igk.ready(null,"readystatechange",(0,()=>_context_=null)());if('onbeforeunload' in window)igk_winui_reg_event(window,"onbeforeunload",__freeEventContext);}};igk_winui_reg_event(document,"readystatechange",__global_ready);const AsyncFunction=Object.getPrototypeOf(async function(){}).constructor;const _loaded={};function __bindbalafonjs(){let _ids=this.getAttribute('id');if(_ids){if(_ids in _loaded){return;};_loaded[_ids]=1;}var q=this.o;let src=q.innerHTML;let async=this.o.hasAttribute('async')? 'async' :'';src=['\'use strict\'; ('+ async+' function(){',src,'}).apply(this);'].join("\n");try{var _bck=m_scriptNode;m_scriptNode=this.o;if(async.length>0){(new AsyncFunction(src)).apply(this).then(o=>{m_scriptNode=_bck;});}else{(new Function(src)).apply(this);m_scriptNode=_bck;}}catch(e){console.debug(src);console.error(e);}if(q.getAttribute("autoremove")){this.remove();}};igk.ready(function(){var j=0;igk.dom.body().qselect("script[type='text/balafonjs']").each_all(function(){__bindbalafonjs.apply(this);j++;});});(function(){var j=0;__scriptsEval['text/balafon-component']=function(){var p=$igk(this.o.parentNode);var src=' (function(){'+ this.o.innerHTML+'}).apply(this);';p.component=new Object();(new Function(src)).apply(p.component);this.remove();j++;};igk.ready(function(){var _initComponent=__scriptsEval['text/balafon-component'];igk.dom.body().qselect("script[type='text/balafon-component']").each_all(function(){_initComponent.apply(this);});});})();igk.appendProperties(igk,{component(n){return igk.retrieveProperty(n,'component');},retrieveProperty(n,name){var g=$igk(n);while(g !=null){if(name in g){return g[name];}if((g.o.parentNode==null)||(typeof(g.o.parentNode)=='undefined')){break;}g=$igk(g.o.parentNode);}return null;}});igk.ready(function(){var n,b=igk.dom.body();if(typeof(igk.navigator)=='undefined'){return;}n=igk.navigator;if(n.isIE()&& n.IEVersion()<=11){b.addClass("ie-11-service");}if(n.isSafari()){b.addClass("safari");}});var _udef='undefined';ns_igk.__REFID__=__version;ns_igk._$exists=function(n){return typeof(igk.system.getNS(n))!=_udef;};$igk.module={metaSearchParam(meta,key,d){d=d||'';let l=(new URL(meta.url));return decodeURIComponent(l.searchParams.get(key)||d)||d;}};})(window);(function(){var _N_=window.Number.prototype;var _N=window.Number;if(!_N.isNaN)_N.isNaN=function(i){var g=''+ i;if(/[0-9]([0-9]?\.[0-9]+|[0-9]+)?/.test(g))return 0;return 1;};})();(function(){igk.system.createNS("igk.winui.debug",{addMsg:function(msg){var d=$igk("igk-debugger").first();if(d){d.setHtml(msg);}}});})();"uses strict";igk.system.createNS("igk.winui.paneview",{loadfromUri :function(target,uri){(new function(target,uri){this.target=target;this.uri=uri;this.load=function(){var t=this.target;igk.ajx.get(this.uri,null,function(xhr){if(this.isReady()){t.innerHTML=xhr.responseText;igk.winui.paneview.init(t.target);}});}}(target,uri)).load();},init:function(parent){var p=parent? parent:igk.getParentScript();var s=$igk(p).select(".pane-view-groupitem");var prop={interval:20 ,duration:200,speed :1,orientation:"vertical"};function __viewType(evt,index){var t=this.getAttribute("pane-view-type");var tab=this.getElementsByTagName("div");switch(t){case "fade":if(index==1){igk.animation.fadeout(tab[0],20,500,1.0);igk.animation.fadein(tab[1],20,500,0.0);}else{igk.animation.fadeout(tab[1],20,500,1.0);igk.animation.fadein(tab[0],20,500,0.0);}break;case "scrollh":prop.orientation="horizontal";$igk(this).scrollTo(tab[index],prop);break;case "scroll":default:prop.orientation="vertical";$igk(this).scrollTo(tab[index],prop);break;}evt.stopPropagation();}s.each(function(){var t=this.getAttribute("pane-view-type");switch(t){case "fade":$igk(this).addClass("posr");var s=$igk(this).select(".pane-view-block");s.each(function(){$igk(this).addClass("posab loc_t loc_l");return true;});s.getNodeAt(0).style.zIndex=1;s.getNodeAt(1).style.zIndex=0;break;case "scrollh":this.addClass("nowrap");var s=$igk(this).select(".pane-view-block");s.each(function(){$igk(this).addClass("dispib");return true;});break;}this.reg_event("mouseover",function(evt){__viewType.call(this,evt,1);});this.reg_event("mouseout",function(evt){var e=evt.toElement||evt.relatedTarget;if((e)&&((e.parentNode==this)||(e==this))){return;}__viewType.call(this,evt,0);});return true;});}});(function(){function animateHandle(q){var d=function(e){if(this.getisVisible()){q.addClass("animate");}};var _po=q.getscrollParent().o;if(_po==document.body){_po=$igk(document);}else{_po=$igk(_po);}_po.reg_event("scroll",function(){if(q.getisVisible()){q.addClass("animate");}});q.on("transitionend",function(e){if(e.target==q.o){if(e.propertyName=="transform")_po.unreg_event("scroll",d);}});};igk.winui.initClassControl("igk-transitionblock",function(){if(this.getisVisible()){this.addClass("animate");}else{new animateHandle(this);}});})();(function(){igk.system.createNS("igk.winui.ajxview",{init:function(uri,func){(function(q){$ns_igk.ready(function(){$ns_igk.ajx.apost(uri,null,function(xhr){if(this.isReady()){var s=igk.createNode("dummy");var t=igk.utils.getBodyContent(xhr.responseText);if(func)func.apply(this,[{response:s}]);else{$igk(q).setHtml(t);igk.ajx.fn.initnode(q);}}})});})($ns_igk.getParentScript());}});})();(function(){igk.system.createNS("igk.winui.carousel",{init(){var interval=this.getAttribute("igk:interval")||6000;var indicators=this.o.hasAttribute("indicators");var activeSlide=null;var index=0;var q=this;var pe="activeSlideChange";var _items=[];var ptime=0;if(indicators){this.o.removeAttribute('indicators');this.qselect("nav").remove();var nav=this.add("nav").addClass('indicators');var active=this.getAttribute("active")||0;this.qselect(".igk-winui-carousel-slide").each_all(function(){var li=nav.add("li");if(active !==null){if(active==0){li.addClass("igk-active");active=null;}else{active--;}}});}function startInterval(){if(ptime){clearTimeout(ptime);}ptime=setTimeout(function(){if(activeSlide &&(_items.length>0)){var i=(activeSlide.currentIndex+ 1)% _items.length;_items[i].o.click();}},interval);};function _setActiveSlide(a){activeSlide=$igk(a).addClass("igk-active");var idx=activeSlide.currentIndex;activeSlide.carousel.qselect(".igk-winui-carousel-slide").each_all(function(){this.setCss({"transform":"translateX(calc(-100% * "+idx+"))"});});q.raiseEvent(pe);};this.qselect("nav > li").each_all(function(){this.on("click",function(){if(activeSlide){if(activeSlide.o==this)return;activeSlide.rmClass("igk-active");}_setActiveSlide(this);startInterval();});this.carousel=q;this.currentIndex=index;_items.push(this);index++;});activeSlide=this.qselect("nav > li.igk-active").first();if(activeSlide){_setActiveSlide(activeSlide);}startInterval();}});igk.winui.initClassControl("igk-winui-carousel",igk.winui.carousel.init);})();"use script";(function(){igk.winui.initClassControl("igk-winui-clonenode",function(){var t=this.getAttribute("igk:target");var c=this.getAttribute("igk:complete");if(t){t=$igk(t).first();if(t){var g=t.clone();g.rmClass("dispn");g.o.removeAttribute("id");g.o.removeAttribute("name");g.addClass("trans-opacity no-opacity");this.replaceBy(g);if(c){var fc=new Function(c);fc.apply(g);}setTimeout(()=>{g.rmClass("no-opacity");g.on("transitionend",function(e){if(e.target==g.o){g.rmClass("trans-opacity");}});},200);}}else{this.remove();}});})();(function(){function combobox(q){var _sindex=-1;};igk.winui.initClassControl("igk-winui-combobox",function(){var cbox=new combobox(this);var lo=null;var c=null;var items=[];var _slitems=[];var _slindex=-1;var _cancelchange=!1;var _strict=!0;var i=null;var _search_on="value";var _options=igk.JSON.parse(this.getAttribute("igk-options"));if(_options){_strict=_options.strict||!0;_search_on=_options.search_on||_search_on;}function _showOption(ul){ul.setCss({display:''});};function _hideOption(ul){ul.setCss({display:"none" });};function _select(li){var index=items.indexOf(li);if(lo)lo.rmClass("igk-active");i.o.value=igk.toStr(li.getAttribute("value"));i.setAttribute("title",i.o.value);lo=$igk(li);lo.addClass("igk-active");i.rmClass("igk-danger");};function _FillOption(i,items){var rg=new RegExp(i.o.value,"ig");var _rg=0;var _test='';for(var ii=0;ii<items.length;ii++){_rg=$igk(items[ii]);_test=igk.toStr(_rg.getAttribute(_search_on));_rg.o.style.display="none";if(rg.test(_test)){_rg.o.style.display="";_slitems.push(_rg.o);}rg.lastIndex=0;}}if(this.o.tagName.toLowerCase()=='select'){var d=igk.createNode("div");i=d.add("input");var ul=d.add("ul");i.setAttributes({'igk-role':'text' });ul.setCss({display:'',zIndex:10,width:'100%',overflowX:'hidden',position:'absolute'});igk.dom.copyAttributes(this.o,i.o);i.setAttribute("autocomplete","off");i.on("input",function(){_showOption(ul);_slitems.length=0;_FillOption(i,items);}).on("change",function(e){if(_cancelchange)return;if(_slitems.length>0){var rg=new RegExp(i.o.value,"ig");if(_slitems.length==1){if(rg.test(igk.toStr(_slitems[0].getAttribute(_search_on)))){_select(_slitems[0]);}}else{for(var ii=0;ii<_slitems.length;ii++){if(rg.test(igk.toStr(_slitems[ii].getAttribute(_search_on)))){_select(_slitems[ii]);break;}}}_slitems.length=0;}_hideOption(ul);}).on("dblclick",function(e){_FillOption(i,items);ul.addClass("igk-show");_showOption(ul);}).on("blur",function(e){}).on("keydown",function(e){var code=event.charCode||event.keyCode;var p=0;if(_slitems.length>0){if(code==igk.winui.inputKeys.Down){_slindex++;if(_slindex<_slitems.length){_select(_slitems[_slindex]);}p=1;}else if(code==igk.winui.inputKeys.Up){_slindex=Math.max(_slindex-1,0);if(_slindex>=0){_select(_slitems[_slindex]);}p=1;}if(p){e.preventDefault();e.stopPropagation();}}});i.o.validate=function(){var v=!1;var list=items;if(_slitems.length>0){list=_slitems;}var rg=new RegExp(i.o.value,"ig");for(var ii=0;ii<list.length;ii++){if(rg.test(igk.toStr(list[ii].getAttribute(_search_on)))){v=!0;break;}}if(!v){i.addClass("igk-danger");}else{i.rmClass("igk-danger");}return v;};d.options={};var q=this.o.options;var _tt;for(var ii=0;ii<q.length;ii++){c=ul.add('li');_tt=q[ii].getAttribute('igk-display')||q[ii].value||q[ii].innerHTML;c.setHtml(_tt);c.setAttribute("value",q[ii].value);if(_search_on !="value"){c.setAttribute(_search_on,igk.toStr(_tt));}c.select("a").each_all(function(){this.o.parentNode.replaceChild(this.o,document.createText(this.o.innerText));});items.push(c.o);if(this.o.selectedIndex==ii){_select(c.o);}}ul.select(">li").on("click",function(e){_hideOption(ul);var li=e.target;while(li &&(li.parentNode !=ul.o)){li=li.parentNode;}if(!li)return;_select(li);}).on("mousedown",function(e){_cancelchange=!0;}).on("mouseup",function(e){_cancelchange=!1;});this.o.parentNode.replaceChild(d.o,this.o);this.setCss({display:'none'});ul.setCss({display:'none',position:'absolute'});}},{});})();"uses strict";(function(){igk.system.createNS("igk.winui.controls",{init :function(){var t=document.getElementsByTagName("textarea");for(var i=0;i<t.length;i++){var s=t[i].getAttribute("defaulttext");if(s){new igk.winui.controls.textareamanager(t[i],s);}}},textareamanager:function(item,text){this.item=item;this.tip=text;this.text="";var q=this;function update(){if(q.text.length==0){q.item.value=q.tip;q.item.selectionStart=0;q.item.selectionEnd=0;$igk(q.item).addClass("cltextareatip");$igk(q.item).setCss({color:"gray"});}else{$igk(q.item).rmClass("cltextareatip");$igk(q.item).setCss({color:"black"});}};function updateKey(evt){q.text=this.value;update();};function keypress(evt){evt.preventDefault();evt.stopPropagation();igk.show_prop(evt);q.text=this.value;console.debug(q.text);};function updatedown(evt){if(q.text.length==0){if(evt.key.length==1){q.text=evt.key;q.item.value=q.text;q.item.selectionStart=1;q.item.selectionEnd=1;}evt.preventDefault();}}$igk(this.item).reg_event("change",update);$igk(this.item).reg_event("keyup",updateKey);$igk(this.item).reg_event("keydown",updatedown);update();}});igk.ready(igk.winui.controls.init);})();(function(){igk.system.createNS("igk.winui.layout",{autofix_width(n){var self=n;var t=n.o.parentNode;function update(){var x=p.o.offsetWidth- p.o.clientWidth;t.style.width='calc(100% - '+x+'px)';};var p=$igk(n.o.parentNode).select('^.igk-parentscroll').first();if(p){p.on("DOMChanged",function(){update.apply(self);});update.apply(self);}n.remove();}});})();(function(){var selectors={};var _ids={};function uid(){return(performance.now().toString(36)+ Math.random().toString(36)).replace(/\./g,"");};function _id_css(s){id=s.o.getAttribute("id");if(!id){if(!s.fn.ids){var id="css"+ uid();s.addClass(id);s.fn.ids=id;}}return s.getCssSelector();};function _addcss(id){var c=igk.dom.body().add("style");c.o["type"]="text/css";c.o["id"]=id;return c;};function get_auto_height(q){var s=q.o.getAttribute("style");var o=q.getComputedStyle('height');q.setCss({height:"auto"});q.o.blur();var r=q.getComputedStyle('height');if(s)q.o.setAttribute("style",s);else q.o.removeAttribute("style");r=(r=="0px")? q.o.scrollHeight+"px" :r;return r;};function _change_a(a,sub){a.addClass({"expand":sub.supportClass("expand"),});};igk.system.createNS("igk.winui.menu.accordeonMenu",{init(p,options){var q=$igk(p);var expand_item=null;var expand_item_a=null;var type=(options ? options.type :null)||0;function _toggle_single(_id,sub,a){if(!(_id in selectors)){var mh=get_auto_height(sub);_addcss(_id).o.sheet.addRule(_id+".expand","height:"+ mh);selectors[_id]={'maxHeight':mh};}sub.toggleClass("expand");if(sub !=expand_item){if(expand_item){expand_item.toggleClass("expand");}if(expand_item_a && expand_item){_change_a(expand_item_a,expand_item);}expand_item=sub;}else{expand_item=null;}var g=a.select(".expand-icon").first();if(g){_change_a(g,sub);expand_item_a=g;}};q.qselect('a').each_all(function(a){var a=this;a.on("click",function(e){var sub=a.o.nextSibling||$igk(a.o.parentNode).select('ul').first();if(sub){sub=$igk(sub);var _id=_id_css(sub).replace(/\.expand( |$)?/,"");switch(type){case 0:default:_toggle_single(_id,sub,a);break;}}});});}});})();(function(){var monitor=0;igk.winui.initClassControl("igk-winui-monitor-progress",function(){if(monitor)return;var q=this;var ajx=0;igk.publisher.register("sys://ajx/loadstart",function(e){q.setCss({"display":""});ajx=e.evt.target;});igk.publisher.register("sys://ajx/loadend",function(e){q.setCss({"width":"0px"});ajx=0;});igk.publisher.register("sys://ajx/loadprogress",function(e){var t=0;if(e.evt.total>0){t=e.evt.loaded / e.evt.total;q.setCss({"width":(t*100)+"%"});}else{}});q.setCss({"display":"none"});},{"desc":"monitor progress component"});})();igk.system.createNS("igk.winui.navigationbar",{fitfix:function(node,parent){var t=$igk(node);var l=$igk(parent);if(t){t.setCss({"position":"fixed","right":(l.fn.hasVScrollBar()? l.fn.vscrollWidth()+ 1 :0)+"px","bottom":((l.fn.hasHScrollBar()? l.fn.hscrollHeight()+ 1 :0))+"px","top":"auto"});}},init:function(node,parent,properties){if((node==null)||(parent==null))return;var m_node=node;var m_parent=parent;var m_properties=igk.utils.getv(properties,"properties",{duration:1000,interval:20,"orientation":"vertical"});var m_autodetect=igk.utils.getv(properties,"autodetect",true);var m_autonavigate=igk.utils.getv(properties,"autonavigate",true);var m_dictionary=[];var m_manual_scroll=true;var m_scrollTimeout=null;var m_currentpage=null;function __initLink(info){igk.appendProperties(this,info);var self=this;this.detectview=function(){var y=$igk(m_parent).getscrollTop();var t=$igk(this.target);var m=t.o.offsetHeight;var cy=t.getLocation().y;var vH=y- cy;if(this.selected){if(!((vH>=0)&&(vH<m))){self.selected=false;if(this.bgview)igk.animation.fadeout(this.bgview.o,20,500,1.0,function(){self.selected=false;});}}else{if((vH>=0)&&(vH<m)){self.selected=true;var s=(""+ self.a.href).split('#')[1];m_currentpage=s.split('/')[1];var v_uri=(document.location+"").split('?')[0].split("#")[0];window.history.pushState({"html":"data","pageTitle":v_uri+"#"+ s},"",v_uri+"#"+ s);if(this.bgview){igk.animation.fadein(this.bgview.o,20,500,0.0,function(){self.selected=true;});}}}};if(this.options){if(this.options.scroll){var func=function(){self.options.scroll(self,m_parent);};igk.winui.reg_event(m_parent,"scroll",func);func();}}if(!this.options||!this.options.nomenu){this.bgview=$igk(this.a.parentNode).add("div",{"className":"posab fitw fith loc_l loc_t zback navigationbg","class":"posab fitw fith loc_l loc_t zback navigationbg"});this.bgview.setOpacity(0.0);}this.a.onfocus=function(){this.blur();return false;};this.a.onclick=function(){var a=self.a;if(document.location !=a.href){var s=(""+ document.location).split('?')[0].split("#")[0];var hash=(""+ a.href).split('#')[1];document.location.href=s+"#"+ hash;__navigateTo();}else{__navigateTo();}return false;}};function __gettarget(n){if(m_dictionary[n])return m_dictionary[n].target;return null;};function __navigateTo(){var l=(""+ document.location);if(/#\//.exec(l)){var n=l.split('#/')[1];if(m_currentpage !=n){m_currentpage=n;var i=$igk(__gettarget(n));if(i){m_manual_scroll=false;$igk(m_parent).scrollTo(i.o,m_properties,function(){__detectnode();m_manual_scroll=true;});}}else{var i=$igk(__gettarget(n));if(i){m_manual_scroll=false;$igk(m_parent).scrollTo(i.o,m_properties,function(){__detectnode();m_manual_scroll=true;});}}}};function __detectnode(){if(!m_autodetect)return;for(var i=0;i<m_dictionary.length;i++){m_dictionary[i].detectview();}}(function(node){var v_nodes=node.getElementsByTagName("a");var v_key=null;var v_taget=null;var v_ainfo=null;var p=m_node;for(var i=0;i<v_nodes.length;i++){v_a=v_nodes[i];if(/#/.exec(v_a.href)){n=v_a.href.split('#')[1];v_key=((v_key=v_a.getAttribute("igk-navigation-key"))==null)? n :v_key;v_target=v_a.getAttribute("igk-navigation-target");if(m_parent.id==v_target){hp=$igk(m_parent);}else hp=$igk(m_parent).getChildById(v_target);if(hp==null){continue;}v_ainfo={"name":n,"offset":0,"target":hp,"targetname":v_target,"options":igk.JSON.parse(v_a.getAttribute("igk-navigation-options")),"a":v_a,"allownavigation":true,"selected":false};if(!v_ainfo.options||!v_ainfo.options.nomenu){v_ainfo.allownavigation=false;}v_a.href="#/"+ v_key;m_dictionary[v_key]=new __initLink(v_ainfo);m_dictionary.push(m_dictionary[v_key]);}}if(p){var m_eventContext=igk.winui.RegEventContext(p);if(m_eventContext){m_eventContext.reg_window("hashchange",function(){__navigateTo();});m_eventContext.reg_window("load",function(){if(m_autonavigate)__navigateTo();});m_eventContext.reg_window("resize",function(){if(m_autonavigate)__navigateTo();});m_eventContext.reg_event(m_parent,"scroll",function(){if(m_manual_scroll){if(m_scrollTimeout)clearTimeout(m_scrollTimeout);m_scrollTimeout=setTimeout(__detectnode,100);}});}__detectnode();if(m_autonavigate){__navigateTo();}}})(m_node);}});(function(){igk.system.createNS("igk.winui.querytextbox",{init:function(target,uri){if(target==null)return;var m_target=target;var m_uri=uri;function querytextboxobj(){var m_target=target;var m_uri=uri;var q=this;this.ajx=null;this.update=update;this.view=document.createElement("div");this.ul=null;m_target.parentNode.appendChild(this.view);$igk(m_target).reg_event("keyup",function(evt){q.update(this.value);});function _hideDiv(){$igk(q.view).setCss({display:"none"});}function _changeValue(select){m_target.value=select[select.selectedIndex].innerHTML;_hideDiv();}function _updateValue(value){m_target.value=value;_hideDiv();}function update(){if(this.ajx!=null)this.ajx.xhr.abort();this.ajx=igk.ajx.apost(m_uri+"&t="+m_target.value,null,function(xhr){if(this.isReady()){var loc=$igk(m_target).getScreenLocation();$igk(q.view).setCss({display:"block",position:"fixed",left:(loc.x)+"px",top:(loc.y+ m_target.clientHeight+2)+"px",minWidth:m_target.clientWidth+"px",maxHeight:"200px",overflow:"auto",overflowX:"hidden",zIndex :1010,backgroundColor :"white" });q.ajx=null;if(q.ul==null){q.ul=document.createElement("ul");$igk(q.ul).addClass("clselect dispb fitw fith");}var md=document.createElement("div");md.innerHTML=xhr.responseText;md=md.getElementsByTagName("response")[0];$igk(md).select("item").replaceTagWith("li" ).each(function(){var a=document.createElement("a");var name=this.getAttribute("name");var desc=this.getAttribute("description");var value=this.getHtmlContent();var idata="";if(name){idata+="<span>"+name+"</span>";}if(desc){idata+="<div>"+desc+"</div>";}a.innerHTML=idata;a.href="#";a.setAttribute("value",value);this.setHtmlContent("");this.o.appendChild(a);return this;});q.view.innerHTML="";q.view.appendChild(q.ul);q.ul.innerHTML=md.innerHTML;$igk(q.ul).select("a").each(function(){this.addClass("queryboxitem dispb fitw").reg_event("click",function(evt){_updateValue($igk(this).getAttribute("value"));evt.preventDefault();});return this;});}});};};return new querytextboxobj(target,uri);}});})();(function(){igk.system.createNS("igk.winui.searchbox",{search(t,ii){var i=ii||$igk(t.o.parentNode).qselect('input').first();if(i){var u=t.getAttribute("igk:target-uri");var _id=t.getAttribute("igk:target-id")||"search";var tu=u.split("?");var q=tu.slice(1).join("");u=tu[0];var s=new URLSearchParams(q);s.delete(_id);if(i.o.value){s.append(_id,i.o.value);}igk.form.posturi(u+"?"+s.toString());}}});igk.winui.initClassControl("igk-winui-searchbox",function(){this.on("keypress",function(e){if(e.keyCode==igk.winui.inputKeys.Enter){var p=$igk(this.parentNode).qselect(".igk-winui-searchbtn").first();if(p){igk.winui.searchbox.search(p,$igk(e.target));}}});});})();igk.system.createNS("igk.winui.utils",{fixfit:function(node,parent,properties){var t=$igk(node);var l=$igk(parent);if(t){if(properties==null){t.setCss({"right":(l.fn.hasVScrollBar()? l.fn.vscrollWidth()+"px" :"0px")});t.setCss({"bottom":((l.fn.hasHScrollBar()? l.fn.hscrollHeight():0))+"px"});t.setCss({"top":"auto"});}else{if(properties.right)t.setCss({"right":(l.fn.hasVScrollBar()? l.fn.vscrollWidth():0)+"px"});if(properties.bottom)t.setCss({"bottom":(l.fn.hasHScrollBar()? l.fn.hscrollHeight():0)+"px"});}}}});(function(){function _init(){var q=this;var s=q.o.innerHTML;var c=q.getAttribute("igk-repeat")||1;var d="";for(var i=0;i<c;i++){s=s+ q.o.innerHTML;}var g=igk.createNode("dummy");g.setHtml(s);var p=g.o.firstChild;c=0;while(p){q.o.parentNode.insertBefore(p,q.o);$igk(p).init();p=g.o.firstChild;c++;}q.remove();};igk.winui.initClassControl("igk-winui-rc",_init,{desc:'repeat-content'});})();(function(){igk.winui.initClassControl('igk-winui-clone',function(){let t=this.getAttribute('igk-target');let q=$igk(t).first();if(q){this.o.removeAttribute('igk-target');let l=document.createElement(q.o.tagName.toLowerCase());l.innerHTML=q.o.innerHTML;this.o.appendChild(l);$igk(l).init();}})})();(function(){if(igk.winui.paginationview)return;var popstate=0;var current=[];igk.system.createNS("igk.winui.paginationview",{init:function(){function _page_ready(q,i,t,cl,r){return function(xhr){if(this.isReady()){if(xhr.status==200){if(i.target){$igk(i.target).first().setHtml(xhr.responseText).init();if(!i.update_uri){return;}}else igk.ajx.fn.replace_or_append_to_body.apply(this,[xhr]);if(typeof(r)=='undefined'){igk.winui.history.push("#!"+ t,{title:'change','igk-rol':'pagination','olduri':cl},'history page ');}else{console.debug("replace : "+ t);igk.winui.history.replace(t);}var p=$igk('.location').first();if(p){p.setHtml(cl);}}}};};var q=$igk(igk.getParentScript());var i=igk.initObj(igk.JSON.parse(q.getAttribute("igk:data")),{baseuri:window.location.href,ajx:0,history:0,refresh:0,cookie:0 });var uri=encodeURI(i.baseuri).replace("?",'\\?');i.regex=new RegExp("^"+ uri+"");if(!popstate){igk.winui.reg_event(window,'popstate',function(e){var du=document.location.href;var ldu=du+ (du.indexOf("?")!=-1 ? "?" :"")+"?reset=1";if(i.cookie){var nc='local_com/'+ i.cookie;igk.web.rmcookies(nc);}if(i.regex.test(document.location.href)){igk.ajx.get(du,null,_page_ready(q,i,du,du,1));current.pop();}else{current.pop();current.push(document.location.href);igk.ajx.get(ldu,null,_page_ready(q,i,du,du,1));}e.preventDefault();e.stopPropagation();return;});popstate=1;}q.select("span").each_all(function(){this.addClass("igk-btn").reg_event("click",function(e){e.preventDefault();e.stopPropagation();var c=this.getAttribute("rol");var u=i.baseuri;var t=0;if(!c){t=u+ this.innerHTML;}else{var s=i.selected;switch(c){case "next":if(s<i.max)t=u+ (s+ 1);break;case "prev":if(s>i.min)t=u+ (s- 1);break;}}if(t){if(i.ajx){var cl=document.location.href;if(t==cl){if(i.refresh){igk.ajx.get(t,null,null);}}else{igk.ajx.get(t,null,_page_ready(q,i,t,cl));current.push(t);}}else{document.location=t;}}});});}});})();(function(){igk.system.createNS("igk.winui.controls.pagination",{init:function(){var q=igk.getParentScript();if(!q){return;}q=$igk(q);q.select("li .disabled a").each_all(function(){this.o.onclick=function(e){e.preventDefault();e.stopPropagation();e.handle=1;};});}});})();(function(){var _dialog=[];var _init=0;var _NS="igk.winui.controls";var _FC=0;function _trans_end(p){return function(){if(!p.no_auto_remove){p.remove();}else{p.addClass("dispn");p.rmClass("igk-hide");}p.unreg_event("transitionend",_FC);_FC=0;};};function _closeDialog(b){var p=b||_dialog.pop();if(p){_FC=_trans_end(p);p.addClass("igk-hide").reg_event("transitionend",_FC);}};var no_close=!1;function _showDialog(){_dialog.push(this);};function _panDialogInit(){if(!_init){igk.winui.events.regKeyPress(function(e){if(e.keyCode==igk.winui.inputKeys.Escape){if(no_close){no_close=!1;return;}if(_dialog.length>0){_closeDialog();e.stopPropagation();e.preventDefault();}}});$igk(document.body).on("click",function(e){if(e.target.tagName=="INPUT"){if(e.target.getAttribute("type")=="file"){no_close=!0;}return;}});_init=1;}var q=this;var _idx=_dialog.length- 1;var _container=q.select('^.igk-ajx-panel-dialog-container').first();q.no_auto_remove=this.supportClass('dispn');igk.dom.body().add(q);igk.appendChain(q,'remove',function(){q.unreg_event("windowresize",_updating);});var _closeBtn=this.select(".box .igk-title .close").first();if(_closeBtn){_closeBtn.reg_event("click",function(e){_closeDialog(q);e.stopPropagation();e.preventDefault();delete(_dialog[_idx]);});};function _update_size(){q.rmClass("inner");var f=q.select(".igk-content").first();f.setCss({"height":"auto"});var H=q.o.scrollHeight;var h=window.innerHeight;var box=q.select("> .box").first();var c=box.getScreenLocation();var m=f.getScreenLocation();var diff={x:c.x- m.x,y:c.y- m.y};if(H>h){q.addClass("inner inner-h");f.setCss({"height":(box.height()+ diff.y- 10)+"px"});}else{q.rmClass("inner inner-h");}};function _updating(){if(tm_out)clearTimeout(tm_out);tm_out=setTimeout(_update_size,500);};this.select("form").each_all(function(){if(this.getAttribute("igk-ajx-form")){var input=document.createElement("input");input["type"]="hidden";input["name"]="igk-ajx-form";input["value"]=1;this.appendChild(input);}});var tm_out=0;q.on("windowresize",_updating);q.showDialog=_showDialog;q.closeDialog=_closeDialog;_update_size();if(!q.no_auto_remove){q.showDialog();}};var _LNS=igk.system.createNS(_NS,{panelDialog:function(){},showPanelDialog(t,defStyle,type){let m=$igk(t).first();if(!m){return;}defStyle=defStyle||"";type=type||"";let q=igk.createNode("div").addClass("igk-winui-panel-dialog "+ defStyle);let box=q.add('div').addClass('box');let title=box.add('div').addClass("igk-title");let content=box.add('div').addClass("igk-content");content.setHtml(m.o.outerHTML);let item=$igk(content.o.firstChild);let it=item.qselect('div.title').first();if(it){title.setHtml(it.getHtml());it.remove();}let g=igk.winui.createSVGLi("drop");if(g){title.add("a").addClass("igk-btn close igk-svg-host").setAttribute("href","#").add(g);}item.toggleClass("dispn");$igk(document.body).add(q);igk.ajx.fn.initnode(q.o);}});igk.appendProperties(_LNS.panelDialog,{close:_closeDialog});igk.winui.createPanelDialog=function(t,d){var dd=igk.createNode("div");dd.addClass("igk-winui-panel-dialog");var box=dd.add("div").addClass("box");var tl=box.add("div").addClass("igk-title");tl.add("span").setHtml(t);var ctn=box.add("div").addClass("igk-content");var s=0;if(d){ctn.add(d);}var g=igk.winui.createSVGLi("drop");if(g){tl.add("a").addClass("igk-btn close igk-svg-host").setAttribute("href","#").add(g);}_panDialogInit.apply(dd);return dd;};igk.winui.initClassControl("igk-winui-panel-dialog",_panDialogInit);igk.winui.closePanelDialog=_closeDialog;})();(function(){function PickerZoneClass(n){var data=JSON.parse(n.getAttribute("igk:picker-zone-data"))||{};var t_uri=data && data.uri ? data.uri :"/";igk.winui.dragdrop.init(n.o,{uri:t_uri,supported:data.accept,update:function(evt){},drop:function(e){var data=e.dataTransfer;for(var i=0;i<data.files.length;i++){igk.ajx.uploadFile(n.o,data.files[i],t_uri,true,null);}},enter:function(e){}});n.on("click",function(){igk.system.io.pickfile(t_uri,{"accept":data.accept});}).on("drop",function(){});};igk.winui.initClassControl("igk-picker-zone",function(){new PickerZoneClass(this);});})();igk.ready(function(){$igk('form').each_all(function(){let f=$igk(this);let MAX_UPLOAD_FILE=0;let MAX_FILE_SIZE=0;let files=f.qselect('input[type="file"]');let q=f.qselect('#MAX_UPLOAD_FILE').first();let max_size=f.qselect('#MAX_FILE_SIZE').first();if(q &&(files.getCount()>0)){MAX_UPLOAD_FILE=parseInt(q.o.value);if(MAX_UPLOAD_FILE>0){if(max_size){files.each_all(function(){let i=this;i.reg_event('change',function(e){MAX_FILE_SIZE=parseInt(max_size.o.value);;if(MAX_FILE_SIZE){for(let _ti of this.files){if(_ti.size>MAX_FILE_SIZE){i.o.value='';break;}}}});});}f.reg_event('submit',function(e){MAX_UPLOAD_FILE=parseInt(q.o.value);let count=0;files.each_all(function(){let i=this;count+=i.o.files.length;});if((MAX_UPLOAD_FILE>0)&&(count>MAX_UPLOAD_FILE)){e.preventDefault();f.qselect(".form-prevent-max-upload").first().toggleClass('dispn');}});}};});});(function(){window.igk.system.createNS("igk.web",{"a_posturi":function(item,uri,callback){var self=null;var func=(callback==null)?null:function(xhr){callback.apply(this,[xhr,item ]);};var __self={'target':item,post:function(){if(igk.ajx){igk.ajx.post(uri,null,func);}}};__self.post();return false;}});})();(function(){igk.system.createNS("igk.JSON",{init_data:function(src,str,fallback){var _v=igk.JSON.parse(str);if((_v !=null)&&(typeof(_v)=="object")){for(var i in src){if(typeof(_v[i])!=igk.constants.undef){src[i]=_v[i];}}}else{if(fallback){fallback(src);}}return src;}});})();(function(){igk.system.createNS("igk.system.convert",{parseToInt:function(i){var v=parseInt(i);if(Number.isNaN(v))v=0;return v;},parseToBool:function(i){if(typeof(i)=="string"){switch(i.toLowerCase()){case "true":case "1":return !0;}return !1;}if(i)return !0;return !1;},HexP:function(r){var g=(r>=10)? String.fromCharCode(parseInt("A".charCodeAt(0)+ (r- 10))):""+ r;return g;},ToBase:function(d,base,length){if(typeof(length)==IGK_UNDEF)length=-1;if(typeof(d)==IGK_UNDEF)return "UX";if(Number.isNaN(d)||Number.isNaN(base))return "UX";d=parseInt(d);var o="";var hpex=igk.system.convert.HexP;var ToBase=igk.system.convert.ToBase;if(base>0){var p=parseInt(d / base);var r=d% base;if(p<base){if(p !=0)o=hpex(p)+""+ hpex(r);else o=hpex(r);}else{o=hpex(r)+ o;o=ToBase(p,base)+ o;}}if(length !=-1){for(var i=o.length;i<length;i++){o="0"+ o;}}return o;}});})();(function(){igk.system.createNS("igk.debug",{write:function(msg){if(igk.DEBUG){console.debug(msg);}},assert:function(c,m){if(c){console.debug(m);}},enable:function(f){igk.DEBUG=f;}});})();(function(){const createNS=igk.system.createNS;createNS("igk.html",{string:function(text){text=text.replace(/\</g,"&lt;");text=text.replace(/\>/g,"&gt;");return text;},isTextNode:function(item){return(item &&(item.nodeType==3));},closeEmptyTag:function(s,replacecallback){function replacing(m){var tag=m.trim().split(' ')[0].substring(1);m=m.replace("/>","></"+ tag+">");return m;}var rg=new RegExp("((<)([^\/>])+(\/>))","ig");return s.replace(rg,replacecallback||replacing);},appendQuery:function(uri,exp){if(uri.indexOf('?')!=-1){uri=uri+"&"+ exp;}else{uri=uri+"?"+ exp;}return uri;},addToHead:function(n){if(document.head){document.head.appendChild(n);}else{igk.ready(function(){document.head=document.getElementsByTagName("head")[0];document.head.appendChild(n);});}}});})();(function(){const createNS=igk.system.createNS;createNS("igk.math",{_2PI:Math.PI*2,vector2d:function(x,y){return{x:x,y:y,sub:function(d){this.x-=d.x;this.y-=d.y;return this;},add:function(d){this.x+=d.x;this.y+=d.y;return this;},distance:function(d){var dx=(this.x- d.x);var dy=(this.y- d.y);var f=Math.sqrt((dx*dx)+ (dy*dy));return f;},clone:function(){return igk.math.vector2d(this.x,this.y);},toString:function(){return "vector2d{x:"+ this.x+";y:"+ this.y+"}"}};},matrix3x3:function(){var m_element=[];var MATRIX_LENGTH=9;function mult_matrix(tb1,tb2){var rtb=new Array(MATRIX_LENGTH);var k=0;var offsetx=0;var offsety=0;var v_som=0;for(var k=0;k<MATRIX_LENGTH;){for(var i=0;i<4;i++){v_som=0.0;for(var j=0;j<4;j++){offsety=(4*j)+ i;v_som+=tb1[offsetx+ j]*tb2[offsety];}rtb[k]=v_som;k++;}offsetx+=4;}return rtb;};igk.appendProperties(this,{getElements:function(){return m_element;},reset:function(){m_element[0]=m_element[4]=m_element[8]=1;m_element[1]=m_element[2]=m_element[3]=0;m_element[5]=m_element[6]=m_element[7]=0;},translate:function(dx,dy,dz){m_element[6]+=dx;m_element[7]+=dy;if(dz){m_element[8]*=dz;}},scale:function(ex,ey,ez){m_element[0]*=ex;m_element[4]*=ey;if(ez){m_element[8]*=ez;}},rotate:function(angle){},rotateAt:function(angle,point){}});this.reset();},rectangle:function(x,y,w,h){this.x=x ? x :0;this.y=y ? y :0;this.width=w ? w :0;this.height=h ? w :0;this.toString=function(){return "igk.math.rectangle["+ this.x+","+ this.y+","+ this.width+","+ this.height+"]";};this.isEmpty=function(){return(this.width==0)||(this.height==0);};this.inflate=function(x,y){this.x-=x;this.y-=y;this.width+=2*x;this.height+=2*y;};}});createNS("igk.math.vector2d",{empty:function(){return new igk.math.vector2d(0,0);},parse:function(s){if(s==null)return new igk.math.vector2d(0,0);var t=s.split(';');var g=null;if(t.length==2)g=new igk.math.vector2d(parseFloat(t[0]),parseFloat(t[1]));else g=new igk.math.vector2d(parseInt(t),parseInt(t));return g;}});})();(function(){function esm(templateStrings,...substitutions){let js=templateStrings.raw[0];for(let i=0;i<substitutions.length;i++){js+=substitutions[i]+ templateStrings.raw[i+ 1];}return 'data:text/javascript;base64,'+ btoa(js);};igk.system.createNS("igk.system.modules",{response:null,esm:esm,append(src,id){let v=igk.createNode('script');v.o.type='module';v.o.id=id;v.setHtml(src);igk.dom.body().add(v.o);modules.push(v);return v;},import(src,callback){let g=(async()=>{let m=await igk.system.modules.importAsync(src);return m;})().then((m)=>{if(callback){callback(m);}return m;});return g;},async importAsync(src){let b=esm`${src}`;let c=await import(`${b}`);return c;}})})();(function(){const createNS=igk.system.createNS;igk.navigator=new(function(){var m_version="1.3";igk.defineProperty(this,'version',{get:function(){return m_version;},enumerable:true,configurable:true,nopropfunc:function(){this.m_version=m_version;}});})();var XBox360 =false;var XBoxOne=false;var m_navprop={};var _nav=igk.navigator;if(/Xbox/.test(igk.platform.osAgent)){if(/Xbox One/.test(igk.platform.osAgent)){XBoxOne=true;}else{XBox=true;}igk.ready(function(){igk.dom.body().addClass("xbox"+ (XBoxOne ? 'one' :''));});}igk.appendProperties(_nav,{getLang(){if(window.navigator.language)return window.navigator.language+"";return window.navigator.languages+"";},getProperty(n){return m_navprop[n]||false;},isXBoxOne(){return XBoxOne;},isXBox360(){return XBox360;},isFirefox(){return igk.platform.osAgent.indexOf("Firefox/")!=-1;},getFirefoxVersion(){var i=igk.platform.osAgent.indexOf("Firefox/");if(i !=-1)return /Firefox\/([0-9]+\.[0-9]+)/.exec(igk.platform.osAgent+"")[1];return-1;},getUserMedia:(function(){return function _t(){var e=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia||navigator.oGetUserMedia;if(e)return e.apply(navigator,arguments);else{}}})(),getScreenWidth(){return igk.winui.screenSize().width;},getScreenHeight(){return igk.winui.screenSize().height;},getOrientation(){return window.orientation||0 },getDevicePixelRatio(){return window.devicePixelRatio||(window.screen.availWidth / document.documentElement.clientWidth)},navTo:function(uri){var a=igk.createNode("a");a.setCss({display:"none"});a.o.href=uri;igk.dom.body().appendChild(a.o);a.o.click();},logAgent(){var _nav=igk.navigator;console.debug("IsChrome: "+ _nav.isChrome());console.debug("IsFireFox: "+ _nav.isFirefox());console.debug("IsSafari: "+ _nav.isSafari());console.debug("IsEdge: "+ _nav.isIEEdge());},isSecure(){return document.location.protocol=="https:";},isChrome(){var ua=igk.platform.osAgent+'';if((ua.indexOf("Chrome/")!=-1)&& /Google Inc\./.test(window.navigator.vendor)){return !0;}return !1;},chromeVersion(){if(igk.navigator.isChrome()){var i=igk.platform.osAgent.indexOf("Chrome/");return(igk.platform.osAgent+"").substring(i+ 7).split(' ')[0];}return 0;},isIE(){var ua=igk.platform.osAgent+'';if((ua.indexOf("MSIE")!=-1)||ua.indexOf("Trident/")!=-1){return !0;}return !1;},isIEEdge(){var ua=igk.platform.osAgent+'';if(ua.indexOf("Edge/")!=-1)return !0;return !1;},getEEdgeVersion(){var i=igk.platform.osAgent.indexOf("Edge/");if(i !=-1)return /Edge\/([0-9]+\.[0-9]+)/.exec(igk.platform.osAgent+"")[1];return-1;},IEVersion(){if(!igk.navigator.isIE())return-1;var ua=igk.platform.osAgent+'';var i=ua.indexOf("MSIE");if(i !=-1){return ua.substring(i).split(';')[0].split(' ')[1];}i=ua.indexOf("Trident/");if(i !=-1){var v=ua.substring(i+ 8).split(';')[0];if(v==7)return 11;}return-1;},isAndroid(){var v=(igk.platform.osAgent+"").toLowerCase().indexOf("android");if(v !=-1){return !0;}return !1;},isIOS:function(){return 0;},isSafari:function(){var i=igk.platform.osAgent.indexOf("Safari/");var _nav=igk.navigator;if((i !=-1)&& /Apple Computer, Inc\./.test(window.navigator.vendor)){return !0;}return !1;},SafariVersion:function(){var i=igk.platform.osAgent.indexOf("Safari/");if(i !=-1){return(igk.platform.osAgent+"").substring(i+ 7).split(' ')[0];}return 0;},FFVersion:function(){var i=igk.platform.osAgent.indexOf("Firefox/");if(i !=-1){return(igk.platform.osAgent+"").substring(i+ 8).split(' ')[0];}return 0;},$ActiveXObject:function(){if('ActiveXObject' in window)return 1;return 0;},toString:function(){return "igk.navigator";}});m_navprop.cssDomRequire=_nav.isChrome()||_nav.isFirefox()||_nav.isSafari();})();(function(){String.prototype.ucfirst=function(){const m=this;return m.length>0?m[0].toUpperCase()+ m.slice(1):m;};function removeBrank(src,offset=0,start='(',end=')'){let depth=0;let stop=false;let is_escaped=false;let _start_offset=offset;while(!stop &&(offset<src.length)){let ch=src[offset];offset++;if(!is_escaped){if(ch==start)depth++;else if(ch==end){depth--;if(depth==0){stop=true;break;}}else if(ch=='\\'){is_escaped=true;}}else is_escaped=false;}if(stop){src=src.substring(0,_start_offset)+ src.substring(offset);}return src;};igk.system.createNS("igk.system.string",{removeBrank,padleft:function(m,s,l){while(m &&(m.length<l)){m=s+ m;}return m;},padright:function(m,s,l){while(m &&(m.length<l)){m=m+ s;}return m;},trim:function(m){if(m==null){throw new igk.exception('bad');}if(m.trim)return m.trim();while(m &&(m.length>0)&&(m[0]==' ')){m=m.substring(1);}while(m &&(m.length>0)&&(m[m.length- 1]==' ')){m=m.substring(0,m.length- 1);}return m;},startWith:function(m,str){if(m && m.slice)return m.slice(0,str.length)==str;return !1;},endWith:function(m,str){return m.slice(-str.length)==str;},remove:function(m,index,length){return m.substring(0,index)+ m.substring(index+ length,m.length);},insert:function(m,index,pattern){return m.substring(0,index)+ pattern+ m.substring(index,m.length);},capitalize:function(s){if(s && s.length>1)return s[0].toUpperCase()+ s.substring(1).toLowerCase();return s;}});})();(function(){igk.system.createNS("igk.uri",{getQueryArg:function(q){return new(function(){var nb=[];var i=q.indexOf("?");if(i !=-1){var e=q.substr(i+ 1);var ln=e.length,pos=0;var c=0;var t=0;var n="";var v="";while(pos<ln){c=e[pos];switch(c){case "=":t=1;break;case "&":nb[n]=v;nb.push(v);t=0;n="";v="";break;default:if(t==0){n+=c;}else v+=c;break;}pos++;}if(t==1){nb[n]=v;nb.push(v);}console.debug(nb);}igk.appendProperties(this,{get:function(n){return nb[n];}})})();},addquery:function(s,t){if(s.length>0)s+="&"+ t;else s+="?"+ t;return s;},getquery:function(ctrlname,funcName,params){var s="";if(ctrlname)s=igk.uri.addquery(s,"c="+ ctrlname);if(funcName)s=igk.uri.addquery(s,"f="+ funcName);if(params)s=igk.uri.addquery(s,params);return s;}});})();(function(){var RZ_TIMEOUT=200;const createNS=igk.system.createNS;const IGK_UNDEF='undefined';const{regEventContextByOwner}=igk;createNS("igk.winui",{toString:function(){return "igk.winui";},open:function(uri){var frm=window.open(uri);frm.onload=function(){frm.close();};},screenSize:function(){return{height:window.innerHeight,width:window.innerWidth,toString:function(){return "height:"+ this.height+" ; width: "+ this.width;}};},focus:function(id){var q=document.getElementById(id);if(q)q.focus();},fitfix2:function(node,parent,onw,onh){var t=$igk(node);var l=$igk(parent);var h=onh==null ? !0 :onh;var w=onw==null ? !0 :onw;if(t){t.setCss({"position":"fixed"});if(w){t.setCss({"right":(l.fn.hasVScrollBar()? l.fn.vscrollWidth():0)+"px"});}if(h){t.setCss({"bottom":((l.fn.hasHScrollBar()? l.fn.hscrollHeight()+ 1 :0))+"px"});}}},GetScreenPosition:function(item){var left=0;var top=0;if(item){left+=item.offsetLeft;top+=item.offsetTop;while(!igk.isUndef(typeof(item.offsetParent))&&(item.offsetParent !=null)){left+=(item.clientLeft)? item.clientLeft :0;top+=(item.clientTop)? item.clientTop :0;item=item.offsetParent;}}return new igk.math.vector2d(left,top);},GetScreenSize:function(){var x=window.innerWidth||0;var y=window.innerHeight||0;return new igk.math.vector2d(x,y);},getWidth:function(){return window.innerWidth||0;},getHeight:function(){return window.innerHeight||0;},GetDocumentLocation:function(){var left=0;var top=0;left=window.pageXOffset ?-window.pageXOffset :0;top=window.pageYOffset ?-window.pageYOffset :0;return new igk.math.vector2d(left,top);},GetRealScreenPosition:function(item){var left=0;var top=0;left=window.pageXOffset ?-window.pageXOffset :0;top=window.pageYOffset ?-window.pageYOffset :0;if(item){left+=-igk.winui.GetScrollLeft(item)+ ((item.offsetLeft)? item.offsetLeft :0);top+=-igk.winui.GetScrollTop(item)+ ((item.offsetTop)? item.offsetTop :0);while((item.offsetParent !=null)){item=item.offsetParent;left+=-igk.winui.GetScrollLeft(item)+ ((item.offsetLeft)? item.offsetLeft :0);top+=-igk.winui.GetScrollTop(item)+ ((item.offsetTop)? item.offsetTop :0);}}return new igk.math.vector2d(left,top);},GetScrollPosition:function(item,parent){if(!parent)return new igk.math.vector2d(0,0);var left=0;var top=0;left=window.pageXOffset ?-window.pageXOffset :0;top=window.pageYOffset ?-window.pageYOffset :0;if(item){left+=-igk.winui.GetScrollLeft(item)+ ((item.offsetLeft)? item.offsetLeft :0);top+=-igk.winui.GetScrollTop(item)+ ((item.offsetTop)? item.offsetTop :0);while((item.offsetParent !=null)&&(item.offsetParent !=parent)){item=item.offsetParent;left+=-igk.winui.GetScrollLeft(item)+ ((item.offsetLeft)? item.offsetLeft :0);top+=-igk.winui.GetScrollTop(item)+ ((item.offsetTop)? item.offsetTop :0);}if(item.offsetParent !=parent){return new igk.math.vector2d(-1,-1);}}return new igk.math.vector2d(left,top);},GetRealOffsetParent:function(item){if(item){var q=item.offsetParent;while(q !=null){if(q.offsetParent==null)break;q=q.offsetParent;}return q;}return null;},GetRealScrollParent:function(item){if(item){var q=item.offsetParent;var cq=0;while((q !=null)&&(q.tagName.toLowerCase()!='body')){cq=$igk(q);if(q.offsetParent==null){console.debug("no offset parent? "+ (cq.fn.hasVScrollBar()||cq.fn.hasHScrollBar()));break;}if(cq.fn.hasVScrollBar()||cq.fn.hasHScrollBar()){break;}q=q.offsetParent;}return q;}return null;},GetMousePoint:function(evt){return new igk.math.vector2d(evt.clientX,evt.clientY);},GetChildMouseLocation:function(item,evt){if(evt==null){return new igk.math.vector2d(0,0);}var loc=igk.winui.GetRealScreenPosition($igk(item).o);loc.x=evt.clientX- (isNaN(loc.x)? 0 :loc.x);loc.y=evt.clientY- (isNaN(loc.y)? 0 :loc.y);return loc;},GetChildTouchLocation:function(item,evt,index){var touchv={"touchstart":1,"touchmove":1,"toucancel":1,"touchend":1};if(!evt||!touchv[evt.type])return igk.math.vector2d(0,0).clone();var i=index||0;var s=((evt.touches.length>0)&&(i<evt.touches.length))? evt.touches.item(i):null;if(s==null)return igk.math.vector2d(0,0).clone();var loc=igk.winui.GetRealScreenPosition($igk(item).o);loc.x=s.pageX- (isNaN(loc.x)? 0 :loc.x);loc.y=s.pageY- (isNaN(loc.y)? 0 :loc.y);return loc;},HasMouseInputInChild:function(item,evt){var loc=igk.winui.GetChildMouseLocation(item,evt);return igk.winui.controlUtils.HasChildContainPoint(item,loc);},GetScrollLeft:function(item){if(item==null)return 0;if(item.pageXOffset){return item.pageXOffset;}else if(item.scrollLeft)return item.scrollLeft;return 0;},GetScrollTop:function(item){if(item==null)return 0;if(item.pageYOffset){return item.pageYOffset;}else if(item.scrollTop)return item.scrollTop;return 0;},registerEventHandler:function(name,objListener){var th=name.split(" ");var n,d;;for(var i=0;i<th.length;i++){d=igk.winui.getEventHandler(th[i]);if(d){continue;}if(objListener){igk.winui.events.register.registerEvent(th[i],objListener);}}},reg_window_event:function(method,func,useCapture){return igk.winui.reg_system_event(window,method,func,useCapture);},unreg_window_event:function(method,func){return igk.winui.unreg_system_event(window,method,func);},reg_event:function(item,method,func,useCapture){var g=method.split(' ');var s=0;var o=1;while(o &&(s=g.pop())){var eventHandler=igk.winui.getEventHandler(s);if(eventHandler !=null){o=o && eventHandler.reg_event(item,func,useCapture);}else o=o && igk.winui.reg_system_event(item,s,func,useCapture);}},unreg_system_event_object:function(item){if(!item)return;igk.winui.getEventObjectManager().unregister(item);},unreg_system_event:function(item,method,func){if((item==null)||(((method in item)&&(item["on"+ method]+""==igk.constants.undef))&&(!item.removeEventListener)&&(item.detachEvent)))return !1;igk.winui.getEventObjectManager().unregister(item,method,func);if(item.removeEventListener){item.removeEventListener(method,func,false);}else if(item.detachEvent){item.detachEvent("on"+ method,func);}else{var m=item["on"+ method];if(typeof(m)=="function"){item["on"+ method]=null;}else{item["on"+ method]=null;}}return !0;},unreg_event:function(item,method,func){var eventHandler=igk.winui.getEventHandler(method);if(eventHandler !=null){return eventHandler.unreg_event(item,func);}return igk.winui.unreg_system_event(item,method,func);},regwindow_event:function(method,func){if(!igk.winui.reg_event(window,method,func))return igk.winui.reg_event(document,method,func);return !0;},unregwindow_event:function(method,func){if(!igk.winui.unreg_event(window,method,func))return igk.winui.unreg_event(document,method,func);return !0;},RegEventContext:function(eventContextOwner,properties){if((properties==null)||(eventContextOwner==null)||(regEventContextByOwner(eventContextOwner)!=null)){return null;}function __eventContextObject(eventContextOwner,properties){var q=this;var m_eventContextOwner=eventContextOwner;var m_properties=properties;var m_col=new Array();function __regEventContextFunction(){var v_ts=properties;var v_ch=igk.regEventContextByOwner(v_ts,true,function(){return new chainUnreg(eventContextOwner,v_ts);});if(!v_ch){return;}if(!v_ts.unregEventContext){igk.appendProperties(v_ts,{unregEventContext:function(){q.clear();v_ch.chain--;if(v_ch.chain==0){if(!igk_unRegEventContext(v_ch)){throw("item not unregister ");}}}});}else{var meth=v_ts.unregEventContext;v_ts.unregEventContext=function(){meth();q.clear();v_ch.chain--;if(v_ch.chain==0){if(!igk_unRegEventContext(v_ch)){throw("unreg -- items");}}};v_ch.chain++;}};__regEventContextFunction();function chainUnreg(o,properties){this.o=o;this.properties=properties;this.chain=1;this.unregEventContext=function(){this.properties.unregEventContext();};this.toString=function(){return "chainUnreg["+ o+":"+ this.chain+"]";};};function eventCibling(target,name,func){this.name=name;this.target=target;var q=this;this.func=function(){func.apply(q.target,arguments);};this.toString=function(){return "eventcibling:"+ name;};};function __unregister(s){if(igk_is_array(s)){for(var i=0;i<s.length;i++){__unregister(s[i]);}}else if(s instanceof eventCibling){igk.winui.unreg_event(s.target,s.name,s.func);}};var m_resizefuncs=[];var m_resizetimeout=0;var m_resizeevent=false;function __is_resized_event(){return m_resizeevent;};function __resizing_push(func){if(func){m_resizefuncs.push(func);}};function __resize_call_invoke(evt){for(var i=0;i<m_resizefuncs.length;i++){m_resizefuncs[i].apply(window,arguments);}}function __resize_call(evt){if(m_resizetimeout){igk.clearTimeout(m_resizetimeout);m_resizetimeout=null;}m_resizetimeout=setTimeout(function(){__resize_call_invoke(evt);},RZ_TIMEOUT);};window.igk.appendProperties(this,{clear:function(){if(m_col){for(var i in m_col){var s=m_col[i];__unregister(s);}}},reg_event:function(target,name,func){if((target==null)||!name||(func==null)){return !1;}var v_cibling=new eventCibling(target,name,func);igk.winui.reg_event(v_cibling.target,v_cibling.name,v_cibling.func);var key=name+":"+ target;if(typeof(m_col[key])==igk.constants.undef)m_col[key]=v_cibling;else{var tab=m_col[key];var v_isarray=igk_is_array(tab);if(v_isarray){tab.push(v_cibling);m_col=tab;}else{var v_t=new Array();v_t.push(tab);v_t.push(v_cibling);m_col[key]=v_t;}}return !0;},reg_window:function(name,func){if(name=="resize"){__resizing_push(func);if(!__is_resized_event()){this.reg_event(window,name,__resize_call);m_resizeevent=!0;}return;}this.reg_event(window,name,func);},unreg_window:function(name,func){igk.winui.unreg_window_event(name,func);},toString:function(){return "RegEventContext";}});}return new __eventContextObject(eventContextOwner,properties);},saveHistory:function(uri){if(typeof history.pushState=="function"){history.pushState({},document.title,uri+"&history=1");}},reg_keypress:function(func){igk.winui.reg_event(document,"keypress",func);},unreg_keypress:function(func){igk.winui.unreg_event(document,"keypress",func);},centerDialog:function(dialog,minw,minh){if(dialog==null)return;dialog.style.top="50%";dialog.style.left="50%";dialog.style.minWidth=minw ? minw+"px" :null;dialog.style.minHeight=minh ? minh+"px" :null;$igk(dialog).setCss({"position":"absolute","marginLeft":-(dialog.clientWidth / 2)+"px","marginTop":-(dialog.clientHeight / 2)+"px"});if(!dialog.style.minWidth)dialog.style.minWidth=dialog.clientWidth+"px";if(!dialog.style.minHeight)dialog.style.minHeight=dialog.clientHeight+"px";var pt=igk.winui.GetRealScreenPosition(dialog);var adjusted=false;if(pt.x<0){pt.x=0;adjusted=!0;}if(pt.y<0){pt.y=0;adjusted=!0;}if(adjusted){dialog.style.margin="0";dialog.style.left=pt.x+"px";dialog.style.top=pt.y+"px";}},dragFrameManager:{target:null,box:null,startpos:null,dragstart:false,oldposition:null,locToScreen:true,dragSize:new igk.math.vector2d(4,4),toString:function(){return "igk.winui.dragmanager";},init:function(target,box){if(target==null)return null;function __construct(target,box){var self=this;var m_c=0;this.target=target;this.box=(box==null)? target :box;this.changelocation=igk.winui.dragFrameManager.changelocation;var m_eventContext=igk.winui.RegEventContext({box:this.box,toString:function(){return "dragFrameManager.BoxOwner"},properties:$igk(box)},$igk(this.box));if(m_eventContext){m_eventContext.reg_event(document,"mousemove",function(){self.changelocation.apply(self,arguments);});m_eventContext.reg_event(document,"mouseup",function(){if(self.dragstart){self.dragstart=false;};});m_eventContext.reg_event(this.target,"mousedown",function(evt){if(!self.dragstart){self.startpos=new igk.math.vector2d(evt.clientX,evt.clientY);self.oldposition=igk.winui.GetScreenPosition(self.box);self.dragstart=!0;}});m_eventContext.reg_event(this.target,"mouseup",function(evt){self.dragstart=false;});}return self;};return new __construct(target,box);},changelocation:function(evt){if(this.dragstart){var left=0;var right=0;var pt=igk.math.vector2d(this.oldposition.x+ (evt.clientX- this.startpos.x),this.oldposition.y+ (evt.clientY- this.startpos.y));var adjustedx=false;var adjustedy=false;if(this.locToScreen){if(pt.x<0){pt.x=0;adjustedx=true;}if(pt.y<0){pt.y=0;adjustedy=true;}if(this.box.offsetParent){if(!adjustedx)if((pt.x+ this.box.clientWidth)>=this.box.offsetParent.clientWidth){pt.x=this.box.offsetParent.clientWidth- this.box.clientWidth;adjustedx=!0;}if(!adjustedy)if((pt.y+ this.box.clientHeight)>=this.box.offsetParent.clientHeight){pt.y=this.box.offsetParent.clientHeight- this.box.clientHeight;adjustedy=!0;}}}this.box.style.margin="0";this.box.style.left=pt.x+"px";this.box.style.top=pt.y+"px";};}}});(function(){var _uiListener=0;createNS("igk.winui",{createInput:function(id,type,opts){if(_uiListener){return _uiListener.apply(this,arguments);}var i=null;switch(type){case "select":i=igk.createNode("select");i.setAttribute("id",id);i.o['name']=id;if(opts && opts.data){var sl=opts.select||'';for(var j=0;j<opts.data.length;j++){var o=i.add("option");o.setAttribute("value",opts.data[j]);o.setHtml(opts.data[j]);if(opts.data[i]==sl){o.setAttribute("selected",'true');}}}if(opts && opts.change){i.on("change",opts.change);}break;default:i=igk.createNode("input");i.setAttribute("id",id);i.o['name']=id;var _pl=(opts ? opts.placeholder :'')||'';if(type){i.o['type']=type;}i.setAttribute("placeholder",_pl);if((type=='file')&& opts && opts.accept){i.setAttribute("accept",opts.accept);}break;}return i;},setListener:function(b){_uiListener=b;},getListener:function(){return _uiListener;}});})();})();(function(){igk.system.createNS("igk.winui.dragdrop",{init:function(target,properties){function dragdropManager(target,properties){if(!target)return;var m_target=$igk(target);var m_properties=properties;var m_q=target;var m_eventcontext=igk.winui.RegEventContext(m_target,$igk(m_target));if(m_eventcontext==null)return;var q=this;var m_supportlist=null;igk.appendProperties(this,{getUri:function(){if(m_properties && m_properties.uri)return m_properties.uri;return null;},getProperties:function(){return m_properties;},support:function(k){if(m_properties && m_properties.supported){if(m_supportlist==null){var e=m_properties.supported.split(",");var p=new(function(e){var m_tab=e;var m_obj={};for(var i=0;i<e.length;i++){m_obj[e[i]]=i;}this.contains=function(s){return typeof(m_obj[s])!=IGK_UNDEF;}})(e);m_supportlist=p;}return m_supportlist.contains(k);}return !0;},toString:function(){return "igk.winui.dragdrop.dragdropManager";}});m_eventcontext.reg_event(m_q,"dragenter",function(evt){evt.preventDefault();if(m_properties && m_properties.enter){m_properties.enter.apply(q,arguments);}});m_eventcontext.reg_event(m_q,"dragleave",function(){if(m_properties && m_properties.leave){m_properties.leave.apply(q,arguments);}});m_eventcontext.reg_event(m_q,"dragover",function(evt){evt.preventDefault();if(m_properties && m_properties.over){m_properties.over.apply(q,arguments);}});m_eventcontext.reg_event(m_q,"drop",function(evt){evt.preventDefault();if(m_properties && m_properties.drop){m_properties.drop.apply(q,arguments);return;}if(igk.system.array.isContain(evt.dataTransfer.types,"text/html")){var n=igk.createText(evt.dataTransfer.getData("text/html"));m_target.appendChild(n);}});m_target.setAttribute("draggable",false);}return new dragdropManager(target,properties);}});function __init_drag(){var opts=igk.JSON.parse(this.getAttribute("igk-draggable-data"),this);igk.winui.dragdrop.init(this.o,opts);}igk.winui.initClassControl("igk-draggable",__init_drag,{desc:"draggable node"});})();(function(){const createNS=igk.system.createNS;const is_string=igk.is_string;const IGK_FUNC='function';const IGK_UNDEF='undefined';const IGK_CLASS='class';var m_nv=false;var bdiv=null;var notify_frames=[];igk.publisher.register("system/bodychange",function(){if(m_nv){if(bdiv !=null){igk.dom.body().appendChild(bdiv.o);}}});igk.winui.notify=function(){if(this.type &&(this.type==IGK_CLASS)){if(typeof(this.notify.getInstance)==IGK_UNDEF){this.notify.getInstance=(function(){var _instance=new igk.winui.notify();return function(){return _instance;};})();}return this.notify.getInstance();}if(typeof(igk.winui.notify.getInstance)==IGK_UNDEF){igk.appendProperties(this,{name:"igk-notifybox",toString:function(){return this.name;}});igk.appendProperties(this,igk.winui.notify);igk.winui.notify.sm_instance=this;}else return igk.winui.notify.getInstance();};var defStyle=" google-Roboto";createNS("igk.winui.notify",{setFilterClass:function(f){if(bdiv !=null)bdiv.filters=f;},closeAlls:function(){if(notify_frames && notify_frames.length>0){for(var i=0;i<notify_frames.length;i++){notify_frames[i].close();}notify_frames=[];}},showMsg:function(msg,type,nc,settings){if(typeof(this)==IGK_FUNC){igk.winui.notify().showMsg(msg,type,nc,settings);return;}var div=null;var m_hide=false;var dial=null;var _sm=igk.winui.notify;if(!this.initialize){bdiv=igk.createNode("div");this.target=bdiv;this.initialize=!0;bdiv.filters="igk-bgfilter-blur";}bdiv=this.target;dial=this;if(!bdiv)return;bdiv.setHtml("");bdiv.addClass("igk-js-notify-box");var div=bdiv.add("div");var cl="igk-js-notify ";if(type){cl+=type;}div.addClass(cl).setOpacity(1);div.setAttribute("igk-js-fix-loc-scroll-width","1");div.setHtml("");if(typeof(msg)=="string"){div.setHtml(msg);}else{div.appendChild(msg);}var fc=igk.winui.events.fn.handleKeypressExit({target:this,complete:_g_close_notify});if(!nc){var close=igk.createNode("div");close.addClass("dispb posab loc_r loc_t");close.add("a",{"onclick":_g_close_notify}).setHtml("close").addClass("igk-notify-btn-close");div.appendChild(close);}div.qselect("input[type='button'][data-type='cancel']").each_all(function(){this.on("click",_g_close_notify);});function _g_close_notify(){_close_notify(null);};function _setupview(){if(!div.parentNode){return;}div.setCss({"height":"auto"});var p=-(div.getHeight()/ 2.0);var pn=div.getParentNode();var t=0;var h=div.getHeight()+"px";var oflow=false;if(pn){t=pn.getHeight()/ 2.0;}else{t=div.getTop();}if((t+ p)<0){p=-t;if(pn.getHeight()<div.getHeight()){h=pn.getHeight()+"px";oflow=true;}}div.setCss({"marginTop":p+"px"});if(h !=div.getComputedStyle('height')){div.animate({height:h},{duration:200,interval:10,animtype:"timeout",context:"notify-height-context",effect:"circ",effectmode:"easeinout",complete:function(){if(!oflow){$igk(div).setCss({height:"auto",overflowY:"hidden"});}else{$igk(div).setCss({overflowY:"auto"});}}});}};function _setupview_callback(){_setupview();igk.winui.unreg_event(window,"load",_setupview_callback);};_sm.Close=_close_notify;_sm.UpdateView=_setupview;_sm.settings=settings;var __closing=false;function _close_notify(callback){if(__closing)return;__closing=!0;igk.animation.fadeout(div.o,20,200,1.0,function(){var pn=bdiv.o.parentNode;if(pn){pn.removeChild(bdiv.o);if(bdiv.filters)$igk(pn).rmClass(bdiv.filters);}bdiv.unregister();__closing=false;m_nv=false;if(callback){callback.apply(document);}if(settings && settings.close){settings.close.apply(_sm);}});igk.winui.unreg_event(document,"keypress",fc);if(m_eventContext){m_eventContext.unreg_window("resize",_setupview);}m_hide=!0;dial.hide=!0;}igk.winui.reg_event(window,"load",__show);if(!nc){if(igk.navigator.isFirefox()){igk.winui.reg_event(document,"keypress",fc);}else{igk.winui.reg_event(document,"keydown",fc);}}var m_eventContext=igk.winui.RegEventContext(this,$igk(this));if(m_eventContext){m_eventContext.reg_window("resize",_setupview);}notify_frames.push({close:_g_close_notify});function __show(){if(m_hide)return;igk.dom.body().addClass(bdiv.filters).appendChild(bdiv.o);if(!igk.is_readyRegister(__show)){_setupview();}div.setCss({"zIndex":"800","top":"50%","overflowY":"auto","overflowX":"hidden","transform":"TranslateY(-50%)","minHeight":"300px"});igk.ctrl.callBindAttribData(div.o);bdiv.addClass("igk-show");m_nv=true;};igk.ready(__show);},showMsBox:function(t,m,cln,nc){var settings=null;if(typeof(t)=='object'){var b=t;t=b.title;m=b.content;cln=b.type;nc=b.closeButton;settings=b.settings;}var q=igk.createNode("div").addClass("igk-notify");if(cln){q.addClass(cln);}q=q.add("div").addClass("igk-container");var content=q.add("div");content.addClass("content-z");var box=content.add("div");box.addClass("title igk-title-4");if(is_string(t)){box.setHtml(t);}else{box.add(t);}if(is_string(m)){content.add("div").addClass("igk-panel igk-notify-panel").setHtml(m);}else{content.add("div").addClass("igk-panel").o.appendChild($igk(m).o);}igk.winui.notify.showMsg(q,cln,nc,settings);},showError:function(msg){var q=igk.createNode("div").addClass("igk-notify igk-notify-danger"+ defStyle).setHtml(msg);igk.winui.notify.showMsg(q.o.outerHTML,"igk-danger");},showErrorInfo:function(title,msg){var q=igk.createNode("div").addClass("igk-notify igk-notify-danger"+ defStyle);q.add("div").addClass("igk-title-4").setHtml(title);q.add("div").addClass("igk-panel igk-notify-panel").setHtml(msg);var msg=q.o.outerHTML.split("\n").join("<br />");igk.winui.notify.showMsg(msg,"igk-danger");},close:function(){if(notify_frames.length>0){var f=notify_frames.pop();f.close();}},visible:function(){return m_nv;},init:function(){var q=$igk(igk.getParentScript());if(q &&(q.o.parentNode !=null)){igk.ready(function(){var t=q.select('.title').first().getHtml();var m=q.select('.msg').first();var i=(q.o.parentNode !=null);q.select("^.igk-notify-box").remove();if(i)igk.winui.notify.showMsBox(t,m,q.o.className);});}},showDialog(t,defStyle,type){let m=$igk(t).first();if(!m){return;}defStyle=defStyle||"";type=type||"";let q=igk.createNode("div").addClass("igk-notify "+ defStyle).setHtml(m.o.outerHTML);$igk(q.o.firstChild).toggleClass("dispn");igk.winui.notify.showMsg(q.o.outerHTML,type);}});})();(function(){const BEGIN_END='begin/end';const BEGIN_WHILE='begin/while';const MATCH='match';const REF_INCLUDE='include';const TREAT_OPT_REGEX="^\\(\\?\\b(?<add>i(m|x|(mx|xm)?)|m(i|x|(ix|xi))?|x(i|m|(im|mi))?)\\b(:\\b(?<remove>i(m|x|(mx|xm)?)|m(i|x|(ix|xi))?|x(i|m|(im|mi))?)\\b)?\\)";function _endWhileUpdateInfo(event,e,src){e.to=event.pos- 1;e.value=src.substring(e.from,e.to);return{offset:event.pos};}function _handleEndMatchRegex(p,src,line,offset,callback){let treat=[[p,line,offset]];if(detectStartLine(p+'')){const g=startLine(src,offset);if(g){const[nline,noffset]=g;treat.push([p,nline,noffset]);}}if(detectEndLine(p+'')){let idx=line.indexOf("\n");if(idx !=-1){treat.push([p,line.substring(0,idx),offset]);}}let m=null;while(treat.length>0){const[p,line,offset]=treat.shift();let cm=p.exec(line);if(cm){_updateRegexIncides(cm,offset);if(!m||(cm.index<m.index)){m=cm;}}}if(m)callback(m);}function startLine(line,offset){if(offset==0)return[line,offset,null];let gs=line.slice(offset);let idx=gs.indexOf("\n");if(idx !=-1){let nidx=gs.indexOf("\n");idx+=offset+ 1;return[line.slice(idx),idx,nidx !=-1 ? line.slice(idx,nidx+ idx):null];}}function _updateRegexIncides(g,offset){g.index+=offset;if('indices' in g){g.indices?.map(function(a){if(a !==undefined){a[0]+=offset;a[1]+=offset;}});}}function treatRegex(regex){return removeBracketChar(removeOption(regex));}function removeBrank(src,offset=0,start='(',end=')'){let depth=0;let stop=false;let is_escaped=false;let _start_offset=offset;while(!stop &&(offset<src.length)){let ch=src[offset];offset++;if(!is_escaped){if(ch==start)depth++;else if(ch==end){depth--;if(depth==0){stop=true;break;}}else if(ch=='\\'){is_escaped=true;}}else is_escaped=false;}if(stop){src=src.substring(0,_start_offset)+ src.substring(offset);}return src;}function detectStartLine(regex){regex=removeBracketChar(removeOption(regex));return /(?<!\\)\^/.test(regex);}function detectEndLine(regex){regex=removeBracketChar(removeOption(regex));return /(?<!\\)\$/.test(regex);}function removeOption(regex){if(/^\(\?/.test(regex)){regex=removeBrank(regex,0);}return regex;}function removeBracketChar(regex){let b=null;while(b=/(?<!\\)\[/d.exec(regex)){regex=removeBrank(regex,b.index,'[',']');}return regex;}function nextLineIsEmpty(line,param){let idx=line.indexOf("\n");if(idx !=-1){idx++;let r=line.slice(idx);let next_line=r.indexOf("\n");let g=/^\s*$/.exec(next_line==-1 ? r :r.slice(0,next_line));if(g){if(param){param.value=g[0];param.pos=g.index+ idx;param.end=param.pos+ g[0].length;}return true;}}return false;};const initRegexContainer=function({RegexDetectionInfo,RegexMatcherPattern}){const igk=(()=>{const{igk}=globalThis;return igk||{}})();const _NS={initialize:'_init_'};function _nameIdDefinition(q){const p=[];do{if(q.name){p.unshift(q.name);}}while(q=q.parent?.info);return p;}function _loadExtraProperties(inf,a){let ks=Object.keys(inf);for(let i of ks){if(/\b(type|begin|end|while|match)\b/.test(i)){continue;}inf[i]=a[i];}return inf;}function _treatLoadPattern(patterns,{createMatcherPattern}){const tab=patterns.map((a)=>{if((a instanceof RegexMatcherPattern)||(a instanceof RefIncludePattern)){return a;}const{include,begin,end,match}=a;const _while=a.while;if(include && /^#/.test(include)){return new RefIncludePattern(include.slice(1));}let inf=createMatcherPattern();if(match){inf.type=MATCH;inf.match=match;}else if(begin && _while){inf.type=BEGIN_WHILE;inf.begin=begin;inf.while=_while;}else{inf.type=BEGIN_END;inf.begin=begin;inf.end=end;}return _loadExtraProperties(inf,a);});return tab;}function _treatLoadCapture(cap){if(cap instanceof RegexCaptureMatcher){return cap;}}function _treatRegexMatch(b){if(typeof(b)=='string'){b=_treatConvertStringToRegex(b);}if(!(b instanceof RegExp)){throw new Error('not a regex matching');}if(!b.hasIndices){const t=(b+'');let s=(b+'').substring(1,t.lastIndexOf('/'));b=new RegExp(s,b.flags+'d');}return b;};function _treatConvertStringToRegex(b){const{option,regex}=_treatGetOption(b);if(option.indexOf('d')==-1)option.push('d');return new RegExp(regex,option.join(''));}function _preUpdateValue(e,src,from,to,prefixListener,type){let l=src.substring(from,to);if(l.length>0){if(prefixListener){l=prefixListener(l,{type,info:e});}e.value+=l ? l :'';e.to+=to- from;}};function _postUpdateValue(listener,stub,{from,to,pattern}){if(listener){listener(stub,{from,to,pattern});}};function _postUpdateValueLogic(e,index,src,postUpdateListener,pattern){const stub=src.substring(e.to,index);if((stub.length>0)&&(postUpdateListener)){_postUpdateValue(postUpdateListener,stub,{src,from:e.to,to:index,pattern});}};function _treatGetOption(b){const t=[];const g=b.match(TREAT_OPT_REGEX);let regex=b;if(g){const _groups=g.groups;if(_groups){const{add,remove}=_groups;const f=['i','m','x'];if(add){let rm={};if(remove)f.forEach((d)=>{if(remove.indexOf(d)!=-1){rm[d]=d;}});f.forEach((d)=>{if(!(d in rm)&&(add.indexOf(d)!=-1))t.push(d);});}regex=b.replace(new RegExp(TREAT_OPT_REGEX),'');}}return{option:t,regex};};const MATCH_RESOLUTION={};function _startMatch(info,b,pattern,resolutionList,createResultListener){let p=null;if(resolutionList){if(resolutionList &&(b in resolutionList)){p=resolutionList[b];}else{p=_treatRegexMatch(b);resolutionList[b]=p;}}else{p=_treatRegexMatch(b);}if(p){_handleMatch(p,{...info,pattern},createResultListener)}};function _handleMatch(p,{source,pattern,line,offset,matchs},createResultListener){let treat=[[p,line,offset]];let tps=p+'';if(detectStartLine(tps)){let pp=startLine(source,offset);if(pp){const[nline,noffset]=pp;if(noffset !=offset){treat.push([p,nline,noffset])}}}while(treat.length>0){const[p,line,ofset]=treat.shift();let c=p.exec(line);if(c){_updateRegexIncides(c,offset);let inf=createResultListener({pattern,match:c,offset:c.index,src:source,parent:null,isContinue:false});if(matchs.length==0){matchs.push(inf);}else{if(c.index<matchs[0].offset){matchs[0]=inf;}}}}};function _handlePatterns(patterns,info){const matchs=info.matchs;const v_info={source:info.src,offset:info.offset,pattern:null,matchs:matchs,line:info.line};let idx=0;const{repository,createResultListener,createMatcherPattern}=info;const uf={createMatcherPattern};patterns.forEach((pattern)=>{if(!(pattern instanceof RegexMatcherPattern)&& !(pattern instanceof RefIncludePattern)){let l=_treatLoadPattern([pattern],uf);if(l){l=l.pop();patterns[idx]=l;pattern=l;}}if('include' in pattern){let inc=pattern.include;if(inc){pattern=repository[inc.slice(1)];}}let v_b=_getStartRegex(pattern);if(v_b){v_info.pattern=pattern;let p=_treatRegexMatch(v_b);_handleMatch(p,v_info,createResultListener);}idx++;});return matchs.pop();}function _endMatch(end,match,value){if(end instanceof RegExp){end=end.toString();}value=match[0]||value;let p=/\\(?<id>\d+)/g;let n_value=end.replace(p,function(s,id){let ms=match[id];if(ms){ms=ms.replace('*','\\*').replace('+','\\+');}return ms;});return _treatRegexMatch(n_value);}function _handlePatternsGlobal({patterns,resolutions,repository},createResultListener){let v_b=null;let v_resolutions=resolutions;const v_info=arguments[0];for(let i of patterns){if(i.type==REF_INCLUDE){let _id=/^#(.+)/.exec(i.include);if(!_id){throw new Error('not a valid reference');}const _x=_id[1];if(_x in repository){i=repository[_x];}else{throw new Error('repository missing definition '+ _x);}}v_b=_getStartRegex(i);if(v_b){_startMatch(v_info,v_b,i,resolutions,createResultListener);}}};function _getStartRegex(i){let v_b=null;switch(i.type){case BEGIN_END:case BEGIN_WHILE:v_b=i.begin;break;case MATCH:v_b=i.match;break;case REF_INCLUDE:break;}return v_b;}function _InitTreatClosure(capture,{captureListener,e,source}){if(captureListener){return(c)=>{return captureListener(c,{capture,e,source});}}return(c)=>{return c};}function CreateChainList(cap){let root={};root.childs=[];root.value=cap[0];root.indice=cap.indices[0][0];root.parent=null;let li=[root];let k=1,i=null,preview=null,plen=null,clen=null,v=null,child=null,ki,vparent=null;let indices=cap.indices.slice(0);let vcap=cap.slice(0);vcap.shift();indices.shift();while(vcap.length>0){v=vcap.shift();i=indices.shift();child={};child.childs=[];child.parent=null;child.value=v;child.indice=i[0];ki=k- 1;vparent=null;clen=child.indice+ child.value.length;while((ki>=0)&&(!vparent)){preview=li[ki--];plen=preview.indice+ preview.value.length;if((child.indice>=preview.indice)&&(plen>=clen)){vparent=preview;}}child.parent=vparent;if(vparent){vparent.childs.push(k);}li.push(child);k++;}return li;}function TreatCaptures(captures,cap,sourceValue,option=null,chainList=null){chainList=chainList ?? CreateChainList(cap);option={...(()=>option||{})(),...{source:sourceValue}};let offset=0;const v_keys=Object.keys(captures);v_keys.sort();let boffset=cap.index,v=cap[0],lpos=0,rv='',spos=0,select=false,marks=[],cap_treat_mark=[],mark=null,c=null,chain=null;function handle_mark_capture(k,mark,c,register=true){if(!(typeof(mark)=='function')){mark=_InitTreatClosure(mark,option);}chain=chainList[k];const offset=c[1]- boffset;let src=c[0];let ch='',prefix=null,sb=null,toffset=null;if(chain.childs?.length>0){let children=chain.childs.slice(0);let nsb=src;let toffset=0;let tq=null,cmark=null,tc=null,sch=null,ti=null;while(children.length>0){tq=children.shift();if(tq in cap_treat_mark){throw new Exception("not allowed");}cmark=captures[tq];tc=cap[tq];ti=cap.indices[tq][0];sch=handle_mark_capture(tq,cmark,[tc,ti],false);sb=ti- boffset;prefix=src.substring(toffset,sb)+ sch;nsb=prefix+ src.substring(sb+ tc.length);toffset=prefix.length;}ch=mark(nsb,sourceValue,k,option);}else{ch=mark(src,sourceValue,k,option);}if(register){marks.push({"value":src,"treatValue":ch,"indice":offset});}cap_treat_mark[k]=[ch,offset];return ch;};for(let k of v_keys){mark=captures[k];if(!/^\d+$/.test(k)||(k in cap_treat_mark)){continue;}c=cap[k];if(!c)continue;k=parseInt(k);handle_mark_capture(k,mark,[c,cap.indices[k][0]],true);}rv=v;if(marks.length>0){let spos=0;let lpos=0;let tv='';let q=null,prefix=null;while(marks.length>0){q=marks.shift();prefix=v.substring(spos,q.indice)+ q.treatValue;tv=tv.substring(0,lpos)+ prefix+ v.substring(q.indice+ q.value.length);spos=q.indice+ q.value.length;lpos+=prefix.length;}rv=tv;}return rv;};class RegexCaptureMatcher{name;patterns;}class RegexContainer{#m_detect_info;offset;createDetectInfoListener;captureListener;createRegexMatcherListener;version='1.0';description;repository={};patterns=[];scopeName;injectionSelector;prefixListener;postUpdateListener;isEndOfSource(source){return this.#m_detect_info.offset>=source.length;}get currentOffset(){return this.#m_detect_info.offset;}static GetIds(pattern){return _nameIdDefinition(pattern);}loadRepository(data){for(let i in data){let pattern=data[i];if(pattern.include)throw new Error('invalid repository');let l=_treatLoadPattern([pattern],{createMatcherPattern:()=>this.#_createRegexMatcherPattern()});if(l &&(l.length>0)){this.repository[i]=l.pop();}}}#_createRegexMatcherPattern(){const{RegexContainer,RegexMatcherPattern}=igk.system.text;let l=null;if(this.createRegexMatcherListener){l=this.createRegexMatcherListener();}if(!l){if(!RegexMatcherPattern){console.log('the container ',{RegexContainer,RegexMatcherPattern,condition:!RegexContainer||!RegexMatcherPattern});console.error('missing RegexMatcherPattern');return null;}}return l||new RegexMatcherPattern();}begin(start,end,tokenID,refId,patterns,name){const{RegexMatcherPattern}=igk.system.text;const createMatcherPattern=()=>this.#_createRegexMatcherPattern();let inf=createMatcherPattern();inf.type=BEGIN_END;inf.begin=start;inf.end=end;inf.tokenID=tokenID;inf.name=name;inf.patterns=patterns && Array.isArray(patterns)? _treatLoadPattern(patterns,{createMatcherPattern}):null;if(refId){var cp=new RefIncludePattern(refId);this.repository[refId]=inf;this.patterns.push(cp);}else this.patterns.push(inf);return inf;}match(match,name,tokenID,patterns){const{RegexMatcherPattern}=_NS;let inf=this.#_createRegexMatcherPattern();inf.type=MATCH;inf.match=match;inf.tokenID=tokenID;inf.name=name;inf.patterns=patterns ? _treatLoadPattern(patterns):null;this.patterns.push(inf);return inf;}while(start,whileCondition,tokenID,name,patterns){const{RegexMatcherPattern}=_NS;let inf=this.#_createRegexMatcherPattern();inf.type=BEGIN_WHILE;inf.begin=start;inf.while=whileCondition;inf.tokenID=tokenID;inf.name=name;inf.patterns=patterns ? _treatLoadPattern(patterns):null;this.patterns.push(inf);return inf;}extract(src,filter,offset){const match=[];let g=null;this.clear();this.offset=offset;while(g=this.detect(src)){let e=this.end(g);if(!e)continue;if(!filter||filter(e.value))match.push(e.value);}return match;}#_createEndPatternInfo(g,index,parent){const{pattern}=g;const q={isMatch:false,from:index,to:index,value:'',detectResult:g,begin:null,end:null,src:null,missingEnd:undefined,isContinue:undefined};Object.defineProperty(q,'tokenID',{value:pattern.tokenID,writable:false,configurable:false});Object.defineProperty(q,'parent',{value:parent,writable:false,configurable:false});Object.defineProperty(q,'name',{value:pattern.name,writable:false,configurable:false});Object.defineProperty(q,'isEOS',{get(){return this.to>=this.detectResult.src?.length;}});return q;}end(g){const q=this;const{pattern,match,src,endRegex,endWhileRegex,isContinue,parent,info}=g;const index=g.offset;const v_createResultListener=(info)=>{return q.#_createDetectInfoResult(info);};let value=match[0];let v_skip=false;let offset=0;const v_fc_checkcap=(a)=>Object.keys(a).length>0 ? a :null;let e=info||q.#_createEndPatternInfo(g,index,parent);const _cap=pattern.capture||{};const begin_cap=v_fc_checkcap({..._cap,...(pattern.beginCaptures||{})});const end_cap=v_fc_checkcap({..._cap,...(pattern.endCaptures||{})});const end_while=v_fc_checkcap({..._cap,...(pattern.whileCaptures||{})});const patterns=pattern.patterns;const createMatcherPattern=()=>this.#_createRegexMatcherPattern();if(!info){offset=index;offset+=value.length;}else{offset+=q.#m_detect_info.offset;}(function(){switch(pattern.type){case MATCH:if(!isContinue){e.value=value;e.from=index;e.to=offset;e.isMatch=true;}if(begin_cap){e.end=TreatCaptures(begin_cap,m,src,{e,captureListener:q.captureListener});}if(parent){_preUpdateValue(parent.info,src,parent.info.to,e.from,q.prefixListener);parent.info.to=offset;}break;case BEGIN_END:case BEGIN_WHILE:if(!isContinue){e.value=value;e.from=index;e.to=offset;e.begin=value;if(begin_cap){e.begin=TreatCaptures(begin_cap,match,src,{e,captureListener:q.captureListener});}}g.isContinue=true;const _while=pattern.while;const{end}=pattern;let matchs=[];let line=src.slice(offset);let m=null;let v_matchPattern=patterns?.length>0 ? _handlePatterns(patterns,{src:g.src,repository:q.repository,pattern:pattern,line,offset,matchs,resolutions:q.#m_detect_info.regexList,createResultListener:v_createResultListener,createMatcherPattern}):null;if(pattern.type==BEGIN_END){if(end && !endRegex){g.endRegex=_endMatch(end,match,value);}_handleEndMatchRegex(g.endRegex,src,line,offset,(im)=>{e.end=im[0];m=im;});let matchs=[];if((v_matchPattern)&&(!m||(v_matchPattern.offset<m.index))){_preUpdateValue(e,src,e.to,v_matchPattern.offset,q.prefixListener,'pre-match');offset=v_matchPattern.offset;q.#m_detect_info.nextDetection=v_matchPattern;v_matchPattern.parent=g;g.isContinue=true;v_skip=true;return;}if(m){if(end_cap){e.end=TreatCaptures(end_cap,m,src,{e,captureListener:q.captureListener});}_preUpdateValue(e,src,e.to,m.index,q.prefixListener,'pre-end');e.to=m.index+ m[0].length;e.value=src.substring(e.from,e.to);offset=e.to;}else{e.missingEnd=true;e.to=offset=src.length;}return;}else{if(_while && !endWhileRegex){g.endWhileRegex=_endMatch(_while,match,value);}_handleEndMatchRegex(g.endWhileRegex,src,line,offset,(im)=>{e.end=im[0];m=im;});if((v_matchPattern)&&(!m||(v_matchPattern.offset<m.index))){_preUpdateValue(e,src,e.to,v_matchPattern.offset,q.prefixListener,'pre-while-match');offset=v_matchPattern.offset;q.#m_detect_info.nextDetection=v_matchPattern;v_matchPattern.parent=g;v_skip=true;return;}let _next_line_exists=((idx)=>(idx=line.indexOf("\n"))==-1 ? !1 :{index:idx+ offset})();const _v_line_event=_next_line_exists ?((e)=>nextLineIsEmpty(line,e)? e :null)({}):null;if(_v_line_event){_v_line_event.pos+=offset;_v_line_event.end+=offset;}if(m){if(end_while){e.endWhile=TreatCaptures(end_while,m,src,{e,captureListener:q.captureListener});}_preUpdateValue(e,src,e.to,m.index,q.prefixListener,'pre-while');if(_v_line_event){_postUpdateValueLogic(e,_v_line_event.pos- 1,src,q.postUpdateListener,pattern);({offset}=_endWhileUpdateInfo(_v_line_event,e,src));}else{e.to=m.index+ m[0].length;e.value=src.substring(e.from,e.to);offset=e.to;v_skip=true;q.#m_detect_info.nextDetection=g;}}else{if(_v_line_event){_postUpdateValueLogic(e,_v_line_event.pos- 1,src,q.postUpdateListener,pattern);({offset}=_endWhileUpdateInfo(_v_line_event,e,src));}else{if(_next_line_exists){_postUpdateValueLogic(e,_next_line_exists.index,src,q.postUpdateListener,pattern);e.to=_next_line_exists.index;e.value=src.substring(e.from,e.to);offset=e.to;}else{e.missingEnd=true;e.to=offset=src.length;}}}}break;}})();q.#m_detect_info.offset=offset;if(v_skip){if(!g.info){g.info=e;}return null;}else{if(e.parent){e.parent.info.to=offset;}this.#m_detect_info.nextDetection=e.parent;}return e;}clear(){this.#m_detect_info=null;}reset(e,{offset=0 }){if(e?.missingEnd){let nResult={...e.detectResult};if(!nResult.tValue){nResult.tValue=[];}const nv=e.detectResult.src.substring(nResult.info.from,nResult.info.to);if(nv.trim().length>0){nResult.tValue.push(nv);}nResult.src=null;nResult.info.value=nv;nResult.offset=offset;nResult.info.from=offset;nResult.info.to=offset;delete nResult.info.missingEnd;nResult.info.detectResult=nResult;this.#m_detect_info.nextDetection=nResult;this.#m_detect_info.offset=offset;}else{this.clear();}}export(){return{scopeName:this.scopeName,patterns:this.patterns,respository:this.repository};}#_createDetectInfo(){return{matchs:[],offset:0,line:'',source:'',resolutions:null,nextDetection:null};}#_createDetectInfoResult(info){let i=((this.createDetectInfoListener)? this.createDetectInfoListener.apply(this,[info]):null)||{...info};return i;}detect(source,options=null){const{RegexDetectionInfo}=igk.system.text;if(Array.isArray(source)){throw new Error("source is array. not allowed");}if(this.patterns?.length<0){return false;}let v_info=null;if(!this.#m_detect_info){v_info=this.#_createDetectInfo();this.#m_detect_info=new RegexDetectionInfo;this.#m_detect_info.offset=(options ? options.offset :null)||0;this.#m_detect_info.info=v_info;this.#m_detect_info.callback=options ? options.callback :null;}else{v_info=this.#m_detect_info.info;}let v_callback=options ? options.callback :this.#m_detect_info.callback;if(this.#m_detect_info && this.#m_detect_info.nextDetection){let l=this.#m_detect_info.nextDetection;this.#m_detect_info.nextDetection=null;if(l.src==null){l.src=source;}return l;}const v_line=source.slice(this.#m_detect_info.offset);if(v_line.length==0){return null;}let v_detect=true;v_info.line=v_line;v_info.source=source;v_info.offset=this.#m_detect_info.offset;v_info.resolutions=this.#m_detect_info.regexList;v_info.callback=v_callback;v_info.patterns=this.patterns;const q=this;const v_createResultListener=(info)=>{return q.#_createDetectInfoResult(info);};while(v_detect){_handlePatternsGlobal(v_info,v_createResultListener);if(v_info.matchs.length>0){return v_info.matchs.pop();}v_detect=false;}}};class RefIncludePattern{include;constructor(refId){Object.defineProperty(this,'type',{value:REF_INCLUDE,configurable:false,writable:false});this.include='#'+ refId;}}_NS.RegexMatcherPattern=RegexMatcherPattern;_NS.RegexContainer=RegexContainer;if(typeof(igk?.system)!=='undefined'){igk.system.createNS("igk.system.text",{RegexContainer,RegexMatcherPattern});}return{RegexContainer}};const _export={initRegexContainer,MATCH,BEGIN_WHILE,BEGIN_END,TREAT_OPT_REGEX};if(typeof(module)!='undefined'){module.exports=_export;}const _NS=((q,a)=>{a=a.split('.');while(q &&(a.length>0)){q=q[a.shift()];}return q;})(globalThis,'igk.system.text');if(_NS){igk.appendProperties(_NS,_export);}})();(async function(){const _NS=igk.system.createNS('igk.system.text',{});await import('./RegexContainer.d.js');const{RegexDetectionInfo,RegexMatcherPattern,initRegexContainer}=_NS;const{RegexContainer}=initRegexContainer({RegexDetectionInfo,RegexMatcherPattern});igk.appendProperties(_NS,{RegexContainer});})();(async function(){const r=await import('./RegexDetectionInfo.d.mjs');const{RegexDetectionInfo}=r;const _N_="igk.system.text";const _MOD_=igk.system.module(_N_);const _NS=igk.system.createNS(_N_,{RegexDetectionInfo});})();(function(){class RegexMatcherPattern{type;container;include;begin;end;while;patterns;name;contentName;captures;beginCaptures;endCaptures;toString(){return 'RegexMatcherPattern';}}igk.system.createNS('igk.system.text',{RegexMatcherPattern});})();igk.system.createNS("igk.html.canva",{animate:igk.html5.animate,cancel:igk.html5.cancelAnimate});(function(){function createlitteral(regex){let p=regex.begin(":\\s+","\\s+:",null,null,null,"expression");p.patterns=[{'match':"\\\\."}];return p;}function createElement(tagExpression,namespace){const{RegexContainer}=igk.system.text;let regex=new RegexContainer();regex.match("(?i)\\.[a-z]+[a-z0-9\\-_]*",'class');regex.match("(?i)#[a-z]+[a-z0-9\\-_]*",'id');regex.match("(?i)@[a-z]+[a-z0-9\\-_]*",'activateAttrib');regex.match('\\w+\\b','tag');regex.match('\\s*>\\s*','split');regex.match('\\s*!\\s*','parent');regex.begin('{','}',null,null,null,'styling');regex.begin('\\[','\\]',null,null,null,'attribs');regex.begin('\\(','\\)',null,null,null,'funcs');let p=regex.begin(":\\s+","\\s+:",null,null,null,"expression");p.patterns=[{'match':"\\\\."}];let src=tagExpression;let pos=0;let g=null;let options={offset:0 };let i=0;const createE=namespace ?(v)=>{return document.createElementNS(namespace,v);}:(v)=>{return document.createElement(v);};const _listener=(function(){let _node=null;let g={root:null,split(){},attribs(lv){if(!_node)return;let regex=new RegexContainer();lv=lv.replace(/^\[/,'').replace(/\]$/,'');regex.match('(=|:)','split');regex.match('(;)','end');regex.match('\\w+\\b','key');let p=createlitteral(regex);p.name='key';const attrib={};let n='',v='';let mode=0;while(g=regex.detect(lv)){let e=regex.end(g);if(e){const{name,value}=e;if(mode==0){switch(name){case 'key':n+=value;break;case 'split':mode=1;break;}}else{switch(name){case 'key':v+=value;break;case 'end':mode=0;attrib[n]=v;n=v='';break;}}}else{break;}}if(n.length>0){attrib[n]=v;}for(let i in attrib){_node.setAttribute(i,attrib[i]);}},funcs(v){},activateAttrib(v){$igk(_node).o.setAttribute(v.substring(1),'');},styling(v){let r=(new Function('return '+ v)).apply();if(_node)$igk(_node).setCss(r);},expression(v){if(!_node)return;v=v.replace(/^:\s+/,'');v=v.replace(/\s+:$/,'');v=v.trim();if(v.length>0)_node.appendChild(document.createTextNode(v));},parent(){if(_node){_node=_node.parentNode;}},id(v){if(_node)_node.setAttribute('id',v.substring(1));},class(v){if(_node)$igk(_node).addClass(v.substring(1));},tag(v){let c=createE(v);if(!_node){_node=c;this.root=_node;}else{_node.appendChild(c);_node=c;}}};Object.defineProperty(g,'lastNode',{get(){return _node}});return g;})();while(g=regex.detect(src)){let e=regex.end(g);if(e){const{name,value}=e;if(name && _listener &&(name in _listener)){_listener[name].apply(_listener,[value]);}}else{break;}}const{root,lastNode}=_listener;return{root,lastNode};};const _JS=igk.system.createNS('igk.system.html.dom',{createElement(tagExpression,namespace){const{RegexContainer,RegexMatcherPattern}=igk.system.text;if(!RegexContainer||!RegexMatcherPattern){return null;}return createElement(tagExpression,namespace);}});Object.defineProperty(_JS.createElement,'support',{get(){const{RegexContainer,RegexMatcherPattern,RegexDetectionInfo}=igk.system.text;let s=(typeof(RegexContainer)!='undefined')&&(typeof(RegexMatcherPattern)!='undefined')&&(typeof(RegexDetectionInfo)!='undefined');return s;}});})();(function(){const createNS=igk.system.createNS;const is_string=igk.is_string;var m_controllers=[];var m_initialize=false;var m_attrib_datas={"igk-type":{n:"igk",desc:"Declare type. attribute is used as Type"},"igk-js-anim-over":{n:"js",desc:"execute anim on mouseover and mouse release",code:"igk-js-anim-over=\"{backgroundColor: 'red'},{ anim property....}\""},"igk-js-anim-focus":{n:"js",desc:"execute anim on fucus ans blur"},"igk-js-eval":{n:"js",desc:"used to eval script in current context"},"igk-js-eval-init":{n:"js",desc:"used to eval script in current context after document is ready"},"igk-js-init-uri":{n:"js",desc:"uri that will be invoke on document ready"},"igk-js-bodyheight":{n:"js",desc:"indicate that this node must target the body height"},"igk-node-disable-selection":{n:"node",type:"attribute",desc:"node can be selelected. default is true"},"igk-article-options":{n:"ctrl",desc:"indicate must be considered as an article options"},"igk-ctrl-options":{n:"ctrl",desc:"indicate must be considered as a controller options node"},"igk-input-focus":{n:"js",desc:"force the cibling node to get focus"},"igk-input-data":{n:"js",desc:"setup the data used to validate the input"},"igk-form-validate":{n:"js",desc:"used with form to indicate that the form must be validate before submit."},"igk-js-fix-height":{n:"js",desc:"fix element height to target height. value is a id of the element"},"igk-js-fix-width":{n:"js",desc:"fix element width to target width. value is a id of the element"},"igk-js-fix-size":{n:"js",desc:"fix element size to target size. value is a id of the element"},"igk-js-fix-prop":{n:"js",desc:"fix element properties on size.expect property wait: {target,prop} "},"igk-js-fix-eval":{n:"js",desc:"fix element properties on window resize property wait: {update:function()} "},"igk-ajx-form":{n:'js',desc:'bool indicate that a form is used in ajx context. mixed(0|1|[{complete:func,targetid:[id of response node]}]. used igk-ajx-form-targedid to indicated the response node'},"igk-js-bind-select-to":{n:"js",desc:"bind select to data from target ref #id,passing object refid or json: {id:#sample,selected:value,usecustom:0|1,allowempty:1|0,emptyvalue:value}"},"igk-ajx-form-target":{n:'js',type:'attr',desc:'used in form to set the target of the form response,(select|=|::) where=is for the current form,:: if for the entire document '}};var m_ctrl_types={"igk-ctrl-options":{n:"igk",desc:"declare controller options"},"igk-ctrl":{n:"igk",desc:"declare a controller"}};var m_attribManager=[];var m_h_ctrl={};var m_readylist=null;var m_callflag=0;function __attribToString(){return "igk.ctrl.attribManagerInfo";};function __registerAttribManager(key,callback){if(callback && key){var e=null;if(m_attribManager[key])e=m_attribManager[key];else{e={k:key,s:new Array(),toString:__attribToString};m_attribManager[key]=e;m_attribManager.push(e);}e.s.push(callback);}};function __callReadyFunc(n,de){if(!n||(m_readylist==null)||m_callflag){return;}var e=null;var i=m_readylist.getCount();var j=0;m_callflag=1;for(j=0;j<m_readylist.getCount();j++){e=m_readylist.getItemAt(j);e.apply(n,[de]);}m_callflag=0;if(i !=j)console.debug("after call to ready list "+ m_readylist.getCount());}function __readyFuncEventArgs(){var m_preventContinue=false;igk.appendProperties(this,{preventContinue:function(){m_preventContinue=!0;},getPreventContinue:function(){return m_preventContinue;}});};var m_attribCtrl=[];function __loadAttribCtrl(n,k){if(!(k in m_attribCtrl)){m_attribCtrl[k]=[];}m_attribCtrl[k].push(n);}function __callBindAttribData(node){var q=$igk(node);var cnf=q.getConfig("igk:callAttribBindingData");if(cnf==1){return;}var re=new __readyFuncEventArgs();__callReadyFunc(node,re);if(re.getPreventContinue()){return;}var s=q.getAllAttribs();var r=null;var e=null;if(typeof(s)==igk.constants.undef)return;function __invoke(key,tab,node){var e=null;var n=$igk(node);var attr=null;for(var i=0;i<tab.length;i++){e=tab[i];try{attr=n.getAttribute(key);e.apply(n,[key,attr]);__loadAttribCtrl(n,key);}catch(ex){console.error(ex);igk.winui.notify.showErrorInfo("Exception","__invoke::Binding ::: "+ key+" <br />"+ ex+"<p class=\"stack\" style=\"max-height: 240px; font-family:'courier new'; line-height:1.5; font-size:8pt; overflow: auto\">"+ ex.stack.split("\n").join("<br />")+"</p>"+"");}}};var fc=node.hasAttribute||function(n){return node.getAttribute(n)!=null;};for(var i=0;i<m_attribManager.length;i++){e=m_attribManager[i];r=new RegExp("("+ e.k+")");if(r.test(s)&& fc.apply(node,[e.k])){__invoke(e.k,e.s,node);}}q.setConfig("igk:callAttribBindingData",1);}function __clearBindAttribData(){m_attribManager=[];}function __ctrl_utility_functions(n){var m_o=n;igk.defineProperty(this,"o",{get:function(){return m_o;}});igk.appendProperties(this,{toString:function(){return "[object igk.ctrl.utility.function]";}});}createNS("igk.ctrl",{getAttribCtrl:function(k){return m_attribCtrl[k]||null;},getAttribCtrlList:function(){var t=[];for(var i in m_attribCtrl){if(i=="length")continue;t.push(i);}return t;},bindAttribManager:function(key,callback,setting){if(setting && !(key in m_attrib_datas)){igk.ctrl.registerAttribManager(key,setting);}if(m_attrib_datas[key]&& callback){__registerAttribManager(key,callback);}else{igk.winui.notify.showMsg("<div class=\"igk-notify igk-notify-danger\">"+"Error No Binding Attrib registrated for \""+ key+"\".<br/><div>You must register it before call the bindAttribManager function. igk.ctrl.registerAttribManager");}},getController:function(item){if(item==null)return null;if(item.getAttribute &&(item.getAttribute("igk-type")=="controller"))return item;else return igk.ctrl.getcontroller(item.parentNode);},confirm:function(item,msg,uri){if((window.confirm)&& window.confirm(msg)){item.form.confirm.value=1;item.form.action=uri;return !0;}return !1;},init_controller:function(){if(m_initialize)return;var d=document.getElementsByTagName("*");var id=null;var s=null;m_controllers.length=0;if(d){for(var i=0;i<d.length;i++){s=d[i];if(s.getAttribute("igk-type")=="controller"){id=s.getAttribute("igk-type-id");m_controllers.push(s);if(id){m_controllers[id]=s;}$igk(s).fc=new __ctrl_utility_functions($igk(s));}}igk.ready(function(){igk.ctrl.callBindAttribData(igk.dom.body().o);});}m_initialize=!0;},getCtrlById:function(id){if(m_controllers[id])return m_controllers[id];return null;},findCtrlById:function(id){if(m_initialize){return igk.ctrl.getCtrlById(id);}var d=document.getElementsByTagName("*");var id=null;var s=null;m_controllers.length=0;if(d){for(var i=0;i<d.length;i++){s=d[i];if(s.getAttribute("igk-type")=="controller"){id=s.getAttribute("igk-type-id");if(id==id){return s;}}}}return null;},getCtrls:function(){return m_controllers;},isregCtrl:function(q){if((q.nodeType==1)&&(q.getAttribute("igk-type")=="controller")){var id=q.getAttribute("igk-type-id");if(id && !m_controllers[id]){m_controllers[id]=$igk(q);$igk(q).fc=new __ctrl_utility_functions($igk(q));}return q;}return null;},getParentController:function(node){if((node==null)||(node.parentNode==null))return null;var q=node.parentNode;while(q !=null){if(igk.ctrl.isregCtrl(q)){return q;}q=q.parentNode;}return q;},invokeAttribEventData:function(node,attrib_name,value){if(attrib_name in m_attrib_datas){let e=m_attribManager[attrib_name].s[0];if(e){new Promise((p,n)=>{e.apply(node,[attrib_name,value]);p();});return true;}}},callBindAttribData:function(node){if(node){__callBindAttribData(node);if(node.getElementsByTagName){var s=node.getElementsByTagName('*');if(s){for(var i=0;i<s.length;i++){igk.invokeAsync(__callBindAttribData,s[i]);}}}else{switch(node.nodeType){case 3:case 8:break;default:console.debug("/!\\ getElementsByTagName function not found : "+ node.nodeType);break;}}}},getAttribData:function(){return m_attrib_datas;},registerReady:function(func){if(m_readylist==null)m_readylist=new igk.system.collections.list();m_readylist.add(func);},registerAttribManager:function(name,options){if((name)&&(typeof(m_attrib_datas[name])==igk.constants.undef)){m_attrib_datas[name]=options;return !0;}return !1;},isAttribManagerRegistrated:function(name){if((name)&&(typeof(m_attrib_datas[name])!=igk.constants.undef)){return !0;}return !1;},regCtrl:function(name,baseuri){m_h_ctrl[name]=new(function(name,baseuri){this.name=name;this.baseuri=baseuri;igk.appendProperties(this,{getUri:function(funcname){if(funcname){return this.baseuri+"&f="+ funcname;}return this.baseuri;}});})(name,baseuri);},getRegCtrl:function(name){return igk.get_v(m_h_ctrl,name,null);},getRegCtrls:function(){return m_h_ctrl;},initselect_model:function(t,o,model){var q=null;var to=null;var p=igk.getParentScript();if(is_string(t)){q=$igk(p).select(t).first();}else{q=t;}if(is_string(o)){to=$igk(p).select(o).first();}else to=o;if(!q||!to){return;}function __changez(evt){var v=q.o.value;var i=q.o.selectedIndex;var n=$igk(q.o[i]).getAttribute("model")||"default";var cl=null;if(model)cl=model.select("."+ n).first();else cl=$igk(p).select(".igk-select-model ."+ n).first();if(cl){to.setHtml(cl.getHtml());}else to.setHtml("no data");igk.winui.events.raise(window,'resize');};$igk(q).reg_event("change",__changez).reg_event("keyup",function(evt){var kc=evt.keyCode||0;switch(kc){case 37:case 38:case 39:case 40:__changez();break;}});__changez();if(q.o.form){$igk(q.o.form).reg_event("reset",function(){var s=q.select(">:option");var i=s.first();if(i){q.o.value=i.o.value;__changez();}});}}});var e=igk.winui.events.global();igk.winui.events.raise(e,'igk_controller_ready',igk.ctrl,null);igk.winui.events.clean(e,'igk_controller_ready');igk.winui.events.raise(e,'igk_controller_ready',igk.ctrl,null);let global={};global.setAttribute=Element.prototype.setAttribute;Element.prototype.setAttribute=function(n,v){if(/\[[^\]]+\]/.test(n)){let t=null;if(typeof this.igk===undefined){$igk(this).init();}t=$igk(this);var q=t.getAttribute(n);if(q==n){return;}igk.ctrl.invokeAttribEventData(t,n,v);return;}global.setAttribute.apply(this,[n,v]);};})();(function(){const createNS=igk.system.createNS;function __append_frametobody(responseText){var q=document.createElement("div");q.innerHTML=responseText;var c=q.childNodes[0];if(c){igk.dom.body().appendChild(c);igk.ajx.fn.initnode(c);if(c.getElementsByTagName){var tforms=c.getElementsByTagName("form")[0];var tc=$igk(c).select("form");if(tc.each){tc.each(function(){if(this.o.onsubmit==null){this.setProperties({"onsubmit":function(evt){window.igk.ajx.postform(this,this.action.split("#")[0],function(xhr){if(this.isReady()){if(global){this.replaceBody(xhr.resonseText);}else{if(m)this.setResponseTo(m);}}});this.frame.close();evt.preventDefault();return !1;}});}return this;});}}}};createNS("igk.ctrl.frames",{appendFrameResponseToBody:__append_frametobody,postframe:function(e,uri,ctrl){var m=null;var t=$igk(e).select(ctrl).first();if(ctrl !=null){m=window.igk.ctrl.getCtrlById(ctrl);}igk.ajx.post(uri,null,function(xhr){if(this.isReady()){if(t){t.setHtml(xhr.responseText).init();}else{igk.ajx.fn.replace_or_append_to_body.apply(this,[xhr]);}}});}});})();(function(){const _eval=igk.system.eval;igk.ctrl.bindPreloadDocument("igk:canvas",function(){$igk(document).select("igk:canvas").each(function(){var i=this;var canva=document.createElement("canvas");i.$.dom.copyAttributes(i.o,canva,{src:"1"});i.$.ajx.get(i.getAttribute("src"),null,function(xhr){if(this.isReady()){_eval(xhr.responseText,);i.$.dom.replaceChild(i.o,canva);}},false);return true;});});})();"uses strict";(function(){function __cssbuilder(s,t){var m_styles={};var q=$igk(t);var m_reloading=false;function reloadStyle(m_styles){if(m_reloading)return;m_reloading=true;for(var i in m_styles){var v=s.o.style[i]+'';if(v=="undefined"){v=null;}m_styles[i].o.value=v;}m_reloading=false;}function __click_func(evt){evt.preventDefault();var s=this.innerHTML;if(igk.system.string.endWith(s.toLowerCase(),'color')){}};function __valkey(evt){if(evt.keyCode==13){var k=$igk(this).getAttribute("cssproperty");var e={};e[k]=this.value;s.o.style[k]=this.value;igk.winui.style_editor.setProperties(e);reloadStyle();}}function __loadProp(s,pattern,m_styles){q.select('*').each(function(){this.unregister();return true;});q.setHtml("");if(pattern=="")pattern==null;var b=m_keys;var v_tab=m_tab;for(var i=0;i<b.length;i++){if((pattern !=null)&&(b[i].indexOf(pattern)==-1)){continue;}k=v_tab[b[i]];m=igk.createNode("li");m.setCss({paddingLeft:"10px",paddingRight:"10px"});m.add("a").addClass("dispb").setAttribute("href","#").reg_event("click",__click_func).setHtml(""+k);var v=s.o.style[k];if(v=="undefined")v=null;var input=m.add("input");m_styles[k]=input;input.addClass("igk-form-control dispb").setAttribute("type","text").setAttribute("value",v).setAttribute("cssproperty",k).reg_event("keyup",__valkey).reg_event("change",(function(k){var m_k=k;return function(evt){if(m_reloading)return;try{s.o.style[k]=this.value;reloadStyle();}catch(ex){igk.show_notify_error("Exception : ",k+" <br />"+ex);}}})(k));q.appendChild(m);}}igk.appendProperties(this,{getCssList:function(){var t="";var v_tab=igk.css.getProperties();var m=null;var k=null;var b=[];for(var i in v_tab){if(i=="csstext")continue;b.push(i);}igk.system.array.sort(b);m_keys=b;m_tab=v_tab;__loadProp(s,null,m_styles);},loadPattern:function(pattern){__loadProp(s,pattern,m_styles);}});}var m_tbuilder;igk.system.createNS("igk.cssbuilder",{init:function(){var b=igk.getParentScript();if(b){m_tbuilder=new __cssbuilder(igk.createNode("dummy"),b);m_tbuilder.getCssList();}},initsearch:function(){var q=$igk(igk.getParentScript());q.reg_event('keyup',function(){igk.cssbuilder.searchProperty(q.o.value.toLowerCase());});q.setCss({"border":'1px solid rgb(187, 187, 187)'});},searchProperty:function(pattern){if(m_tbuilder)m_tbuilder.loadPattern(pattern);},openwindow:function(uri){var editor=window.open(uri,'igk-wnd-coloreditor','width=400px, height=300px ,statusbar=no, adressbar=no, size=no');editor['igk-parentWindow']=window;},initmediaview:function(t){var d=$igk(igk.getParentScript());if(!d)return;pwnd=window['igk-parentWindow']||window.opener;var frm=d.getParentForm();function __initInfo(hwnd){hwnd.igk.publisher.register("config/mediachanged",function(e){d.setHtml("Media:"+e.mediaType);frm.clMediaType.value=e.mediaType;igk.winui.style_editor.reset();});var k=hwnd.igk.css.getMediaType();d.setHtml("Media:"+k);frm.clMediaType.value=k;}if(pwnd){__initInfo(pwnd);pwnd.unload=function(){console.log("unloading");};pwnd.load=function(){console.log("loading");};pwnd.complete=function(){console.log("loading complete");};}else{console.error("no parent");}}});})();(function(){var frm=null;var wnd=null;var item=null;var m_sl=null;function __init(){frm=$igk(igk.getParentScript()).getParentForm();wnd=window['igk-parentWindow']||window.opener;if(wnd==null){wnd=window;}item=igk.createNode('dummy');$igk(frm.clSelector).reg_event('change',function(evt){__checkvalue();}).reg_event("keyup",function(evt){__checkvalue();});}function __checkvalue(){var t=frm.clSelector.value;m_sl=$igk(wnd.document).select(t);$igk(frm).select('.cls-v').getItemAt(0).setHtml("Items: "+m_sl.getCount());}function _resetStyle(){var t=frm.clSelector.value;if(t){item.o.style.cssText="";frm.clValue.value="";var s=$igk(wnd.document).select(t);if(s){s.each_all(function(){this.o.style.cssText='';});}}}function _save(){igk.ajx.postform(frm,frm.action);}igk.system.createNS("igk.winui.style_editor",{init:__init,reset:_resetStyle,save:_save,setProperties:function(p){item.setCss(p);frm.clValue.value=item.o.style.cssText;var s=$igk(wnd.document).select(frm.clSelector.value);if(s){s.each(function(){this.setCss(p);return true;});}},maketransparent:function(evt){var p=null;if(frm.clMode.value==1){p={backgroundColor:'transparent'};}else{p={color:'transparent'};}igk.winui.style_editor.setProperties(p);},initcolor:function(evt){var p=null;if(frm.clMode.value==1){p={backgroundColor:evt.value};}else{p={color:evt.value};}igk.winui.style_editor.setProperties(p);}});})();igk.system.createNS("igk.ctrl.changement",{init :function(uri,interval){if(!window.igk){return;}var target=window.igk.getParentScript();var m_timeout=null;var m_checkinterval=interval?interval :5000;var m_viewbox=null;function update(){m_timeout=setTimeout(checkforupdate,m_checkinterval);}function checkforupdate(){igk.ajx.post(uri,null,function(xhr){if(this.isReady()){if(xhr.responseText){if(m_viewbox==null){m_viewbox=document.createElement("div");document.body.appendChild(m_viewbox);}$igk(m_viewbox).setCss({"height":"32px","backgroundColor":"red"}).addClass("fitw posfix loc_t loc_l");m_viewbox.innerHTML=xhr.responseText;igk.animation.fadeout(m_viewbox,20,1000,1.0,function(){update();m_viewbox.parentNode.removeChild(m_viewbox);m_viewbox=null;});}else{update();}}},true);}igk.ready(checkforupdate);}});(function(){function _hide(t){t.on("transitionend",function(){t.remove();}).addClass("hide");};igk.system.createNS("igk.ctrl.cookie_agree",{agree(type,t,n){if(t){if(t=$igk(t).first()){_hide(t);}}igk.cookies.set(n,1);igk.cookies.set("agree-type",type);},init(t,n){if(t){if(t=$igk(t).first()){let _mobile=igk.navigator.isAndroid()||igk.navigator.isIOS();let _g=igk.web.getcookies(n);if(_g||_mobile){_hide(t);}}}}})})();(function(){igk.system.createNS("igk.ctrl.optionsmanager",{init:function(){var s=igk.dom.body().select(":igk-type");if(s){s.each(function(){if(this.getAttribute("igk-type")=="ctrl-options"){this.setCss({fontSize:"1em",width:"100px",height:"32px",top:"0px",left:"0px" });this.getParentNode().setCss({}).reg_event("click",function(evt){});}return true;});}}});igk.ready(igk.ctrl.optionsmanager.init);})();(function(){igk.system.createNS("igk.ctrl.page_zone",{init:function(){var s=$igk(document.body).select(".page_zone");if(s){var size=igk.window.GetScreenSize();s.each(function(){this.setCss({display:"inline-block",textAlign:"left",position:"relative",maxWidth:"auto",minWidth:"auto" });this.animate({width:(size.x- 200)},{duration:200});return true;});}}});})();(function(){var m_initialize=false;var m_cibling=null;igk.system.createNS("igk.ctrl.pageeditor",{hide:function(btn){var q=$igk($igk(btn).getParentCtrl());if(q){if(q.fc && q.fc.hide)q.fc.hide();else console.debug("bad: parent controller item does't contain hide function. not initialized "+ q);}},init:function(p){if(p==null){p=igk.getParentScript();}var pctrl=$igk(igk.ctrl.isregCtrl(p)||$igk(p).getParentCtrl());if(m_cibling==p){return;}var m_target=$igk(pctrl);m_cibling=p;m_target.setCss({boxShadow:"0px 0px 4px #4E4E4E",padding:"4px",whiteSpace:"nowrap",left:"50%"});$igk(m_target).setOpacity(0.0);igk.ready(function(){var pp={hide:function(){pctrl.setCss({display:'none'});},show:function(){pctrl.setCss({display:'block'});}};if(pctrl.fc){igk.appendProperties(pctrl.fc,pp);}else pctrl.fc=pp;var w=m_target.o.clientWidth;$igk(m_target).animate({opacity:1.0,marginLeft:-(w / 2)+"px"},{duration:200,interval:20,context:"pageeditortranslation",update:function(){},complete:function(){}});});m_initialize=true;}});})();(function(){igk.ctrl.bindPreloadDocument("igk-reset-body-management",function(){igk.ready(function(){igk.dom.body().select(".igk-reset-body").each(function(){function getRuleName(i){var reg=new RegExp("([A-Z])","g");return i.replace(reg,"-$1").toLowerCase();}function getRule(p){var msg="";for(var i in p){msg+=getRuleName(i)+":"+p[i]+";";}return msg;}var b=$igk(document.body);var p={};var index=igk.system.apps.link.o.sheet.cssRules.length;var cl=this.o.className;this.rmClass(cl);var rTab=["fontSize","lineHeight","textAlign","margin","padding","border","backgroundColor","color"];for(var i in rTab){i=rTab[i];if(/(length|parentRule|cssText)/.exec(i)||(typeof(this.o.style[i])=="function")){continue;}if(b.getComputedStyle(i)!=this.o.style[i]){p[i]=b.getComputedStyle(i)+"";}}igk.system.apps.link.o.sheet.insertRule(".igk-reset-body{"+getRule(p)+"}",0);this.addClass(cl);return true;});});});igk.ctrl.bindAttribManager("igk-js-bodyheight",function(){var source=this.getAttribute("igk-js-bodyheight");if(source){var q=this;this.setCss({"minHeight":document.body.clientHeight+"px"});var m_eventContext=igk.winui.RegEventContext(this,$igk(this));if(m_eventContext){m_eventContext.reg_window("resize",function(){q.setCss({"minHeight":document.body.clientHeight+"px"});});}}});if(igk.ctrl.selectionmanagement)igk.ctrl.bindAttribManager("igk-js-anim-over",igk.ctrl.selectionmanagement.initnode);var m_article=new Array();var m_ctrl=new Array();var m_viewctrl=false;if(igk.web.getcookies("igk-sao")==1)m_viewarticle=true;if(igk.web.getcookies("igk-sco")==1){m_viewctrl=true;}igk.ctrl.bindAttribManager("igk-ctrl-options",function(){var q=this;var source=igk.system.convert.parseToBool(this.getAttribute("igk-ctrl-options"));q.show=function(){this.setCss({display:"block",position:"relative"});};q.hide=function(){this.setCss({display:"none",position:"absolute"});};if(!m_viewctrl){q.hide();}else{q.show();}m_ctrl.push(q);});})();(function(){function __init_font_tool(){this.addClass("posr");var d=igk.createNode("div");var p=new igk.winui.tooltip(this,d);d.setHtml(this.getAttribute("igk-font-tool-tip"));d.addClass("igk-tooltip");if(this.getAttribute("igk-font-drop-font")){__init_drop_font.apply(this);}return true;};function __init_drop_font(){this.setCss({width:"64px"});var d=igk.createNode("div");var img=igk.createNode("img");var v=this.getAttribute("igk-font-drop-font-uri");var cv=this.getAttribute("igk-font-drop-font-uri");var self=this;img.o.src=v;img.reg_event("click",function(){igk.ajx.post(self.getAttribute("igk-font-drop-font"),null,function(xhr){if(this.isReady()){window.igk.ajx.replaceBody(xhr.responseText);$igk(document).scrollTo($igk(document).select(".font_list").getNodeAt(0));}});});img.o.alt="d";d.setSize("18px").setCss({"border":"none","top":"4px","fontSize":"100%","right":"4px"}).addClass("posab");d.appendChild(img);this.appendChild(d);};window.igk.system.createNS("igk.ctrl.theme",{init:function(){var t=$igk(document).select(':igk-font-tool-tip').each(__init_font_tool);}});igk.ctrl.bindPreloadDocument("igk.ctrl.theme",igk.ctrl.theme.init);igk.ctrl.registerAttribManager("igk-font-tool-tip",{desc:'font-tool-tip'});igk.ctrl.bindAttribManager("igk-font-tool-tip",function(){__init_font_tool.apply(this);});})();(function(){var cibling="igk-top-nav-bar";igk.system.createNS("igk.ctrl.topnavbar",{init:function(target){var q=$igk(target);var s=null;var _t=q.getAttribute("igk-nav-bar-target")||"^.igk-parentscroll";var _target=q.getAttribute('target');var _opts=igk.initObj(igk.JSON.parse(q.getAttribute("igk-nav-bar-options")),{offset:0,'offset-target':undefined,'target':_target||undefined});s=q.select(_t);var offp=s.getItemAt(0);const v_r=_opts["offset-target"]? $igk(_opts["offset-target"]):null;var tg_id=(tg_id=(v_r||null)? tg_id.getItemAt(0):null);q.o.removeAttribute('target');(function({target}){target=target ? $igk(target).first():null;if(!target){return;}q.setHtml(target.o.outerHTML).init();})(_opts);if(tg_id){var g=igk.winui.GetScreenPosition(tg_id.o);_opts.offset=g.y+ tg_id.o.scrollHeight;}function __bind(p){var dx=p.scrollTop- _opts.offset;if((dx)>0){igk.winui.fitfix2(q,p,true,false);q.addClass("igk-show");}else{q.rmClass("igk-show");}}function parentOffset(i){var st=i.parentNode;while(st &&(st.parentNode !=null)&&(st.parentNode !=document.body)){st=st.parentNode;}return st;}igk.load(function(){if(offp)var p=null;if(offp)p=offp.o;else p=parentOffset(target.o);if(p){ns_igk.winui.reg_event(p,"scroll",function(evt){__bind(p);});__bind(p);}else{console.debug("there is no parent offset");}});}});if(!igk.ctrl.isAttribManagerRegistrated(cibling)){igk.ctrl.registerAttribManager(cibling,{n:"js",desc:"register top nav bar"});}igk.ctrl.bindAttribManager(cibling,function(){var q=this;var source=igk.system.convert.parseToBool(this.getAttribute(cibling));if(source){igk.ctrl.topnavbar.init(q);}});})();(function(){var djx=0;igk.system.createNS("igk.ctrl",{ca_update:function(xhr,target){if(this.isReady()){var f=igk.getParentByTagName(target,'form');var q=document.createElement('tr');q.innerHTML=xhr.responseText;var t=igk.getElementsByTagName(f,'table')[0];if(t)t.appendChild(q);}},ca_updatetable:function(xhr,target){var f=igk.getParentByTagName(target,'form');var q=document.createElement('table');q.innerHTML=xhr.responseText;var t=igk.getElementsByTagName(f,'table')[0];if(t)t.innerHTML=q.innerHTML;},ca_update_checkchange:function(a,name){var q=a.form[name];if(q){if((q.length)&&(q.length>0)){for(var s=0;s<a.form[a.name].length;s++){if(a.form[a.name][s]==a){q[s].value=a.checked? "1":"0";break;}}}else{q.value=a.checked? "1":"0";}}else console.log("element not found : "+ name);},ca_ctrl_change:function(uri,q){if(!q)return;if(djx){djx.abort();}djx=window.igk.ajx.post(uri+q.value,null,function(xhr){if(this.isReady()){var s=$igk(q.form);s=s.getChildById('view_frame');this.setResponseTo(s);}});}});})();(function(){var _sblock=0;igk.system.createNS("igk.ctrl.sessionblock",{init:function(){var target=igk.getParentScript();if(!target||(target==window)||$igk(target).data['session.init']){console.error("/!\ can't init sessession ....");return;}var script=igk.getCurrentScript();if(script){target.removeChild(script);}_sblock=script;var content=target.innerHTML;var info=null;target.innerHTML="";var m_nodeChild=document.createElement("div",igk.namespaces.xhtml);var m_visible=false;var m_oldh=0;m_nodeChild.innerHTML=content;igk.ajx.fn.initnode(m_nodeChild);function hide_info(d){$igk(d).animate({height:"0px","opacity":0 },{duration:200,interval:20,complete:function(){$igk(d).addClass("dispn").setCss({padding:"0px"});if(d.parentNode){d.parentNode.removeChild(d);}info=null;}});}function show_info(evt){if(info !=null){hide_info(info);return;}var d=m_nodeChild;$igk(d).addClass("igk-session-block no-print google-Roboto js").setCss({minWidth:"300px",height:"0px",display:"inline-block",overflow:"hidden",top:(igk.getNumber(target.offsetTop)+ 32)+"px",zIndex:parseInt(q.getComputedStyle('zIndex'))+ 1,right:"32px",padding:"10px",fontSize:"8pt"});if(d.parentNode==null)document.body.appendChild(d);var h=d.scrollHeight;if(h==0)h=m_oldh;else m_oldh=h;$igk(d).setOpacity(0).rmClass("dispn").animate({height:(h+ 10)+"px",opacity:1},{interval:1,duration:20 });info=d;};var q=$igk(target);q.addClass("igk-session-button").rmClass("igk-js-hide").setCss({"width":"24px","height":"24px","backgroundRepeat":"no-repeat","backgroundPosition":"0px 0px","backgroundColor":"transparent","position":"fixed","overflow":"hidden","right":"32px"}).reg_event("mouseover",function(){q.setCss({"backgroundPosition":"0px -24px"});}).reg_event("mouseleave",function(){$igk(target).setCss({"backgroundPosition":"0px 0px"});}).reg_event("click",show_info);q.data['session.init']=1;}});})();(function(){function __forceFocus(){var s=this.getAttribute("igk-input-focus");if(s==1){this.focus();}}igk.ctrl.bindAttribManager("igk-input-focus",__forceFocus);})();(function(){var m_loadtiny=0;var b_reg=0;var m_globals=[];var __u=igk.constants.undef;igk.system.createNS("igk.tinyMCE",{runOn:function(el,op){igk.ready(function(){if(typeof(tinyMCE)!=__u){for(var i in tinyMCE.editors){if(i=='length')continue;var m=tinyMCE.editors[i];if(!$igk(m.getElement()).isOnDocument()){tinyMCE.remove(m);}}setTimeout(function(){var g={selector:el.elements};var m=null;for(var i in op){if(i=="protect"){m=Array();for(var j=0;j<op[i].length;j++){m.push(new RegExp(op[i][j],"g"));}g[i]=m;continue;}g[i]=op[i];}tinyMCE.init(g);},100);return;}});},init:function(elements,op){function __loadAndInit(){var tq={};if(op){for(var i in op){tq[i]=op[i];};}var t=elements.elements;if(typeof(t)=="string"){tq.selector=t;tinyMCE.init(tq);return;}else{for(var i in t){var q=$igk(elements[i]).first();tq.selector=elements;tinyMCE.init(tq);}}}if(typeof(tinyMCE)!=igk.constants.undef){__loadAndInit();}else{igk.ready(function(){__loadAndInit();});}function __bindGlobal(t){for(var i=0;i<m_globals.length;i++){m_globals[i].apply();}m_globals=[];}if(!b_reg){b_reg=1;}else{m_globals.push(function(){__loadAndInit()});}},edit:function(selector,op){function __loadAndInit(){var q={selector:selector,inline:true};for(var i in op){q[i]=op[i];}tinyMCE.init(q);}if(typeof(tinyMCE)!=igk.constants.undef){__loadAndInit();}else{igk.ready(__loadAndInit);}},save:function(n,uri,callback){var g=tinyMCE.get(n);if(g){igk.ajx.post(uri,'tiny=1&clContent='+ g.getContent(),function(xhr){if(this.isReady()){if(callback)callback.apply(this);igk.ajx.fn.replace_or_append_to_body.apply(this,[xhr]);}});}}});})();(function(){const primaryFetchConfig={credentials:'include',headers:{'Content-Type':'application/json'}};function _toServerData(credentials){const _d={};let q=[{n:_d,p:credentials}];while(q.length>0){let d=q.shift();for(let h in d.p){let v=d.p[h];if(typeof(v)=='function'){continue;}const is_array_buffer=v instanceof ArrayBuffer;if(!is_array_buffer &&(typeof(v)=='object')){d.n[h]={};q.push({n:d.n[h],p:v});}else{d.n[h]=is_array_buffer ? bufferTo64(v):v;}}}return _d;};function _getRandomEID(){let l=Math.ceil(Math.random()*10)+ 1;const r=[];while(l>0){r.push(Math.ceil(Math.random()*30));l--;}return r;};const bufferUtils={serveData(data){return _toServerData(data);},bta(o){let tq=[o];const pre='=?BINARY?B?',suf='?=';while(tq.length>0){let q=tq.shift();for(let i in q){let s=q[i];if(typeof(s)=='string'){if((s.substring(0,pre.length)==pre)&&(s.substring(s.length- suf.length)==suf)){let b=atob(s.substring(pre.length,s.length- suf.length)),u=new Uint8Array(b.length);for(let mi=0;mi<b.length;mi++){u[mi]=b.charCodeAt(mi);}q[i]=u.buffer;}}else{if(s){tq.push(s);}}}}return o;}};function _initChallenge(){let v_ref_challenge=_getRandomEID();return new Uint8Array(v_ref_challenge);};function bufferTo64(buffer){let s='';let u=new Uint8Array(buffer);for(let i=0;i<u.byteLength;i++){s+=String.fromCharCode(u[i]);}return btoa(s);};const algorigthm={};Object.defineProperty(algorigthm,'ES256',{get(){return-7;}});Object.defineProperty(algorigthm,'Ed25519',{get(){return-8;}});Object.defineProperty(algorigthm,'RS256',{get(){return-257;}});const fecthWithCredentials=async function(uri,option){option=igk.initObj(option,primaryFetchConfig);return fetch(uri,option);};igk.system.createNS('igk.navigator.credentialsUtility',{_initChallenge,_getRandomEID,bufferUtils,bufferTo64,primaryFetchConfig,algorigthm,fecthWithCredentials});})();igk.system.createNS("igk.media.webplayer",{init:function(target,uri,width,height){target.style.backgroundImage="url('"+uri+"')";var img=document.createElement("img");img.src=uri;var m_imgw=img.width;img=null;target.style.backgroundRepeat="no-repeat";target.style.width=width? width:"32px";target.style.height=height? height:"32px";function __construct(){var m_timeout=null;var m_isplaying=false;var m_pos=0;var m_width=m_imgw;this.target=target;this.play=function(){var q=this;m_isplaying=true;q.update();};this.update=function(){if(m_isplaying){m_pos=(m_pos+32)% m_width;var q=this;this.target.style.backgroundPosition=-m_pos+"px 0px";m_timeout=setTimeout(function(){q.update()},72);}};this.pause=function(){clearTimeout(m_timeout);m_isplaying=false;};this.stop=function(){this.pause();m_pos=0;};}var o=new __construct();o.play();return o;}});(function(){igk.system.createNS("igk.io",{copyToClipboard:function(s){var g=document.createElement("textarea");var selected=document.getSelection().rangeCount>0 ? document.getSelection().getRangeAt(0):!1;g.innerText=s;g.style.position="absolute";g.style.left="-9999";document.body.appendChild(g);g.select();document.exec("copy");$igk(g).remove();if(selected){document.getSelection().removeAllRanges();document.getSelection().addRange(selected);}}});})();(function(){igk.system.createNS("igk.io.file",{download:function(t,n,v){var a=igk.createNode("a");var data=new Blob([v],{"type":t});igk.dom.body().appendChild(a.o);a.o.download=n||"file.data";a.o.href=URL.createObjectURL(data);a.o.type=t;a.o.click();a.remove();return 1;},downloadData:function(name,data){var a=igk.createNode("a");igk.dom.body().appendChild(a.o);a.o.download=name;a.o.href=data;a.o.click();a.remove();},load:function(u,f){if(!f)throw("argument f require");var eCb=f.error||null;var eComplete=typeof(f)=="function" ? f :f.complete;f=eComplete;function getNodeData(n){var dummy=igk.createNode("dummy");var c=n.childNodes.length;var i=0;var m=null;while(c>0){m=n.childNodes[i];switch(m.nodeType){case 8:case 3:case 11:case 10:i++;break;default:dummy.o.appendChild(n.childNodes[i]);break;}c--;}var v_d=dummy.getHtml();if(v_d==null){return null;}return v_d;};var __loaded=0;var ob=igk.createNode('object');ob.addClass('no-visible posab').setCss({width:'1px',height:'1px'});ob.o.type=igk.navigator.isXBoxOne()? "text/html" :"text/plain";igk.dom.body().prepend(ob);ob.reg_event("error",function(evt){if(eCb){eCb.apply(ob);eCb=null;}if(__loaded||(igk.navigator.isFirefox()&& igk.navigator.getFirefoxVersion()>=50)){return;}f.apply(document,[{error:1,data:evt,msg:"/!\\error: "+ u}]);ob.remove();});ob.reg_event("load",function(evt){try{if(!ob.o.contentDocument||ob.o.contentDocument.readyState !="complete")return;var s=ob.o.contentDocument;var d=getNodeData(s);f.apply(document,[{data:d,document:s,uri:u}]);__loaded=1;}catch(e){console.error("Exception arrived : "+ e);}finally{setTimeout(function(){ob.remove();},0);}});ob.o.data=u;}});})();(function(){igk.system.createNS("igk.io.xml",{parseString:function(txt,type){var doc=new DOMParser();var xml=doc.parseFromString(txt,type||"text/xml");if(xml.documentElement.nodeName=="parsererror"){return false;}return xml;},parseUri:function(uri){var g=igk.ajx.get(uri,null,null,false);var s=g.xhr.responseText;return s;}});})();(function(){igk.system.createNS("igk",{ClipBoard:{writeText(text){if(navigator.clipboard){navigator.clipboard.writeText(text).then(()=>{igk.DEBUG && console.log("data writed to clipboard");}).catch((e)=>{igk.DEBUG && console.error("failed to write to  clipbard",e);})}}}})})();(function(){igk.winui.initClassControl("igk-balafon-js-view",function(){var t=this.getAttribute("igk:default-tag")||'div';var r=new Function(this.getText());var o=$igk(document.createElement(t));r.call(o,[{source:this}]);this.replaceBy(o.o);o.remove();});})();(function(){igk.winui.initClassControl("igk-winui-clone-target",function(){var s=this.getAttribute("igk-data");var d=$igk(s).first();if(d){var b=d.clone();b.o["id"]+="-cn";this.o.parentNode.replaceChild(b.o,this.o);}this.remove();});})();(function(){igk.winui.initClassControl("igk-cookie-warn",function(){var q=this;var a=this.select(".close a").first();if(a){a.reg_event("click",function(e){var trans=q.getComputedStyle("transition");q.setCss({height:q.getComputedStyle("height"),transition:'none'});e.preventDefault();e.stopPropagation();q.setCss({transition:trans,height:"0px",padding:"0px"});igk.web.setcookies(q.getAttribute("igk-domain-ewarn"),1);});}q.reg_event("transitionend",function(e){if((e.target==q.o)&&(e.propertyName=='height')){if(q.getcomputedStyle("height")=="0px"){q.remove();}}});});})();(function(){function init_dialog(){let m_show=0;this.show=function(){if(this.showDialog)return;this.showDialog=1;m_show=1;this.rmClass("dispn");var q=this;var next=q.o.nextCibling;var parent=q.o.parentNode;igk.winui.notify.showMsBox({title:q.getAttribute("igk:title")||"Dialog",type:q.getAttribute("igk:dialogtype")||"default",content:q.o,closeButton:0,settings:{close:function(){q.hide();if(next){next.parentNode.insertBefore(next,q.o);}else{parent.appendChild(q.o);}q.showDialog=null;}}});};this.hide=function(){this.addClass("dispn");};};igk.winui.initClassControl("igk-dialog",init_dialog);})();(function(){igk.system.createNS("igk.winui.huebar",{toWebColor:function(h,s,v){var r,g,b;var c=v*s;var x=c*(1- Math.abs(((h / 60.0)% 2)- 1));var m=v- c;if(h<60){r=c;g=x;b=0;}else if(h<120){r=x;g=c;b=0;}else if(h<180){r=0;g=c;b=x;}else if(h<240){r=0;g=x;b=c;}else if(h<300){r=x;g=0;b=c;}else{r=c;g=0;b=x;}return{r:parseInt(r*255),g:parseInt(g*255),b:parseInt(b*255)};},init:function(){var q=$igk(igk.getParentScript());var c=q.select(".cur").first();var v=q.o.nextCibling;var g=q.select('+.huev').first();var m_st=0;var W=q.getWidth()- c.getWidth();if(g){q.addEvent("hue-changed",{value:null});q.reg_event("hue-changed",function(e){g.setHtml(Math.round(e.value)+"");});}function __update(e){if(!m_st)return;var l=q.getScreenLocation();var _t=Math.max(0,Math.min(W,(e.clientX- l.x)));var _x=_t+"px";var _v=(_t / W)*360;c.setCss({left:_x});q.value=_v;if(g){q.o['hue-changed'].value=_v;q.raiseEvent("hue-changed",{value:_v});}};q.reg_event("mousemove",function(e){__update(e);}).reg_event("mousedown",function(e){if(m_st)return;m_st=!0;W=q.getWidth()- c.getWidth();igk.winui.mouseCapture.setCapture(q.o);igk.winui.selection.stopselection();__update(e);}).reg_event("mouseup",function(e){if(m_st){__update(e);m_st=0;igk.winui.mouseCapture.releaseCapture();igk.winui.selection.enableselection();}});}});})();(function(){function GItemClass(id,text,value){var _tag=igk.createNode("div");_tag.addClass("glass-btn dispib cursor-pointer").setCss({"padding":"8px","border":"1px solid #ddd","borderRadius":"4px","marginRight":"4px"});_tag.setHtml(text);_tag.add("input").setAttribute("name",id+"[]").setAttribute("type","hidden").setAttribute("value",value);igk.defineProperty(this,"tag",{get:function(){return _tag;}});}function __initSelecTag(){var q=this;var data=JSON.parse(q.getAttribute("igk:data"));var options=igk.initObj(JSON.parse(q.getAttribute("igk:options")),{"show_tag":true,"debug":false,"click":null,"require":0,"selected":[],"select_all_text":"select all"});if(!Array.isArray(options.selected)){options.selected=[options.selected+""];}var id=q.getAttribute("id");if(!id){q.remove();}var _input=igk.createNode("input");var _datalist=igk.createNode("datalist");var _select_allbtn=igk.createNode("a");var _box=null;var _listkey=id+"_datalist";var _rassoc={};var _select_list={};var _press=!1;var _litem=null;var _init_=!1;var _form=q.select("^form").first();_input.setAttribute("type","hidden");if(_form){_form.on("submit igkFormBeforeSubmit",function(e){if(options.require){var p=false;for(var t in _select_list){p=true;break;}if(!p){e.preventDefault();e.stopPropagation();q.addClass("igk-danger");}else{q.rmClass("igk-danger");}}});}function _update(d){var c=d||(_input.o.value+"").toLowerCase();if(c in _rassoc){if(!(c in _select_list)){var gitem=new GItemClass(id,_rassoc[c].t,_rassoc[c].i);if(_litem){_litem.insertAfter(gitem.tag.o);}else{if(!_box){_box=igk.createNode("div").addClass("glass-box");q.add(_box);}_box.add(gitem.tag.o);}_litem=gitem.tag;_select_list[c]=gitem;if(options.click){gitem.tag.on("click",options.click);}else{gitem.tag.on("click",function(){_select_list[c].tag.remove();delete(_select_list[c]);_litem=null;for(var s in _select_list){_litem=_select_list[s].tag;}_initData();});}_initData();}_input.o.value="";_input.o.focus();}};function _handleTab(){var body=q.select("^body").first();if(body==null){$igk(document).unreg_event("keyup",_handleTab);return;}};$igk(document).reg_event("keyup",_handleTab);function _haveProperty(n){for(var c in n){return true;}return false;};function _initData(init){if(_init_){return;}_init_=!0;_datalist.o.innerHTML="";data.forEach(function(i){var k=i.t.toLowerCase();if(init){_rassoc[k]=i;if(options.selected.indexOf(i.i)!=-1){_update(k);return;};i.option=_datalist.add("option").setAttribute("value",i.t).setHtml(i.t);}else{if(k in _select_list)return;i.option=_datalist.add("option").setAttribute("value",i.t).setHtml(i.t);}});if(_datalist.o.options.length==0){_input.addClass("dispn_i");_input.o.removeAttribute("required");_select_allbtn.addClass("dispn_i");}else{_input.rmClass("dispn_i");_select_allbtn.rmClass("dispn_i");if(_haveProperty(_select_list)){_input.o.removeAttribute("required");}else{_input.setAttribute("required",options.require);}}_init_=!1;};function select_all(){data.forEach(function(i){var k=i.t.toLowerCase();_update(k);});};_datalist.o.id=_listkey;_input.addClass("igk-control cltext glass-text");_input.setAttribute("list",_listkey);if(options.require){_input.setAttribute("required",1);}_input.on("change",function(){var c=(_input.o.value+"").toLowerCase();if(c in _rassoc){_update();}else{_input.o.value="";}}).on("click",function(){}).on("input",function(){if(!_press){_update();_press=!1;}}).on("keyup",function(e){if(e.keyCode==9){}}).on("keypress",function(e){var stop=0;var _press=true;if(e.keyCode==13){_update();stop=1;}if(stop){e.preventDefault();e.stopPropagation();}});if(options.debug){q.setHtml("select tag: "+ id);}q.insertAfter(_select_allbtn.o);q.insertAfter(_input.o);q.insertAfter(_datalist.o);_select_allbtn.addClass("glass-select-all cursor-pointer").setHtml(options.select_all_text);_select_allbtn.on("click",function(e){e.preventDefault();e.stopPropagation();select_all();});_initData(true);};igk.winui.initClassControl("igk-winui-selecttag",__initSelecTag);})();"uses strict;";(function(){var m_ei;igk.system.createNS("igk.winui",{textEdit:function(t,o){var q=$igk(t);if(q && !q.isTextEdit)q.isTextEdit=1;else{return;}function _restore(g){g.o.parentNode.replaceChild(q.o,g.o);m_ei=null;delete(g.o);}function _edit(){if(m_ei){m_ei.restore();m_ei=null;}var g=igk.createNode("input");g.addClass("igk-textedit");g.o['id']=o.id;g.o["value"]=q.getHtml();g.reg_event("keypress",function(e){switch(e.keyCode){case 27:_restore(g);break;case 13:igk.ajx.post(o.uri,o.id+"="+g.o.value,function(xhr){if(this.isReady()){q.setHtml(g.o["value"]);_restore(g);igk.ajx.fn.replace_or_append_to_body.apply(this,[xhr]);}});break;}});q.o.parentNode.replaceChild(g.o,q.o);m_ei={q:q,g:g,restore:function(){_restore(this.g);}};};q.reg_event("click",function(e){e.preventDefault();e.stopPropagation();_edit();});this.edit=_edit;}});igk.system.createNS("igk.winui.textEdit",{getCurrent:function(){return m_ei;}});function __itextEdit(){var q=this;var o=igk.JSON.parse(q.getAttribute("igk:data"));var ce=new igk.winui.textEdit(q,o);};igk.winui.initClassControl("igk-textedit",__itextEdit);})();(function(){var m_items=[];function __loadSymbols(data,symLoader){var gkds=new igk.wo.gkds();gkds.canva=igk.createNode("canvas");var xml=$igk(igk.createNode("dummy").setHtml(data).o.getElementsByTagName("gkds")[0]);var m_node=null;if(xml){var s=xml.select("documents").select(">>");s.each(function(){if(this.o.tagName &&(this.o.tagName.toLowerCase()=="layerdocument")){var doc=new igk.wo.documents(gkds);doc.load(this);doc.id=this.getAttribute("id");doc.gkds=gkds;m_items.push(doc);}return true;});m_node=xml;}symLoader.loadItems(m_items);__initglobalsymbol();}function __symbolLoader(uri,p){var ob=igk.createNode("object");var m_init=false;ob.addClass("no-visible bdr-1 dispb posab");ob.setCss({"width":"48px","height":"48px"});var m_data=null;var self=this;var m_items=[];var m_rdata=false;ob.reg_event("error",function(evt){console.error("/!\\ Error : [ igk.gkds.symbolManager] - Loading symbols failed.... "+ uri);});function _r_fc(evt){if(!ob.o.contentDocument||ob.o.contentDocument.readyState !="complete")return;if(!ob.o.contentDocument.childNodes)return;m_rdata=true;var c=ob.o.contentDocument.childNodes.length;var dummy=igk.createNode("dummy");while(c>0){dummy.o.appendChild(ob.o.contentDocument.childNodes[0]);c--;}m_data=dummy.getHtml();if(m_data==null){return;}__loadSymbols(m_data,self);ob.remove();ob=null;};if(typeof(ob.o.onload)!='undefined'){ob.reg_event("load",_r_fc);}else ob.reg_event("readystatechange",_r_fc);if(!m_init||(ob.o.parentNode !=document.body)){ob.o.type="text/xml";ob.o.width=1;ob.o.height=1;igk.ready(function(){if(igk.getSettings().nosymbol){$igk(".igk-symbol").each_all(function(){this.addClass("dispn");this.remove();});return;}if(igk.navigator.isIEEdge()){$igk(document.body).prepend(ob);ob.o.data=uri;}else{ob.o.data=uri;$igk(document.body).prepend(ob);}});m_init=true;}igk.appendProperties(this,{getSymbolBitmapData:function(id,w,h,p){var c=m_items[id];if(!c)return null;if(igk.is_notdef(w)){w=100;}if(igk.is_notdef(h)){h=100;}c.gkds.canva.o.width=w;c.gkds.canva.o.height=h;var ctx=c.gkds.canva.o.getContext('2d');ctx.clearRect(0,0,100,100);ctx.scale(w / 100.0,h / 100.0);var s={fillStyle:p && p.fillStyle ? p.fillStyle :"#f0f",fillOpacity:p && p.fillOpacity ? p.fillOpacity :1,strokeStyle:p && p.strokeStyle ? p.strokeStyle :"#000",strokeOpacity:p && p.strokeOpacity ? p.strokeOpacity :"0",fillMode:p && p.fillMode ? p.fillMode :"evenodd",base:1};c.render(c.gkds.canva,ctx,s);var h=c.gkds.canva.o.toDataURL();return "url('"+ h+"')";},loadItems:function(tab){for(var i=0;i<tab.length;i++){if(!m_items[tab[i].id])m_items.push(tab[i]);m_items[tab[i].id]=tab[i];}m_isloaded=true;igk.publisher.publish("sys://gkds/itemloaded");if(p && p.complete)p.complete.apply(this);}});}var m_loader=null;var m_isloaded=false;igk.system.createNS("igk.gkds.symbolManager",{load:function(uri,p){var s=new __symbolLoader(uri,p);m_loader=s;return s;},getIsLoaded:function(){return m_isloaded;},getSymbolBitmapData:function(id,w,h,p){if(m_loader){return m_loader.getSymbolBitmapData(id,w,h,p);}return null;}});function __init_symbol(){var d=this.getHtml();var t=d.charCodeAt(0).toString(16)+"";t=igk.system.string.padleft(t,"0",3);var self=this;var cl=self.getComputedStyle("color");var op=self.getComputedStyle("opacity");var s=igk.JSON.parse(self.getAttribute("igk-symbol-data"));this.setHtml(" ");function __view(){m_re=true;__store();__render();m_re=false;};function __render(){var w=s ? s.w :igk.getNumber(self.getComputedStyle('width'));var h=s ? s.h :igk.getNumber(self.getComputedStyle('height'));var cl=self.getComputedStyle('color');self.setCss({backgroundImage:igk.gkds.symbolManager.getSymbolBitmapData('_'+ t,w,h,{fillStyle:cl,fillOpacity:1.0,fillMode:'nonzero',strokeStyle:s && s.strokeStyle ? s.strokeStyle :"#000",strokeOpacity:s && s.strokeOpaticy ? s.strokeOpacity :0.0 })});}var data={color:0,content:''};function __store(){for(var i in data){data[i]=self.getComputedStyle(i);}}__store();var m_re=false;if(igk.navigator.isSafari()){}else if(this.o.addEventListener){if(MutationObserver){var mut=new MutationObserver(function(mutation){});mut.observe(this.o,{attributes:1});}else{this.o.addEventListener("DOMAttrModified",function(evt){if(m_re){return;}var n=evt.attrName;if((n=="style")||(n=="class")){var r=false;for(var i in data){if(data[i]!=self.getComputedStyle(i)){r=true;break;}}if(r){__view();}}});}}this.data["igk-symbol-init"]=1;if(igk.gkds.symbolManager.getIsLoaded()){__render();}else{var _f=function(){__render();};igk.publisher.register("sys://gkds/itemloaded",_f);}}function __initglobalsymbol(){if(m_items.length<=0)return;var i=0;$igk(".igk-symbol").each(function(){if(!this.data["igk-symbol-init"]){__init_symbol.apply(this);}i++;return true;});};igk.ajx.fn.registerNodeReady(__initglobalsymbol);})();(function(){var CA=igk.system.createNS("igk.ctrl.ca",{});igk.appendProperties(CA,{editChange:function(tq,target,uri){if(target && uri)(function(i){var p=$igk('.cnf-edit-view-result').getItemAt(0);var q=window.igk.getParentById(i,target);var q_xhr=window.igk.ajx.post(uri+i.value,null,function(xhr){if(this.isReady()){if(xhr.getResponseHeader('content-type')=="application/json"){var data=JSON.parse(xhr.responseText);p.setHtml(data["select_result"]);p.init();var n=$igk("#edit_ctrl").first();if(n){var dummy=$igk(document.createElement('dummy'));dummy.setHtml(data["edit_result"]);var qn=dummy.firstChild();n.o.parentNode.insertBefore(qn.o,n.o);qn.init();n.remove();}return;}this.setResponseTo(p.o);var r=$igk($igk(i).o.form).select('.c-opts').getItemAt(0);var tp=p.select('.c-opts').first();if(r && tp){r.setHtml(tp.getHtml()).init();}}});})(tq);return !1;}});})();(function(){var m_devices=[];function is_percent(x){return(typeof(x)=='string')&& /[0-9]+(\.[0-9]+)?%$/.test(x.trim());}function _getLocX(host,x){var h=igk.getNumber(x);if(is_percent(x)){x=host.getX()*h / 100.0;}else x=igk.getNumber(x);return x;};function _getLocY(host,x){var h=igk.getNumber(x);if(is_percent(x)){x=host.getY()*h / 100.0;}else x=igk.getNumber(x);return x;};function _getW(host,x){var h=igk.getNumber(x);if(is_percent(x)){x=host.getWidth()*h / 100.0;}else x=igk.getNumber(x);return x;};function _getH(host,x){var h=igk.getNumber(x);if(is_percent(x)){x=host.getHeight()*h / 100.0;}else x=igk.getNumber(x);return x;};function _init2DObj(canva,context){this._ctx=context;this._canva=canva;m_devices.push(this);var _index=m_devices.length- 1;igk.appendProperties(this,{dispose:function(){},getX:function(){return 0;},getY:function(){return 0;},getWidth:function(){return igk.getNumber($igk(this._canva).getComputedStyle("width"));},getHeight:function(){return igk.getNumber($igk(this._canva).getComputedStyle("height"));},setColor:function(cl){this._ctx.strokeStyle=cl;},setFill:function(cl){this._ctx.fillStyle=cl;},fillRect:function(color,x,y,w,h){x=_getLocX(this,x);y=_getLocY(this,y);w=_getW(this,w);h=_getH(this,h);this._ctx.save();this.setFill(color);this._ctx.shadowColor='black';this._ctx.shadowBlur=10;this._ctx.beginPath();this._ctx.rect(x,y,w,h);this._ctx.closePath();this._ctx.fill();this._ctx.save();}});};igk.system.createNS("igk.html5.Canvas",{create2DDevice:function(n){var ctx=n.getContext("2d");if(!ctx)throw("failed to created canvas device");return new _init2DObj(n,ctx);}});})();"uses stricts";(function(){var _getPadsFunc=(function(){if(navigator.getGamepads)return function(){return navigator.getGamepads();};if(window.webKitNavigator && webKitNavigator.getGamepads)return function(){webKitNavigator.getGamepads();};return null;})();var _sup=igk.system.createNS("igk.html5.engineSupport",{});igk.defineEnum(_sup,{'gamePad':_getPadsFunc !=null});if(!_getPadsFunc){igk.system.createNS("igk.html5.input",{gamePads:function(){return undefined;}});return;}var _gameButtons=["A","B","X","Y","LB","RB","LT","RT","SL","SM","L3","R3","PadT","PadB","PadL","PadR"];var _playerKey=["One","Two","Three","Four"];var _gamePads=[];var gamePadButton={};var j=0;for(var i in _gameButtons){gamePadButton[_gameButtons[i]]=j++;}var m_manager=null;igk.system.createNS("igk.html5.input",{gamePads:function(){if(m_manager)return m_manager;if(this instanceof igk.object){if(m_manager==null)return new igk.html5.input.gamePads();}igk.appendProperties(this,{update:function(){var _pads=_getPadsFunc();var _p=null;var _pi=null;for(var i=0;i<_pads.length;i++){_p=_pads[i];if(_p){if(_p.mapping=="standard"){_pi="player"+ _playerKey[_p.index];if(this[_pi])this[_pi].update(_p);else this[_pi]=new __gameInput(_p);}}}}});m_manager=this;}});igk.defineProperty(igk.html5.input,"gameButtons",{get:function(){return gamePadButton;}});function __gameInput(pad){var m_gamepad=pad;var m_downkeys=[];igk.appendProperties(this,{isKeyPressed:function(a){return m_gamepad.buttons[a].pressed;},isKeyRelease:function(a){if(this.isKeyPressed(a)){m_downkeys[a]=1;return 0;}if(m_downkeys[a]){m_downkeys[a]=0;return 1;}return 0;},keyValue:function(a){return m_gamepad.buttons[a].value;},update:function(pad,release){m_gamepad=pad;}});function __toStringAxe(){return "{x:"+ this.x+"y:"+ this.y+"}";};igk.defineProperty(this,"LAxe",{get:function(){return{x:m_gamepad.axes[0],y:m_gamepad.axes[1],toString:__toStringAxe};}});igk.defineProperty(this,"RAxe",{get:function(){return{x:m_gamepad.axes[2],y:m_gamepad.axes[3],toString:__toStringAxe};}});}})();(function(){var m_support={};function videoSupport(){if(igk.isUndef(m_support.video)){var vid=document.createElement('video');m_support.video=vid instanceof HTMLVideoElement;return m_support.video ;}return m_support.video;};function audioSupport(){if(igk.isUndef(m_support.audio)){var vid=document.createElement('audio');m_support.audio=vid instanceof HTMLVideoElement;}return m_support.audio;};igk.system.createNS("igk.html5",{support:function(k){k=k+"Support";console.log("check support"+k);return(new Function("if (typeof("+k+")) return k(); return !1;")).apply();}});})();(function(){igk.winui.initClassControl("igk-webaudio",function(){var q=this;var _ol=q.getAttribute("igk-webaudio-attr-listener");if(_ol &&(typeof(_ol)=='string')){var ns=igk.system.getNS(_ol);if(typeof(ns)=='function'){_ol=new ns();}}else{console.error("/!\\ igk-webaudio-attr-listener not found or not valid: !"+ _ol);}},{"desc":"init a webaudio control"});})();(function(){var static_canva;function _eval(src,apply,arg){return(new Function(src)).apply(apply,arg);};var _sfigure=0;function __append_bezier(ctx,x1,y1,x2,y2,x3,y3){ctx.bezierCurveTo(x1,y1,x2,y2,x3,y3);}function gdip_near_zero(v){return((v>=-0.0001)&&(v<=0.0001));}function append_ellipse(ctx,x,y,width,height){var rx=width / 2.0;var ry=height / 2.0;var cx=x+ rx;var cy=y+ ry;var C1=0.552285;cx.moveTo(cx+ rx,cy);__append_bezier(ctx,cx+ rx,cy- C1*ry,cx+ C1*rx,cy- ry,cx,cy- ry);__append_bezier(ctx,cx- C1*rx,cy- ry,cx- rx,cy- C1*ry,cx- rx,cy);__append_bezier(ctx,cx- rx,cy+ C1*ry,cx- C1*rx,cy+ ry,cx,cy+ ry);__append_bezier(ctx,cx+ C1*rx,cy+ ry,cx+ rx,cy+ C1*ry,cx+ rx,cy);close_figure();};function __append_arcs(ctx,x,y,width,height,startAngle,sweepAngle){var i;var drawn=0;var increment;var endAngle;var enough=false;if(Math.abs(sweepAngle)>=360){__append_ellipse(ctx,x,y,width,height);return;}endAngle=startAngle+ sweepAngle;increment=(endAngle<startAngle)?-90 :90;for(i=0;i<4;i++){var current=startAngle+ drawn;var additional;if(enough)return;additional=endAngle- current;if(Math.abs(additional)>90){additional=increment;}else{if(gdip_near_zero(additional))return;enough=true;}__append_arc(ctx,_sfigure &&(i==0),x,y,width,height,current,current+ additional);drawn+=additional;}}function __append_arc(ctx,start,x,y,width,height,startAngle,endAngle){var _2PI=(Math.PI*2);var M_PI=3.14159265358979323846;var delta,bcp;var sin_alpha,sin_beta,cos_alpha,cos_beta;var rx=width / 2;var ry=height / 2;var cx=x+ rx;var cy=y+ ry;var alpha=(startAngle*Math.PI / 180.0);var beta=(endAngle*Math.PI / 180.0);alpha=Math.atan2(rx*Math.sin(alpha),ry*Math.cos(alpha));beta=Math.atan2(rx*Math.sin(beta),ry*Math.cos(beta));if(Math.abs(beta- alpha)>M_PI){if(beta>alpha)beta-=_2PI;else alpha-=_2PI;}delta=beta- alpha;bcp=(4.0/ 3*(1- Math.cos(delta / 2))/ Math.sin(delta / 2));sin_alpha=Math.sin(alpha);sin_beta=Math.sin(beta);cos_alpha=Math.cos(alpha);cos_beta=Math.cos(beta);if(start){var sx=(cx+ rx*cos_alpha);var sy=(cy+ ry*sin_alpha);ctx.moveTo(sx,sy);}__append_bezier(ctx,(cx+ rx*(cos_alpha- bcp*sin_alpha)),(cy+ ry*(sin_alpha+ bcp*cos_alpha)),(cx+ rx*(cos_beta+ bcp*sin_beta)),(cy+ ry*(sin_beta- bcp*cos_beta)),(cx+ rx*cos_beta),(cy+ ry*sin_beta));}function __addArc(ctx,rc,starta,sweepa){__append_arcs(ctx,rc.x,rc.y,rc.w,rc.h,starta,sweepa);};function __build_round_rec(ctx,rc,rounddef){var vtl_dx=!rounddef ? 0.1 :Math.max(rounddef.topLeft.x*2,0.1);var vtl_dy=!rounddef ? 0.1 :Math.max(rounddef.topLeft.y*2,0.1);var vtr_dx=!rounddef ? 0.1 :Math.max(rounddef.topRight.x*2,0.1);var vtr_dy=!rounddef ? 0.1 :Math.max(rounddef.topRight.y*2,0.1);var vbr_dx=!rounddef ? 0.1 :Math.max(rounddef.bottomRight.x*2,0.1);var vbr_dy=!rounddef ? 0.1 :Math.max(rounddef.bottomRight.y*2,0.1);var vbl_dx=!rounddef ? 0.1 :Math.max(rounddef.bottomLeft.x*2,0.1);var vbl_dy=!rounddef ? 0.1 :Math.max(rounddef.bottomLeft.y*2,0.1);_sfigure=1;ctx.beginPath();__addArc(ctx,{x:rc.x,y:rc.y,w:vtl_dx,h:vtl_dy},180.0,90.0);_sfigure=0;ctx.lineTo(rc.x+ rc.w- rounddef.topRight.x,rc.y);__addArc(ctx,{x:rc.x+ rc.w- vtr_dx,y:rc.y,w:vtr_dx,h:vtr_dy},-90.0,90.0);ctx.lineTo(rc.x+ rc.w,rc.y+ rc.h- (vbr_dy / 2.0));__addArc(ctx,{x:rc.x+ rc.w- vbr_dx,y:rc.y+ rc.h- vbr_dy,w:vbr_dx,h:vbr_dy},0.0,90.0);ctx.lineTo(rc.x+ (vbl_dx / 2.0),rc.y+ rc.h);__addArc(ctx,{x:rc.x,y:rc.y+ rc.h- vbl_dy,w:vbl_dx,h:vbl_dy},90.0,90.0);ctx.lineTo(rc.x,rc.y+ (vtl_dy / 2.0));ctx.closePath();};function _build_rec(ctx,x,y,w,h){ctx.beginPath();ctx.moveTo(x,y);ctx.lineTo(x+ w,y);ctx.lineTo(x+ w,y+ h);ctx.lineTo(x,y+ h);ctx.closePath();};function _build_circle(ctx,c,r){ctx.beginPath();ctx.arc(c.x,c.y,r,0,Math.PI*2,false);ctx.closePath();};igk.system.createNS("igk.html.canva",{canvaDocument:function(){igk.appendProperties(this,{index:0,toString:function(){return "canvaDocument";}});return this;},canvaObj:function(id,code){this.id=id;this.code=code;this.matrix=new function(){this.m_matrix=new igk.math.matrix3x3();var self=this;this.transform=function(v_context){var e=self.m_matrix.getElements();v_context.setTransform(e[0],e[1],e[3],e[4],e[6],e[7]);};this.reset=function(){self.m_matrix.reset();};this.rotate=function(angle){self.m_matrix.rotate(angle);};this.translate=function(dx,dy){self.m_matrix.translate(dx,dy,0);};this.scale=function(ex,ey){self.m_matrix.scale(ex,ey,1);};this.toString=function(){return "canvaObjInternalMatrix";};};igk.appendProperties(this,{render:function(v_context){if(!v_context){return;}v_context.save();this.matrix.transform(v_context);_eval(this.code);v_context.restore();},translate:function(x,y){this.matrix.translate(x,y);},resetTransform:function(){this.matrix.reset();}});},canvaObjDocument:function(context,width,height){if(context==null)throw Error("canvaObjDocument require a context");var m_count=0;var m_childs=[];var m_names={};var m_context=context;var m_w=width;var m_h=height;var self=this;igk.appendProperties(this,{getCount:function(){return m_childs.length;},getElementById:function(id){var e=null;for(var i=0;i<m_childs.length;i++){e=m_childs[i];if(e.id==id)return e;}return null;},render:function(v_context){for(var i in m_childs){m_childs[i].render(v_context);}},add:function(id,v_code){if(!m_names[id]){var t=new igk.html.canva.canvaObj(id,v_code);m_names[id]=t;m_childs.push(t);}},update:function(){m_context.clearRect(0,0,m_w,m_h);this.render(m_context);},toString:function(){return "canvaObjDocument"}});},drawText:function(cx,t,x,y,ft,st,maxwith){cx.font=ft;cx.fillStyle=st;cx.fillText(t,x,y,maxwith);},buildCircle:_build_circle,buildRect:_build_rec,drawRoundRec:function(cx,rc,rounddef,close){__build_round_rec(cx,rc,rounddef);cx.stroke();},drawRect2p:function(cx,sp,ep){_build_rec(cx,Math.min(sp.x,ep.x),Math.min(sp.y,ep.y),Math.abs(sp.x- ep.x),Math.abs(sp.y- ep.y));cx.stroke();},fillRect2p:function(cx,sp,ep){_build_rec(cx,Math.min(sp.x,ep.x),Math.min(sp.y,ep.y),Math.abs(sp.x- ep.x),Math.abs(sp.y- ep.y));cx.fill();},drawLine:function(cx,st,en){cx.beginPath();cx.moveTo(st.x,st.y);cx.lineTo(en.x,en.y);cx.stroke();},fillRoundRec:function(cx,rc,rounddef,close){cx.beginPath();cx.moveTo(rc.x,rc.y);__addArc(cx,rc,180,270);if(close)cx.closePath();cx.fill('evenodd');},drawArc:function(cx,rc,starta,sweepa){__addArc(cx,rc,starta,sweepa);cx.stroke();},fillArc:function(cx,rc,starta,sweepa){__addArc(cx,rc,starta,sweepa);cx.fill('eventodd');},loadObj:function(uri,callback){igk.ajx.get(uri,null,function(xhr){if(this.isReady()){var obj=_eval(xhr.responseText);if(obj && obj.length==1){callback(obj[0]);}}});}});var coph=null;function __init_gkds_canva_obj(){var self=this;var a=this.getAttribute("igk-canva-gkds-obj-data");var data=igk.JSON.parse(a);if(data){this.setTransition(data.transition||"all 1s ease-in-out");igk.html.canva.loadObj(data.uri,function(o){if(typeof(o.length)=='undefined'){self.setHtml("");var c=self.add("canvas");var p={canva:c,obj:o,getElementById:function(id){var q=this.obj;var l=null;var j=0;var m=0;var i=0;var p=null;while(q){if(q.id &&(q.id==id))return q;if((m==0)&& q.layers){m=1;l=q.layers[j];p=q;j++;i=0;q=l[i];i++;continue;}else{if(m==1){if(i<l.length){q=l[i];i++;continue;}else if(j<p.layers.length){l=p.layers[j];j++;i=0;q=l[i];i++;continue;}}}break;}},render:function(ini){if(this.rendering)return;var ctx=this.canva.o.getContext("2d");var q=this;var w=this.canva.o.width;var h=this.canva.o.height;function __render(){ctx.clearRect(0,0,w,h);if(data.init)data.init.apply(self,[ctx]);igk.html.canva.render_document_obj(ctx,q.obj);};function __transition(evt){complete=true;q.rendering=false;self.unreg_event('transitionend',__transition);};if(ini||(getComputedStyle(self.o)['transitionDuration']=="0s")){__render();}else{var complete=false;self.reg_event('transitionend',__transition);igk.html.canva.animate(function(t){__render();return !complete;});q.rendering=true;}}};igk.appendProperties(self.data,{"igk-canva-gkds-obj":p});p.render(true);self.reg_event("mouseenter",function(){p.render();});self.reg_event("mouseout",function(){if(igk.navigator.isFirefox()){setTimeout(function(){p.render();},20);}else p.render();});}});}}igk.system.createNS("igk.html.canva",{render_document_obj:function(ctx,obj){var v_ctx=ctx;for(var i=0;i<obj.layers.length;i++){var l=obj.layers[i];for(var j=0;j<l.length;j++){_eval(l[j].p,[v_ctx],{j,l});ctx.fill("evenodd");ctx.stroke();}}}});igk.winui.initClassControl("igk-canva-gkds-obj",function(){__init_gkds_canva_obj.apply(this);},{desc:"item to render canva object"});})();window.igk.system.createNS("igk.html",{appendFile :function(target,fileobj){switch(fileobj.type){case "image/jpeg":var img=document.createElement("img");img.src=window.URL.createObjectURL(fileobj);img.alt=fileobj.name;target.appendChild(img);break;}},URL :window.URL? window.URL :window.webkitURL });(function(){igk.system.createNS("igk.gkds.io.icwjs",{read:function(canva,uri){var v_ctx=canva.getContext('2d');igk.ajx.post(uri,null,function(xhr){if(this.isReady()){(new Function("(function(){"+xhr.responseText+"})();")).apply();}});}});})();(function(){let offscreen=null,m_offscreen;function _initOffScreen(){m_offscreen=igk.createNode('canvas');_initOffScreen=!0;}function _eval(src,apply,arg){return(new Function(src)).apply(apply,arg);};function __addPolygon(tab){var d="";d+="ctx.moveTo("+ tab[0].x+", "+ tab[0].y+");";for(var i=1;i<tab.length;i++){d+="ctx.lineTo("+ tab[i].x+", "+ tab[i].y+");";}return d;}function __addClosedCurve(tab,t){var d="";var ctangents=__GetCurveTangents(1,tab,tab.length,t,false);d+=__appendCurve(tab,ctangents,0,tab.length,true);return d;}function __GetCurveTangents(terms,points,count,tension,open){var coefficient=tension / 3.0;var tangents=[];if(count<=2)return tangents;for(var i=0;i<count;i++){var r=i+ 1;var s=i- 1;if(r>=count){if(!open)r=0;else r=count- 1;}if(open){if(s<0)s=0;}else{if(s<0)s+=count;}tangents[i]=new igk.math.vector2d((coefficient*(points[r].x- points[s].x)),(coefficient*(points[r].y- points[s].y)));}return tangents;}function append_bezier(x1,y1,x2,y2,x3,y3){return "ctx.bezierCurveTo("+ x1+", "+ y1+", "+ x2+", "+ y2+", "+ x3+", "+ y3+");";}function close_figure(){return "";}function __appendCurve(points,tangents,startindex,Length,closed){var ptype=((closed)||(points.length==0))? 0 :1 ;var i,x1,x2,x3,y1,y2,y3;var d="";d+="ctx.moveTo("+ points[0].x+", "+ points[0].y+");";for(i=startindex;i<startindex+ Length- 1;i++){var j=i+ 1;x1=points[i].x+ tangents[i].x;y1=points[i].y+ tangents[i].y;x2=points[j].x- tangents[j].x;y2=points[j].y- tangents[j].y;x3=points[j].x;y3=points[j].y;d+=append_bezier(x1,y1,x2,y2,x3,y3);}if(closed){x1=points[i].x+ tangents[i].x;y1=points[i].y+ tangents[i].y;x2=points[0].x- tangents[0].x;y2=points[0].y- tangents[0].y;x3=points[0].x;y3=points[0].y;d+=append_bezier(x1,y1,x2,y2,x3,y3);d+=close_figure();}return d;};igk.system.createNS("igk.wo",{renderitem:function(){var m_childs=[];var m_n=null;var m_p=null;var m_matrix=new igk.wo.gkds.matrix();function __getFillBrush(m){var b=igk.wo.gkds.extractdef(m.trim());var d="";if(b==null)return d;if(b.Type){switch(b.Type.toLowerCase()){case "solid":d+="ctx.fillStyle = '"+ window.igk.system.colorFromString(b.Colors)+"';";var a=ns_igk.system.colorGetA(b.Colors);if(a<1){d+="ctx.globalAlpha = "+ a+";";}return d;case "lineargradient":d+="if (!grd) var grd =null; grd = ctx.createLinearGradient(0, 0, 150, 0);";var tb=b.Colors.split(' ');for(var i=0;i<tb.length;i++){var cl=tb[i];d+="grd.addColorStop("+ i+",  '"+ window.igk.system.colorFromString(cl)+"');";}d+="ctx.fillStyle = grd;";break;}}return d;};igk.appendProperties(this,{$super:this,contains:function(x,y){var ctx=m_offscreen.o.getContext('2d');return false;},toString:function(){if(m_n){return "gkdsitem#"+ m_n.o.tagName+":"+ this.getType();}return "gkdsitem";},getType:function(){return "no-type";},getParent:function(){return m_p;},getGkds:function(){if(m_gkds !=null)return m_gkds;return m_p ? m_p.getGkds():null;},clear:function(){m_childs=[];},loadChilds:function(n){var ln=n.o.childNodes.length;for(var i=0;i<ln;i++){var b=n.o.childNodes[i];if(b.tagName){var k=b.tagName.toLowerCase();var ii=igk.wo.gkds.createItem(k,$igk(b));if(ii !=null){m_childs.push(ii);ii.m_p=this;}}}},load:function(n){if(!n)return;m_n=$igk(n);m_n.gkds=this;if(n.o.childNodes){this.loadChilds(n);}this.initialize();},initialize:function(){},loadMatrix:function(){var m=this.o.getAttribute("Matrix");if(m){this.Matrix.loadMatrixs(m);return this.Matrix.getCode();}return "";},getFillStyle:function(){var m=this.o.getAttribute("FillBrush");if(m){return __getFillBrush(m);}return "ctx.fillStyle = \"white\";";},getStrokeStyle:function(){var m=this.o.getAttribute("StrokeBrush");if(!m){return "ctx.strokeStyle = \"black\"; ctx.globalAlpha=0;";}var b=igk.wo.gkds.extractdef(m.trim());var d="";if(b.Width){d+="ctx.lineWidth= "+ b.Width+";";}if(b.Type){switch(b.Type.toLowerCase()){case "solid":var cl=ns_igk.system.colorFromString(b.Colors);d+="ctx.strokeStyle = \""+ cl+"\";";var a=ns_igk.system.colorGetA(b.Colors);if(a<1){d+=" ctx.globalAlpha = "+ a+"; ";}break;}}return d;},getFillMode:function(){var m=this.o.getAttribute("FillMode");if(m=="Alternate"){}return "evenodd";},getStrokeM:function(){var d="ctx.lineCap = \"butt\";";d+="ctx.lineJoin = \"miter\";";return d;},renderStyle:function(style){if(style==null)return "";var d="";var fg=style.base ? "ctx.fillStyle = '"+ style.fillStyle+"';" :this.getFillStyle();var fs=style.base ? "ctx.strokeStyle = '"+ style.strokeStyle+"';" :this.getStrokeStyle();var sm=style.base ? style.strokeMode :this.getStrokeM();var fm=style.base ? style.fillMode :this.getFillMode();if(style.base){d+="ctx.globalAlpha=1;";d+=fg;if(typeof(style.fillOpacity)!="undefined"){d+="ctx.globalAlpha="+ style.fillOpacity+";";}d+="ctx.fill(\""+ fm+"\");";d+=fs;if(typeof(style.strokeOpacity)!="undefined"){d+="ctx.globalAlpha="+ style.strokeOpacity+";";}d+="ctx.stroke();";}else{if(style.fillStyle !=fg){style.fillStyle=fg;}d+="ctx.globalAlpha=1;";d+=fg;if(style.fillMode !=fm){style.fillMode+=fm;}d+="ctx.fill(\""+ fm+"\");";if(style.strokeStyle !=fs){style.strokeStyle+=fs;}d+=fs;if(style.strokeMode !=sm){style.strokeMode=sm;d+=sm;}d+="ctx.stroke();";}return d;},render:function(c,ctx,style){ctx.save();if(m_childs.length>0){for(var i=0;i<m_childs.length;i++){m_childs[i].render(c,ctx,style);}}ctx.restore();}});igk.defineProperty(this,"o",{get:function(){return m_n;}});igk.defineProperty(this,"Matrix",{get:function(){return m_matrix;}});},document:function(){igk.wo.renderitem.apply(this);},layer:function(){igk.wo.renderitem.apply(this);igk.appendProperties(this,{getType:function(){return "layer";}});},nonvisible:function(){igk.wo.renderitem.apply(this);igk.appendProperties(this,{getType:function(){return "nonvisible";}});},documents:function(gkds){igk.wo.renderitem.apply(this);igk.appendProperties(this,{getGkds:function(){return gkds;}});},circle:function(){igk.wo.renderitem.apply(this);igk.appendProperties(this,{getCode:function(){return "";},loadMatrix:function(){var m=this.o.getAttribute("Matrix");if(m){this.Matrix.loadMatrixs(m);return this.Matrix.getCode();}return "";},render:function(c,ctx,style){var cx=0,cy=0;var t=igk.math.vector2d.parse(this.o.getAttribute("Center"));var r=igk.wo.gkds.radius(this.o.getAttribute("Radius"));var d="";d=this.loadMatrix();cx=t.x;cy=t.y;if(typeof(r)!="object")d+=" ctx.beginPath(); ctx.arc(cx, cy, "+ r+",0, 2*Math.PI, false); ctx.closePath();";else{for(var i=0;i<r.length;i++){d+="ctx.beginPath();";if(i>0){var b=parseFloat(cx)+ parseFloat(r[i]);d+="ctx.moveTo("+ b+", cy);";}if((i>0)&&((i% 2)!=0)){d+="  ctx.arc(cx, cy, "+ r[i]+",0, -2*Math.PI, false);";}else d+="  ctx.arc(cx, cy, "+ r[i]+",0, 2*Math.PI, false);";d+="ctx.closePath();";}d+="ctx.closePath();";}ctx.save();_eval(d+" "+ this.renderStyle(style));ctx.restore();},getType:function(){return "circle";}});},star:function(){igk.wo.renderitem.apply(this);igk.appendProperties(this,{getCode:function(){return "";},render:function(c,ctx,style){var PI_C=Math.PI / 180.0;var t=this.o.getAttribute("Tension");var et=igk.bool_parse(this.o.getAttribute("EnableTension"));var oa=(this.o.getAttribute("OffsetAngle")||0)*PI_C;var fm=this.o.getAttribute("FillMode");var vc=igk.math.vector2d.parse(this.o.getAttribute("Center"));var a=(this.o.getAttribute("Angle")||0)*PI_C;var count=(this.o.getAttribute("Count")||5)*2;var ir=parseFloat(this.o.getAttribute("InnerRadius"));var or=parseFloat(this.o.getAttribute("OuterRadius"));var step=(360/ count)*PI_C;var d="";d=this.loadMatrix();d+="ctx.beginPath();";var vtab=[];for(var i=0;i<count;i++){if((i% 2)==0){vtab.push(new igk.math.vector2d((vc.x+ (ir*Math.cos((i*step)+ (a+ oa)))),(vc.y+ (ir*Math.sin((i*step)+ a+ oa)))));}else{vtab.push(new igk.math.vector2d((vc.x+ (or*Math.cos(i*step+ a))),(vc.y+ (or*Math.sin(i*step+ a)))));}}if(vtab.length>1){if(et)d+=__addClosedCurve(vtab,t);else d+=__addPolygon(vtab);}d+="ctx.closePath();";ctx.save();_eval(d+" "+ this.renderStyle(style));ctx.restore();}});},polygon:function(){igk.wo.renderitem.apply(this);var c_center;var c_radius;var c_count;var c_angle;var c_etension;var c_tension;var c_def="";igk.appendProperties(this,{initialize:function(n){c_count=parseInt($igk(this.o).getAttribute("count"))||5;c_angle=parseFloat($igk(this.o).getAttribute("angle"))||0;c_radius=$igk(this.o).getAttribute("radius").split(';');c_etension=$igk(this.o).getAttribute("enabletension");c_tension=parseFloat($igk(this.o).getAttribute("tension"))||0;c_center=igk.math.vector2d.parse($igk(this.o).getAttribute("center"));c_def="";if(c_count<=2)return;var vtab=new Array(c_count);var step=(360/ c_count)*(Math.PI / 180.0);var v_angle=(c_angle*Math.PI / 180.0);var rd=0;for(var j=0;j<c_radius.length;j++){for(var i=0;i<c_count;i++){rd=igk.math.vector2d.parse(c_radius[j]);vtab[i]=new igk.math.vector2d((c_center.x+ rd.x*Math.cos(i*step+ v_angle)),(c_center.y+ rd.y*Math.sin(i*step+ v_angle)));}if(c_etension){c_def+=__addClosedCurve(vtab,c_tension);}else c_def+=__addPolygon(vtab);}},render:function(c,ctx,style){var d="";d=this.loadMatrix();d+="ctx.beginPath();";d+=c_def;d+="ctx.closePath();";ctx.save();_eval(d+" "+ this.renderStyle(style));ctx.restore();}});},rectangle:function(){igk.wo.renderitem.apply(this);igk.appendProperties(this,{getCode:function(){return "";},render:function(c,ctx,style){var x=0,y=0,w=0,h=0;var t=igk.wo.gkds.rectangle(this.o.getAttribute("Bounds"));var d="";d=this.loadMatrix();var x=t.x;var y=t.y;var w=t.w;var h=t.h;d+="ctx.beginPath();";d+=" ctx.rect(x,y,w,h);";d+="ctx.closePath();";ctx.save();_eval(d+" "+ this.renderStyle(style));ctx.restore();}});},arc:function(){igk.wo.renderitem.apply(this);igk.appendProperties(this,{});},ellipse:function(){igk.wo.renderitem.apply(this);igk.appendProperties(this,{});},path:function(){igk.wo.renderitem.apply(this);var types=[];var points=[];igk.appendProperties(this,{loadChilds:function(n){},initialize:function(n){var p=this.o.getElementsByTagName('PointTypes')[0];var st=p.innerHTML;types=igk.system.string.split(st+"",';');points=$igk(this.o.getElementsByTagName('Points')[0]).getHtml().split(' ');if(types.length !=points.length){console.debug("can't create path. length miss match");return false;}},render:function(c,ctx,style){var d="";d=this.loadMatrix();d+="ctx.beginPath();";var close=0;var v_bezierPoint=[];function _jointBezier(pts){var s="";for(var i=0;i<pts.length;i++){if(i !=0)s+=",";s+=pts[i].x+", "+ pts[i].y;}return s;};function _getPoint(pts){var pt=pts.split(';');pt[0]=parseFloat(pt[0]);pt[1]=parseFloat(pt[1]);return new igk.math.vector2d(pt[0],pt[1]);};function _getBezierCurve(tab){var q0,q1,q2;if(tab.length==4){q0 =tab[1];q1=tab[2];q2=tab[3];}else{q0 =tab[0];q1=tab[1];q2=tab[2];}var d="ctx.bezierCurveTo("+ _jointBezier([q0,q1,q2])+");";return d;};var phc=0;var revert=0;function pushdata(data){d+=data;};function __get_reservesePoint(types,points,dat){var ct=[];var cp=[];var index=dat.i;ct.push(types[index]);cp.push(points[index]);var i=dat.i+ 1;var l=1;while(i<types.length){ct.push(types[i]);cp.push(points[i]);if((types[i]& 0x80)==0x80)break;i++;l++;}ct.reverse();cp.reverse();var loffset=0;for(var j=0;j<ct.length;j++){if(ct[j]==0)types[index+ j]=0x80 + loffset;else if((ct[j]& 0x80)==0x80){loffset=(ct[j]- 0x80);types[index+ j]=0;}else types[index+ j]=ct[j];points[index+ j]=cp[j];}dat.ct=ct;dat.cp=cp;dat.l=l;return "/ *reverse data* /";}var safreverse=false;for(var i=0;i<types.length;i++){close=0;var pt=_getPoint(points[i]);var t=parseInt(types[i]);if(t==0){phc++;if(safreverse &&((phc% 2)==0)){revert=1;var dat={i:i};d+=__get_reservesePoint(types,points,dat);i=dat.i;}}switch(t){case 0:v_bezierPoint=[];pushdata('ctx.moveTo('+ pt.x+', '+ pt.y+');');break;case 1:if(v_bezierPoint.length>0){if(v_bezierPoint==3){v_bezierPoint.push(pt);pushdata(_getBezierCurve(v_bezierPoint));}}pushdata("ctx.lineTo("+ pt.x+", "+ pt.y+");");v_bezierPoint=[];break;case 3:v_bezierPoint.push(pt);switch(v_bezierPoint.length){case 3:pushdata(_getBezierCurve(v_bezierPoint));v_bezierPoint=[];break;}break;default:var end=false;if((t & 32)==32){t-=32;}if((t & 0x80)==0x80){t-=0x80;end=true;}if(end){switch(t){case 1:pushdata("ctx.lineTo("+ pt.x+", "+ pt.y+");");break;case 3:switch(v_bezierPoint.length){case 2:v_bezierPoint.push(pt);pushdata(_getBezierCurve(v_bezierPoint));break;default:console.debug("error ...."+ v_bezierPoint.length);break;}break;}v_bezierPoint=[];d+="ctx.closePath();";}break;}}d+=" ";d+="ctx.closePath();";d+=" "+ this.renderStyle(style);ctx.save();_eval(d);ctx.restore();}});},gkds:function(){var m_items=[];var m_node=null;igk.appendProperties(this,{canva:null,getElementsByTagName:function(tag){return m_node.select(tag);},loadGkds:function(content){var xml=$igk(igk.createNode("dummy").setHtml(content).o.getElementsByTagName("gkds")[0]);var self=this;if(xml){xml.select("documents").each(function(){var doc=new igk.wo.documents(self);doc.load(this);doc.gkds=self;m_items.push(doc);return true;});m_node=xml;}},render:function(canvaobj){var c=canvaobj ? canvaobj.o :this.canva.o;var ctx=c.getContext ? c.getContext("2d"):null;if(ctx==null){return;}var s={fillStyle:"#fff",strokeStyle:"#000",fillMode:"evenodd"};for(var i=0;i<m_items.length;i++){m_items[i].render(c,ctx,s);}},getItemCount:function(){return m_items.length;},getItemAt:function(i){if((i>=0)&&(i<m_items.length))return m_items[i];return null;}});}});igk.system.createNS("igk.wo.gkds",{brush:function(n){return "#000";},extractdef:function(m){var o={};var tr=m.split(";");for(var i=0;i<tr.length;i++){if(tr[i].trim()=="")continue;var b=tr[i].split(':');o[b[0]]=b[1];}return o;},rectangle:function(n){var t={x:0,y:0,w:0,h:0 };var h=n.trim().split(';');t.x=parseFloat(h[0]);t.y=parseFloat(h[1]);t.w=parseFloat(h[2]);t.h=parseFloat(h[3]);return t;},radius:function(n){if(!n)return 0;var t=n.split(' ');var r=null;if((typeof(t)!="string")&&(t.length>1)){r=[];for(var i=0;i<t.length;i++){if(t[i].length>0)r.push(parseFloat(t[i]));}}else r=parseFloat(n);return r;},matrix:function(){var m_isIdentity=true;var m1,m2,m3,m4,m5,m6;m1=m4=1;m2=m3=m5=m6=0;function _reset(){m1=m4=1;m2=m3=m5=m6=0;m_isIdentity=true;}_reset();igk.appendProperties(this,{getCode:function(){return "ctx.transform("+ m1+", "+ m2+","+ m3+", "+ m4+","+ m5+", "+ m6+");";},reset:_reset,loadMatrixs:function(s){var t=s.trim().split(',');switch(t.length){case 6:m_isIdentity=false;m1=parseFloat(t[0]);m2=parseFloat(t[1]);m3=parseFloat(t[2]);m4=parseFloat(t[3]);m5=parseFloat(t[4]);m6=parseFloat(t[5]);break;case 16:m_isIdentity=false;m1=parseFloat(t[0]);m2=parseFloat(t[1]);m3=parseFloat(t[4]);m4=parseFloat(t[5]);m5=parseFloat(t[12]);m6=parseFloat(t[13]);default:break;}}});igk.defineProperty(this,"isIdentity",{get:function(){return m_isIdentity;}});},createItem:function(tagname,n){if(typeof(igk.wo[tagname])!="undefined"){var b=new igk.wo[tagname]();b.load(n);return b;}var b=new igk.wo.nonvisible();b.load(n);return b;},createFrom:function(uri,canva){var t=new igk.wo.gkds();t.canva=canva;function replacing(m){var tag=m.trim().split(' ')[0].substring(1);m=m.replace("/>","></"+ tag+">");return m;}function closeemptytag(s){var rg=new RegExp("((<)([^\/>])+(\/>))","ig");var b=s.replace(rg,replacing);return s;}var xhr=new XMLHttpRequest();var p=$igk("#progress");igk.ajx.get(uri,null,function(xhr){if(this.isReady()){var s=xhr.responseText;s=igk.html.closeEmptyTag(s);t.loadGkds(s);}else{if((xhr.readyState==1)&& p){xhr.onprogress=function(evt){p.setHtml(Math.round(((evt.loaded / evt.total)*100))+"");};}}});}});igk.ready(function(){var e=$igk("igk:gkds");e.each(function(){if(offscreen==null){_initOffScreen();}var src=this.getAttribute("src");if(src){var div=igk.createNode("canvas");div.setAttribute("width","400px");div.setAttribute("height","300px");div.setCss({width:"400px",height:"300px",border:"none"});igk.wo.gkds.createFrom(this.getAttribute("src"),div);this.o.parentNode.replaceChild(div.o,this.o);}return true;});});})();(function(){var _assets={"bold":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMjRweCIgZmlsbD0iIzAwMDAwMCI+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTE1LjYgMTAuNzljLjk3LS42NyAxLjY1LTEuNzcgMS42NS0yLjc5IDAtMi4yNi0xLjc1LTQtNC00SDd2MTRoNy4wNGMyLjA5IDAgMy43MS0xLjcgMy43MS0zLjc5IDAtMS41Mi0uODYtMi44Mi0yLjE1LTMuNDJ6TTEwIDYuNWgzYy44MyAwIDEuNS42NyAxLjUgMS41cy0uNjcgMS41LTEuNSAxLjVoLTN2LTN6bTMuNSA5SDEwdi0zaDMuNWMuODMgMCAxLjUuNjcgMS41IDEuNXMtLjY3IDEuNS0xLjUgMS41eiIvPjwvc3ZnPg==","italic":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMjRweCIgZmlsbD0iIzAwMDAwMCI+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTEwIDR2M2gyLjIxbC0zLjQyIDhINnYzaDh2LTNoLTIuMjFsMy40Mi04SDE4VjRoLTh6Ii8+PC9zdmc+","underline":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMjRweCIgZmlsbD0iIzAwMDAwMCI+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTEyIDE3YzMuMzEgMCA2LTIuNjkgNi02VjNoLTIuNXY4YzAgMS45My0xLjU3IDMuNS0zLjUgMy41UzguNSAxMi45MyA4LjUgMTFWM0g2djhjMCAzLjMxIDIuNjkgNiA2IDZ6bS03IDJ2MmgxNHYtMkg1eiIvPjwvc3ZnPg==","undo":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMjRweCIgZmlsbD0iIzAwMDAwMCI+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTEyLjUgOGMtMi42NSAwLTUuMDUuOTktNi45IDIuNkwyIDd2OWg5bC0zLjYyLTMuNjJjMS4zOS0xLjE2IDMuMTYtMS44OCA1LjEyLTEuODggMy41NCAwIDYuNTUgMi4zMSA3LjYgNS41bDIuMzctLjc4QzIxLjA4IDExLjAzIDE3LjE1IDggMTIuNSA4eiIvPjwvc3ZnPg==","redo":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMjRweCIgZmlsbD0iIzAwMDAwMCI+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTE4LjQgMTAuNkMxNi41NSA4Ljk5IDE0LjE1IDggMTEuNSA4Yy00LjY1IDAtOC41OCAzLjAzLTkuOTYgNy4yMkwzLjkgMTZjMS4wNS0zLjE5IDQuMDUtNS41IDcuNi01LjUgMS45NSAwIDMuNzMuNzIgNS4xMiAxLjg4TDEzIDE2aDlWN2wtMy42IDMuNnoiLz48L3N2Zz4=","alignLeft":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMjRweCIgZmlsbD0iIzAwMDAwMCI+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTE1IDE1SDN2MmgxMnYtMnptMC04SDN2MmgxMlY3ek0zIDEzaDE4di0ySDN2MnptMCA4aDE4di0ySDN2MnpNMyAzdjJoMThWM0gzeiIvPjwvc3ZnPg==","alignCenter":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMjRweCIgZmlsbD0iIzAwMDAwMCI+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTcgMTV2MmgxMHYtMkg3em0tNCA2aDE4di0ySDN2MnptMC04aDE4di0ySDN2MnptNC02djJoMTBWN0g3ek0zIDN2MmgxOFYzSDN6Ii8+PC9zdmc+","alignRight":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMjRweCIgZmlsbD0iIzAwMDAwMCI+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTMgMjFoMTh2LTJIM3Yyem02LTRoMTJ2LTJIOXYyem0tNi00aDE4di0ySDN2MnptNi00aDEyVjdIOXYyek0zIDN2MmgxOFYzSDN6Ii8+PC9zdmc+","justify":"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGhlaWdodD0iMjRweCIgdmlld0JveD0iMCAwIDI0IDI0IiB3aWR0aD0iMjRweCIgZmlsbD0iIzAwMDAwMCI+PHBhdGggZD0iTTAgMGgyNHYyNEgwVjB6IiBmaWxsPSJub25lIi8+PHBhdGggZD0iTTMgMjFoMTh2LTJIM3Yyem0wLTRoMTh2LTJIM3Yyem0wLTRoMTh2LTJIM3Yyem0wLTRoMThWN0gzdjJ6bTAtNnYyaDE4VjNIM3oiLz48L3N2Zz4=",};var _EDITOR=igk.system.createNS("igk.editor",{});function _textEditorClass(name){var _input;var _content;var _editor;var _selectionRange;var _settings={"readonly":false};var q=this;_editor=igk.createNode("div").addClass("igk-winui-text-editor editor");_content=_editor.add('div').addClass("content").setAttribute("contenteditable","true").setAttribute("autofocus","true").setCss({"backgroundColor":"white","position":"absolute","left":0,"top":"32px","right":0,"bottom":0,"padding":"10px","overflowY":"auto"}).on("input",function(e){q.update_value(e.target.innerHTML);}).on("click",function(){}).on("keyup",function(){q.updateSelection();}).on("selectstart",function(e){_selectionRange=null;if(_settings.readonly){e.preventDefault();e.stopPropagation();}});_input=igk.createNode("input").setAttribute("type","hidden").setAttribute("name",name).setAttribute("id",name).setAttribute("value","");_content.o.focus();igk.appendProperties(this,{update_value :function(t){this.node.o.value=t;this.node.setHtml(t);_input.setAttribute("value",t);},selectionChanged:function(e){var range=document.getSelection();var n=range.anchorNode.parentNode;while(n &&(n !=_content.o)){n=n.parentNode;}if(n){q.updateSelection();}},getSelection:function(){return _selectionRange;},updateSelection:function(){var range=document.getSelection();_selectionRange={range_count:range.rangeCount,content:range.getRangeAt(0).cloneContents(),anchorNode:range.anchorNode,anchorOffset:range.anchorOffset,focusNode :range.focusNode,focusOffset :range.focusOffset,isCollapsed :range.isCollapsed};},execCommand:function(cmdName){var p=_EDITOR.fullname+".commands."+cmdName;var v=igk.system.getNS(p);if(typeof(v)=='function'){v.apply(this,[]);}else{console.debug("command not found:"+p);}return !1;},init:function($options){}});igk.defineProperty(this,"input",{get:function(){return _input;}});igk.defineProperty(this,"isOnDocument",{get:function(){return q.editor.o.parentNode !=null;}});igk.defineProperty(this,"settings",{get:function(){return _settings;}});igk.defineProperty(this,"editor",{get:function(){return _editor;}});igk.defineProperty(this,"content",{get:function(){return _content;}});};function _textEditorPlugin(){};igk.appendProperties(_EDITOR,{text:_textEditorClass,plugin:_textEditorPlugin});function __init_text_editor(){var _e=new _EDITOR.text(this.getAttribute("name"));var _data=JSON.parse(this.getAttribute("igk:editor-data"));if(_data){_e.init(_data);}_e.node=this;_e.parent=this.o.parentNode;_e.form=this.select("^form").first();_e.editor.addClass(this.o.getAttribute("class"));if(_e.form){_e.form.on("submit",function(e){_e.update_value(_e.content.o.innerHTML);if(_e.node.getAttribute("required")){var v=_e.node.o.value+"";if((v.length==0)||(v=="<br>")){_e.content.addClass("igk-danger");e.preventDefault();}else{_e.content.rmClass("igk-danger");}}});}var _header=_e.editor.add('div').addClass("header").setCss({"height":"32px",});var _ul=_header.add("ul");["bold","italic","underline"].forEach((i)=>{_ul.add("li").addClass("editor_btn").setCss({"background":"url('"+_assets[i]+"')","backgroundSize":"24px 24px","backgroundPosition":"50%","backgroundRepeat":"no-repeat","display":"inline-block","width":"32px","height":"32px"}).on("click",function(e){_e.execCommand("style."+i);e.preventDefault();e.stopPropagation();});});["alignLeft","alignCenter","alignRight","justify"].forEach((i)=>{_ul.add("li").addClass("editor_btn").setCss({"background":"url('"+_assets[i]+"')","backgroundSize":"24px 24px","backgroundPosition":"50%","backgroundRepeat":"no-repeat","display":"inline-block","width":"32px","height":"32px"}).on("click",function(e){_e.execCommand("style."+i);e.preventDefault();e.stopPropagation();});});["undo","redo"].forEach((i)=>{_ul.add("li").addClass("editor_btn").setCss({"background":"url('"+_assets[i]+"')","backgroundSize":"24px 24px","backgroundPosition":"50%","backgroundRepeat":"no-repeat","display":"inline-block","width":"32px","height":"32px"}).on("click",function(e){_e.execCommand("action."+i);e.preventDefault();e.stopPropagation();});});var _content=_e.content;_content.setHtml(_e.node.o.value);_e.input.o.value=_e.node.o.value;_e.editor.add('div').addClass("footer");_e.editor.addClass("igk-form-control editor");function select_changed(p){this.p=p;var q=this;igk.appendProperties(this,{selectionChanged:function(e){if(!p.isOnDocument){igk.winui.unreg_event(document,"selectionchange",q.select_changed);}if(e.target.activeElement==_content.o){p.selectionChanged.apply(p,[e]);}}});};igk.winui.reg_event(document,"selectionchange",(new select_changed(_e)).selectionChanged);_e.parent.replaceChild(_e.editor.o,_e.node.o);_e.editor.insertAfter(_e.input.o);}igk.winui.initClassControl("igk-winui-text-editor",__init_text_editor);})();(function(){function _command(cmd){return function(){var s=this.getSelection();if(s && !s.isCollapsed){document.getSelection().setBaseAndExtent(s.anchorNode,s.anchorOffset,s.focusNode,s.focusOffset);document.execCommand(cmd);this.updateSelection();}else{console.debug("failed : "+cmd,s);}};};igk.system.createNS("igk.editor.commands.style",{bold:_command("bold"),italic:_command("italic"),underline:_command("underline"),alignCenter:_command("justifyCenter"),alignLeft:_command("justifyLeft"),alignRight:_command("justifyRight"),justify:_command("justifyFull"),});igk.system.createNS("igk.editor.commands.action",{undo:function(){this.content.o.focus();document.execCommand("undo");},redo:function(){this.content.o.focus();document.execCommand("redo");},});})();(function(){igk.system.createNS("igk.editor.phpcodearea",{init:function(tn,props){var s=$igk(igk.getParentScript()).select('#'+tn);var t=null;if(s.getCount()>0){t=s.o.getNodeAt(0);}if(t==null)return;}});})();(function(){var _NS=igk.system.getNS("igk.dom.extension.FORM")||igk.system.createExtensionProperty("FORM","igk.dom.extension");_NS.submit=function(func){if(this.getAttribute("enctype")=="application/json"){data=this.serializeData();igk.ajx.send({uri:this.o.action,method:'POST',contentType:'application/json',func:function(xhr){if(this.isReady()){if(typeof(func)=="function"){func.apply(this,[xhr]);}}},param:data});}else{this.o.submit();}};igk.appendProperties(_NS,{reset:function(){this.o.reset();},serializeData(){obj={};frmData=new FormData(this.o);frmData.forEach(function(v,k){if(k in obj){if(!Array.isArray(obj[k])){obj[k]=[obj[k]];}obj[k].push(v);return;}obj[k]=v;});return JSON.stringify(obj);}});})();(function(){const is_debug=igk.ENVIRONMENT.DEV;let p={};for(let i of['log','warn','debug','info']){p[i]=function(){;if(is_debug){console[i].apply(null,[...arguments]);}};}igk.system.createNS("igk.debug",p);})();(function(){const BEFORESUBMIT_EVENT='igkFormBeforeSubmit';const _eval=function(src,apply,args){return(new Function(src)).apply(apply,args);};(function(){if(document.head){var e=$igk(document.head).select("link");e.each(function(){if(this.getAttribute("rel")=="igkcss"){igk.ajx.get(this.getAttribute("href"),null,function(xhr){if(this.isReady()){var s=igk.createNode("style");s.setAttribute('igk-id','igkcss');s.innerHTML=xhr.responseText;document.head.appendChild(s);}},false);}return !0;});}})();(function(){var context_options={};var m_items={};function __reg_key(n,t){if(m_items[n]){var b=m_items[n];if(b.length){b.push(t);}else{b=[];b.push(m_items[n]);b.push(t);m_items[n]=b;}}else{m_items[n]=t;}}function __add_prop(){var q=this;var k=this.getHtml();__reg_key(k,q);q.reg_event("contextmenu",function(evt){evt.preventDefault();var langctrl=igk.ctrl.getRegCtrl("c_l");if(langctrl){var p=q.getParentCtrl();var k=q.getHtml();var pid=p ? p.o.id :'';igk.ajx.post(langctrl.getUri("mod_key&ajx=1"),"key="+ k+"&ctrl="+ pid,igk.ajx.fn.replace_or_append_to_body,true);}else{if(!igk.winui.notify.visible()){var h=q.select(".error").first();if(h){h=h.getHtml();igk.winui.notify.showError(h);}}}});}function __register_lang_key(s){if(s==null)return;s.setAttribute("igk-new-lang-key",1).appendProperties({"igk-new-lang-key-setup":1,reg_context_options:function(k,uri){context_options[k]=uri;},show_context_options:function(){var ul=igk.winui.contextMenu();ul.setHtml(null);var loc=this.getScreenLocation();var size={w:this.getWidth(),h:this.getHeight()+ this.o.scrollHeight};ul.addClass("posab").setCss({zIndex:10,border:"1px solid black",padding:"8px",position:"absolute",left:loc.x+"px",minWidth:"200px",top:(loc.y+ size.h)+"px"});for(var i in context_options){ul.add("li").add("a").setHtml(i).setAttribute("href","?mod=1&k="+ context_options[i]);}igk.dom.body().appendChild(ul);}},true);if(s.isSr()){s.each_all(__add_prop);}else{__add_prop.apply(s);}}function __initglobalkey(){var s=igk.qselect(".igk-new-lang-key").each_all(function(){console.debug("register lang key");__register_lang_key(this);});igk.unready(__initglobalkey);}igk.ready(__initglobalkey);igk.ctrl.registerAttribManager("igk-new-lang-key",{desc:"register new keys language editor"});igk.ctrl.bindAttribManager("igk-new-lang-key",function(m,n){var t=this["igk-new-lang-key-setup"];this.setCss({color:"red",cursor:"help"});if(t==null){__register_lang_key($igk(this));}});igk.system.createNS("igk.winui.langkey.fn",{update:function(n,v,d){if(n !=v){$igk('.igk-new-lang-key').each_all(function(){if(this.getHtml()==n){var idx=this.getAttribute("igk:data")||0;d &&(v=d[idx]);var t=igk.createText(v);this.o.parentNode.replaceChild(t.o,this.o);}});}var s=igk.getCurrentScript();if(s){$igk(s).remove();}}});})();igk.system.createNS("igk.winui.navlink",{init:function(target,link){if(typeof(this.classinit)==igk.constants.undef){this.navitems=[];this.classinit=!0;}var navitems=this.navitems;target.reg_event("click",function(evt){evt.preventDefault();var b=$igk("#"+ link).first();if(b && !b.isSr()){var q=$igk(b).getscrollParent();if(q){q.scrollTo(b.o,{duration:500,interval:20,effect:"linear",effectmode:"easeinout"},null);}}else{console.debug('[IGK] - Element not found '+ link);}});navitems.push(target);}});igk.ctrl.registerAttribManager("igk-nav-link",{desc:"navigation link"});igk.ctrl.bindAttribManager("igk-nav-link",function(n,m){if(!m)return;this.setAttribute("href","!#"+ m);var link=null;igk.winui.navlink.init(this,m);});function animationProperty(q,s){if(s==null)throw "source is null";if(q==null)throw "item is null";var duration='0.2s';var effect="ease-in-out";var rmduration='0.2s';var rmeffect='ease-in-out';var tq=igk.JSON.parse(s);var store={};for(var m in tq.css){store[m]=q.getComputedStyle(m);if(typeof(store[m])==igk.constants.undef)store[m]=null;}if(tq.duration)duration=tq.duration;if(tq.effect)duration=tq.effect;igk.appendProperties(this,{bind:function(){if(q.isCssSupportAnimation()){if(tq.select){q.select(tq.select).setCss({transition:'all '+ duration+' '+ effect}).setCss(tq.css);}else{q.setCss({transition:'all '+ duration+' '+ effect}).setCss(tq.css);}}else{q.animate(tq.css,{duration:igk.datetime.timeToMs(duration)});}},unbind:function(){if(q.isCssSupportAnimation()){if(tq.select){q.select(tq.select).setCss({transition:'all '+ rmduration+' '+ effect}).setCss(store);}else{q.setCss({transition:'all '+ rmduration+' '+ effect}).setCss(store).timeOut(0,()=>{});}}else{q.animate(store,{duration:igk.datetime.timeToMs(rmduration)});}}});}igk.ctrl.registerAttribManager("igk-js-anim-msover",{desc:"globa animation style on mouse over"});igk.ctrl.bindAttribManager("igk-js-anim-msover",function(){var q=this;var source=this.getAttribute("igk-js-anim-msover");var store={};var duration='0.2s';var effect="ease-in-out";var rmduration='0.2s';var rmeffect='ease-in-out';var tq=null;if(!source){return;}tq=igk.JSON.parse(source);for(var m in tq.css){store[m]=q.getComputedStyle(m);if(typeof(store[m])==igk.constants.undef)store[m]=null;}if(tq.duration)duration=tq.duration;if(tq.effect)duration=tq.effect;this.reg_event("mouseover",function(evt){if(q.isCssSupportAnimation()){if(tq.select){q.select(tq.select).setCss({transition:'all '+ duration+' '+ effect}).setCss(tq.css);}else{q.setCss({transition:'all '+ duration+' '+ effect}).setCss(tq.css);}}else{q.animate(tq.css,{duration:igk.datetime.timeToMs(duration)});}});this.reg_event("mouseout",function(){if(q.isCssSupportAnimation()){if(tq.select){q.select(tq.select).setCss({transition:'all '+ rmduration+' '+ effect}).setCss(store);}else{q.setCss({transition:'all '+ rmduration+' '+ effect}).setCss(store).timeOut(0,()=>{});}}else{q.animate(store,{duration:igk.datetime.timeToMs(rmduration)});}});});igk.ctrl.bindAttribManager("igk-js-anim-focus",function(){var q=this;var source=this.getAttribute("igk-js-anim-focus");var store={};if(!source){return;}if(q.isCssSupportAnimation()){var anim=new animationProperty(q,source);q.reg_event("focus",function(){anim.bind();});q.reg_event("blur",function(){anim.unbind();});}else{var t=_eval("new Array("+ source+")");for(var m in t[0]){store[m]=q.getComputedStyle(m);}this.reg_event("focus",function(){_eval("q.animate("+ source+");");});this.reg_event("blur",function(){q.animate(store,t[1]);});}});igk.ctrl.bindAttribManager("igk-js-bind-select-to",function(n,v){var s=null;var q=this;var qv=q.getAttribute('value');if(igk.system.string.startWith(v,"#")){s=$igk(v);if(s){s.select("option").each(function(){q.appendChild(this.clone());return !0;});}}else{var s=igk.JSON.parse(v);if(s && s.id){if(s.allowempty){var opt=igk.createNode("option");opt.setAttribute("value",typeof(s.emptyvalue)!=igk.constants.undef ? s.emptyvalue :null);q.appendChild(opt);}var select=s.selected;var tag=s.tag ? s.tag :'option';var present=false;var v_sl=$igk(s.id).select(tag).each(function(){var r=null;if(tag !='option'){r=igk.createNode("option");r.copyAttributes(this);r.setHtml(this.o.innerHTML);}else r=this.clone();var vv=r.getAttribute('value');if(vv==select){r.setAttribute('selected','true');present=true;}q.appendChild(r);return !0;});if(!present && s.usecustom){if((select+"").length>0){var r=igk.createNode("option");r.setAttribute('value',select);r.setAttribute('selected','selected');r.setHtml(select);q.appendChild(r);}}}}});(function(){igk.ctrl.registerAttribManager("igk-js-autofix-item",{'ns':'js','desc':'start auto fix item to host. item must be added before being initialized'});igk.ctrl.bindAttribManager("igk-js-autofix-item",function(m,n){var o=igk.JSON.parse(n);var c=null;if(!o.target)c=this.select("^.igk-parentscroll").first();else c=this.select(o.target).first();c=c||$igk(document);c.reg_event("scroll",__autofix_check_scroll(this,c,o));});function __autofix_check_scroll(q,p,o){var man=new _autofix_manager();man.q=q;man.p=p;man.o=o;function _hostbind(e){man.check(e);};return _hostbind;};function _autofix_manager(){};_autofix_manager.prototype.check=function(){var c=this.p;var offset=this.o.offset||0;if(c.o.scrollTop>offset){c.addClass("igk-js-autofix-host");this.q.addClass("fix");}else{c.rmClass("igk-js-autofix-host");this.q.rmClass("fix");}};})();(function(){igk.system.createNS("igk.ctrl.togglebutton",{init:function(target){if(!target)return;var q=$igk(target);var s=q.getAttribute("igk-toggle-target");if(!s)return null;if(this.namespace){return new this.init(target);}var e=$igk(s).first();var t=q.getAttribute("igk-toggle-class");var toggle="visibiliy";toggle="class";this.updateState=function(){var v_state=q.getAttribute("igk-toggle-state");switch(v_state){case "expand":{if(e)e.setCss({width:200/ 3.0 +"%"});q.setAttribute("igk-toggle-state","collapse");}break;case "collapse":if(e)e.setCss({width:0 +"%"});q.setAttribute("igk-toggle-state","expand");break;}};var self=this;q.reg_event("click",function(evt){self.updateState();});this.updateState();}});if(!igk.ctrl.isAttribManagerRegistrated("igk-toggle-button")){var k=igk.ctrl.registerAttribManager("igk-toggle-button",{n:"js",desc:"register toggle button"});}igk.ctrl.bindAttribManager("igk-toggle-button",function(){var v=this.getAttribute("igk-toggle-button");var q=this;var source=igk.system.convert.parseToBool(this.getAttribute("igk-toggle-button"));if(source){igk.ctrl.togglebutton.init(q);}});})();(function(){igk.system.createNS("igk.html",{addInput:function(t,p,n,v){i=igk.createNode("input");i.o["type"]=n;i.o["class"]="cl"+ n;i.o["value"]=v;t.o.appendChild(i.o);return i;}});})();igk.ready(function(){var q=igk.qselect(".igk-parentscroll").first();if(q){q.o.focus();}});(function(){var contain_slider=false;var m_s_btn=[];var ct_sliderbtn="winui/sliderbutton";var m_datas={};function _slide_to(){var p=igk.JSON.parse($igk(this).getAttribute("igk-slider-data"));if(p){p.scrollparent=$igk($igk(p.target).first().getscrollParent());p.cibling=$igk(this);ns_igk.winui.fn.navigateTo(p.target,p.property).apply(this,null);m_datas[p.scrollparent.getCssSelector()]=p;igk.web.storage.set("igk/slider",p.scrollparent.getCssSelector());}}function _slider_click(evt){evt.preventDefault();_slide_to.apply(this);}function _view_size(){for(var i in m_datas){var p=m_datas[i];ns_igk.winui.fn.navigateTo(p.target,p.property).apply(p.cibling,null);}}function _init_slider_button(q){if(q.data.contains(ct_sliderbtn))return;if(q.istouchable()){q.reg_event("touchend",_slider_click);}else q.reg_event("click",_slider_click);m_s_btn.push(q);q.data.add(ct_sliderbtn,1);if(!contain_slider){igk.winui.reg_event(window,"resize",_view_size);var sl=igk.web.storage.get("igk/slider");contain_slider=!0;}}igk.ctrl.registerReady(function(){if(igk.system.regex.item_match_class("igk-slider-btn",this)){_init_slider_button($igk(this));}});igk.ready(function(){igk.qselect(".igk-slider-btn").each_all(function(){_init_slider_button(this);});});igk.system.createNS("igk.winui.sliderbtn",{fn:{ajxslideToReady:function(q,p){return function(xhr){if(this.isReady()){$igk(q).setAttribute("igk-slider-data",p);_init_slider_button($igk(q));_slide_to.apply($igk(q));}}}}});})();(function(){igk.ctrl.bindAttribManager("igk-form-validate",function(n,v){if(!v){return;}var q=this;this.reg_event("submit",function(evt){if((typeof(q.o.checkValidity)!=igk.constants.undef)&& !q.o.checkValidity()){console.debug("data not valid");evt.preventDefault();return;}var _o=false;$igk(this).select("input").each(function(){if(typeof(this.igkCheckIsInvalid)!=igk.constants.undef){_o|=this.igkCheckIsInvalid();}return !0;});if(_o)evt.preventDefault();});});})();(function(){igk.system.createNS("igk.android",{});function __initAndroid(){if(!igk.navigator.isAndroid()&& !igk.dom.body().supportClass("igk-android"))return;var m_actx=igk.createNode("android-ctx");var m_ectx=igk.winui.RegEventContext(m_actx,m_actx);if(m_ectx){m_ectx.reg_window("resize",function(){__setup_screen();});if(typeof(window.onorientationchange)!="undefined"){m_ectx.reg_window("orientationchange",function(evt){if(window.orientation==90){$igk('.igk-android').addClass("lnd-scape");}else $igk('.igk-android').rmClass("lnd-scape");});}}var mt=igk.css.getMediaType();__setup_screen();igk.dom.body().addClass(mt);var mt=igk.css.getMediaType();igk.publisher.register(igk.publisher.events.mediachanged,function(e){igk.dom.body().rmClass(mt).addClass(e.mediaType);mt=e.mediaType;});return m_actx;}function __setup_screen(){if(typeof(window.onorientationchange)=="undefined"){if(window.innerWidth>window.innerHeight){$igk('.igk-android').addClass("lnd-scape");}else{$igk('.igk-android').rmClass("lnd-scape");}}}igk.ready(function(){__initAndroid();});})();(function(){const _R=igk.resources.lang;var m_types=['css','php','csharp','html','xml'];var m_codes=[];var m_reg=(function(t){var r='';for(var i=0;i<t.length;i++){if(i>0)r+='|';r+=t[i];}return new RegExp('(('+ r+')code)','i');})(m_types);const treatHtmlSource={php(src,RegexContainer){let o='',g=null,loffset=0,closed_tag=0,regex=new RegexContainer();src=src.replaceAll('&amp;','&').replaceAll('&gt;','>').replaceAll('&lt;','<');regex.begin('<!--\\?(php|=)','(:\/){0,1}--(:\\?){0,1}>');const options={offset:0 };while(g=regex.detect(src,options)){let e=regex.end(g);if(e){if(e.isContinue)continue;if(closed_tag){o+='?>';}o+=src.substring(loffset,e.from);let te=e.value;o+=te.replace(/^<!--\?php/,'<?php').replace(/^<!--\?=/,'<?=').replace(/(?:\/){0,1}-->$/,'').replace(/\/--\?>$/,'');loffset=e.to;closed_tag=true;if(e.missingEnd){loffset=e.from+ te.length;}}}if(loffset<src.length){if(closed_tag){o+='?>';}o+=src.substring(loffset);}return o;}};function __init_code_area(){var q=this;if(!q){return;}if(q.hightlight)return;q.hightlight=1;m_codes.push(q);var c='';var b=null;if((b=m_reg.exec(q.o.className))){c=b[2];}else{c=q.getAttribute("lang");if(!(c in m_types)){c='php';}}let ts=q.o.innerHTML;let{RegexContainer}=igk.system.text;if(RegexContainer){if(c in treatHtmlSource){ts=treatHtmlSource[c].apply(null,[ts,RegexContainer]);}}var s=ts||q.o.textContent.trim();var t=s.split('\n');s=s.replaceAll('<','&lt;').replaceAll('>','&gt;');q.setHtml("");q.getSource=function(){return s;};let copyable=q.getAttribute("igk-copyable");if(copyable){let block=q.add("div");let minHeight=igk.getNumber(q.getComputedStyle("height"));block.addClass("igk-copyable posab igk-svg-host svg-fill").setCss({zIndex:100,position:'absolute',display:'block',width:'32px',maxWidth:'32px',maxHeight:'32px',overflow:'hidden',top:'0px',right:'0px',backgroundColor:'rgb(255 255 255 / 0.1)',padding:'4px',borderBottomLeftRadius:'5px',cursor:'pointer',}).on("click",function(){igk.ClipBoard.writeText(s);igk.winui.controls.toast.show(_R("item copied to clipboard"),"igk-success");}).add(igk.svg.useSvg('copy-outline'));q.on('scroll',function(e){let r='-'+ (q.o.scrollLeft)+'px';block.o.style.right=r;});q.init();}var m=null;if(c){m="igk.highlightjs."+ c;m=_eval("return new "+ m+"();");}else{m=new igk_e();}if(!m){console.log("missing m ",c);return;}var l="";for(var i=0;i<t.length;i++){l=t[i];var d=q.add("div");d.setHtml(m.evals(l));}var o=q.add('span').addClass("dispib").setHtml('_');var w=igk.getNumber(o.getComputedStyle('width'));o.remove();w=(((m.getLines()+'').length*w)+ 10)& 0xFFFA;igk.css.appendRule(q.getCssSelector()+" > div > span.ln {text-align:right; width:"+ w+"px;}");};function igk_e(){var l=0;igk.appendProperties(this,{evals:function(m){l++;return m;},getLines:function(){return l;}});};const inf={ln:0,mode:0,pos:0 };function _readWord(s){var w="";var c=0;var ch="";while(inf.pos<inf.ln){ch=inf.s[inf.pos];c=ch.toLowerCase().charCodeAt(0);if(((c>=48)&&(c<=57))||((c>=97)&&(c<=122))||(ch=='_')){w+=ch;}else{break;}inf.pos++;}return w;}function _readStringLitteral(ch){var w=ch;var p=ch;while(inf.pos<inf.ln){ch=inf.s[inf.pos];if(ch !=p){w+=ch;}else{if(inf.s[inf.pos- 1]=="\\"){w+=ch;}else break;}inf.pos++;}return w+ p;};function _readPhpOperator(ch){const op=["||","|","&&","&",".","->","=>","==","===","-","/","+","*","^","~","%","()","[]","(",")","[","]","{","}"];let c=ch;inf.pos++;while(inf.pos<inf.ln){c=inf.s[inf.pos];if(op.indexOf(ch+ c)==-1){inf.pos--;return ch;}ch+=c;inf.pos++;}return ch;};function present(s){return s.replaceAll('&','&amp;').replaceAll('>','&gt;').replaceAll('<','&lt;');}function igk_php_eval(){igk_e.apply(this);var reserved=/((true|false)|\\$this|(a(bstract|nd|rray|s))|(c(a(llable|se|tch)|l(ass|one)|on(st|tinue)))|(d(e(clare|fault)|ie|o))|(e(cho|lse(if)?|mpty|nd(declare|for(each)?|if|switch|while)|val|x(it|tends)))|(f(inal|or(each)?|unction))|(g(lobal|oto))|(i(f|mplements|n(clude(_once)?|st(anceof|eadof)|terface)|sset))|(n(amespace|ew))|(p(r(i(nt|vate)|otected)|ublic))|(re(quire(_once)?|turn))|(s(tatic|witch))|(t(hrow|r(ait|y)))|(u(nset|se))|(__halt_compiler|break|list|(x)?or|var|while))$/;var w=0;var l=1;var mode=0;var level=0;this.evals=function(s){if(s.indexOf('<!--?php')==0)s=s.trim().replace('<!--?php','<span class="proc">&lt;?php</span>').replace('?-->','<span class="proc">?&gt;</span>');var o='';var m=0;var tr='';o+='<span class=\'ln\'>'+ l+'</span>';if(/(&lt;\?php|\?&gt;)/.test(s)){o+="<span class='proc'>"+ s+"</span>";}else{if(s.length==0)o+="<br />";else{inf.ln=s.length;inf.pos=0;inf.read=1;inf.s=s;var sp=igk.createNode("span");var ch="";while(inf.read &&(inf.ln>inf.pos)){ch=s[inf.pos];switch(ch){case '[':level++;break;case ']':level--;default:break;}inf.level=level;switch(ch){case ' ':sp.add("span").setHtml("&nbsp;");break;case "\t":sp.add("span").addClass("t").setHtml(" ");break;case '"':case "'":if(inf.mode==0){inf.mode=1;inf.pos++;w=_readStringLitteral(ch);sp.add("span").addClass("s").setHtml(w);inf.mode=0;}break;case "`":inf.mode=1;inf.pos++;w=_readStringLitteral(ch);inf.mode=0;sp.add('span').addClass("litteral").setHtml(w);break;case '/':if((inf.pos+ 1<inf.ln)&&(inf.s[inf.pos+ 1]=="/")){sp.add("span").addClass("cm").setHtml(present(ch+ inf.s.substr(inf.pos+ 1)));inf.read=0;}else sp.add("span").addClass("pc").setHtml("/");break;case "@":if((inf.pos+ 1<inf.ln)&&("\"'".indexOf(inf.s[inf.pos+ 1])!=-1)){inf.pos++;w=_readStringLitteral(inf.s[inf.pos++]);sp.add("span").addClass("s").setHtml("@"+ w);inf.mode=0;}else{inf.pos++;w=_readWord();sp.add("span").addClass("s-mark").setHtml("@"+ w);}break;case '$':inf.pos++;w=_readWord();if(w.length>0){sp.add("span").addClass("v r").setHtml("$"+ w);}else{sp.add("span").setHtml(ch);}inf.pos--;break;default:if(inf.mode==0){if(",.?|()#[]-+{}\\/%*><;:=&|??|===|?->|->|==|+=|-=|&&".indexOf(ch)!=-1){ch=_readPhpOperator(ch,inf);let ext='';if(/(\[\]|\(\)|\[|\]|\{|\})/.test(ch.trim())){ext+=' def';ext+=' l-';if(/^(\)|\]|\})$/.test(ch.trim())){ext+=''+ (inf.level+ 1);}else{ext+=''+ inf.level;}}m=sp.add("span").addClass("pc operator"+ ext).setHtml(ch);}else{w=_readWord();var _cl="w";if(/[0-9.]+/.test(w)){_cl="num";}m=sp.add("span").addClass(_cl).setHtml(w);if(reserved.test(w)){m.addClass("r");}inf.pos--;}}break;}inf.pos++;}o+=sp.getHtml();}}l++;return o;};this.getLines=function(){return l;};}igk.system.createNS("igk.highlightjs",{'php':igk_php_eval,});function __initCode(){$igk("code.igk-code").each_all(__init_code_area);};igk.ready(__initCode);igk.ctrl.registerReady(function(){if(this.tagName && this.tagName.toLowerCase()=="code" && this.getAttribute('igk-code')){__init_code_area.apply($igk(this));}});igk.system.createNS("igk.winui.codes",{getCodes:function(){return m_codes||[];}});})();(function(){let sC=null;const appCookies=igk.cookieName||'blf-c';igk.system.createNS("igk.cookies",{set(n,v){if(!sC){let l=igk.web.getcookies(appCookies);if(l){sC=JSON.parse(l)||{};}else{sC={};}}sC[n]=v;igk.web.setcookies(appCookies,JSON.stringify(sC),undefined,"/");return sC;}});})();(function(){const IGK_UNDEF="undefined";const IGK_FUNC="function";var props={};var domProp=null;var vendors=['webkit','ms','o'];var corecss="balafon.css";var r=$igk(document.createElement('div'));var dev=$igk(document.createElement('div'));var dum=null;var rule=null;var m_chtheme=null;dev.addClass("igk-device");r.addClass('igk-media-type');var xdum=igk.createNode("div",igk.namespaces.xhtml);var dum=xdum.o;var l=false;if(dum.style){for(var i in dum.style){if(typeof(dum.style[i])!=IGK_FUNC){switch(i){case 'cssText':case 'length':case 'parentRule':continue;}if(i.indexOf('-')!=-1)continue;props[(i+'').toLowerCase()]=i;l=!0;}}}if(!l && window.getComputedStyle){var txt=window.getComputedStyle(dum).cssText;if(txt){var tab=txt.split(';');for(var i=0;i<tab.length;i++){var s=tab[i].split(':')[0];var d=getchars(s);var index=1;if(s[0]=='-'){index=2;}else{}while(index>0){index=s.indexOf('-',index);if(index==-1)break;if(index+ 1<s.length){d[index+ 1]=(s[index+ 1]+'').toUpperCase();}index++;}s=getstring(d).replace(/( |\-)/g,"");if(typeof(props[s.toLowerCase()])==IGK_UNDEF)props[s.toLowerCase()]=s;}}}var e=['animation','transition'];var v=vendors;for(var i=0;i<v.length;i++){for(var j=0;j<e.length;j++){var s=(v[i]+ e[j]).toLowerCase();if((typeof(props[s])==IGK_UNDEF)&& props[s+"delay"]){props[s]=v[i]+ e[j][0].toUpperCase()+ e[j].substring(1);}}}function __getRule(f){var m=null;var q=new RegExp("/"+ f+"(.+)*");for(var i=0;i<document.styleSheets.length;i++){m=document.styleSheets[i];if(m.href && q.test(m.href+""))return m;}return null;}function _initTransitionProperties(t,list){t=$igk(t);if(typeof(list)=='string'){if(!t.autoTransition)t.autoTransition={};if(t.autoTransition[list]){return true;}if(list=='all'){list=['width','height','marginLeft','marginRight','margin','padding','paddingLeft','paddingRight'];}}var g=t.getComputedStyle("transition");if(!g)return false;var mark=0;function _initPropertyStyle(t,n){if(!t.autoTransition)t.autoTransition={};if(t.autoTransition[n])return;t.autoTransition[n]=1;return new(function(n){var _os=t.o.style[n];igk.defineProperty(t.o.style,n,{get:function(){if(mark)return _os;return t.getComputedStyle(n);},set:function(v){if(v=='auto'){t.o.style.setProperty(n,'auto');var r=t.getComputedStyle(n);t.o.style.setProperty(n,_os);setTimeout(function(){t.o.style.setProperty(n,r);},1);return;}_os=v;t.o.style.setProperty(n,v);}});})(n);};var n='';var d='';for(var i=0;i<list.length;i++){n=list[i];mark=1;var v=t.getComputedStyle(n);var s=t.o.style[n];mark=0;if(s==''){t.o.style.setProperty(n,v);}_initPropertyStyle(t,n);}t.setCss({transition:g});};delete(igk.css);function __getStyleValue(stylelist,n){switch(n.toLowerCase()){case "transition":var s=stylelist[n];if(!igk.isUndef(s)&& s.length>0)return s;var v_p=['property','duration','timing-function','delay'];var v_v=vendors;var v_k="";var v_prop={toString:function(){var t=v_prop.property;var di=v_prop.duration;var tf=v_prop["timing-function"];var dl=v_prop.delay;var s="";if(!igk.isUndef(t)){for(var i=0;i<t.length;i++){if(i>0){s+=',';}s+=t[i]+" "+ di[i]+" "+ tf[i]+" "+ dl[i];}}return s;}};var v_t=0;var v_splitcsss_pattern="([^,(]+(\\(.+?\\))?)[\\s,]*";for(var i=0;i<v_p.length;i++){v_k=n+"-"+ v_p[i];if((i==0)&&(typeof(stylelist[v_k])!=igk.constants.undef))v_t=1;if(!v_t)break;s+=((i>0)? " | " :"")+ stylelist[v_k];v_prop[v_p[i]]=igk.system.regex.split(v_splitcsss_pattern,stylelist[v_k]);}if(!v_t){v_t=0;for(var j=0;j<v_v.length;j++){v_prop[v_v[j]]={};if(v_t)s+="|";for(var i=0;i<v_p.length;i++){v_k=v_v[j]+ n+"-"+ v_p[i];s+=stylelist[v_k];if(!igk.isUndef(stylelist[v_k]))v_prop[v_p[i]]=igk.system.regex.split(v_splitcsss_pattern,stylelist[v_k]);}v_t=1;}}return v_prop.toString();break;default:return stylelist[n];}};function __setProperty(item,properties){var _navsupport=igk.navigator.isIE();if(item && item.style && properties){for(var i in properties){try{if(i.startsWith("--")){item.style.setProperty(i,properties[i]);if(!_navsupport)continue;}item.style[i]=properties[i];}catch(ex){}}}else{console.debug('[BJS] -/!\v properties '+ item+' not defined');}}function _get_html_theme(){var d=document.getElementsByTagName('html')[0];return d.getAttribute('data-theme');}var dynStyle=null;igk.system.createNS("igk.css",{getComputedEmSize(q,p,t){q=$igk(q);let ft=igk.getNumber(q.getComputedStyle('fontSize'));p=igk.getNumber(q.getComputedStyle(p));$dpi=96;if(ft){fv=Math.floor((p / ft)*100);if(t=='%'){return fv+ t;}if(t=='in'){return($fv / dpi)+'in';}fv /=100;return fv+"em";}return NaN;},changeDocumentTheme(n){var d=document.getElementsByTagName('html')[0];if(typeof(n)=='undefined'){n='dark';if(d.getAttribute('data-theme')==n){n='light';}}d.setAttribute('data-theme',n);igk.cookies.set('theme_name',n);return n;},getStyleSelectorList(index){if(this !=igk.css){throw new Error("Func must be called staticly");}var rm=document.styleSheets[index];let r=null;if(rm){r=[];for(var i=0;i<rm.cssRules.length;i++){if(rm.cssRules[i].selectorText)r.push(rm.cssRules[i].selectorText);}r.sort();}return r;},isItemSupport(names){if(typeof(names)=='string'){var s=names.toLowerCase();return s in props;}for(var i=0;i<names.length;i++){if(typeof(props[names[i].toLowerCase()])!=IGK_UNDEF)return !0;}var s=dum.style;if(s){for(var i=0;i<names.length;i++){if(typeof(s[names[i]])!=IGK_UNDEF)return !0;}}return !1;},setProperties(item,properties){if((item==null)||(!item.style)){return;}var k={};var n=null;var v=null;for(var ni in properties){if(typeof(ni)!='string')continue;if(ni.startsWith("--")){k[ni]=properties[ni];continue;}v=properties[ni];if(igk.css.isItemSupport(['webkit'+ ni])){n=props[('webkit'+ ni).toLowerCase()];if(n)k[n]=v;}else if(igk.css.isItemSupport([ni])){n=props[ni.toLowerCase()];if(n){k[n]=v;}}}__setProperty(item,k);},getStyleValue:function(stylelist,n){return __getStyleValue(stylelist,n);},toggleClass(i,p){var q=$igk(i).first();if(q){q.toggleClass(p);}},initAutoTransitionProperties:_initTransitionProperties,loadLinks(t){for(var i=0;i<t.length;i++){var c=document.createElement("link");c.setAttribute("href",t[i]);c.setAttribute("rel","stylesheet");igk.dom.body().add(c);}},getEmSize(c,t){var s=igk.getNumber($igk(c).getComputedStyle("font-size"));var T=s;t=t||igk.dom.body().o;if(t==c)return 1;while(c){c=c.o.parentNode;if(c &&(c !=t)){c=$igk(c);T=igk.getNumber($igk(c).getComputedStyle("font-size"));if(T !=s)break;}else{c=null;}}s=Math.round(s / T,3);return s;},appendRule(c){rule=rule||__getRule(corecss);try{if(rule)rule.insertRule(c,rule.cssRules.length);}catch(e){}},appendStyle(uri){if(!uri){return;}var e=document.createElement("link");$igk(e).setAttribute("href",uri).setAttribute("type","text/css").setAttribute("rel","stylesheet");document.head.appendChild(e);return document.styleSheets[document.styleSheets.length- 1];},getMediaType(){return(r.getComputedStyle('content',':before')+"").replace(/\"/g,"");},getMediaIndex(){return(r.getComputedStyle('z-index',':before')+"").replace(/\"/g,"");},getDevice(){return(dev.getComputedStyle('content',':before')+"").replace(/\"/g,"");},changeTheme(uri,value){igk.ajx.get(uri+"/"+ value,null,function(xhr){if(this.isReady()){rule=rule||__getRule(corecss);if(rule){while(rule.cssRules.length>0){rule.deleteRule(0);}if(m_chtheme !=null){$igk(m_chtheme).remove();}var s=document.createElement("style");s["type"]="text/css";s.innerText=xhr.responseText;document.head.appendChild(s);m_chtheme=s;}}});},selectStyle(rx,callback){var d=document.styleSheets;if(d.length<=0)return 0;var match=[];var k=[];for(var i in rx){for(var j=0;j<d.length;j++){if(!match[j]&& rx[i].test(d[j][i])){callback(d[j]);match[j]=1;k.push(d[j]);}}}return k;},getComputedClassStyle(c,p,j){if(dum==null){dum=igk.createNode('div');if(igk.navigator.isChrome()){igk.ready(function(){igk.dom.body().add(dum);});}else $igk(h).add(dum);dum.addClass(c);}var g=dum.getComputedStyle(p,j);dum.remove();dum=null;return g;},getComputedSrcStyle(h,c,p,j){h=h||igk.dom.body().o;if(dum==null){dum=igk.createNode('div');if(igk.navigator.isChrome()){igk.ready(function(){$igk(h).add(dum);});}else $igk(h).add(dum);dum.addClass("dispn").addClass(c);}var g=dum.getComputedStyle(p,j);dum.remove();dum=null;return g;},appendTempStyle(c){var q=$igk("select#tempsp").first();if(!q){q=igk.dom.body().add("style");q.o["type"]="text/css";}q.setHtml(c);},clearTempStyle(){var q=$igk("select#tempsp").first();if(q){q.setHtml('');}},isMatch(t,p){if((/^#[\w\-_]+$/.exec(p))){b=$igk(t).getParentById(p.substring(1));if(b)v_sl.push(b);}else if((/^\./.exec(p))){p=p.substring(1);var s=$igk(t).o;var rx=new RegExp("("+ p+")(\\s|$)","i");if(rx.exec(""+ s.className)){return 1;}}else{if(item.tagName.toLowerCase()==pattern)return 1;}return 0;},setProperty(item,name,value){var k={};var n=null;if(igk.css.isItemSupport(['webkit'+ name])){n=props[('webkit'+ name).toLowerCase()];k[n]=value;i}else if(igk.css.isItemSupport([name])){n=props[name.toLowerCase()];k[n]=value;}__setProperty(item,k);},setTransitionDuration(item,time){igk.css.setProperty(item.o,'transitionduration',time);return igk.css;},setTransitionDelay(item,time){igk.css.setProperty(item.o,'transitiondelay',time);return igk.css;},changeStyle(selectorText,style){var theRules=new Array();if(document.styleSheets[0].cssRules){theRules=document.styleSheets[0].cssRules;}else if(document.styleSheets[0].rules){theRules=document.styleSheets[0].rules;}for(n in theRules){if(theRules[n].selectorText==selectorText){theRules[n].style=style;}}},getProperties(){return{};},appendDynamicRule(rule,style){dynStyle=dynStyle||((document.styleSheets.length>0)? document.styleSheets[document.styleSheets.length- 1]:(function(){q=igk.dom.body().add("style");q.o["type"]="text/css";return q.o.style;})());dynStyle.addRule(rule,style);},rmDynamicRule(){if(dynStyle){dynStyle=null;console.log("remove dynStyle");}}});(function(storageCallback){const{THEME_KEY,saveItem,getItem}=(function(info){if(typeof(info)=='function'){return{saveItem(m){info({type:'save',value:m});},getItem(){return info({type:'get'});},THEME_KEY:th_n};}let th_n=typeof(info)=='string' ? info :'theme';return{saveItem(m){localStorage.setItem(THEME_KEY,m);},getItem(){return localStorage.getItem(THEME_KEY);},THEME_KEY:th_n}})(storageCallback);function __setTheme(m){let h=document.getElementsByTagName('html')[0];h.setAttribute("data-theme",m);saveItem(m);}function __updatemode(r){return(e)=>{let m=(('dark'==r)&& e.matches)||(('dark' !=r)&& !e.matches)? 'dark' :'light';__setTheme(m);}}if('matchMedia' in window){let preferredTheme=getItem()||(function(){let stheme=_get_html_theme();if(!stheme){const meta_theme=document.head.querySelector('meta[name="color-scheme"]');if(meta_theme){stheme=meta_theme.getAttribute('content');}}return stheme;})();let tm=null;let theme='dark';['light','dark'].forEach(m=>{let mode=window.matchMedia('(prefers-color-scheme: '+ m+')');if((preferredTheme &&(m==preferredTheme))||(!tm && mode.matches)){tm=mode;theme=m;}});tm.addEventListener('change',__updatemode(theme));__setTheme(theme);igk.css.changeDocumentTheme=function(th){theme=th||(theme=='dark' ? 'light' :'dark');__setTheme(theme);};}})();igk.defineProperty(igk.css,"rule",{get:function(){return rule;}});igk.defineProperty(igk.css,"vendors",{get:function(){return vendors;}});var e={};e.mediachanged=1;for(var s in e){e[s]='sys://events/'+ s;}igk.system.createNS("igk.publisher.events",e);igk.ready(function(){var B=igk.dom.body();let cookies=igk.cookies;if(igk.navigator.isFirefox()||igk.navigator.isChrome()||igk.navigator.isSafari()){B.add("div").setCss({position:'absolute',visibility:'hidden',overflow:'hidden','height':'0px','bottom':'0px'}).addClass("igk-m-i").add(r). t.add(dev);igk.css.appendRule(".igk-media-type:before{position:absolute;}");igk.css.appendRule(".igk-device:before{position:absolute;}");}var dev=igk.css.getDevice();var m_c=igk.css.getMediaType();function __checkMedia(){var i=igk.css.getMediaType();var d=null;if(i !=m_c){B.rmClass(m_c).addClass(i);__raiseMedia(i);}};function __raiseMedia(i){m_c=i;igk.publisher.publish(igk.publisher.events.mediachanged,{mediaType:i,mediaIndex:igk.css.getMediaIndex(),device:igk.css.getDevice()});};B.addClass(m_c);__raiseMedia(m_c);igk.winui.reg_event(window,'resize',__checkMedia);});})();(function(){function igk_str_padEnd(l,v){var hl=this.length;var s=this.toString();while(hl<l){s+=''+ v;hl++;}return s;}function igk_str_startWith(c){if(typeof(c)=='undefined')return !1;var l=this.length;var x=c.length;var i=0;if(l==0)return !1;if(typeof(this[0])=='undefined'){while((i<x)&&(i<l)&&(this.charAt(i)==c.charAt(i))){i++;}}else{while((i<x)&&(i<l)&&(this[i]==c[i])){i++;}}return i==x;};if(!String.prototype.startsWith)String.prototype.startsWith=igk_str_startWith;})();(function(){var prop=['sepia','blur','contrast','brightness','drop-shadow','grayscale','hue-rotate','invert','saturate','opacity'];function igk_get_filter_exp(f){if(f==null)return "none";var s="";var m="";for(var i in f){m=i;switch(m){case "huerotate":m="hue-rotate";break;case "dropshadow":m="drop-shadow";break;}if(s.length>0)s+=" ";s+=m+"("+ f[i]+")";}return s;};function igk_getFilterProp(o){var go=igk.JSON.parse(o.getAttribute("igk:filter"));if(go){var r="";for(var i=0;i<prop.length;i++){if(igk_isdefine(go[prop[i]])){if(r.length>0)r+=" ";r+=prop[i]+"("+ go[prop[i]]+")";}}if(igk.navigator.isIEEdge()){o.setCss({filter:r});}o.setCss({filter:r});return r;}return null;};var _g_canva=igk.createNode("canvas");var _g_ctx=_g_canva.o.getContext ? _g_canva.o.getContext("2d"):null;if(_g_ctx==null)return;igk.system.createNS("igk.canvas",{supportFilter:function(){return "filter" in _g_ctx;},getFilterExpression:function(c){var f=null;const _eval=function(d){return parseFloat(d);};if(c !=null){if(!String.prototype.padEnd)String.prototype.padEnd=igk_str_padEnd;var s=(c+"").padEnd(20,0);var u=[];for(var i=0;i<10;i++){u[i]="0x"+ s.substring(i*2,(i*2)+ 2);}var sfilter={};sfilter.grayscale=Math.round((_eval(u[0])/ 100/ 255.0)*10000)+"%";sfilter.huerotate=Math.round((_eval(u[1])/ 100/ 255.0)*36000)+"deg";sfilter.blur=_eval(u[2])+"px";sfilter.sepia=Math.round((_eval(u[3])/ 100/ 255.0)*10000)+"%";sfilter.saturate=(100 - Math.round((_eval(u[4])/ 100/ 255.0)*10000))+"%";sfilter.invert=Math.round((_eval(u[5])/ 100/ 255.0)*10000)+"%";sfilter.opacity=(100 - Math.round((_eval(u[6])/ 100/ 255.0)*10000))+"%";sfilter.brightness=(100 - Math.round((_eval(u[7])/ 100/ 255.0)*20000))+"%";sfilter.contrast=(100 - Math.round((_eval(u[8])/ 100/ 255.0)*10000))+"%";f=sfilter;}return igk_get_filter_exp(f);},getFilterString:igk_get_filter_exp,toStringExpression:function(v){var r="";for(var i=0;i<prop.length;i++){var n=prop[i];if(n in v){r+=igk.system.convert.ToBase(Math.round((v[prop[i]]/ 100)*255),16);}}return r;}});var hprop={};for(var i=0;i<prop.length;i++){hprop[prop[i]]=i;}var v_list=igk.defineEnum(null,hprop);igk.defineProperty(igk.canvas,"filters",{get:function(){return v_list;}});})();(function(){var items=[];function __hideSubmenu(q){q.rmClass("igk-show");}function __showSubmenu(q){q.addClass("igk-show");}function __initMenu(q){if(!q||q.data["system/menu"])return;$igk(q.o.parentNode).reg_event("mouseover",function(){__showSubmenu(q);}).reg_event("mouseleave",function(){__hideSubmenu(q);});q.data["system/menu"]=1;}function __init(){$igk("ul.igk-hmenu").select('li ul').each(function(){items.push(this);__initMenu(this);return !0;});}igk.ready(function(){__init();igk.ajx.fn.registerNodeReady(function(){__init();});});})();(function(){igk.system.createNS("igk.ctrl",{initMemoryUsage:function(uri){var p=$igk(igk.getParentScript());var tout=null;function __getMemory(){if(p.o.parentNode==null){return;}if(tout){clearTimeout(tout);tout=null;}igk.ajx.get(uri,null,function(xhr){if(this.isReady()){var pt=igk.createNode("dummy");pt.setHtml(xhr.responseText);var q=$igk(pt.o.children[0]);if(q){p.setHtml(q.getHtml());}setTimeout(__getMemory,2000);}});}igk.ready(__getMemory);}});})();(function(){var s=0;var _pic=0;var re=0;function __getfile(){var s=ns_igk.createNode("input");s.setAttribute("type","file");s.o.id="clFile";s.o.name="clFile";s.addClass("posab");s.setCss({visibility:'hidden'});return s;};igk.system.createNS("igk.system.io",{pickfile(uri,p,osrc){s=s||__getfile();p=p||{};s.o.value=null;if(p.accept){s.o.setAttribute("accept",p.accept);}igk.dom.body().prepend(s);function __change(){if(uri==null){var complete=(p ? p.complete :null);if(complete){complete(s.o.files[0]);}}else{igk.ajx.uploadFile(osrc,s.o.files[0],uri,true,p ? p.complete :null,p ? p.start :null,p ? p.progress :null,p ? p.done :null);}s.unreg_event('change',__change);s.remove();s.o.value=null;if(re)s=null;}s.unreg_event('change',__change);s.reg_event('change',__change);s.o.accept=null;if(p.accept){s.o.accept=p.accept;}try{s.o.files=null;}catch(e){re=1;}s.o.click();}});igk.system.io.pickfile.getSrc=function(){return _src;};igk.winui.initClassControl("igk-js-pickfile",function(){var q=this;var s=igk.JSON.parse(q.getAttribute("igk:data"));if(s && igk.is_object(s)){this.reg_event("click",function(){igk.system.io.pickfile(s.uri,s.options,q);});}});})();(function(){igk.winui.initClassControl("igk-debuggernode",function(){var q=this;this.reg_event("click",function(){q.setHtml("");});},{desc:"debugger node"});})();(function(){igk.ctrl.registerAttribManager("igk-tooltip",{desc:"for tooltip component"});igk.ctrl.bindAttribManager("igk-tooltip",function(n,m){var p=igk.JSON.parse(m);var q=this;var tip=null;this.reg_event("mouseover",function(evt){if(tip==null)tip=igk.winui.tooltip.show(q,p.data);else tip.show();});});var _tip_offset=200;var _tip_c=1000;function _tip(){var t=igk.createNode("div");t.setOpacity(0.2).addClass("igk-trans-all dispb posab pad-a-4").setCss({zIndex:_tip_offset+ _tip_c,padding:"4px",backgroundColor:"white",border:"1px solid black",cursor:"pointer"}).setHtml(" ");var _m_closing=false;var _m_t="";igk.appendProperties(this,{show:function(){if(_m_closing)return;_m_closing=1;t.setOpacity(1.0).setHtml(this.data);var b=this.owner.getScreenBounds();var loc=this.owner.getScreenLocation();t.setCss({left:loc.x+"px",top:(loc.y+ (b.h / 2))+"px"});igk.dom.body().appendChild(t.o);},hide:function(){if(_m_closing==1){t.setOpacity(0.1);}}});var self=this;t.reg_event("mouseover",function(){self.show();}).reg_event("mouseout",function(evt){self.hide();}).reg_event("transitionend",function(evt){if(evt.propertyName=="opacity")if(_m_closing){t.remove();_m_closing=0;}});};igk.winui.tooltip=function(){};igk.system.createNS("igk.winui.tooltip",{show:function(q,data){var d=new _tip();d.data=data;d.owner=q;d.show();return d;}});})();igk.ready(function(){function __load(j){if(j.data["img-js.loaded"]){return !1;}if(j.getisVisible()){j.data["img-js.loaded"]=1;var i=document.createElement("img");$igk(i).reg_event("load",function(evt){console.debug("complete ....");igk.dom.copyAttributes(j.o,i,{'data':1});j.o.parentNode.replaceChild(i,j.o);});i["src"]=j.getAttribute("data");return !0;}return !1;};function __fcScroll(evt){var tab=$igk(evt.target).data["img-js"].items;var _ctab=[];for(var i=0;i<tab.length;i++){var j=tab[i];if(!__load(j)){_ctab.push(j);}}$igk(evt.target).data["img-js"].items=_ctab;if(_ctab.length==0){$igk(evt.target).unreg_event("scroll",__fcScroll);}console.debug(""+ tab.length);}igk.dom.body().select("igk-img-js").each(function(){var p=this.o.offsetParent;if(p !=null){var q=$igk(p);if(!q.data["img-js.parentScroll"]){q.reg_event("scroll",__fcScroll);q.data["img-js.parentScroll"]=1;q.data["img-js"]={items:[]};}q.data["img-js"].items.push(this);}return !0;});});(function(){function __fcScroll(q){if(q.loaded||q.loading||!q.getisVisible())return !1;q.loading=!0;igk.ajx.get(q.getAttribute('data'),null,function(xhr){if(this.isReady()){q.loaded=!0;q.loading=false;q.unreg_event("scroll",__load);let p=q.data.scrollP;let r=q.o.previousSibling;this.replaceResponseNode(q.o);}});return !0;};function __load(){var d=$igk(this);var k="igk-scroll-loader.items";var h=d.data[k];if(h.length==0){d.unreg_event("scroll",__load);d.data[k]=null;return;}for(var i=0;i<h.length;i++){if(__fcScroll(h[i])){h.splice(i,1);i--;}}}function __init_doc_scrollloader(){igk.dom.body().select("igk-scroll-loader").each(function(){__init_tag(this);return !0;});}function __init_tag(t){if(t.data["igk-scroll-loader"])return;let p=t.select("^.igk-scroll-loader_container").first()||t.getscrollParent().o;var sk="igk-scroll-loader.parentScroll";if(p !=null){var q=$igk(p);if(!q.data[sk]){q.reg_event("scroll",__load);q.data[sk]=1;q.data["igk-scroll-loader.items"]=[];}var h=q.data["igk-scroll-loader.items"];h.push(t);t.data["igk-scroll-loader"]=1;t.data.scrollP=p;if(t.getisVisible()){__fcScroll(t);}}}igk.reg_tag_component("igk-scroll-loader",{desc:"scroll loader",func:function(){__init_tag($igk(this));}});igk.ready(__init_doc_scrollloader);})();(function(){igk.ctrl.registerAttribManager("igk-bind-data-ajx",{desc:"used to bind data for selection"});igk.ctrl.bindAttribManager("igk-bind-data-ajx",function(n,m){var q=this;switch(this.o.tagName.toLowerCase()){case 'select':igk.ajx.post(m,null,function(xhr){if(this.isReady()){q.setHtml(xhr.responseText);console.debug(xhr.responseText);}});break;}});})();(function(){function __init_waiter(){var q=this;var _running=true;var _dat=null;var _offset=0;igk.appendProperties(this.data,{canva:null,dir:1,penWidth:2,render:function(v,cl,of_set){var w=igk.getNumber(this.canva.getComputedStyle("width"));var h=igk.getNumber(this.canva.getComputedStyle("height"));var v1=0;var v2=0;var cx=w / 2;var cy=h / 2;var penw=this.penWidth||4;var r=Math.min(w / 2,h / 2)- (penw / 2);this.canva.setAttribute("width",w);this.canva.setAttribute("height",h);var ctx=this.canva.o.getContext('2d');ctx.lineWidth=penw;ctx.clearRect(0,0,w,h);ctx.strokeStyle=''+ cl;ctx.beginPath();var offset=(_offset*(Math.PI / 180.0))- (Math.PI / 2);var _s=_getData();switch(_s.mode){case 2:if(this.dir==1){v1=offset;v2=offset+ (2*Math.PI)*v;}else{v1=offset+ (2*Math.PI)*(1- v);v2=offset+ (2*Math.PI);}break;case 1:if(this.dir==1){v1=offset+ (of_set*(Math.PI*2));v2=offset+ (2*Math.PI)*v;}else{v1=offset+ (2*Math.PI)*(1- v);v2=offset+ ((2*Math.PI)*(1- of_set));}break;}if(v1 !=v2)ctx.arc(cx,cy,r,v1,v2,false);ctx.stroke();}});function _getData(){if(_dat==null){var _s=q.data.storyboard.getComputedStyle('content',':before');var _t=/^"((.)+)"$/i.exec(_s);_dat=igk.JSON.init_data({stop:'width',mode:1},(_t ? _t[1].replace(/\\\"/g,"\""):null),function(s){s.stop=(_t ? _t[1]:null)||'width';});q.data.penWidth=q.data.storyboard.getComputedStyle('border-size',':before');}return _dat;};this.data.canva=this.add("canvas").addClass("posab fitw fith loc_t loc_l");this.data.storyboard=this.add("div").addClass("igk-anim-time-board").reg_event("transitionend",function(evt){var _m=_getData();if(evt.propertyName==_m.stop){if(q.data.dir==1){q.data.storyboard.setCss({'width':'0px',height:'0px'}).rpClass("igk-cl-1","igk-cl-2");q.data.dir=-1;}else{q.data.storyboard.setCss({'width':'100px',height:'100px'}).rpClass("igk-cl-2","igk-cl-1");q.data.dir=1;}setTimeout(function(){_running=!0;},2000);}}).setCss({"width":"0px","height":"0px"}).addClass("igk-cl-2").setHtml(" ");setTimeout(function(){var n=q.data.storyboard;n.setCss({width:'100px',height:'100px'}).rpClass("igk-cl-2","igk-cl-1");q.data.render(0,'transparent',0);igk.html.canva.animate(function(e){if(q.o.parentNode==null){return !1;}if(!q.data.end){var x=igk.getNumber(n.getComputedStyle("width"));var y=igk.getNumber(n.getComputedStyle("height"));var cl=n.getComputedStyle('color');_offset+=5;if(_offset>360){_offset=1;}q.data.render(Math.round((x / 100.0)*100)/ 100,cl,Math.round((y / 100.0)*100)/ 100 );return _running;}q.data.render(1.0,"",1.0);return _running;});},500);return !0;}igk.winui.initClassControl("igk-circle-waiter",__init_waiter);})();(function(){function _a(p,t){var m=p.select(t).first();var s=p.getscrollParent();var y=0;if(m && s){var cH=s.o.clientHeight;var sT=m.o.parentNode.offsetTop;if(sT>0){if(!(sT<cH)){y=sT- cH+ Math.ceil(igk.getNumber(m.getComputedStyle('height')));p.setCss({'transform':'translateY(-'+ (y)+'px)'});}}}return y;};function __init_scroll(orn){var q=this;if(q.data["igk-scroll-b"]){throw("already igk-scroll-b init");return;}var cur=q.add("div").addClass("igk-scroll-cur");var p=$igk(q.o.parentNode);var cibling=p.select(this.getAttribute("igk:cibling")).first();var m_spos=0;var m_psize=0;if(cibling){m_spos=_a(cibling,q.getAttribute("igk:target"));}var m_enable=false;var m_init=0;q.data["igk-scroll-b"]=1;p.addClass("igk-scroll-host");function init_view(){var real_size=p.getOffsetBounds();m_psize=real_size;var x=0;var s=0;var t=0;if(orn=='h'){x=p.o.offsetWidth / p.o.scrollWidth;s=Math.max(32,(x*p.o.clientWidth));cur.setCss({width:s+"px"});}else{x=p.o.clientHeight / real_size.h;if(x<1){s=Math.floor(Math.max(32,(x*p.o.clientHeight)));cur.setCss({"Height":s+"px"});}}if(x<1){if(!m_init){if(orn=='v'){t=Math.floor(p.o.offsetHeight*(m_spos / p.o.clientHeight));cur.setCss({top:t+'px'});}else{t=Math.floor(p.o.offsetWidth*(m_spos / p.o.scrollWidth));cur.setCss({left:t+'px'});}m_init=1;}q.addClass("igk-show");m_enable=1;}else{q.rmClass("igk-show");m_enable=0;var e=__init_data();e.start=0;e.end=0;e.value=0;_u_cur(cur,e,0);}};function __stop_capture(){igk.winui.mouseCapture.releaseCapture();cur.data["s:/msdown"]=null;cur.data["s:/msprop_s"]=null;};function __init_data(evt){var x=evt ?(orn=="h" ? evt.clientX :evt.clientY):0;var f=igk.winui.transform.getData;var c=cibling;var v=c ?(orn=="h" ? f(c).getX():f(c).getY()):0;return{top:cur.getTop(),start:x,end:x,value:v,childs:p.select('>>')};};function _u_cur(cur,e,y){e.end=y;e.diff=e.end- e.start;var t=e.top+ e.diff;var maxt=(q.getHeight()- cur.getHeight());if(t<=0)t=0;else t=Math.min(t,maxt);var x=(t / maxt);var d=0;e.value=x;if(orn=='h'){cur.setCss({"left":t+"px"});d=(-p.o.clientWidth+ m_psize.w)*e.value;}else{cur.setCss({"top":t+"px"});d=(-p.o.clientHeight+ m_psize.h)*e.value;}e.childs.each(function(){if((this !=q)&& !this.data["igk-scroll-b"]){var data=igk.winui.transform.getData(this);data.setTranslateY(-d);this.setCss({"transform":data.toString()});}return !0;});};function __update(){var e=__init_data();var v=e.value*-1;if(!m_init){e.start=0;e.end=0;e.value=0;}_u_cur(cur,e,v);}if(p.istouchable()){var tlog=null;var vlog=null;p.reg_event("touchstart",function(evt){if(evt.touches.length==1){tlog=igk.createNode("div");igk.android.log.add(tlog);vlog=igk.createNode("div");igk.android.log.add(vlog);init_view();}}).reg_event("touchend",function(evt){q.rmClass("igk-show");}).reg_event("touchmove",function(evt){var _th=evt.touches[0];}).reg_event("touchcancel",function(evt){});;}var passive=igk.features.supportPassive ?{passive:true}:false;p.reg_event("mouseover",function(){init_view();}).reg_event("mouseleave",function(){if(cur.data["s:/msdown"])return;q.rmClass("igk-show");}).reg_event("mouseup",function(evt){if(!p.getScreenBounds().contains(evt.clientX,evt.clientY)){q.rmClass("igk-show");}}).reg_event("mousewheel",function(evt){evt.stopPropagation();evt.preventDefault();if(!m_enable)return;var e=__init_data();e.start=0;e.end=0;e.value=0;var dir=evt.deltaY>0 ?-1 :1;_u_cur(cur,e,dir*10);},false).reg_event("scroll",function(evt){evt.stopPropagation();evt.preventDefault();},false);igk.publisher.register("sys://doc/changed",function(o){if((o.target==p.o)||igk.dom.isChild(o.target,p.o)){__update();}});cur.reg_event("mousedown",function(evt){if(!cur.data["s:/msdown"]){igk.winui.mouseCapture.setCapture(cur.o);cur.data["s:/msdown"]=1;igk.winui.selection.stopselection();var e=__init_data(evt);};if(orn=='h'){e.start=evt.clientX;e.end=evt.clientX;e.left=cur.getLeft();}cur.data["s:/msprop_s"]=e;}).reg_event("mousemove",function(evt){if(cur.data["s:/msdown"]){if(igk.winui.mouseButton(evt)!=igk.winui.mouseButton.Left){return;}var e=cur.data["s:/msprop_s"];if(orn=='v'){_u_cur(cur,e,evt.clientY);}else{e.end=evt.clientX;e.diff=e.end- e.start;var t=e.left+ e.diff;var maxt=(q.getWidth()- cur.getWidth());if(t<0)t=0;else t=Math.min(t,maxt);cur.setCss({"left":t+"px"});e.value=(t / maxt);var d=(p.o.scrollWidth- p.o.offsetWidth)*e.value;e.childs.each(function(){if((this !=q)&& !this.data["igk-scroll-b"]){var data=igk.winui.transform.getData(this);data.setTranslateX(-d);this.setCss({"transform":data.toString()});}return !0;});}}}).reg_event("mouseup",function(evt){__stop_capture();igk.winui.selection.enableselection();});}igk.winui.initClassControl("igk-vscroll",function(){__init_scroll.apply(this,['v']);},{"desc":"vertical scroll bar"});igk.winui.initClassControl("igk-hscroll",function(){__init_scroll.apply(this,['h']);},{"desc":"horizontal scroll bar"});})();igk.system.createNS("igk.system",{dateTime:function(date){if(!date)return null;function _dateTimeObj(date){this.date=date;igk.appendProperties(this,{format:function(str){var o="";for(var i=0;i<str.length;i++){var m=str[i];switch(m){case "m":o+=this.date.getMinutes();break;case "M":o+=(this.date.getMonth()+ 1);break;case "d":o+=this.date.getDate();break;case "Y":o+=this.date.getFullYear();break;case "h":o+=this.date.getHours();break;case "s":o+=this.date.getSeconds();break;default:o+=m;}}return o;}});};return new _dateTimeObj(date);}});(function(){var slog=null;igk.system.createNS("igk.android.log",{add:function(m){if(slog==null)return;if(typeof(m)=='string'){var d=new Date();slog.add('div').setHtml(igk.system.dateTime(d).format('d:M:Y')+"=> "+ m);}else{slog.add('div').add(m);}},clear:function(m){slog.setHtml('');}});function __initAndroidLog(){if(slog)return;slog=this;igk.android.log.add('start');};igk.winui.initClassControl("igk-android-log",__initAndroidLog);})();(function(){function __transform_data(s){var m0 =1,m1=0,m2=0,m3=1,tx=0,ty=0,tz=0;var mz=0;var t='2d';if(/^matrix\(/i.exec(s)){var tb=s.match(/^matrix\((.+)\)$/)[1].split(',');m0 =parseFloat(tb[0]);m1=parseFloat(tb[1]);m2=parseFloat(tb[2]);m3=parseFloat(tb[3]);tx=parseFloat(tb[4]);ty=parseFloat(tb[5]);}else if(s=='none'){}else{throw "Matrix not found :::: "+ s;}function __get_s(){return "matrix("+ m0 +","+ m1+","+ m2+","+ m3+","+ tx+","+ ty+")";};igk.appendProperties(this,{getX:function(){return tx;},getY:function(){return ty;},getz:function(){return tz;},setTranslateX:function(d){tx=d;},setTranslateY:function(d){ty=d;},setTranslateZ:function(d){tz=d;},setScaleX:function(d){m0 =d;},setScaleY:function(d){m3=d;},setScaleZ:function(d){},toString:__get_s});};igk.system.createNS("igk.winui.transform",{getData:function(n){var s=$igk(n).getComputedStyle("transform");return new __transform_data(s||'none');}});})();(function(){var s=0;var slfunc=0;function __no_select(evt){evt.preventDefault();evt.stopPropagation();};var NS=igk.system.createNS("igk.winui.selection",{stopselection:function(){igk.winui.selection.clear();if(typeof(document.onselectstart)!='undefined')$igk(document).reg_event('selectstart',__no_select);else if(typeof(igk.dom.body().style.MozUserSelect)!='undefined')igk.dom.body().style.MozUserSelect='none';s=1;},enableselection:function(){if(typeof(document.onselectstart)!='undefined')$igk(document).unreg_event('selectstart',__no_select);else if(typeof(igk.dom.body().style.MozUserSelect)!='undefined')igk.dom.body().style.MozUserSelect='';s=0;},clear:function(){var sel=NS.Selection;if(sel){var fc=sel.removeAllRanges||sel.empty;fc.apply(sel);}}});igk.defineProperty(NS,"Selection",{get:function(){if(!slfunc){slfunc=window.getSelection ? window.getSelection():document.selection;}return slfunc;}});})();(function(){igk.winui.initClassControl("igk-ctrl-options",function(){});})();(function(){function __init_card_id(){var q=this;var _2PI=igk.math._2PI;var _src=q.getAttribute('igk:link');q.o.removeAttribute('igk:link');var _data={img:_src==null ? null :q.add("img").addClass("posab dispn").setAttribute("src",_src).reg_event("load",function(evt){_data.render();q.o.removeAttribute('igk:link');}).reg_event("error",function(){console.error("/!\\ Error on loading image "+ _src);}),storyline:(function(){var s=q.add("div").addClass("posab dispn story-line");var bg=s.add("div").addClass("posab dispn bg");var bdr=s.add("div").addClass("posab dispn bdr");return{"bg":bg,"bdr":bdr};})(),canva:q.add("canvas"),ctx:null,render:function(w,h){if(this.ctx==null){this.ctx=this.canva.o.getContext('2d');}var w=igk.getNumber(this.canva.getComputedStyle("width"));var h=igk.getNumber(this.canva.getComputedStyle("height"));var v_bdrcl=_data.storyline.bdr.getComputedStyle("color");var v_bg=_data.storyline.bg.getComputedStyle("background-color");var v_bdrs=igk.getNumber(_data.storyline.bdr.getComputedStyle("height"))||4;var _ctx=this.ctx;var cx=w / 2;var cy=h / 2;var penw=v_bdrs;var minR=Math.min(w / 2,h / 2);var R=minR- (penw / 2);var r=minR- (penw / 2)- 10;this.canva.setAttribute("width",w);this.canva.setAttribute("height",h);if((R<0)||(r<0))return;_ctx.clearRect(0,0,w,h);_ctx.fillStyle=v_bg;_ctx.arc(cx,cy,R,0,_2PI,false);_ctx.closePath();_ctx.fill();_ctx.save();_ctx.clip();if(this.img && this.img.o.complete){var _W=w- 8;var _H=h- 8;var zx=_W / this.img.o.width;var zy=_H / this.img.o.height;var zx=Math.min(zx,zy);_ctx.drawImage(this.img.o,4+ ((_W- (this.img.o.width*zx))/ 2),4,this.img.o.width*zx,this.img.o.height*zx);}_ctx.restore();_ctx.strokeStyle=v_bdrcl;_ctx.lineWidth=v_bdrs;_ctx.arc(cx,cy,R,0,_2PI,false);_ctx.closePath();_ctx.stroke();}};_data.render();};igk.winui.initClassControl("igk-card-id",__init_card_id,{desc:"igk card id"});})();(function(){igk.system.createNS("igk.balafonjs",{initComponent:function(t){t=t||igk.getParentScript();if(!t)return;var st=igk.winui.getClassList();$igk(t).add("div").setHtml(st);}});igk.ctrl.registerAttribManager("igk-balafonjs",{"desc":"inline script to be evaluate."});igk.ctrl.bindAttribManager("igk-balafonjs",function(m,v){if(m){const self=this;(new Function('self',v)).apply(self,[self]);}});})();(function(){function __init(){var q=this;var def=[];var v_idx=0;var cur=0;var m_roles={};var m_autosweep=0;igk.appendProperties(q,{movenext:function(){if(v_idx<=def.length- 1){goTo(def[v_idx]);v_idx++;update_role();}},moveback:function(){if((v_idx>1)&&(def.length>0)){goTo(def[v_idx- 2]);v_idx--;update_role();}}});function reg_role(t,n){if(!(t in m_roles)){m_roles[t]=[];}m_roles[t].push(n);};function update_role(){var t=m_roles["prev"];for(var s=0;s<t.length;s++){if(v_idx<=1){t[s].addClass("dispn");}else{t[s].rmClass("dispn");}}t=m_roles["next"];var s=(def.length>0)&&(v_idx<def.length);for(var k=0;k<t.length;k++){if(s){t[k].rmClass("dispn");}else{t[k].addClass("dispn");}}};function goTo(o){q.scrollTo(o.o);cur=o;};q.select(">>").each(function(){if(this.o.tagName && this.o.tagName.toLowerCase()=="div"){var obj=igk.JSON.parse(this.getAttribute("igk-hpageview-data"));var id=this.getAttribute("id")||((def.length+ 1)+"");def[id]=this;def.push(this);if(!obj){obj={p:null,n:null};}if(m_autosweep){this.reg_event("click",function(){q.movenext();});}}return !0;});q.getParentNode().select("input").each_all(function(){var s=this.getAttribute("igk-hpageview-role");if(s){reg_role(s,this);}});if(def.length>0)v_idx=1;q.scrollTo(def[0]);igk.winui.reg_event(window,"resize",function(){var b=q.getComputedStyle("transition");if(b){q.setTransition("none");}setTimeout(function(){if(cur){goTo(cur);}},2000);});update_role();};igk.winui.initClassControl("igk-hpageview",__init,{desc:"igk-pageview control"});})();(function(){var START_ELEMENT=1;var END_ELEMENT=2;var ATTRIBUTE=3;var TEXT=4;var PROCESSOR=5;var IGK_TAGNAME_CHAR_REGEX=/[0-9a-z\-\:_\.]/;function _html_domProperty(){return{createElement:function(t){return document.createElement(t);},createTextElement:function(v){return document.createTextNode(v);},getNS:function(){return null;}};};igk.system.createNS("igk.dom",{isChild(o,p){while(o &&(o !=p)){o=o.parentNode;}return o !=null;},isParent(s,p){while(s && p &&(s.nodeType==1)){if((s=s.parentNode)==p)return 1;}return 0;},loadBeforeReverse(n,i,c){let _c=$igk(n);i=$igk(i);while(i.o.lastChild){if(c)c(i.lastChild);_c.o.parentNode.insertBefore(i.o.lastChild,_c.o);}},loadBefore(n,i,c){let _c=$igk(n);i=$igk(i);while(i.o.firstChild){if(c)c(i.o.firstChild);_c.o.parentNode.insertBefore(i.o.firstChild,_c.o);}},loadDocument:function(txt,p){p=p||_html_domProperty();var c=new igk.dom.reader(txt);var root=null,i=null,cnode=null;var ns=p.getNS();var stop=1;while(stop && c.read()){switch(c.type){case PROCESSOR:throw "not used";case ATTRIBUTE:for(i in c.attribs){cnode.setAttribute(i,c.attribs[i]);}break;case TEXT:if(cnode){if(cnode.childNodes.length==0){cnode.innerHTML=c.value;}else{cnode.appendChild(p.createTextElement(c.value));}}break;case START_ELEMENT:var m=p.createElement(c.name,c);if(ns){m.setAttribute("xmlns",ns);}if(m.tagName=="SCRIPT"){c.readScript(m);}if(root==null){root=m;cnode=root;}else{if(cnode==null){cnode=p.createElement("dummy");cnode.appendChild(root);root=cnode;cnode.appendChild(m);cnode=m;}else{cnode.appendChild(m);cnode=m;}}break;case END_ELEMENT:if(cnode)cnode=cnode.parentNode;break;default:console.debug("element ignored "+ c.type);break;}}return root;},reader:function(txt){this.txt=txt;this.pos=0;this.isEmpty=1;this.hasAttrib=0;this.attribs=null;var self=this;function __canRead(){return((self.pos>=0)&&(self.txt && txt.length>=0)&&(self.pos<self.txt.length));};function __readName(){var v="";while(__canRead()&& IGK_TAGNAME_CHAR_REGEX.exec(self.txt[self.pos])){v+=self.txt[self.pos];self.pos++;}return v;};function __readLine(){var v="";var v_ch=0;while(self.pos<self.txt.length){v_ch=self.txt[self.pos];if(v_ch=="\n"){break;}v+=v_ch;self.pos++;}return v;};function __readAttributes(){var v="";while(__canRead()){v+=self.txt[self.pos];if(v.length>2 &&(v.substring(v.length- 2)=="/>")){v=v.substring(0,v.length- 2);self.isEmpty=1;break;}else if((v.length>0)&&(v.substring(v.length- 1)==">")){v=v.substring(0,v.length- 1);self.isEmpty=0;break;}self.pos++;}return igk.system.string.trim(v);};function __readTo(end){var v="";var ln=end.length;while(__canRead()){v+=self.txt[self.pos];if(v.length>=ln &&(v.substring(v.length- ln)==end)){v=v.substring(0,v.length- ln);break;}self.pos++;}return igk.system.string.trim(v);}function __loadAttribs(h){var s={};h.replace(igk.regex().attribs,function(m){var t=m.split('=');var kl=/^("|')/.exec(t[1])? t[1].substring(1,t[1].length- 1):t[1];s[t[0]]=kl;});return s;}igk.appendProperties(this,{"name":null,"value":null,"type":null,read:function(){if(this.type==START_ELEMENT){var h=__readAttributes();if(h.length>0){this.hasAttrib=1;this.type=ATTRIBUTE;this.attribs=__loadAttribs(h);return 1;}else if(this.isEmpty){this.type=END_ELEMENT;return 1;}}else if((this.type==ATTRIBUTE)&&(this.isEmpty)){this.type=END_ELEMENT;return 1;}var v_r=1,v_enter=0,v_ch=0,v_temp;while(__canRead()){v_r=0;v_ch=this.txt[this.pos];switch(v_ch){case "<":v_enter=1;break;case ">":if((this.type==ATTRIBUTE)||(this.type==START_ELEMENT)){var c_pos=this.pos++;v_ch="";v_temp=__readTo("<");if(v_temp.length>0){this.type=TEXT;this.value=v_temp;this.isEmpty=false;this.hasAttrib=false;return 1;}else this.pos=c_pos;}break;case "?":if(v_enter){v_tmp=__readTo("?>");}break;case "!":if(v_enter){v_tmp=__readTo("-->");}break;case "/":if(v_enter){this.pos++;this.type=END_ELEMENT;this.name=__readName();this.value=null;this.isEmpty=false;this.hasAttrib=false;return true;}break;default:if(v_enter){if(v_ch==" ")throw new Error("empty char not valid");this.name=__readName();this.value=null;this.type=START_ELEMENT;this.isEmpty=false;this.hasAttrib=false;v_enter=0;return true;}break;}this.pos++;}if(v_r){return false;}return true;},skip:function(){if(this.type==START_ELEMENT){if(!_isEmpty){$n=this.name.lowerCase();var depth=0;var end=0;while(!end && this.Read()){switch(this.type){case START_ELEMENT:depth++;break;case END_ELEMENT:if((!depth)&&(this.name.lowerCase()==n)){end=true;}else if(depth>0)depth--;break;}}return end;}}return 0;},readScript:function(m){var q=this;var v="";var i={};var dx=0;var v_ch=0;var attribs=__readAttributes();if(attribs.length>0){q.type=ATTRIBUTE;q.attribs=__loadAttribs(attribs);for(i in q.attribs){m.setAttribute(i,q.attribs[i]);}}var e=0;while(!e && __canRead()){q.pos++;v_ch=q.txt[q.pos];switch(v_ch){case ">":break;case "<":if(q.txt[q.pos+ 1]=="/"){q.pos+=2;var n=__readName();if(n.toLowerCase()==m.tagName.toLowerCase()){q.type=END_ELEMENT;q.value=n;e=1;break;}}v+=v_ch;break;case "\'":case '"':var spos=q.pos;while((dx=q.txt.indexOf(v_ch,q.pos+ 1))!=-1){if(dx>0){if(q.txt[dx- 1]=="\\"){q.pos=dx;continue;}}break;}if(dx>spos){v+=q.txt.substr(spos,dx- spos+ 1);q.pos=dx;}break;case "/":if(q.txt.length- 1>q.pos){switch(q.txt[q.pos+ 1]){case "/":v+=__readLine();break;case "*":dx=q.txt.indexOf("*\/",q.pos+ 2);v+="\/*"+ q.txt.substr(q.pos,dx- q.pos);q.pos=dx+ 1;break;}}break;default:v+=v_ch;break;}}m.innerText=v;console.debug("done :"+ v);}});},childto_array:function(n){var t=$igk(n).o.childNodes;var o=[];if(t){for(var s=0;s<t.length;s++){o.push(t[s]);}}return o;}});})();(function(){var m_symbols=[];var m_noloads=[];var m_keyloads={};var m_ns=igk.namespaces.svg;function __loadSvg(text){return igk.dom.loadDocument(text,{createElement:function(tag){return document.createElementNS(m_ns,tag);},getNS:function(){return m_ns;}});};function __init(){var n=this.getAttribute("igk:svg-name");var g=m_symbols[n];if(g){var c=g.clone();c.setAttribute("class",this.getAttribute("class"));this.o.parentNode.replaceChild(c.o,this.o);}else{m_noloads.push(this);var kobj={name:n,t:this};if(!m_keyloads[n])m_keyloads[n]=[];m_keyloads[n].push(kobj);}};function __initsymbol(){var n=this.getAttribute("id");if(!m_symbols[n]){var ot=this.o.outerHTML;var doc=ot ? $igk(__loadSvg(ot)):null;if(!doc){m_symbols.push(this);m_symbols[n]=this;}else{m_symbols.push(doc);m_symbols[n]=doc;}if(m_keyloads[n]){for(var ii=0;ii<m_keyloads[n].length;ii++){var t=m_keyloads[n][ii].t;__init.apply(t);}m_keyloads[n]=null;delete(m_keyloads[n]);}}};function __loadSymbols(f){if(igk.getSettings().nosymbol){return;}igk.io.file.load(f,function(d){if(typeof(d.data)!="string"){if(d.error){return;}}var d=igk.utils.getBodyContent(d.data);var q=igk.createNode("div").setHtml(d);var svg_c=0;var t=q.select(">>").each(function(){if(this.o.tagName){switch(this.o.tagName.toLowerCase()){case "svgs":var m=this;m.select(">> svg").each_all(function(){this.fn.svg=f;__initsymbol.apply(this);});break;case "svg":__initsymbol.apply(this);svg_c++;break;}}return !0;});igk.publisher.publish("sys://svg/lds",{target:this,file:f,count:svg_c,selector:t});});};igk.system.createNS("igk.svg",{useSvg(n){let d=$igk.createNode('span');d.addClass("igk-svg-lst-i");d.setAttribute("igk:svg-name",n);return d;},loadSymbols:__loadSymbols,append:function(n,t){var sv=igk.svg.newSvgContainer(n);t.add(sv);sv.init();},getLoadedKey:function(){var t=[];for(var i=0;i<m_symbols.length;i++){t.push(m_symbols[i].getAttribute("id"));}return t;},newSvgContainer:function(n){var q=igk.createNode("div");q.setAttribute('igk:svg-name',n).addClass("igk-svg-symbol "+ n);return q;},newSvgDocument:function(){return $igk(document.createElementNS(igk.namespaces.svg,'svg')).setAttributes({version:'1.1'});}});igk.winui.initClassControl("igk-svg-symbol",__init,{desc:"igk-svg-symbol item. get a symbol from a svg document files and render it to content"});var n=igk.createNode("div");n.addClass("igk-svg-symbol-lists");igk.ready(function(){if(igk.getSettings().nosymbol){return;}igk.dom.body().appendChild(n.o);var h=n.getComputedStyle("content",":before");if(h &&(h !='none')){var lst=h.replace(/"/g,'').split(',');for(var i=0;i<lst.length;i++){igk.svg.loadSymbols(lst[i]);}}n.remove();});})();(function(){function __init(){igk.initpowered(this.o);}igk.winui.initClassControl("igk-powered",__init,{desc:"manage powered message"});})();(function(){function __init(){var hr=this.getAttribute("href");var n=this.getAttribute("igk:title");this.reg_event("click",function(){window.open(hr);});this.add(igk.svg.newSvgContainer(n));}igk.winui.initClassControl("igk-comm-lnk",__init,{desc:"represent a communication link node. image will be by default a igk-svg-symbol"});})();(function(){var m_pages=[];function __init(){m_pages.push(this);var s=igk.winui.screenSize();var w=s.width;var h=s.height;_update_i(this,w,h);};function _update_i(k,w,h){k.setCss({height:"auto"});if(k.o.offsetHeight<h){k.setCss({height:h+"px"});}else{k.setCss({height:k.o.offsetHeight+"px"});}if(k.o.offsetWidth<w){}}function __update(){var s=igk.winui.screenSize();var w=s.width;var h=s.height;for(var i=0;i<m_pages.length;i++){var k=m_pages[i];_update_i(k,w,h);}}var tmout=0;igk.winui.initClassControl("igk-page",__init,{desc:"page management"});igk.winui.reg_event(window,"resize",function(){clearTimeout(tmout);if(m_pages.length>0){tmout=setTimeout(function(){__update();},500);}});})();(function(){igk.winui.initClassControl("igk-js-btn-show-dialog",function(){var _id=this.getAttribute("igk:dialog-id");if(_id){this.reg_event("click",function(){ns_igk.winui.showDialog(_id);return !1;});}},{desc:"JS Component to show inline ms dialog button"});})();(function(){function __init_input_regex(ctx){if(!this.o.tagName||(this.o.tagName.toLowerCase()!='input')||!/(text|password|email)/i.exec(this.o.type))return;var q=this;var def="sys://control/inputregex";if(q.data[def]){return !1;}q.data[def]=1;q.data[def+"/class"]=ctx;var _rg=this.getAttribute("igk:char-regex");var _rg_opt=this.getAttribute("igk:char-regex-option")||"i";var _ig=this.getAttribute("igk:input-regex");var _ig_opt=this.getAttribute("igk:input-regex-options")||"i";var _e_msg=this.getAttribute("igk:error-msg");var _e_id_msg=this.getAttribute("igk:error-target-id");var _ms_n=null;if(_ig){_ig=new RegExp("^"+ _ig+"$",_ig_opt);this.reg_event("change",function(){q.igkCheckIsInvalid();});q.igkIsInvalid=function(){return _ig.exec(q.o.value);};q.igkCheckIsInvalid=function(){if(_ms_n){$igk(_ms_n).remove();_ms_n=null;}if(q.igkIsInvalid()){q.rmClass("igk-invalid");return !1;}else{q.addClass("igk-invalid");_ms_n=igk.createNode('div');_ms_n.addClass("igk-e-msg");if(_e_id_msg){var _st=$igk(_e_id_msg);if(_st){_ms_n.setHtml(_st.getHtml());}}else{if(_e_msg){_ms_n.setHtml(_e_msg);}}q.insertAfter(_ms_n.o);return !0;}};}if(!_rg)return;var _emsg=this.getAttribute("igk:error-msg");_rg=new RegExp(_rg,_rg_opt);this.reg_event("invalid",function(){q.o.setCustomValidity(_emsg);});this.reg_event("keypress",function(evt){evt.stopPropagation();var c=evt.charCode||evt.keyCode;var ctrlkey=evt.ctrlKey;var altKey=evt.altKey;var ch=evt.char||evt.key;if(!ctrlkey && !altKey &&(c>31)&& !_rg.exec(ch))evt.preventDefault();return !1;});this.reg_event("input",function(){q.o.setCustomValidity("");});this.reg_event("paste",function(evt){if(evt.clipboardData.types<=0)return;var d=evt.clipboardData.getData("text/plain");for(var i=0;i<d.length;i++){if(!_rg.exec(d[i])){evt.stopPropagation();evt.preventDefault();break;}}return !1;});if(q.o.value)q.igkCheckIsInvalid();return !0;}igk.ctrl.registerAttribManager("igk-input-regex",{desc:"used to validate inform balafon js to validate data",ns:'validation'});igk.ctrl.bindAttribManager("igk-input-regex",function(a,v){if(!a||!v){return;}__init_input_regex.apply(this,['attrib']);});igk.winui.initClassControl("igk-input-regex",function(){if(!this.o.tagName||(this.o.tagName.toLowerCase()!='input'))return;__init_input_regex.apply(this,['class']);},{desc:"JS input-regex component"});})();(function(){function inputdata(target,b){this.target=target;this.options=b;var a=$igk(target);var self=this;function __updatecal(){if(self.options.update)self.options.update(a.o.value);}function __removeSelectedChars(target){var h=(target.value+"");var i=target.selectionStart;target.value=igk.system.string.remove(h,target.selectionStart,target.selectionEnd- target.selectionStart);target.selectionStart=i;target.selectionEnd=i;}a.reg_event("keypress",function(evt){if(evt.key){if(evt.charCode>0){var old=""+ evt.target.value;var p=null;var v_update=false;if(evt.target.selectionStart==evt.target.value.length){old=old+""+ evt.key;}else{p=evt.target.selectionStart;if(p !=evt.target.selectionEnd){var m=igk.system.string.remove(old,p,evt.target.selectionEnd- p);old=igk.system.string.insert(m,p,evt.key)}else old=igk.system.string.insert(old,p,evt.key);p++;}if(new RegExp(self.options.regex).exec(old)){if(old=="-")evt.target.value="-";else{evt.target.value=old;}v_update=!0;}if(v_update &&(p !=null)){evt.target.selectionStart=p;evt.target.selectionEnd=p;}__updatecal();evt.preventDefault();}else{if(!(evt.keyCode>0)){evt.preventDefault();}else{var s=evt.getPreventDefault();if(!s){var i=evt.target.selectionStart;var h=(evt.target.value+"");switch(evt.keyCode){case 8:if(i>=0){if(h.length==i){evt.target.value=h.substring(0,i- 1);}else{if(i==evt.target.selectionEnd){evt.target.value=igk.system.string.remove(h,i- 1,1);evt.target.selectionStart=i- 1;evt.target.selectionEnd=i- 1;}else{__removeSelectedChars(evt.target);}}__updatecal();}evt.preventDefault();break;case 46:if((evt.target.selectionStart==evt.target.selectionEnd)&&(i<h.length)){evt.target.value=igk.system.string.remove(h,i,1);evt.target.selectionStart=i;evt.target.selectionEnd=i;}else if(i !=evt.target.selectionEnd){__removeSelectedChars(evt.target);}__updatecal();evt.preventDefault();break;}}}}}return !1;});}function __init(){var s=this.getAttribute("igk-input-data");var b=null;b=_eval("("+ s+")");if(b && b.regex){new inputdata(this,b);}}igk.ctrl.bindAttribManager("igk-input-data",__init);})();(function(){igk.winui.initClassControl("igk-form-sbtn",function(){var q=this;if(q.o.tagName.toLowerCase()=="a"){var f=q.getAttribute("href");var frm=q.getParentByTagName("form");if(frm){q.reg_event("click",function(evt){evt.stopPropagation();evt.preventDefault();if((f=='#')||(f=='')){switch(q.getAttribute("igk:rel")){case "rel":default:frm.reset();break;}}else{frm["action"]=f;frm.submit();}return !1;});}}});igk.winui.initClassControl("igk-form-sbtn-ajx",function(){var q=this;if(q.o.tagName.toLowerCase()=="a"){var f=q.getAttribute("href");var c=0;q.reg_event("click",function(evt){evt.stopPropagation();evt.preventDefault();if(c==0){c=1;igk.ajx.post(f,null,function(){if(this.isReady()){igk.ajx.fn.replace_or_append_to_body.apply(this,arguments);c=0;}});}return !1;});}});})();(function(){igk.winui.initClassControl("igk-ajx-pickfile",function(){var q=this;var u=this.getAttribute("igk:uri");if(u==null){console.error("/!\\ igk-ajx-pickfile: no uri found found ");return;}var s=this.getAttribute("igk:data");var p=igk.JSON.parse(s,this);if(typeof(p)!='object'){p={};}if(q.o.tagName.toLowerCase()=="input"){var n=igk.dom.replaceTagWith(q,"div");var v=q.getAttribute("value");n.setHtml(v ? v :q.getHtml());n.o.removeAttribute("value");n.o.removeAttribute("type");n.o.removeAttribute("igk:uri");n.o.removeAttribute("igk:data");n.o.removeAttribute("igk:uri");q=n;}if(q.o.classList.contains('btn')!==1){if(q.o.nextSibling &&(q.o.nextSibling.nodeType==q.o.TEXT_NODE)){q.add('div').setHtml(q.o.nextSibling.textContent);$igk(q.o.nextSibling).remove();}}q.reg_event('click',function(evt){evt.preventDefault();evt.stopPropagation();var cp={};cp.type=p && p.type && p.type.exec("(p|l)")? p.type :'p';cp.complete=(p ? p.complete :null)||function(s){if(this.isReady()){if(p && p.complete){p.complete.apply(this,[s,q]);}else{this.source=q;igk.ajx.fn.replace_or_append_to_body.apply(this,arguments);}if(_pl){_pl.each_all(function(){this.setHtml('');});}_pl=null;}};var _pl=null;cp.progress=(p ? p.progress :null)||function(e){if(!_pl)_pl=$igk("#igk-pickfile-progress");_pl.each_all(function(){switch(cp.type){case "p":this.setHtml(Math.round((e.loaded / e.total)*100)+"%");break;default:this.setHtml(e.loaded+" / "+ e.total);break;}});};cp.start=p ? p.start :null;cp.accept=p ? p.accept :null;igk.system.io.pickfile(u,cp);});},{desc:"Used to pick file in ajx context"});})();(function(){igk.winui.initClassControl("igk-xsl-node",function(){var u=igk.JSON.parse(this.getAttribute("igk:xslt-data"));if(u){var q=this;igk.ready(function(){igk.dom.transformXSLUri(u.xml,u.xsl,function(d){if(u.target){var s=$igk(d).select(u.target);var t=s &&(s.o.length==1)&& s.first();if(t){q.setHtml(t.o.innerHTML);q.select('>>').each_all(function(){igk.ajx.fn.initnode(this.o);});igk.publisher.publish("sys://doc/changed",igk.publisher.createEventData());return;}}q.o.appendChild(d);igk.publisher.publish("sys://doc/changed",igk.publisher.createEventData());});});}},{desc:'used no build xsl node',create:function(xml,xsl){if((!xml)||(!xsl)){throw('Arguments not valid');}var n=igk.createNode('div');n.addClass("igk-xsl-node");n.setAttribute("igk:xslt-data",igk.JSON.convertToString({xml:xml,xsl:xsl}));return n;}});})();(function(){function __update(v){var q=this;var w=igk.getNumber(q.getComputedStyle("width"));var h=igk.getNumber(q.getComputedStyle("height"));if(w && h){var fc=new Function('obj='+ v+';');exp=fc.apply();console.log(exp);this.setCss(exp);}}function __init(n,v){if(!n){}var q=this;var g=null;function __runfix(){__update.apply(q,[v]);};igk.appendProperties(q,{"fix":{"update":__runfix}});igk.winui.reg_event(window,"resize",g=function(){__update.apply(q,[v]);});q.fix.update();igk.publisher.register("sys://html/doc/scroll",__runfix);}igk.ctrl.registerAttribManager("igk-attr-fix-position",{desc:'used to correct element position according to expression'});igk.ctrl.bindAttribManager("igk-attr-fix-position",__init);})();(function(){igk.system.createNS("igk.thread",{wait:function(t,tg,fc){if(t<=0){fc.apply(tg);return;}var s=1;function _th_wait_fc(){if(s)s=0;fc.apply(tg);};setTimeout(_th_wait_fc,t);}});igk.winui.initClassControl("igk-ajx-uri-loader",function(){var u=this.getAttribute("igk:href");var a=this.getAttribute("igk:append");var self=this;if(u){var q=$igk(this.o.parentNode);var ta=q.select(a).first();igk.ajx.get(u,null,function(xhr){if(this.isReady()){var x=this;this.source=q;igk.thread.wait(0,xhr,function(){if(a){if(ta){igk.ajx.fn.replace_or_append_to(ta).apply(x,[xhr]);}else igk.ajx.fn.replace_or_append_to(q).apply(x,[xhr]);}else{q.setHtml(xhr.responseText).init();}self.remove();});}else if(xhr.readyState==4){self.remove();}},true);}},{desc:'used load uri content in ajx context'});})();(function(){igk.system.createNS("igk.html5",{audioContext:window.AudioContext||window.webkitAudioContext,});var _no_context="no-audio-context";igk.system.createNS("igk.html5.audioBuilder",{getComponents:function(){if(!igk.html5.audioContext)return _no_context;var s=new igk.html5.audioContext();var i=0;var o=[];var m="";if(s){for(var a in s){if(typeof(s[a])=="function" && /^create/.test(a)){if(i)m+=",";m+=a.substring(6);i=1;}}}return m;},getComponentsDescriptionFile:function(){function _getargs(nn){var args={"Buffer":[2,20500,41100],"PeriodicWave":[new Float32Array(3),new Float32Array(3)],"MediaStreamSource":[null],"MediaElementSource":[igk.createNode("audio")]};if(nn in args)return args[nn];return[];};var r=igk.html5.audioBuilder.getComponents();if(r==_no_context)return;var s=new igk.html5.audioContext();var t=r.split(',');var m=igk.createNode("webaudiodef");var k=null;for(var i=0;i<t.length;i++){k=m.add("node");k.setAttribute("Name",t[i]);k.setAttribute("desc","");try{var d=s["create"+ t[i]].apply(s,_getargs(t[i]));for(var jj in d){k.add("property").setAttribute("name",jj);}}catch(e){console.debug("error "+ e);}}igk.io.file.download("application/xml","data.xml",m.render());return 1;}});})();(function(){igk.system.createNS("igk.html5",{freeWebGLContext:function(gl){gl=gl||m_gl;if(gl){c=gl.getExtension('WEBGL_lose_context');if(c){c.loseContext();}}if(m_gl==gl)m_gl=null;},createWebGLContext:function(c){return c.getContext("webgl")||c.getContext('experimental-webgl');}});})();(function(){var m_contexts=[];var _params=null;var m_gl=0;var _def=0;var _pause=0;function _Run(ol){var gl=ol.gl;var fc=igk.animation.getAnimationFrame();var e=0;var loop=function(){if(!_pause){ol.listener.tick(gl);e=gl.getError();if(e){throw "render failed cause of an error "+ e;}}fc(loop);};fc(loop);};igk.system.createNS("igk.html5.drawing",{getContext:function(){return m_contexts;},gameContextListener:function(){var _p_data=_params;var _canvas=_p_data.canvas;var _self=this;var _p_settings=null;$igk(_canvas).addClass("igk-game-surface");igk.winui.reg_event(window,'resize',function(){_self.updateSize(_p_data.gl);_self.raise("sizeChanged");});_params=null;igk.appendProperties(this,{toString:function(){return "[class: igk.html5.drawing.gameContextListener]";},raise:function(n){var e={target:this};if(arguments.length>1){e.param=arguments[1];}igk.publisher.publish("igk.bge://"+ n,e);return this;},on:function(n,callback){igk.publisher.register("igk.bge://"+ n,callback);return this;},setBgColor:function(bg){_bgCl=bg;},initContext:function(gl){},initGame:function(gl){},render:function(gl){gl.clearColor(_bgCl.r,_bgCl.g,_bgCl.b,_bgCl.a);gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT);},updateWorld:function(gl){},loadContent:function(gl){},unloadContent:function(gl){},updateSize:function(gl){},tick:function(gl){this.updateWorld(gl);this.render(gl);},capture:function(u,w,h){_pause=1;var c=$igk(this.canvas).getParent().select(".scene").first();var v_bck=$igk(this.canvas).o.style;$igk(this.canvas).setCss({position:"fixed"});this.updateSize(_def.gl,w,h);this.tick(_def.gl);var i=this.canvas.toDataURL();this.updateSize(_def.gl,null,null);$igk(this.canvas).o.style=v_bck;_pause=0;if(u){igk.ajx.post(u,"data="+ i,igk.ajx.fn.none);}return i;},fullscreen:function(){var c=$igk(this.canvas);var fc=igk.fn.getItemFunc(c.o,"requestFullScreen");if(fc){this.raise("fullsizeRequest");fc.apply(c.o);}}});igk.defineProperty(this,"canvas",{get:function(){return _canvas;}});igk.defineProperty(this,"gl",{get:function(){return _p_data.gl;}});igk.defineProperty(this,"settings",{get:function(){return _p_settings;}});_currentGame=this;},FreeContext:igk.html5.freeWebGLContext,CreateContext:function(q,listener){var canvas=q.o;var _ol=listener||q.getAttribute("igk-webgl-game-attr-listener");var gl=igk.html5.createWebGLContext(canvas);var _m=$igk(q.o.parentNode).add("div").addClass("scene dispn posfix");var _mcl=_m.getComputedStyle("backgroundColor");var _clbg=igk.system.colorFromString(_m.getComputedStyle("backgroundColor")).toInt();if(!gl){if(igk.navigator.isSafari())return 0;ctx=canvas.getContext("2d");ctx.clearRect(0,0,canvas.width,canvas.height);ctx.fillStyle=igk.system.colors.cornflowerblue;ctx.fillRect(0,0,canvas.width,canvas.height);ctx.fillStyle=igk.system.colors.darkblue;ctx.font="12pt courrier new";ctx.fillText("Sorry but your browser does not support WEBGL. try with another one",0,(canvas.height / 2),100 );return 0;}igk.winui.reg_event(window,"pagehide",function(){gl=null;q.remove();});if(!canvas.getAttribute("width"))canvas.width=200;if(!canvas.getAttribute("height"))canvas.height=200;_params={canvas:q.o,gl:gl,enable_error_handler:1};function _createOl(fc){return new fc();};if(_ol){switch(typeof(_ol)){case 'string':{var ns=igk.system.getNS(_ol);if(typeof(ns)=='function'){_ol=_createOl(ns);}else{console.debug("/!\\ No game definition class found. [ "+ _ol+" ]");_ol=null;}}break;case "function":_ol=_createOl(_ol);break;}}else{console.error("/!\\ igk-webgl-game-attr-listener not provided. ");_ol=0;}var cl=igk.system.colors.toFloatArray(_clbg);if(!_ol){gl.clearColor(cl.r,cl.g,cl.b,cl.a);gl.clear(gl.COLOR_BUFFER_BIT|gl.DEPTH_BUFFER_BIT);return 0;}else{gl.TRUE=1;gl.FALSE=0;_ol.setBgColor(cl);_ol.initGame(gl);_ol.updateSize(gl);_ol.initContext(gl);_ol.loadContent(gl);var ol={listener:_ol,gl:gl};m_gl=gl;igk.winui.reg_event(window,"pagehide",function(){igk.html5.drawing.FreeContext(gl);});_def=ol;_Run(ol);}return ol;}});igk.winui.initClassControl("igk-webgl-game-surface",function(){var q=this;setTimeout(function(){var n=q.add(igk.createNode('canvas'));var g=igk.html5.drawing.CreateContext(n,q.o.getAttribute("igk-webgl-game-attr-listener"));if(!g){console.log('/!\\ can not attach webgl to surface . something bad happen');n.remove();return;}q.add(n);g.listener.canvas.setAttribute("id",q.o.getAttribute("id"));q.o.removeAttribute("id");},500);},{desc:'webgl graphic surface',create:function(listener){var n=igk.createNode('canvas');n.addClass('igk-webgl-game-surface');if(listener)n.setAttribute("igk-webgl-game-attr-listener",listener);return n;}});})();(function(){function __media_setting(q,b){q.setAttribute("style","display:none !important");var m_inf={};function __media_change(){console.debug("media change");var c=igk.css.getMediaType();if((c !='global')&& !(c in m_inf)){var d=document.createElement("div");w=igk.getNumber(q.getComputedStyle("width"));h=igk.getNumber(q.getComputedStyle("height"));d.setAttribute("width",w);d.setAttribute("height",h);$igk(d).addClass(q.o.className+" "+ c).setCss({width:w+"px",height:h+"px","backgroundImage":"url('"+ b+"&w="+ w+"&h="+ h+"')"});$igk(d).setConfig("igk:callAttribBindingData",1);$igk(d).setConfig("igk:initnode",1);q.o.parentNode.appendChild(d);m_inf[c]=d;}};igk.appendProperties(this,{change:__media_change});igk.publisher.register(igk.publisher.events.mediachanged,this.change);}igk.winui.initClassControl("igk-winui-media-img",function(){var q=this;var b=q.getAttribute("igk:base");var c=new __media_setting(q,b);c.change();});})();(function(){var parallax=[];function __i_parallax(){var q=this;var p=q.getAttribute("igk:data");q.setCss({backgroundImage:"url('"+ p+"')",backgroundPosition:"center"});var m=new function(){igk.appendProperties(this,{callback:function(evt){var of;var m_t=$igk(evt.target).getscrollMaxTop();var v_c=q.o;var c_h=q.o.scrollHeight;if(m_t>0)of=parseInt((evt.target.scrollTop / m_t)*100.0);else{of=0;}var p=Math.round((of / 200.0)*10)*2;var cl="igk-pos-"+ p;if(!(new RegExp(cl+"$")).test(q.o.className)){q.rmAllClass("^igk-pos-(.)+$").addClass(cl);}}});};igk.publisher.register('sys://html/doc/scroll',m.callback);};igk.winui.initClassControl("igk-winui-parallax",__i_parallax);})();(function(){igk.winui.initClassControl("igk-winuin-jsa-ex",function(){if(igk.canInvoke()){this.rmClass("dispn");var q=this;var c=this.getAttribute("igk:data");var p=igk.JSON.parse(c);this.reg_event("click",function(){igk.invoke(p.m,p.args);});}else this.remove();});})();(function(){var dialgs=[];var sk=0;function __close(evt){this.remove();}function n_dialog(g){var q=this;q.options=null;q.closeByEscape=0;q.closeBySubmit=1;igk.appendProperties(this,{mediachanged:function(e){q.initLoc();},close:function(evt){__close.apply(g,evt);var m=0;while((m=dialgs.pop())){if(m==q)break;}},showOpts:function(evt){if(q.options){q.options.toggleClass("dispn");}},initLoc:function(){var W=igk.getNumber(g.getComputedStyle("width"));var w=-(W / 2);var h=(-igk.getNumber(g.getComputedStyle("height"))/ 2);if(W !=igk.winui.screenSize().width){g.setCss({position:"fixed",top:'50%',left:'50%',marginLeft:w+"px",marginTop:h+"px"});}else{g.setCss({position:"absolute",top:'auto',left:'auto',marginLeft:"auto",marginTop:"auto"});}},subfunc:function(frm){return function(evt){evt.preventDefault();igk.ajx.postform(frm.o,frm.getAttribute("action"),function(xhr){if(this.isReady()){if(q.closeBySubmit)__close.apply(g,evt);igk.ajx.fn.replace_or_append_to_body.apply(this,[xhr]);}});};}});}function __press(evt){if(dialgs.length>0){switch(evt.keyCode){case 27:console.debug("close by escape");var m=dialgs[dialgs.length- 1];if(m.closeByEscape){m.close();evt.preventDefault();evt.stopPropagation();}break;}}};igk.winui.initClassControl("igk-winui-dialogbox",function(){var g=new n_dialog(this);var v_d=this.getAttribute("igk:data");if(v_d){var e=igk.JSON.parse(v_d);for(var i in g){if(typeof(g[i])=="function")continue;g[i]=e[i];}}this.select(".cls").first().reg_event("click",g.close);var o=this.select(".opts").first().reg_event("click",g.showOpts);g.options=this.select(".d-opts").first();var frm=this.select("form").first();if(frm){frm.reg_event("submit",g.subfunc(frm));frm.select("input").reg_event("keyup keydown keypress",function(evt){if(evt.keyCode==13){evt.preventDefault();return false;}});}if(g.options){g.options.addClass("dispn");g.options.select("a").each_all(function(){var r=this.getAttribute("href");switch(r){case "::close":this.reg_event("click",function(evt){evt.preventDefault();g.close(evt);});break;}});}else{o.addClass("dispn");}this.addClass("posfix ");g.initLoc();igk.publisher.register(igk.publisher.events.mediachanged,g.mediachanged);if(!sk){igk.winui.events.regKeyPress(__press);}dialgs.push(g);});})();(function(){function _rm_js_hide(){igk.qselect(".igk-js-hide").each_all(function(){this.rmClass("igk-js-hide");});}igk.ready(_rm_js_hide);igk.publisher.register(igk.evts.dom[1],function(d){if(d.evt.target==igk.dom.body().o){_rm_js_hide();}});})();(function(){var c_toast=null;function __transition_end(evt){if((c_toast==null)||(evt.target !=c_toast.o)||(evt.propertyName !="opacity"))return;igk.winui.unreg_event(c_toast,"transitionend",__transition_end);c_toast.remove();c_toast=null;};function __init_toast(){if(c_toast){igk.winui.unreg_event(c_toast,"transitionend",__transition_end);c_toast.remove();}var i=this.getHtml();if(this.getAttribute("noHide"))return;this.setCss({opacity:1.0 });var q=this;var _fo=0;c_toast=q;setTimeout(function(){if(_fo)return;igk.winui.reg_event(q,"transitionend",__transition_end);q.setCss({opacity:0.0 });_fo=1;},2000);};igk.system.createNS("igk.winui.controls",{toast:function(){}});igk.winui.controls.toast.show=function(m,type){var d=igk.createNode("div").addClass("igk-winui-toast");if(type){d.addClass(type);};d.setHtml(m);igk.dom.body().add(d);d.init();};igk.winui.controls.toast.initDemo=function(){igk.winui.controls.toast.show("Toast Demonstration");};igk.winui.initClassControl("igk-winui-toast",__init_toast);})();(function(){igk.winui.initClassControl("igk-framebox-dialog",function(n,s){var d=igk.JSON.parse(this.getAttribute("data"));if(!d){d={w:null,h:null};}this.select(".framebox-title").each(function(){igk.ctrl.selectionmanagement.disable_selection(this.o);});igk.winui.framebox.init(this.o,d.w,d.h);});})();(function(){igk.system.createNS("igk.winui.stateBtn",{init:function(q){var o=$igk(q.o.parentNode).select('input').first().o;q.reg_event("click",function(e){e.stopPropagation();e.preventDefault();o.click();});}});})();(function(){function __init_function(){var self=this;var s=this.getAttribute("igk:target");var tv=this.select(">>").first();var _initl=[];var fc=function(t){var c=this;if(t.target==self.o){for(var i=0;i<_initl.length;i++){_initl[i].init();}igk.publisher.unregister("sys://node/init",c.caller);}};igk.publisher.register("sys://node/init",fc);if(s && tv){this.remove();var m={d:s};var q=_eval(s+";");if(q){var g=$igk(q);if(g.isSr()){var i=0;g.each_all(function(){var _ie=tv;if(i){_ie=tv.clone();}this.o.parentNode.replaceChild(_ie.o,this.o);_initl.push(_ie);i=1;});}else{g.o.parentNode.replaceChild(tv.o,g.o);}}}}igk.winui.initClassControl("igk-ajx-update-view",__init_function);})();(function(){function __init_function(){var self=this;var s=this.getAttribute("igk:target");var tv=this.select(">>");if(!s||(tv.getCount()==0))return;var q=_eval(s+";");if(q){if(q.isSr()){q.each_all(function(){var m=this;tv.each_all(function(){m.add(this.clone());});});}else{tv.each_all(function(){q.add(this.clone());});}}}igk.winui.initClassControl("igk-ajx-append-view",__init_function);})();(function(){var m_item={};const _loader=igk.createNode('div');const _event={onSvgItemLoaded:'on-svg-items-list-loaded',onSvgSingleItemLoaded:'on-svg-item-loaded',};function __init_svg_i(){var n=this.getAttribute("igk:svg-name");if(m_item[n]){this.rmClass("igk-svg-lst-i");var g=$igk(m_item[n]).clone();var p=this.o.parentNode;$igk(p).addClass("igk-svg-host");g.o.setAttribute("class",this.o.className);p.replaceChild(g.o,this.o);if(p.getAttribute("title")){$igk(p).qselect("svg > title").remove();}_loader.raiseEvent(_event.onSvgSingleItemLoaded,{name:n,className:this.o.className,item:g.o});}else{console.debug("item not found ["+ n+"]");}};function __initlist(){for(var i=0;i<this.o.childNodes.length;i++){var j=this.o.childNodes[i];if(j.tagName){var tn=j.tagName.toLowerCase();if(!(tn in m_item)){m_item[tn]=$igk(j).select("svg").first();m_item[tn].qselect('title').each_all(function(){this.remove()});}}}this.remove();};function __init_svg_l(){igk.dom.body().select(".igk-svg-lst").each_all(__initlist);_loader.raiseEvent(_event.onSvgItemLoaded);}igk.ready(__init_svg_l);igk.winui.initClassControl("igk-svg-lst",function(){__initlist.apply(this);});igk.ajx.fn.initBeforeReady(function(){$igk(this).select(".igk-svg-lst").each_all(__initlist);});igk.winui.initClassControl("igk-svg-lst-i",__init_svg_i);igk.winui.createSVGLi=function(n){if(m_item[n]){var g=$igk(m_item[n]).clone();return g;}else{console.error("[igk] - svg-lst-item <<"+ n+">> not found");}};const onSvgItemLoaded=_loader.addEvent(_event.onSvgItemLoaded,{});const onSvgSingleItemLoaded=_loader.addEvent(_event.onSvgSingleItemLoaded,{});igk.system.createNS('igk.control.svgLoader',{ready(fc){_loader.on(_event.onSvgItemLoaded,fc);},onItemReady(fc){_loader.on(_event.onSvgSingleItemLoaded,fc);},raise(){onSvgItemLoaded.raiseCreateEvent();}});})();(function(){igk.ajx.fn.registerNodeReady(function(){if(!this.tagName||this.tagName.toLowerCase()!="style")return;var f=$igk("#"+ $igk(this).getAttribute("igk:from")).first();if(f){f.setHtml(this.innerHTML);$igk(this).remove();}});})();(function(){var iframes=[];function __init_iframe(){var f=igk.createNode("iframe");igk.dom.copyAttributes(this.o,f.o);f.reg_event("error",function(){}).reg_event("load",function(){});igk.dom.replaceChild(this.o,f.o);};igk.ready(function(){igk.dom.body().select("igk-iframe").each_all(__init_iframe);});})();(function(){function __init_ptr_btn(){var q=this;var g=igk.JSON.parse(q.getAttribute("igk:data"));var u=0;if(g){if(typeof(g)=='string')u=g;else u=g.uri;}this.reg_event('click',function(e){if(u){ns_igk.winui.print(u);}else{igk.winui.reg_event(window,'beforeprint',function(e){console.debug("before print");console.debug(e);});window.print();}igk.stop_event(e);});};igk.winui.initClassControl('igk-ptr-btn',__init_ptr_btn);})();(function(){igk.winui.initClassControl('igk-ajx-replace-source',function(){console.debug("replaceiont :::: ");var g=igk.ajx.getCurrentXhr();var s=g ? g.source :null;if(!s)return;var d=this.getAttribute("igk:data");var sl=s.select(d);var o=this.getHtml();sl.setHtml(o).init();this.remove();});})();(function(){var doc_e=0;var m_d=0;igk.winui.initClassControl("igk-winui-popup-menu",function(){var attr=this.getAttribute("igk:target");var c=0;if(attr)c=$igk(attr).first();if(!c){this.setCss({"display":"none"});this.remove();return;}var d=igk.createNode("div");d.addClass("igk-guide-menu posfix igk-sm-only igk-xsm-only menu");var dc=igk.dom.body();var initial=0;this.reg_event("click",function(evt){if(!initial){dc.prepend(d);if(c){d.setHtml("<ul>"+ c.getHtml()+"</ul>");}initial=1;}evt.stopPropagation();evt.preventDefault();m_d=d;d.toggleClass("igk-show");});if(!doc_e){igk.winui.reg_event(document,"click",function(){if(m_d && m_d.supportClass("igk-show"))m_d.rmClass("igk-show");});doc_e=1;}});})();(function(){function __render_xml_view_tag(q,n){var tab=[];var s=0;var m=0;var tb=0;var attrs=0;tab.push({n:n,p:q,l:0 });while((s=tab.pop())){if(s.e){m=igk.createNode("div").addClass("l");m.add("span").addClass("sm").setHtml("&lt;");m.add("span").addClass("tag").setHtml(s.n.tagName.toLowerCase());m.add("span").addClass("sm").setHtml("/&gt;");s.p.add(m);continue;}switch(s.n.nodeType){case 1:if(s.n.tagName){m=igk.createNode("div").addClass("l");m.add("span").addClass("sm").setHtml("&lt;");m.add("span").addClass("tag").setHtml(s.n.tagName.toLowerCase());if(s.n.hasAttributes){attrs=s.n.attributes;for(var ai=0;ai<attrs.length;ai++){var la=m.add("span").addClass("attr");let vattr=attrs[ai].value;la.add("span").addClass("n").setHtml(attrs[ai].name);if(vattr.length>0){la.add("span").addClass("sm").setHtml("=");la.add("span").addClass("v").setHtml("\""+ attrs[ai].value+"\"");}}}s.p.add(m);}else{m=igk.createNode("span");m.setHtml("NoTAG ");s.p.add(m);}var tb=s.n.childNodes;if(tb.length==0){if(s.n.content.childNodes.length>0){tb=s.n.content.childNodes;}}if((tb.length==0)||(s.n.innerHTML.trim()=="")){m.add("span").addClass("sm").setHtml("/&gt;");}else{m.add("span").addClass("sm").setHtml("&gt;");var quote=m.add("quote");tab.push({n:s.n,e:1,p:m});for(var mm=tb.length- 1;mm>=0;mm--){tab.push({n:tb[mm],p:quote,l:s.l+ 1});}}break;case 3:s.p.add('div').addClass("t-ctn string").setHtml(s.n.data);break;case 8:var d=s.p.add("div");d.add("span").addClass("sm").setHtml("&lt;").addClass("pr");d.add("span").setHtml(s.n.nodeValue);d.add("span").addClass("sm").setHtml("&gt;").addClass("pr");break;}}}igk.winui.initClassControl("igk-xml-viewer",function(){if(this.getAttribute("igk:loaded"))return;let g=this;if((this.o.innerHTML+"").startsWith("<!--")){let c=this.o.innerHTML.substring(4);c=c.substring(0,c.length- 3).trim();g=igk.createNode("dummy").setHtml(c);}var t=igk.dom.childto_array(g);let b=null;this.setHtml("");for(var i=0;i<t.length;i++){b=t[i];__render_xml_view_tag(this,b);}});})();(function(){igk.system.createNS("igk.event",{stop:function(e){e.preventDefault();e.stopPropagation();}});function _get_fn(n){const tfc=igk.system.getNS(n);var fc=typeof(tfc)==_tf ? tfc :new Function(n);return fc;}var meth=[];const _tf='function';var c=["click","doublick","contextmenu","mouseover","mousedown","mouseup"];for(var j in window){if(j)if(/^on/.test(j)){j=j.substring(2);if(c.indexOf(j)==-1){meth.push(j);igk.ctrl.registerAttribManager("["+ j+"]",{desc:j+" property event"});igk.ctrl.bindAttribManager("["+ j+"]",function(m,n){let fc=n;if(typeof(fc)!=_tf){let g=igk.system.getNS(n);if(typeof(g)!=_tf)fc=new Function(n);else fc=g;}this.o.removeAttribute(m);m=m.substring(1,m.length- 1);this.reg_event(m,function(e){if(fc.apply(this,[e])==!1){igk.event.stop(e);}});});}}}igk.ctrl.registerAttribManager("[click]",{desc:"click property event"});igk.ctrl.registerAttribManager("[doubleclick]",{desc:"doubleclick property event"});igk.ctrl.registerAttribManager("[contextmenu]",{desc:"contextmenu property event"});igk.ctrl.bindAttribManager("[click]",function(m,n){if(n==null){return;}this.o.removeAttribute(m);var fc=_get_fn(n);var q=this;this.reg_event("touchOrClick",function(event){if(event.handle)return;if(fc.apply(q,[event])==false){igk.event.stop(event);}});});igk.ctrl.bindAttribManager("[doubleclick]",function(m,n){if(n==null){return;}this.o.removeAttribute(m);var fc=_get_fn(n);var q=this;this.reg_event("doubleTouchOrClick",function(event){igk.event.stop(event);if(event.handle)return;fc.apply(q,[event]);});});function _initmethod(ms){return function(m,n){if(n==null){return;}this.reg_event(ms,function(e){if(e.handle)return;_eval(n,null,{ms});});};};var mouseevents=["mouseover","mousedown","mouseup"];for(var i=0;i<mouseevents.length;i++){var n=mouseevents[i];igk.ctrl.registerAttribManager("["+ n+"]",{desc:"click property event"});igk.ctrl.bindAttribManager("["+ n+"]",_initmethod(n));}igk.ctrl.bindAttribManager("[contextmenu]",function(m,n){this.o.removeAttribute(m);var fc=_get_fn(n);this.reg_event('contextmenu',function(e){if(fc.apply(this,[e])==!1){igk.event.stop(e);}});this.o.removeAttribute(m);});})();(function(){var bind=function(n){_eval(n);};igk.ctrl.registerAttribManager("[ready]",{desc:"ready run load event"});igk.ctrl.bindAttribManager("[ready]",function(m,n){if(n==null){return;}var q=this;igk.ready(function(){bind.apply(q,[n]);});});})();(function(){igk.winui.initClassControl("igk-js-button",function(){var s=this.getAttribute("igk:js-action");if(s){this.reg_event("click",function(e){_eval(s,[this],[e]);e.preventDefault();e.stopPropagation();});}});})();(function(){igk.winui.initClassControl("igk-winui-more-view",function(){var hide=0;var rem=this.getAttribute("igk:hide");var q=this.o.nextSibling;var b=[];var t=this;t.on("click",function(){t.toggleClass("igk-hide");if(rem){t.remove();}});return;});})();(function(){var _glogger=0;function JSLogger(t){var _editable=t.getAttribute("editable");var _ei={target:t.o,host:this};if(_editable){}t.addEvent("logchanged",_ei);function _raiseEvent(n,p){igk.winui.events.raise(t,n,p);};function _add(te,msg){var g=t.add("div").addClass(te).setHtml(msg);_raiseEvent("logchanged");return g;};igk.appendProperties(this,{add:function(){var g=t.add.apply(t,arguments);return g;},clear:function(){t.setHtml("");},addi:function(msg){return _add('igk-info',msg);},adde:function(msg){return _add('igk-danger',msg);},addw:function(msg){return _add('igk-warning',msg);}});};igk.system.createNS("igk.log",{write:function(msg){if(_glogger)_glogger.add("div").setHtml(msg);else console.debug(msg);},clear:function(){if(_glogger)_glogger.clear();}});igk.winui.initClassControl("igk-winui-js-logger",function(){if(_glogger){return;}_glogger=new JSLogger(this);});})();(function(){function __searchParam(){};igk.system.createNS("igk.winui.form",{post(uri,args){var searchParam=URLSearchParams||__searchParam;var f=document.createElement("form");f["method"]="POST";f["action"]=uri;if((typeof(args)=="string")||(typeof(args)=="object")){var cparam=new searchParam(args);for(const[i,v]of cparam){$igk(f).add("input").setAttribute("type","hidden").setAttribute("name",i).setAttribute("value",v);}}document.body.appendChild(f);f.submit();},postData(link,target){var q=link.select(target).first();if(q){var lnk=link.o.getAttribute("href");var data=igk.winui.form.serialize(q.o,{});igk.ajx.post({uri:lnk,param:JSON.stringify(data),contentType:'application/json'},null,null);}},serialize(form,obj){var obj=obj||{};var frmData=new FormData(form);frmData.forEach(function(v,k){if(k in obj){if(!Array.isArray(obj[k])){obj[k]=[obj[k]];}obj[k].push(v);return;}obj[k]=v;});return obj;},validate(t){var q=$igk(igk.getParentScript()).select("^form").first();q.reg_event("submit",function(e){for(var i=0;i<t.length;i++){if(!q.o[t[i]].value){e.preventDefault();e.stopPropagation();return;}}});}});})();(function(){igk.ctrl.registerAttribManager("igk-winui-no-scroll",{"desc":"disable scrolling on item"});igk.ctrl.bindAttribManager("igk-winui-no-scroll",function(m,v){if(!v||!igk.css.isItemSupport(["scrollBarWidth"]))return;this.setCss({"scrollbarWidth":"none"});});})();(function(){var _d=0;igk.system.createNS("igk",{toStr:function(v){if(!_d){_d=igk.createNode("div");}return _d.setHtml(v).o.innerText;}});})();(function(){igk.winui.initClassControl("anim-autohide",function(){var q=this;q.reg_event("animationend",function(e){if(e.animationName=="anim-autohide"){q.remove();}});});})();(function(){var cellindex=-1;function rmStyle(q,index){q.qselect("tr td, tr th").each_all(function(){if(this.o.cellIndex==index){this.rmClass("hover");}});};function addStyle(q,index){q.qselect("tr td, tr th").each_all(function(){if(this.o.cellIndex==index){this.addClass("hover");}});};igk.ctrl.registerAttribManager("igk-table-col-hover",{"desc":"table col management"});var time_=0;igk.ctrl.bindAttribManager("igk-table-col-hover",function(n,m){var q=this;this.on("mouseover",function(e){if(("cellIndex" in e.target)&&(/TD|TH/.test(e.target.tagName))){clearTimeout(time_);time_=0;if(cellindex !=e.target.cellIndex){rmStyle(q,cellindex);cellindex=e.target.cellIndex;addStyle(q,cellindex);}}}).on("mouseout",function(e){if(/TD|TH/.test(e.target.tagName)){clearTimeout(time_);time_=setTimeout(function(){rmStyle(q,cellindex);cellindex=-1;},500);}});});})();(function(){igk.ctrl.registerAttribManager("igk:validation-data",{"desc":"use for validation data."});igk.ctrl.bindAttribManager("igk:validation-data",function(t,v){var d=igk.createNode("div");d.addClass("data");var state=0;var q=$igk(this);var data=JSON.parse(v);var form=q.select("^form").first();function _updateState(){state=0;if(q.o.value.length>0){if(q.o.value.length<data.length){state=1;}else{for(var s in data.pattern){if(!(new RegExp(data.pattern[s])).test(q.o.value)){if(s.indexOf("*")!=-1){state=2;}else{state=1;}break;}}}}switch(state){case 0:d.rmClass("igk-danger igk-warning igk-info");break;case 1:d.addClass("igk-danger");break;case 2:d.addClass("igk-warning");break;case 3:d.addClass("igk-info");break;}};if(form){form.on("submit igkFormBeforeSubmit",function(e){if(state==1){e.preventDefault();e.stopPropagation();}});if(data.matchTarget){var target=form.select(data.matchTarget).first();if(target){target.on("input",function(){_updateState();if(q.o.value !=target.o.value){state=1;}});}}}q.on("input",function(){_updateState();}).insertAfter(d.o);_updateState(true);});})();(function(){var _ut={getSep(){return igk.system.getNS('igk.system.locale.decimalSeperator')||".";}};var _handler={number(e,notdec){var v=this.value;const q=$igk(this);const sign=(q.form_options ? q.form_options.sign :null)||false;if(typeof(notdec)=='undefined')notdec=true;if(notdec){var sep=_ut.getSep();if((e.key==sep)){if(v.indexOf(sep)!=-1){e.preventDefault();e.stopPropagation();}return;}}if(e.key=='-'){e.preventDefault();e.stopPropagation();if(!sign){return;}if(/^-/.test(v)){v=v.substr(1);}else{v=e.key+ v;}this.value=v;return;}if(/[0-9]/.test(e.key)==false){e.preventDefault();e.stopPropagation();}},pastenumber(e,notdec){let paste=(e.clipboardData||window.clipboardData).getData('text');let slStart=e.target.selectionStart;var v=e.target.value;var sl=slStart;const q=$igk(this);const sign=(q.form_options ? q.form_options.sign :null)||false;paste=v.substr(0,sl)+ paste+ v.substr(sl);var rf=[/^(-)?[0-9]+(\.([0-9]+)?)?$/,/^(-)?[0-9]+$/];if(typeof(notdec)=='undefined')notdec=true;var rx=notdec ? rf[0]:rf[1];if(rx.test(paste)==false){e.preventDefault();e.stopPropagation();return;}if(!sign){while(/^-/.test(paste)){paste=paste.substr(1);}}},tel(e){_handler.number(e,false);},pastetel(e){_handler.pastenumber(e,false);},integer(e){_handler.number(e,false);},pasteinteger(e){console.log("paste number");_handler.pastenumber(e,false);},form_key_enter_handler(form){return function(evt){if(evt.keyCode==13){evt.preventDefault();evt.stopPropagation();if(isValid(form.o)){form.o.submit();}return false;}}}};function isValid(f){let valid=true;let ln=f.elements.length;let i=0;while(valid &&(i<ln)){let s=f.elements.item(i);i++;const t=s.type;const v=s.value;if(s.required){switch(t){default:if(v.length==0){valid=false;}else{if(s.pattern){let rg=new RegExp(s.pattern);valid=!rg.test(v);}}break;}}};return valid;};function __init_form(){this.qselect('input').each_all(function(){let opts=this.o.getAttribute('data-igk-options');this.form_options=((opts)? JSON.parse(opts):null)||{};const max_ln=this.form_options['max-length'];if(this.supportClass('number')){this.on('keypress',_handler.number);this.on('paste',_handler.pastenumber);}else if(this.supportClass('integer')){this.on('keypress',_handler.integer);this.on('paste',_handler.pasteinteger);}else if(this.supportClass('phone-number')||this.supportClass('tel')){if(this.o.value){this.o.value=this.o.value.replace(/[^0-9]/,"");}this.on('keypress',_handler.integer);this.on('paste',_handler.pasteinteger);}if(max_ln)this.setAttribute('maxlength',max_ln);});let no_button=this.select('input[type=submit]').first()||this.select('button[type=submit]').first();if(!no_button){const v_qfrom=this;const v_qfc=_handler.form_key_enter_handler(v_qfrom);this.select('input.key-enter').each_all(function(){this.on('keypress',v_qfc);});}this.on('submit',(e)=>{if(!isValid(this.o)){e.preventDefault();e.stopPropagation();}});};igk.winui.initClassControl('igk-form',__init_form);})();(function(){let modules=[];function esm(templateStrings,...substitutions){let js=templateStrings.raw[0];for(let i=0;i<substitutions.length;i++){js+=substitutions[i]+ templateStrings.raw[i+ 1];}return 'data:text/javascript;base64,'+ btoa(js);};igk.system.createNS("igk.system.modules",{response:null,esm:esm,append(src,id){let v=igk.createNode('script');v.o.type='module';v.o.id=id;v.setHtml(src);igk.dom.body().add(v.o);modules.push(v);return v;},import(src,callback){let g=(async()=>{let m=await igk.system.modules.importAsync(src);return m;})().then((m)=>{if(callback){callback(m);}return m;});return g;},async importAsync(src){let b=esm`${src}`;let c=await import(`${b}`);return c;}})})();(function(){var m=[];var c=igk.createNode("div");const _e='click';function __disable_func(evt){evt.preventDefault();}igk.winui.registerEventHandler(_e,{reg_event:function(item,func,useCapture){return igk.winui.reg_system_event(item,_e,func,useCapture);},unreg_event:function(item,func){return igk.winui.unreg_system_event(item,_e,func);}});function _dblevent(item,func){var last=0;func.badge=function(evt){if((evt.timeStamp- last)<500){var h=igk.winui.events.createEvent("dbltouch",{});func.apply($igk(item).o,[h]);}last=evt.timeStamp;};return func.badge;};igk.winui.registerEventHandler("dbltouch",{reg_event:function(item,func,useCapture){if($igk(item).istouchable()){return igk.winui.reg_system_event(item,"touchstart",_dblevent(item,func),useCapture);}return 0;},unreg_event:function(item,func){if($igk(item).istouchable()){return igk.winui.unreg_system_event(item,"touchstart",func,useCapture);}}});var m_eventDatas={};function _regEventData(n,data){var t=null;if(typeof(m_eventDatas[n])==igk.constants.undef){t=[];}else t=m_eventDatas[n];t.push(data);m_eventDatas[n]=t;};function _unregEventData(n,item,func){var t=null;var c=false;if(m_eventDatas[n]!=igk.constants.undef){t=m_eventDatas[n];var cp=[];var e=null;for(var s=0;s<t.length;s++){e=t[s];if(!((e.i==item)&&(e.func==func))){cp.push(e);c=!0;}}if(c)m_eventDatas[n]=cp;}return c;};function _getEventData(n,item,func){var e=null;var t=m_eventDatas[n];if(t){for(var s=0;s<t.length;s++){e=t[s];if((e.i==item)&&(e.func==func)){return e;}}}return !1;};function _unbindEventData(e,n){var t=m_eventDatas[n];var r=0;if(t){var __t=[];for(var s=0;s<t.length;s++){if(t[s]==e){r=1;continue;}__t.push(t[s]);}m_eventDatas[n]=__t;}return r;};(function(PN){igk.winui.registerEventHandler(PN,{reg_event:function(item,func,useCapture,single){var _dc=0;if(typeof(single)=='undefined'){single=1;}if(single &&(_dc=_getEventData(PN,item,func))){console.debug("[BJS] - function already binded for .",item,item===_dc.i,_dc);return;}var c={n:PN,index:0,i:item,h:0,"func":func,bind:function(evt){if(evt.type=="touchend"){if(evt.cancelable){evt.preventDefault();evt.stopPropagation();}c.h=1;}else if(c.h==1){c.h=0;return;}c.func.apply(item,[evt]);}};c.index=m_eventDatas[c.n]? m_eventDatas[c.n].length :0;_regEventData(c.n,c);if($igk(item).istouchable()){igk.winui.reg_system_event(item,"touchend",c.bind,useCapture);}return igk.winui.reg_system_event(item,"click",c.bind,useCapture);},unreg_event:function(item,func,useCapture){var n=PN;var c=_getEventData(n,item,func);if(c){if($igk(item).istouchable()){igk.winui.unreg_system_event(item,"touchend",c.bind);}var o=igk.winui.unreg_system_event(item,"click",c.bind);_unbindEventData(c,n);return o;}}});})("touchOrClick");(function(PN){igk.winui.registerEventHandler(PN,{reg_event:function(item,func,useCapture,single){var _dc=0;if(typeof(single)=='undefined'){single=1;}if(single &&(_dc=_getEventData(PN,item,func))){console.debug("[BJS] - function already binded for .",item,item===_dc.i,_dc);return;}var c={n:PN,index:0,i:item,h:0,"func":func,bind:function(evt){if(evt.type=="touchend"){if(evt.cancelable){evt.preventDefault();evt.stopPropagation();}c.h=1;}else if(c.h==1){c.h=0;return;}c.func.apply(item,[evt]);}};c.index=m_eventDatas[c.n]? m_eventDatas[c.n].length :0;_regEventData(c.n,c);if($igk(item).istouchable()){igk.winui.reg_system_event(item,"dbltouchend",c.bind,useCapture);}return igk.winui.reg_system_event(item,"dblclick",c.bind,useCapture);},unreg_event:function(item,func,useCapture){var n=PN;var c=_getEventData(n,item,func);if(c){if($igk(item).istouchable()){igk.winui.unreg_system_event(item,"doubletouchend",c.bind);}var o=igk.winui.unreg_system_event(item,"dblclick",c.bind);_unbindEventData(c,n);return o;}}});})("doubleTouchOrClick");(function(PN){igk.winui.registerEventHandler(PN,{reg_event:function(item,func,useCapture,single){var _dc=0;if(typeof(single)=='undefined'){single=1;}if(single &&(_dc=_getEventData(PN,item,func))){console.debug("[BJS] - function already binded for .",item,item===_dc.i,_dc);return;}var c={n:PN,index:0,i:item,h:0,"func":func,bind:function(evt){c.func.apply(item,[evt]);}};c.index=m_eventDatas[c.n]? m_eventDatas[c.n].length :0;_regEventData(c.n,c);if(MutationObserver){var ob=new MutationObserver(c.bind);ob.observe(item,{childList:true,subtree:true});c.observer=ob;}else{item.addEventListener("DOMNodeInserted",c.bind,useCapture);item.addEventListener("DOMNodeRemoved",c.bind,useCapture);}},unreg_event:function(item,func){var n=PN;var c=_getEventData(n,item,func);if(c.observer){c.observer.disconnect();_unregEventData(c.n,item,func);console.debug("disconnect");}if(c){igk.winui.unreg_system_event(item,"DOMNodeInserted",c.bind);igk.winui.unreg_system_event(item,"DOMNodeRemoved",c.bind);}}});})("DOMChanged");function __mobile_device_event(n,mobe){return{reg_event:function(item,func,useCapture){var c={n:n,index:0,i:item,h:0,"func":func,bind:function(evt){if(evt.type==mobe){if(useCapture && !useCapture.passive){evt.preventDefault();evt.stopPropagation();}c.h=1;}else if(c.h==1){c.h=0;return;}c.func.apply(item,[evt]);}};c.index=m_eventDatas[c.n]? m_eventDatas[c.n].length :0;_regEventData(c.n,c);if($igk(item).istouchable()){igk.winui.reg_system_event(item,mobe,c.bind,useCapture);}return item;},unreg_event:function(item,func,useCapture){var c=_getEventData(n,item,func);var o=null;if(c){if($igk(item).istouchable()){o=igk.winui.unreg_system_event(item,mobe,c.bind);}return o;}}};};igk.winui.registerEventHandler("igkTouchStart",__mobile_device_event("igkTouchStart","touchstart"));igk.winui.registerEventHandler("igkTouchMove",__mobile_device_event("igkTouchMove","touchmove"));igk.winui.registerEventHandler("igkTouchEnd",__mobile_device_event("igkTouchEnd","touchend"));if(typeof(c.o.onmouseenter)=="undefined"){igk.winui.registerEventHandler("mouseenter",{reg_event:function(item,func,useCapture){return igk.winui.reg_system_event(item,"mouseover",func,useCapture);},unreg_event:function(item,func,useCapture){return igk.winui.unreg_system_event(item,"mouseover",func);}});}c.unregister();})();(function(){var _N="mousewheel wheel";igk.winui.registerEventHandler(_N,{reg_event:function(item,func,useCapture){var _n=("onmousewheel" in item)? "mousewheel" :"wheel";return igk.winui.reg_system_event(item,_n,func,useCapture);},unreg_event:function(item,func,useCapture){var _n=("onmousewheel" in item)? "mousewheel" :"wheel";return igk.winui.unreg_system_event(item,_n,func);}});})();(function(){var m={};var webkit=new igk.system.collections.list();var webkit_e=new igk.system.collections.dictionary();var inchain=false;function __webkitcall(evt){var r=webkit.to_array();for(var i=0;i<r.length;i++){var s=webkit_e.getItem(r[i]);if(s !=null){__call(r[i],s.to_array(),arguments);}r[i].apply(igk.winui.eventTarget(evt),arguments);}}function __call(func,r,args){for(var i=0;i<r.length;i++){func.apply(r[i],args);}}function __reg_item_func(item,func){var s=webkit_e.getItem(func);if(s==null){s=new igk.system.collections.list();webkit_e.add(func,s);}s.add(item);}function __unreg_item_func(item,func){var s=webkit_e.getItem(func);if(s !=null){s.remove(item);if(s.getCount()<=0){webkit_e.remove(func);return !0;}return !1;}return !0;}function _reg_webkitevent(n){var kn='onwebkit'+ n;return{reg_event:function(item,func,useCapture){if(item==null)return;if((typeof(item[kn])!=igk.constants.undef)||((item !=window)&&(typeof(window[kn])!=igk.constants.undef))){if(webkit.contains(func)){if(item !=window)__reg_item_func(item,func);return;}webkit.add(func);if(window[kn]==null)window[kn]=__webkitcall;else if((window[kn]!=__webkitcall)&& !inchain){var tfunc=window[kn];window[kn]=function(evt){tfunc.apply(this,arguments);__webkitcall.apply(this,arguments);};inchain=!0;}webkit_e.add(item);return;}if(item.addEventListener){item.addEventListener(n,func,useCapture);}},unreg_event:function(item,func,useCapture){if(item==null)return;if(webkit.contains(func)){if(item !=window){if(!__unreg_item_func(item,func)){return;}}webkit.remove(func);if(webkit.getCount()==0){if(!inchain){window[kn]=null;}}return;}if(item.removeEventListener){item.removeEventListener(n,func);}}};}igk.winui.registerEventHandler('transitionstart',_reg_webkitevent('transitionstart'));igk.winui.registerEventHandler('transitionend',_reg_webkitevent('transitionend'));igk.winui.registerEventHandler('animationend',_reg_webkitevent('animationend'));igk.winui.registerEventHandler('animationiteration',_reg_webkitevent('animationiteration'));})();(function(){function _resizingHandle(){return{reg_event:function(item,func,useCapture){igk.winui.reg_event(window,'resize',func);return item;},unreg_event:function(item,func,useCapture){igk.winui.unreg_event(window,'resize',func);return item;}};};igk.winui.registerEventHandler('windowresize',_resizingHandle());})();(function(){function __gettabname(item,tab){var kn=0;var s="";for(var i=0;i<tab.length;i++){s="on"+ tab[i];if(s in item){kn=tab[i];break;}}return kn;}function __initEvents(tab,fallbackitem){return{reg_event:function(item,func,useCapture){if(item==null)return;var kn=__gettabname(item,tab);if(!kn){if(fallbackitem &&(fallbackitem !=item)){kn=__gettabname(fallbackitem,tab);item=fallbackitem;}if(!kn){console.debug("can't register event : "+ tab[0]);return;}}igk.winui.reg_system_event(item,kn,func,useCapture);},unreg_event:function(item,func,useCapture){if(item==null)return;if(item==null)return;var kn=__gettabname(item,tab);if(!kn){if(fallbackitem &&(fallbackitem !=item)){kn=__gettabname(fallbackitem,tab);item=fallbackitem;}if(!kn){console.debug("can't unregister event "+ tab[0]);return;}}igk.winui.reg_event(item,kn,func,useCapture);}};};igk.winui.registerEventHandler("fullscreenchange",__initEvents(["fullscreenchange","webkitfullscreenchange","mozfullscreenchange","msfullscreenchange","ofullscreenchange"],document));igk.winui.registerEventHandler("fullscreenerror",__initEvents(["fullscreenerror","webkitfullscreenerror","mozfullscreenerror","msfullscreenerror","ofullscreenerror"],document));})();(function(){var m_viewarticle=false;var m_article=new igk.system.collections.list();igk.ctrl.bindAttribManager("igk-article-options",function(){var q=this;var source=igk.system.convert.parseToBool(this.getAttribute("igk-article-options"));q.show=function(){};q.hide=function(){};if(!m_viewarticle)q.hide();else{q.show();}m_article.add(q);});igk.ctrl.bindAttribManager("igk-js-fix-height",function(n,m){var r=null;if(m=="::")r=$igk(this.o.parentNode);else r=$igk(m).first();if(r==null)return;var q=this;var m_eventContext=igk.winui.RegEventContext(this,$igk(this));if(m_eventContext){m_eventContext.reg_window("resize",function(){q.setCss({height:r.getHeight()+"px"});});}q.setCss({height:r.getHeight()+"px"});});igk.ctrl.bindAttribManager("igk-js-fix-width",function(n,m){var r=null;if(m=="::")r=$igk(this.o.parentNode);else r=$igk(m).first();if(r==null)return;var q=this;function __update(){q.setCss({width:(r.getWidth())+"px"});}var m_eventContext=igk.winui.RegEventContext(this,$igk(this));if(m_eventContext){m_eventContext.reg_window("resize",function(){__update();});}__update();});igk.ctrl.bindAttribManager("igk-js-fix-eval",function(n,m){var o=igk.JSON.parse(m);if(o==null)return;var q=this;function __update(){o.update.apply(q);}var m_eventContext=igk.winui.RegEventContext(this,$igk(this));if(m_eventContext){m_eventContext.reg_window("resize",function(){__update();});}__update();});(function(){function __evalfunction(){var s=this.getAttribute("igk-js-eval");if(s){igk.evalScript(s,this.o);}};igk.ctrl.bindAttribManager("igk-js-eval",__evalfunction);})();(function(){var m_initItems=[];function __init(){for(var i=0;i<m_initItems.length;i++){var s=m_initItems[i].getAttribute("igk-js-eval-init");igk.evalScript(s,m_initItems[i].o);}};igk.ready(__init);function __evalfunction(){var s=this.getAttribute("igk-js-eval-init");if(s){if(document.readyState=="complete")igk.evalScript(s,this.o);else m_initItems.push(this);}};igk.ctrl.bindAttribManager("igk-js-eval-init",__evalfunction);})();(function(){function __evalUri(){var self=this;var uri=this.getAttribute("igk-js-init-uri");if(uri){igk.ajx.get(uri,null,function(xhr){if(this.isReady()){this.replaceResponseNode(self.o,false);}},true);}}igk.ctrl.bindAttribManager("igk-js-init-uri",__evalUri);})();(function(){igk.winui.registerEventHandler(BEFORESUBMIT_EVENT,{reg_event:function(item,fc){if(item.tagName=="FORM"){if(!(BEFORESUBMIT_EVENT in item)){$igk(item).addEvent(BEFORESUBMIT_EVENT,{"cancelable":true,"bubbles":true}).on("submit",function(e){var cancel=false;$igk(item).raiseEvent(BEFORESUBMIT_EVENT,null,function(e){cancel=e.defaultPrevented;});if(cancel){e.preventDefault();e.stopPropagation();}});}igk.winui.reg_system_event(item,'igkFormBeforeSubmit',fc);}return item;},unreg_event:function(item,fc){igk.winui.reg_system_event(item,'igkFormBeforeSubmit',fc);return item;}});function close(q){var h=q.select("^.igk-js-notify-box").first();if(h){igk.winui.notify.close();}}function __init(){var self=this;var r=this.getAttribute("igk-ajx-form");var r_obj=r &&(r !='1')? igk.JSON.parse(r):null;var noa=this.getAttribute("igk-ajx-form-no-autoreset");var no_c=this.getAttribute("igk-ajx-form-no-close");var ajxdata=igk.JSON.parse(this.getAttribute("igk-ajx-form-data"));var complete=this.getAttribute("igk-ajx-form-complete");this.addEvent(BEFORESUBMIT_EVENT,{"cancelable":true,"bubbles":true});if(((r==1)||r_obj)&&(this.o.tagName.toLowerCase()=="form")){var b=r_obj && r_obj.targetid ? r_obj.targetid :self.getAttribute("igk-ajx-form-target");this.reg_event("submit",function(evt){var cancel=false;var c=self.raiseEvent(BEFORESUBMIT_EVENT,null,function(e){cancel=e.defaultPrevented;});if(evt.defaultPrevented){cancel=true;}else{evt.preventDefault();evt.stopPropagation();}if(cancel){return;}const selector=self.qselect('input, button');const ovalue=[];igk.ajx.postform(self.o,self.o.getAttribute("action"),function(xhr){if((xhr.readyState==4)&&(xhr.status !=200)){close(self);return;}if(this.isReady()){if(b){var k=null;switch(b){case "=":k=self;break;case "::":case "??":k=igk.dom.body();k.unregister();igk.ajx.fn.replace_or_append_to_body.apply(this,[xhr]);k=null;break;default:k=$igk(b).first();break;}if(k){k.unregister();this.setResponseTo(k.o,false);}}else{var s=self.o["igk:source"];var k=s ? $igk(s):!1;if(k){k.unregister();this.setResponseTo(k.o,false);}else{igk.ajx.fn.append_to(xhr,igk.dom.body().o);}}var frame=self.o["igk:framebox"];if(!no_c && frame){frame.close();}else{close(self);}if(!noa)self.o.reset();if(ajxdata && ajxdata.complete){ajxdata.complete.apply(self);}if(r_obj && r_obj.complete){r_obj.complete.apply(self);}if(complete){(new Function(complete)).apply(self);}let pos=0;selector.each_all(function(){let v=ovalue[pos];if(!v)this.o.removeAttribute('disabled');else this.o.setAttribute("disabled",true);pos++;});}},true,()=>{selector.each_all(function(){ovalue.push(this.o.getAttribute("disabled")||false);this.o.setAttribute("disabled",true);});});});}}igk.ctrl.bindAttribManager("igk-ajx-form",__init);})();(function(){var m_ctrl=null;igk.appendProperties(igk.ctrl,{show_article_options:function(){for(var i=0;i<m_article.length;i++){if(!m_viewarticle)m_article[i].show();else m_article[i].hide();}m_viewarticle=!m_viewarticle;if(m_viewarticle)igk.web.setcookies("igk-sao","1");else igk.web.setcookies("igk-sao",null);},show_ctrl_options:function(){if(m_ctrl==null){return;}for(var i=0;i<m_ctrl.length;i++){if(!m_viewctrl)m_ctrl[i].show();else m_ctrl[i].hide();}m_viewctrl=!m_viewctrl;if(m_viewctrl)igk.web.setcookies("igk-sco","1");else igk.web.setcookies("igk-sco",null);}});})();function __init_roll_owner(q){q.reg_event("mouseout",function(evt){__rmClass.apply(q);});q.reg_event("mouseover",function(evt){__addClass.apply(q);});q.select(".igk-roll-in").each_all(function(){var g=this.select("^.igk-roll-owner").first();if(g==q){this.rollparent=q;var self=this;this.reg_event("mouseover",function(evt){self.addClass("igk-roll-in-hover");});this.reg_event("mouseenter",function(evt){self.addClass("igk-roll-in-hover");});}});};function __addClass(){var t=$igk(this);$igk(this).qselect(".igk-roll-in").each_all(function(){if(this.rollparent==t)this.addClass("igk-roll-in-hover");});}function __rmClass(){var t=$igk(this);t.select(".igk-roll-in").each_all(function(){if(this.rollparent==t){this.rmClass("igk-roll-in-hover");}});};function __toggleview(v){if(v)__addClass.apply(this);else __rmClass.apply(this);};function __bind_roll(){igk.qselect(".igk-roll-owner").each(function(){var q=this;__init_roll_owner(q);return !0;});igk.qselect(".igk-touch-roll-owner").each(function(){this.rmClass("igk-roll-owner");var m=false;var q=this;if(this.istouchable()){this.reg_event("touchend",function(){__toggleview.apply(q,[!m]);m=!m;});}else{this.reg_event("click",function(){__toggleview.apply(q,[!m]);m=!m;});}return !0;});};igk.ready(function(){igk.ctrl.registerReady(function(e){if(igk.system.regex.item_match_class("igk-roll-owner",this)){__init_roll_owner($igk(this));}});new __bind_roll();});})();(function(){var _attribs={};igk.ctrl.registerAttribManager("igk:oninit",{"desc":"on init register"});igk.ctrl.bindAttribManager("igk:oninit",function(m,v){try{var fc=Function(v);fc.apply(this.o);if(!_attribs["oninit"])_attribs["oninit"]=[];_attribs["oninit"].push(this);}catch(e){console.error(e);}});})();(function(){var m_size=0;var m_item=new igk.system.collections.list();function __initview(n,t){var h=n.data.offset||n.getHeight();if(t.o.scrollTop<=h){n.rmClass("igk-show");}else{n.addClass("igk-show");}var w=n.data.measure.getWidth()- -igk.getPixel(n.getComputedStyle("marginLeft"),n.o)- igk.getPixel(n.getComputedStyle("marginRight"),n.o);n.setCss({width:w+"px"});};function __register(n){if(!m_size){igk.winui.reg_event(window,"resize",function(){var t=m_item.getCount();var n=0;for(var i=0;i<t;i++){n=m_item.getItemAt(i);__initview(n,n.data.target);}});n.setCss({top:"0px"});m_size=1;}var id=n.getAttribute("igk-target")||"^.igk-parentscroll";var offset=n.getAttribute("igk-offset");if(id){m_item.add(n);var me=igk.createNode("div").addClass("posab fitw").setCss({height:"1px","visibility":"hidden"});n.data.measure=me;n.data.offset=offset;n.insertAfter(me.o);var c=$igk(n.select(id));if(c){if(c.isSr()){var q=c.first();if(!q &&(id !="^.igk-parentscroll")){console.error("fixed-actionbar:  target not found : "+ id);return;}q.reg_event("scroll",function(){__initview(n,q);});__initview(n,q);n.data.target=q;}else{n.data.target=c;$igk(c).reg_event("scroll",function(){__initview(n,c);});__initview(n,c);}}else{console.debug("item not found "+ c);}}else{console.info("warning: no igk-fixed-action-bar-target attribute found");}};igk.winui.initClassControl("igk-fixed-action-bar",function(){__register(this);},{"desc":"fixed: action-bar"});})();(function(){var m_targetResponse=null;var framebox_callback=[];function __submit_form(evt){var q=this;var c=(m_targetResponse !=null)? m_targetResponse :_eval(q.getAttribute("igk-ajx-lnk-tg-response"),[q]);var clf=q.getAttribute("igk-frame-close");if(c){var m=document.getElementById(c);if(m){window.igk.ajx.postform(q,q.getAttribute('action'),function(xhr){if(this.isReady()){if(xhr.responseText.length>0){this.setResponseTo(m);}}q.reset();},false);if(clf){q['igk:framebox'].close();}evt.preventDefault();return !1;}}return !0;}function __call_frame_closed(frameid){var v_fremoved=[];var v_args=[frameid];for(var i=0;i<framebox_callback.length;i++){var f=framebox_callback[i];if((f !=null)&&(f.apply(window,v_args))){v_fremoved.push(f);}}for(var j=0;j<v_fremoved.length;j++){framebox_callback.pop(v_fremoved[j]);}}function __close_frame(m_frame){igk.winui.framebox.frames.pop(m_frame);var tf=igk.winui.framebox.frames;igk.winui.framebox.currentFrame=tf.length>0 ? tf[tf.length- 1]:null;}igk.system.createNS("igk.winui.framebox",{frames:new Array(),reg_frame_close:function(callback){framebox_callback.push(callback);},close_currentframe:function(node){var frm=ns_igk.winui.framebox.getdialog_frame(node);igk.ajx.get(frm.closeuri+"&ajx=1",null,null);var f=frm;$igk(f.parentNode).setCss({opacity:1}).animate({opacity:0 },{interval:20,duration:200,complete:function(){ns_igk.winui.framebox.close(frm);}});},getdialog_frame:function(node){var t=null;var k="igk-framebox-dialog";if(node.id==k)t=node;else t=igk.getParentById(node,k);if(t){igk.appendProperties(t,{"frameDialogOwner":t.parentNode});}return t;},reg_dialog:function(node){if(node==null)return;var t=igk.winui.framebox.getdialog_frame(node);var n=null;if(t !==null){n=$igk(t).select(".title").getNodeAt(0);if(n){igk.winui.dragFrameManager.init(n,t);}igk.winui.framebox.currentFrame=t;igk.winui.framebox.frames.push(t);}},init:function(p,w,h){if(p==null){return;}var m_frame=igk.winui.framebox.getdialog_frame(p);var m_closeBtn=p.getElementsByTagName("a")[0];if(m_frame==null)return;if(m_closeBtn==null){igk.winui.notify.showErrorInfo("Error",'/!\\ JS: frame init :: No close button found.');return;}igk.winui.framebox.reg_dialog(p);m_frame.closeuri=m_closeBtn.href+"&ajx=1";function __centerDialog(){igk.winui.centerDialog(p,w,h);};function __setSize(m){m.setCss({"width":(igk.winui.screenSize().width- 15)+"px"});};if(igk.system.regex.item_inherit_class("igk-android",p)){var m=$igk(p).rmClass("resizable").addClass("dispb fit overflow-y-a").select(".datas");igk.winui.reg_event(window,'resize',function(){__setSize(m);});__setSize(m);}else{if(!$igk(p).supportClass("no-center"))__centerDialog();}m_frame.parentNode.close=function(){igk.winui.framebox.close(m_frame);};m_frame.close=function(){igk.winui.framebox.close(this);};var s=$igk(m_frame).select("*");m_frame.parentNode.targetResponse=m_targetResponse ? m_targetResponse :igk.dom.body().o;s.setProperties({"igk:framebox":m_frame});$igk(m_frame).select("form").each_all(function(){var f=this.o.onsubmit;if(f){this.o.onsubmit=f;}else{this.o.onsubmit=__submit_form;}});function __a_close_ajx(){igk.ajx.get(m_frame.closeuri,null,null);var f=m_frame;$igk(f.parentNode).setCss({opacity:1}).animate({opacity:0 },{interval:20,duration:200,complete:function(){igk.winui.framebox.close(f);}});}function __a_event(evt){if(igk.winui.framebox.currentFrame==m_frame){if(evt.keyCode==27){if(!evt.defaultPrevented){__a_close_ajx();evt.preventDefault();igk.winui.events.unregKeyPress(__a_event);__close_frame(m_frame);}}}};igk.winui.events.regKeyPress(__a_event);var s=(""+ m_closeBtn.href).split("#")[1];var id=null;if(s &&(s.split('?')[0]=="/closeframe")){id=s.split("/closeframe?id=")[1];m_closeBtn.onclick=function(){var frame=igk.getParentById(p,id);if(frame){$igk(frame).setCss({opacity:1}).animate({opacity:0 },{interval:20,duration:200,complete:function(){frame.parentNode.removeChild(frame);__a_close_ajx();}});}return !1;};}else if(m_closeBtn){m_closeBtn.onclick=function(evt){evt.preventDefault();__a_close_ajx();return !1;};}},close:function(frame){frame=frame;if(frame && frame.frameDialogOwner){var p=frame.frameDialogOwner;var s=$igk(frame);if(s.unregEventContext){s.unregEventContext();}if(p && p.parentNode){p.parentNode.removeChild(p);__call_frame_closed(p.id);}}},closeCurrentFrame:function(){var f=igk.winui.framebox.currentFrame;if(f){__close_frame(f);}},init_confirm_frame:function(p,uri,ajxcontext){var frm=igk.getParentByTagName(p,'form');if(!frm){console.debug($igk(p).getParentByTagName('form'));console.debug(p);console.error("parent form not found");return;}var r=frm.getAttribute("igk-confirmframe-response-target");if(r !=null){m_targetResponse=document.getElementById(r);}function __closeForm(){igk.winui.events.unregKeyPress(__keypressfunc);var v_frame=igk.winui.framebox.getdialog_frame(frm);if(v_frame !=null){igk.winui.framebox.close(v_frame);}}function __keypressfunc(evt){switch(evt.keyCode){case 27:console.debug("baseid");if(!ajxcontext){frm.action=uri;frm.confirm.value=0;frm.submit();}else{igk.ajx.post(frm["frame-close-uri"].value+"&id="+ frm["frame-id"].value,null,null,false);__closeForm();}igk.winui.events.unregKeyPress(__keypressfunc);evt.preventDefault();evt.stopPropagation();return !1;case 13:igk.winui.events.unregKeyPress(__keypressfunc);frm.submit();evt.preventDefault();return !1;}}if(frm){igk.winui.events.regKeyPress(__keypressfunc);}},btn:{yes:function(q){var v_frame=q['igk:framebox'];window.igk.ajx.postform(q.form,q.form.getAttribute('action'),function(xhr){if(this.isReady()){if(v_frame){v_frame.close();if(v_frame.targetResponse){this.setResponseTo(v_frame.targetResponse);}else{igk.ajx.fn.replace_or_append_to_body.apply(this,[xhr]);}}else{igk.ajx.fn.replace_or_append_to_body.apply(this,[xhr]);}}},false);return !1;}}});var _c_frame=null;igk.defineProperty(igk.winui.framebox,"currentFrame",{get:function(){return _c_frame;},set:function(v){_c_frame=v;}});})();(function(){igk.system.createNS("igk.ctrl.menu",{init:function(target){var q=$igk(target);var e=$igk(q.getAttribute("igk-data-menu-binding")).first();if(this.namespace){if(e)return new this.init(target);return null;}var b=igk.createNode("div");b.setCss({overflowY:'auto'}).addClass("fitw fith igk-data-src");b.setHtml(e.getHtml());q.o.appendChild(b.o);igk.ajx.fn.initnode(b.o);}});var v_menu_name="igk-data-menu";if(!igk.ctrl.isAttribManagerRegistrated(v_menu_name))igk.ctrl.registerAttribManager(v_menu_name,{n:"js",desc:"menu register "});igk.ctrl.bindAttribManager(v_menu_name,function(){var q=this;var source=igk.system.convert.parseToBool(this.getAttribute(v_menu_name));if(source){igk.ctrl.menu.init(q);}});})();(function(){var m_ajx=null;function __init_tab_control(){var q=this.select("ul").select("li.igk-active").first();var self=this;if(q !=null){this.o.activetab=q;}this.o.activate=function(i){var s=i.select("^li");if(self.o.activetab)self.o.activetab.rmClass("igk-active");s.addClass("igk-active");self.o.activetab=s;};this.init=!0;};igk.winui.initClassControl("igk-tabcontrol",__init_tab_control,{desc:"igk-control : tabcontrol"});igk.system.createNS("igk.winui.controls.tabcontrol",{init:function(uri,q){ns_igk.ajx.fn.scriptReplaceContent('GET',uri,q);}});igk.ctrl.registerAttribManager("igk-ajx-tab-lnk",{ns:"ajx",desc:"tabcontrol ajx link"});igk.ctrl.bindAttribManager("igk-ajx-tab-lnk",function(m,s){if(typeof(this.attribs)=='undefined')this.attribs={};if(this.attribs.tabattribs){return;}this.attribs.tabattribs=1;;var tab=this.select('^.igk-tabcontrol').first();if(tab==null){console.error("/!\\ no tabcontrol found");return;}if(typeof(tab.init)=="undefined"){init_tab_control.apply(tab);}var self=this;if(s){this.reg_event("click",function(evt){var q=tab.select('.igk-tabcontent').first();evt.preventDefault();if(m_ajx){m_ajx.abort();}if(!q){return;}q.addClass("fade-out");m_ajx=igk.ajx.get(self.o.href,null,function(xhr){if(this.isReady()){igk.ajx.fn.replace_content(q.o).apply(this,[xhr]);}else{if((xhr.readyState==4)&&(xhr.readyState !=200)){m_ajx.abort();q.setHtml('Error');}}},true);tab.o.activate(self);}).reg_event("focus",function(evt){evt.preventDefault();this.blur();});;}});})();(function(){function _init_track(){var c=this.select(".igk-trb-cur").first();if(c){var r=new(function(q,c){q.addEvent("igk-trackchange",{value:null});this.target=q;this.c=c;this.data=null;var v_d=q.getAttribute("igk-trb-data");if(v_d)this.data=igk.JSON.parse(v_d);var self=this;var m_s,m_e;var m_st=false;function __update(evt){if(!m_st)return;var l=q.getScreenLocation();var W=q.getWidth();var H=q.getHeight();r=igk.getNumber(q.getComputedStyle("paddingTop"))+ igk.getNumber(q.getComputedStyle("paddingBottom"));H-=r;var dirup=igk.system.regex.item_match_class("igk-dir-up",q.o);var hv=false;if(dirup){hv=!0;m_s=Math.min(100,parseInt((Math.max(0,H- Math.min(evt.clientY- l.y,H))/ H)*10000)/ 100);self.c.setCss({top:parseInt((H*(1- m_s / 100)))+"px",bottom:'0px'});}else if(igk.system.regex.item_match_class("igk-dir-down",q.o)){hv=!0;m_s=Math.min(100,parseInt((Math.max(0,Math.min(evt.clientY- l.y,H))/ H)*10000)/ 100);}q.o["igk-track"]=m_s;if(hv){self.c.setCss({height:m_s+"%"});if(self.data && self.data.update){self.data.update.apply(self,[{progress:m_s,bar:self}]);}}else{m_s=parseInt((Math.max(0,Math.min(evt.clientX- l.x,W))/ W)*10000)/ 100;self.c.setCss({width:m_s+"%"});if(self.data && self.data.update){self.data.update.apply(self,[{progress:m_s,bar:self}]);}}q.o["igk-trackchange"].value=m_s;q.raiseEvent("igk-trackchange");}q.reg_event("mousedown",function(evt){if(m_st)return;m_st=!0;igk.winui.mouseCapture.setCapture(q.o);igk.winui.selection.stopselection();__update(evt);});q.reg_event("mousemove",function(evt){__update(evt);});q.reg_event("mouseup",function(evt){if(m_st){__update(evt);m_st=false;igk.winui.mouseCapture.releaseCapture();igk.winui.selection.enableselection();}});igk.appendProperties(this,{toString:function(){return "igk-trb-info"}});})(this,c);}}igk.ctrl.registerReady(function(e){if(igk.system.regex.item_match_class("igk-trb",this)){_init_track.apply($igk(this));}});})();(function(){var m_xhr=null;var m_host=null;var _NS=igk.system.createNS("igk.winui.ajx.lnk",{getLink:function(){return m_xhr.source;},getXhr:function(){return m_xhr;}});igk.defineProperty(_NS,"host",{get(){return m_host;},set(v){m_host=v;}});igk.ctrl.registerAttribManager("igk-ajx-lnk",{ns:"ajx",desc:"Ajax link. used in combination with 'igk-ajx-lnk-tg' properties. "});igk.ctrl.bindAttribManager("igk-ajx-lnk",function(n,m){if(!m)return;var q=this;var v=this.getAttribute("href");var meth=this.getAttribute("igk-ajx-lnk-method")||"GET";if(m && v){q.addClass("igk-ajx-lnk");var v_meth=m.method||igk.ajx.get;if(meth=="POST"){v_meth=igk.ajx.post;}v=igk.html.appendQuery(v,"ajx-lnk=1");var fc=m.update;var obj=igk.JSON.parse(m,q)||{};var opxhr=null;q.reg_event("click",function(evt){if(evt.handle||evt.defaultPrevented){return;}evt.preventDefault();evt.stopPropagation();evt.handle=1;if(obj && obj.execute){obj.execute.apply(this,evt);return;}var tn=q.getAttribute("igk:target");var rpm=q.getAttribute("igk:replacemode")||'content';var r=null;if(obj.target)r=$igk(obj.target).first();else if(tn){r=q.select(tn).first()||$igk(tn).first();}else{r=m_host;m_host=null;}if(r !=null){if(rpm=="content"){fc=igk.ajx.fn.replace_content(r.o);}else{fc=igk.ajx.fn.replace_node(r.o);}}if(opxhr !=null){opxhr.abort();opxhr=null;}if(fc==null){fc=igk.ajx.fn.append_to_body;}opxhr=v_meth(v,null,function(xhr){if(this.isReady()){m_xhr=xhr;this.source=q;if(fc){fc.apply(this,[xhr]);}if(obj.complete){obj.complete.apply(this,[xhr]);}m_xhr=null;}});});}});igk.ctrl.registerAttribManager("igk-callback",{"desc":"register extra function to be called from server script"});var fcs={'hide':function(n){return function(){this.select(n).hide();};}};igk.ctrl.bindAttribManager("igk-callback",function(t,v){var c=igk.JSON.parse(v);var g={};if(c){for(var i in c){var f=c[i];if(igk.typeofs(f)&&(i in fcs)){this[i]=fcs[i](f);}else if(igk.typeoff(f)){this[i]=f;}else{console.debug("failed "+ typeof(f));}}}this.callback=g;});igk.winui.initClassControl("igk-winui-ajx-lnk-replace",function(){var q=this;var _i=q.getAttribute("igk-lnk-target");var _index=q.getAttribute("igk-lnk-index")||"0";var _host=m_host||igk.ajx.GetParentHost();var ck=0;if(_host){var sl=_host.select(_i);if(sl.getCount()>0){if(_index=="*")sl.setHtml(q.o.innerHTML).init();else sl.getItemAt(_index).setHtml(q.o.innerHTML).init();ck=1;}}if(!ck){var v=igk.dom.body().select(_i).first();if(v){v.setHtml(q.o.innerHTML).init();}else console.debug("item not found "+ _i);}q.remove();},{desc:"use to replace a cibling node with the inner content"})})();(function(){igk.ctrl.registerAttribManager("igk-ajx-lnk-form",{ns:"ajx",desc:"ajax link. used in combination with igk-ajx-data properties"});igk.ctrl.bindAttribManager("igk-ajx-lnk-form",function(n,m){var q=this;var v=this.getAttribute("href");if(m && v){q.reg_event("click",function(evt){evt.preventDefault();var t=$igk(q.getAttribute("igk-ajx-lnk-tg")).first();var frm=q.getParentForm();if(frm){var fc=null;if(t)fc=igk.ajx.fn.replace_node(t.o);igk.ajx.postform(frm,v,fc);}});}})})();(function(){igk.ctrl.registerAttribManager("igk-js-cn",{ns:'js',desc:"igk clone node target"});igk.ctrl.bindAttribManager("igk-js-cn",function(n,a){var q=$igk(a);if(q){var b=q.clone();b.o["id"]+="-cn";this.o.parentNode.replaceChild(b.o,this.o);}});})();(function(){igk.ctrl.registerAttribManager("igk-js-toggle",{ns:'js',desc:"igk toggle property on click"});igk.ctrl.bindAttribManager("igk-js-toggle",function(n,a){if(!a)return;var p=igk.JSON.parse(a);var self=this;var co_id=this.getAttribute("igk-js-toggle-cookies");if(!p.name)p.name="class";var pt=this.select(p.parent).first();if(!pt)return;var q=pt.select(p.target).first();var self=this;if(!q){igk.show_notify_error(n+" [not found]","can't notify error");return;}function __click(evt){evt.preventDefault();switch(p.name){case 'class':default:if(igk.system.regex.item_match_class(p.data,q.o)){q.rmClass(p.data);pt.addClass("igk-toggle");if(co_id){igk.web.setcookies(co_id,1);}}else{q.addClass(p.data);pt.rmClass("igk-toggle");if(co_id){igk.web.rmcookies(co_id);}}if(p.complete)p.complete.apply(self);break;}}if(this.istouchable()){this.reg_event("touchend",__click);}else this.reg_event("click",__click);if(co_id){var s=igk.web.getcookies(co_id);if(s){this.o.click();}}});})();(function(){igk.system.createNS("igk.ctrl.selectionmanagement",{disable_selection:function(t){t=$igk(t).o;if(typeof(t.onselectstart)!="undefined")t.onselectstart=function(){return !1;};if(typeof(t.style.MozUserSelect)!="undefined")t.style.MozUserSelect="none";t.onblur=function(){return !1;};t.ondragstart=function(){return !1;};$igk(t).fn.noselection=1;},enableSelection:function(t){t=$igk(t);if(t.fn.noselection){t.o.onblur=null;t.o.ondragstart=null;if(typeof(t.o.onselectstart)!="undefined")t.o.onselectstart=null;if(typeof(t.o.style.MozUserSelect)!="undefined")t.o.style.MozUserSelect="";delete(t.fn.noselection);}},clearSelection:function(){var sl=window.getSelection();if(sl.rangeCount>0){for(var i=0;i<sl.rangeCount;i++){sl.removeRange(sl.getRangeAt(i));}}},initnode:function(){var q=this;var source=this.getAttribute("igk-js-anim-over");var store={};if(source){var t=_eval("new Array("+ source+")");for(var m in t[0]){store[m]=q.getComputedStyle(m);}this.reg_event("mouseover",function(evt){if(q.supportAnimation()){var d=igk.JSON.parse(source);q.setCss({transition:'all 0.5s ease-in-out'}).setCss(d);}else{_eval("q.animate("+ source+");",null,{q});}});this.reg_event("mouseleave",function(){if(q.supportAnimation()){q.setCss({transition:'all 0.2s ease-in-out'}).setCss(store).timeOut(300,function(){q.setCss({transition:null});});}else{q.animate(store,t[1]);}});}}});igk.ctrl.bindAttribManager("igk-node-disable-selection",function(){var s=igk.system.convert.parseToBool(this.getAttribute("igk-node-disable-selection"));if(s==true){var q=this.o;igk.ctrl.selectionmanagement.disable_selection(q);}});})();(function(){igk.ctrl.bindAttribManager("igk-no-contextmenu",function(){this.on("contextmenu",function(e){e.preventDefault();e.stopPropagation();});},{desc:'disable context menu on node'});})();(function(){igk.winui.initClassControl("igk-parentscroll",function(){var q=this;});})();(function(){igk.ctrl.registerAttribManager("igk-js-autofix",{ns:'js',desc:"auto fix position of element"});igk.ctrl.bindAttribManager("igk-js-autofix",function(m,n){if(!n)return;var o=igk.JSON.parse(n);var c=null;var autofixcallback=this.getAttribute("igk:autofixcallback")||function(){};if(o==1){o={target:null,style:null,offset:0 };var fixs=this.getAttribute("igk-autofix-style");o.style=igk.JSON.parse(fixs)||null;}else if(typeof(o)!='object'){return;}if(!o.target)c=this.select("^.igk-parentscroll").first();else c=this.select(o.target).first();if(!c)return;if(!o.style)o.style={left:"0px",top:"0px"};var t=this;var tc=igk.createNode("div");tc.setHtml("&nbsp;").addClass("no-visibility");var oldStyle={};for(var s in o.style){oldStyle[s]=this.getComputedStyle(s);}function __initview(){var g=t.getScreenLocation();var npos=0;if(npos=='fixed'){if(c.o.scrollTop<=o.offset){t.rmClass("posfix");t.setStyle(oldStyle);autofixcallback(1);}}else{if(c.o.scrollTop>o.offset){t.addClass("posfix");if(o.style){t.setCss(o.style);}autofixcallback(2);}}};$igk(c).reg_event("scroll",function(evt){__initview();});igk.ready(function(){__initview();});});})();})();(function(){igk.appendProperties(igk.resources.lang,{});})();(function(){const _attr="igk:ref-attribute";igk.ctrl.registerAttribManager(_attr,{});igk.ctrl.bindAttribManager(_attr,function(n,v){let data=JSON.parse(v)||{};for(let i in data){let q=this.select(data[i]).first();}});})();"uses strict";(function(){var m_charts=[];function init_round_chart(){igk.appendProperties(this.data,{"chart-data":{}});var ch_data=this.getAttribute("chart-data");var dk=(ch_data !=null)? igk.JSON.parse(ch_data):null;var data=0;var m_animate=false;var m_duration=500;var self=this;if((dk !=null)&&(typeof(dk)=="object")){data=dk.value;m_animate=dk.animate||false;m_duration=dk.duration||m_duration;}else data=dk;var d=self.add("def").setCss({visibility:'hidden',position:'absolute'});var b1=d.add("div").addClass('bar1').setHtml("bar1");var b2=d.add("div").addClass('bar2').setHtml("bar2");var btx=d.add("div").addClass('text').setHtml("text");var cl1=b1.getComputedStyle('color')||"#5148fe";var cl2=b2.getComputedStyle('color')||"#dedede";var cl3=btx.getComputedStyle('color')||"#888";var w=igk.getNumber(this.getComputedStyle("width"));var h=igk.getNumber(this.getComputedStyle("height"));self.data.canva=igk.createNode("canvas");self.data.canva.addClass("posab");function render(data){var t=igk.chart.round_chart_data(self.data.canva,cl1,cl2,w,h,data)+"";var d=null;if(!self.text){self.setHtml("");d=self.add("div");self.text=d;self.prependChild(self.data.canva.o);}else d=self.text;d.addClass("alignc alignm disptabc");d.setCss({fontSize:"4em",width:w+"px",height:h+"px",color:cl3});d.setHtml(Math.round((data*100))+"%");}render(m_animate ? 0.0 :data);if(m_animate){var d=m_duration;var t=0;var n=igk.createNode("div");var y=Math.round(data*100);n.setCss({width:"0px",transition:'all 0.5s ease-in-out',border:"none","position":"absolute","visibility":"hidden"});self.prependChild(n.o);setTimeout(function(){n.setCss({width:y+'px'});igk.html.canva.animate(function(e){var x=igk.getNumber(n.getComputedStyle("width"));if(x<y){render(x / 100.0);return true;}render(y / 100.0);return false;});},100);}}igk.system.createNS("igk.chart",{round_chart_data:function(c,cl1,cl2,w,h,data){if(data==null)return;c.setAttribute("width",w);c.setAttribute("height",h);var ctx=c.o.getContext('2d');var cx=w / 2;var cy=h / 2;var r=Math.max(igk.getNumber(c.getComputedStyle("fontSize")),(Math.min(w,h)- 20))/ 2;ctx.clearRect(0,0,w,h);if(data==0)data=40;ctx.lineWidth=8.5;ctx.strokeStyle=cl1;ctx.beginPath();ctx.arc(cx,cy,r,-(Math.PI / 2)+ (2*Math.PI)*data,(2*Math.PI)- (Math.PI / 2),false);ctx.stroke();ctx.lineWidth=9.5;ctx.strokeStyle=cl2;ctx.beginPath();ctx.arc(cx,cy,r,-(Math.PI / 2),-(Math.PI / 2)+ (2*Math.PI)*data,false);ctx.stroke();return c.o.toDataURL();}});igk.winui.initClassControl("igk-round-chart",init_round_chart,{desc:"circle percentage chart"});})();(function(){igk.ctrl.registerAttribManager("igk-winui-checkbox-toggle-table",{desc:"register element to be fixed with scroll width"});igk.ctrl.bindAttribManager("igk-winui-checkbox-toggle-table",function(m,n){var q=this.o.tagName;if(n){var c=0;if((q=="input")&&(this.o.type=="checkbox")){c=this;}else{c=this.qselect("input[type='checkbox']").first();}if(c){c.on("change",function(){igk.html.ctrl.checkbox.toggle(this,igk.getParentByTagName(this,'table'),this.checked,true);});}}});})();igk.ctrl.registerAttribManager("igk-js-fix-loc-scroll-width",{desc:"register element to be fixed with scroll width"});igk.ctrl.registerAttribManager("igk-js-fix-loc-scroll-height",{desc:"register element to be fixed with scroll height"});igk.ctrl.registerAttribManager("igk-fix-loc-target",{desc:"defined target parent #id. that will content the parent class. if not defined parent with element parentNode or igk-parentscroll class"});igk.ctrl.bindAttribManager("igk-js-fix-loc-scroll-width",function(){function _fixManager(target){var animinfo={duration:200,interval:10,animtype:"timeout",context:"fix-scroll-context",effect:"circ",effectmode:"easeinout"};function __update(){var s=this.target.getAttribute("igk-js-fix-loc-scroll-width");var h=this.target.getAttribute("igk-js-fix-loc-scroll-height");var v_target=this.target;var p=this.target.getComputedStyle("position");if((p=="fixed")){var m=this.target.getAttribute("igk-fix-loc-target");var g=null;if(m==null){m=igk.qselect(".igk-parentscroll").first();if(m==null){m=this.target.o.parentNode;}}g=$igk(m);if(g==null){return;}var animprop={};if(s==1){igk.appendProperties(animprop,{"right":"0px"});if(g.fn.hasVScrollBar()){animprop.right=g.fn.vscrollWidth()+"px";}}if(h==1){igk.appendProperties(animprop,{"bottom":"0px"});if(g.fn.hasHScrollBar()){animprop.bottom=g.fn.hscrollHeight()+"px";}}this.target.animate(animprop,animinfo);}};igk.appendProperties(this,{target:target,update:__update});var self=this;var m_eventContext=igk.winui.RegEventContext(this,$igk(this));if(m_eventContext){m_eventContext.reg_window("resize",function(){self.update();});}this.update();return this;}var s=this.getAttribute("igk-js-fix-loc-scroll-width");if((s==1)&&(this.getComputedStyle("position")=="fixed")){var v_fm=new _fixManager(this);}return !1;});(function(){function __init_canva_editor(){var q=this;var data={};var c=q.add("canvas");var m_items=new igk.system.collections.list();var ms_down=false;q.data["canva_editor"]=data;igk.appendProperties(q,{addItem:function(i){m_items.add(i);},removeItem:function(i){m_items.remove(i);},save:function(){},clear:function(){m_items.clear();data.render();},print:function(){}});if(c.istouchable()){c.reg_event("touchstart",function(evt){evt.preventDefault();var e=igk.winui.GetChildTouchLocation(c,evt);var b=igk.winui.mouseButton.Left;ms_down=1;data.mecanism.start(b,e.x,e.y);igk.winui.mouseCapture.setCapture(c.o);data.render();});c.reg_event("touchmove",function(evt){if(!ms_down){return;}var e=igk.winui.GetChildTouchLocation(c,evt);var b=igk.winui.mouseButton.Left;data.mecanism.update(b,e.x,e.y);data.render();});c.reg_event("touchend",function(evt){ms_down=0;igk.winui.mouseCapture.releaseCapture();data.render();});c.reg_event("touchcancel",function(evt){console.debug("cancel");ms_down=0;igk.winui.mouseCapture.releaseCapture();data.mecanism.cancel();data.render();});}c.reg_event("mousedown",function(evt){if(ms_down)return;var e=igk.winui.GetChildMouseLocation(c,evt);var b=igk.winui.mouseButton(evt);ms_down=1;data.mecanism.start(b,e.x,e.y);igk.winui.mouseCapture.setCapture(c.o);data.render();});c.reg_event("mousemove",function(evt){if(!ms_down){return;}var loc=igk.winui.GetRealScreenPosition(c.o);var e=igk.winui.GetChildMouseLocation(c,evt);var b=igk.winui.mouseButton(evt);data.mecanism.update(b,e.x,e.y);data.render();});c.reg_event("mouseup",function(){ms_down=0;igk.winui.mouseCapture.releaseCapture();data.render();});c.reg_event("mouseleave",function(){data.render();});function __init_rendering_data(){var m_zoomX=1.0;var m_zoomY=1.0;var m_posX=0.0;var m_posY=0.0;igk.appendProperties(this,{});igk.defineProperty(this,"ZoomX",{get:function(){return m_zoomX;}});igk.defineProperty(this,"ZoomY",{get:function(){return m_zoomX;}});};igk.appendProperties(data,{renderData:new __init_rendering_data(),mecanism:null,ctx:c.o.getContext('2d'),render:function(){var ctx=this.ctx;var w=c.getComputedStyle("width");var h=c.getComputedStyle("height");c.setAttribute("width",w);c.setAttribute("height",h);ctx.clearRect(0,0,w,h);for(var i=0;i<m_items.getCount();i++){var v_q=m_items.getItemAt(i);if(v_q){v_q.render(ctx,this.renderData);}}if(this.mecanism){}}});data.mecanism=new igk.app.canvaEditor.mecanisms.CreateMecanism("circle");data.mecanism.setParent(q);data.render();};(function(){igk.system.createNS("igk.app.canvaEditor",{mecanisms:{Bases:function(){var m_fill="transparent";var m_stroke="#000";var m_p=null;var m_st=new igk.math.vector2d(0,0);var m_se=new igk.math.vector2d(0,0);igk.appendProperties(this,{initBrush:function(ctx){},start:function(b,x,y){m_st.x=x;m_st.y=y;m_se.x=x;m_se.y=y;},update:function(b,x,y){},complete:function(b,x,y){},render:function(ctx){},getParent:function(){return m_p;},setParent:function(p){m_p=p;},toString:function(){return "BaseMecanism";}});}}});var __super=igk.app.canvaEditor.mecanisms.Bases;igk.system.createNS("igk.app.canvaEditor.mecanisms",{CreateMecanism:function(name){if(typeof(igk.app.canvaEditor.mecanisms[name])!=igk.constants.undef){return new igk.app.canvaEditor.mecanisms[name]();}var s=new igk.app.canvaEditor.mecanisms.line();s.objecttype=name;return s;},line:function(){__super.apply(this);var m_s=igk.math.vector2d(0,0);var m_e=igk.math.vector2d(0,0);var m_o=null;igk.appendProperties(this,{objecttype:"line",start:function(b,x,y){m_o=new igk.app.canvaEditor[this.objecttype]();this.getParent().addItem(m_o);m_s.x=x;m_s.y=y;m_o.Start=m_s.clone();m_o.End=m_s.clone();},update:function(b,x,y){if(!m_o){return;}m_e.x=x;m_e.y=y;m_o.End=m_e.clone();},end:function(b,x,y){this.update(b,x,y);m_o=null;},render:function(ctx,data){if(m_o){igk.html.canva.drawLine(ctx,m_s,m_e);}},toString:function(){return "line";}});}});})();(function(){igk.system.createNS("igk.app.canvaEditor",{Bases:function(){igk.appendProperties(this,{render:function(ctx,data){}});}});var __super=igk.app.canvaEditor.Bases;igk.system.createNS("igk.app.canvaEditor",{line:function(){__super.apply(this);var m_st=igk.math.vector2d.empty();var m_se=igk.math.vector2d.empty();igk.appendProperties(this,{render:function(ctx,data){igk.html.canva.drawLine(ctx,m_st,m_se);}});igk.defineProperty(this,"Start",{get:function(){return m_st;},set:function(v){m_st=v;}});igk.defineProperty(this,"End",{get:function(){return m_se;},set:function(v){m_se=v;}});},rectangle:function(){igk.app.canvaEditor.line.apply(this);igk.appendProperties(this,{render:function(ctx,data){igk.html.canva.fillRect2p(ctx,this.Start,this.End);igk.html.canva.drawRect2p(ctx,this.Start,this.End);}});},circle:function(){igk.app.canvaEditor.rectangle.apply(this);igk.appendProperties(this,{render:function(ctx,data){igk.html.canva.buildCircle(ctx,this.Start,this.End.distance(this.Start));ctx.fill();ctx.stroke();}});}});})();igk.winui.initClassControl("igk-canva-editor",__init_canva_editor);})();(function(){igk.system.createNS("igk.animation",{sequence:function(){var m_sq=new igk.system.collections.list();var m_a=false;var m_i=0;var self=this;function __sequencetrans(evt){if(m_a){if((m_i>=(m_sq.getCount()- 1))&&(self.loop)){m_i=-1;}if(m_i<(m_sq.getCount()- 1)){m_i++;var s=m_sq.getItemAt(m_i);self.target.setCss({transition:s.properties[0]+' '+ s.duration+' '+ (s.effect||'ease-in-out')});__loadv(self);}else{m_a=false;}}};function __loadv(q){var s=m_sq.getItemAt(m_i);var n=s.properties[0];q.target.o.style[n]=s.value;}igk.appendProperties(this,{target:null,loop:false,timeout:100,start:function(){if(!this.target||m_a||(m_sq.getCount()==0))return;m_i=0;var s=m_sq.getItemAt(m_i);this.target.unreg_event('transitionend',__sequencetrans);var m=s.properties[0]+' '+ s.duration+' '+ (s.effect||'ease-in-out');this.target.setCss({transition:m});var q=this;setTimeout(function(){m_a=true;__loadv(q);var n=s.properties[0];q.target.o.style[n]=s.value;q.target.reg_event('transitionend',__sequencetrans);},q.timeout);},stop:function(){},pause:function(){},add:function(s){m_sq.add(s);},remove:function(s){m_sq.remove(s);},clear:function(){m_sq.clear();},toString:function(){return "igk.animation.sequence[object]";}});}});igk.system.createNS("igk.animation.sequence",{init:function(){}});})();(function(){var m_info="android info";var m_name="android script model";if(window.igk){window.igk.system.createNS("igk.android",{});}})();"uses strict";(function(){function __create(){var d=igk.createNode("div");d.addClass("igk-line-waiter");d.setAttribute("model","js");d.add("div").addClass("igk-line-waiter-cur");d.add("div").addClass("igk-line-waiter-cur");d.add("div").addClass("igk-line-waiter-cur");d.control={initialize:false,type:'linewaiter'};return d;}igk.system.createNS("igk.winui.lineWaiter",{init:function(q){q=q||$igk(igk.getParentScript());if(q.control &&(q.control.type=='linewaiter')){if(q.control.initialize)return;q.control.initialize=true;}igk.ready(function(){var s=q.select(".igk-line-waiter-cur");if(s.getCount()>0)s.waitInterval(500,function(){var self=this;var levent=null;function _t_e(evt){var g=$igk(igk.winui.eventTarget(evt));if((self.o==g.o)&&(evt.propertyName=="right")){if(igk.system.regex.item_match_class("igk-animate",g.o)){g.rmClass("igk-animate");}else{g.addClass("igk-animate");}}}this.reg_event("transitionend",_t_e).addClass("igk-animate");});});},addTo:function(t){var d=__create();$igk(t).add(d);igk.winui.lineWaiter.init(d);return d;},prependTo:function(t){var d=__create();$igk(t).prepend(d);igk.winui.lineWaiter.init(d);return d;},remove:function(t){$igk(t).select(".igk-line-waiter").each(function(){this.remove();return true;});}});})();(function(){function _sliderObj(q,p){var btnl=igk.createNode("div").addClass("igk-btn-slider igk-pull-left");var btnr=igk.createNode("div").addClass("igk-btn-slider igk-pull-right");var sliderz=igk.createNode("div").addClass("igk-slider-z");var pages=[];var m_vpage=0;var self=this;var property={orientation:'horizontal',filter:_filter};if(p.orientation &&(p.orientation=='vertical')){q.addClass("vertical");property.orientation="vertical";}function _update(){if(m_vpage>0){btnl.addClass("igk-active");}else btnl.rmClass("igk-active");if((m_vpage>=0)&&(m_vpage<(pages.length-1))){btnr.addClass("igk-active");}else btnr.rmClass("igk-active");}function _filter(i){if((i.o.tagName.toLowerCase()=='script')||(i.o==btnl.o)||(i.o==btnr.o))return true;return false;}function _init(){pages=[];q.select(".igk-slider-page").each(function(){if(this.o.parentNode==q.o){pages.push(this);sliderz.add(this);}return true;});_update();}function _moveleft(evt){evt.preventDefault();if(m_vpage>0){m_vpage--;ns_igk.winui.fn.navigateTo(pages[m_vpage].o,property).apply(this,evt);}_update();};function _moveright(evt){evt.preventDefault();if(m_vpage<self.getCount()-1){m_vpage++;ns_igk.winui.fn.navigateTo(pages[m_vpage].o,property).apply(this,evt);}_update();};btnl.reg_event("click",_moveleft);btnr.reg_event("click",_moveright);q.add(sliderz);q.add(btnl);q.add(btnr);igk.appendProperties(this,{getVisiblePageIndex:function(){return m_vpage;},getCount:function(){return pages.length;},init:_init });_init();}igk.system.createNS("igk.winui.slider",{init:function(p){var q=$igk(igk.getParentScript());var slider=new _sliderObj(q,p);}});})();(function(){if(!igk||(undefined !=igk.system.getNS('igk.winui.horizontalScrollPane'))){return;}var g_panes=[];var ckeys=['.igk-pane-page','.igk-pane','.hpane-bz'];var ifc=igk.fn.isItemStyleSupport;var support_transition=0;igk.winui.horizontalScrollPane=function(t,options){this.host=t;var m_init=0;var _idx=g_panes.length;var pane=t.select(ckeys[1]).first();var bz=t.select(ckeys[2]).first();var _pos=0;var _bullets=[];var opts=igk.initObj(options,{style:'rotation',showBullets:1,showNav:1,animDuration:5000,autoAnim:1});var q=this;var tout=0;var v_observe=null;var v_needtoupdate=false;function __startAnim(){if(tout)clearTimeout(tout);if((_pos+ 1)<__items().getCount()){q.goNext();}else{_pos=0;q.scrollTo(0);}};function __restartAnim(){if(tout)clearTimeout(tout);if(opts.autoAnim){tout=setTimeout(__startAnim,opts.animDuration);}}function __items(){return pane.select(ckeys[0]);};function __updateBullet(){if(!opts.showBullets)return;if(_bullets.active){_bullets.active.rmClass("igk-active");}_bullets.active=_bullets[_pos];if(_bullets.active)_bullets.active.addClass("igk-active");};function _update_viewport(pane,c,s){var posx,posy;if(igk.navigator.isFirefox()){if(!m_init){s.each_all(function(){this.setCss({"left":"0%"});});m_init=1;}if(c.offsetLeft !=0){var l=$igk(c).getComputedStyle('left');posx=((c.offsetLeft- igk.getNumber(l))/ pane.o.offsetWidth)*100;s.each_all(function(){this.setCss({"left":-posx+"%"});});}else{if(!v_observe && window.IntersectionObserver){v_observe=new window.IntersectionObserver((entries)=>{entries.forEach(entry=>{if(entry.isIntersecting){if(v_needtoupdate){v_needtoupdate=false;q.scrollTo(_pos);v_observe.disconnect();v_observe=null;}}})});v_observe.observe(q.host.o);}v_needtoupdate=true;}}else{posx=100 *c.offsetLeft / pane.o.offsetWidth;posy=100 *c.offsetTop / pane.o.offsetHeight;var f="translate(-"+ posx+"%, -"+ posy+"%)";s.each_all(function(){this.setCss({"transform":f});});}};igk.appendProperties(this,{remove:function(){t.remove();},goNext:function(){var s=pane.select(ckeys[0]);if((_pos>=0)&&(_pos<s.getCount()- 1)){_pos++;this.scrollTo(_pos);}},goPrev:function(){if(_pos>0){_pos--;this.scrollTo(_pos);}},scrollTo:function(c){var s=pane.select(ckeys[0]);let _pos=0;if(igk.isInteger(c)){_pos=c;c=s.getItemAt(c).o;}_update_viewport(pane,c,s);__updateBullet();__restartAnim();q_prop.host.raiseEvent('item-changed',{index:_pos,target:q_prop.host});},reset:function(){if(igk.navigator.isFirefox()){__items().each_all(function(){this.setCss({"left":"0px"});});}else{__items().each_all(function(){this.o.style.transform=null;});}var fl=pane.o.scrollTo||pane.o.scroll;if(fl)fl.apply(pane.o,[0,0]);_pos=0;__updateBullet();}});let q_prop=this;this.host.addEvent("item-changed",{});igk.appendProperties($igk(t),{selectedIndex(idx){_pos=idx;q_prop.scrollTo(idx);}});g_panes[_idx]=this;var l=__items().getCount();bz.setHtml("");if(opts.showBullets &&(l>1)){for(var i=0;(i<l);i++){var e=igk.createNode("div").addClass("hpane-b").reg_event('click',(function(i){return function(e){_pos=i;q.scrollTo(i);};})(i));bz.add(e);_bullets.push(e);}__updateBullet();}if(opts.showNav){t.add("div").addClass("hpane-btn hpane-btn-n").setCss({"right":"2px","top":"50%","marginTop":"-24px"}).reg_event("click",function(){q.goNext();});t.add("div").addClass("hpane-btn hpane-btn-p").setCss({"left":"2px","top":"50%","marginTop":"-24px"}).reg_event("click",function(){q.goPrev();});}if(opts.autoAnim &&(l>1)){setTimeout(__startAnim,opts.animDuration);}};var _class_=igk.winui.horizontalScrollPane;igk.system.createNS("igk.winui.horizontalScrollPane",{init:function(t,options){var q=$igk(t);var pane=new _class_(q,options);pane.reset();window.pan=pane;return pane;},item:function(i){return g_panes[i];}});igk.ready(function(){var _b=igk.dom.body();support_transition=ifc(_b.o,'transition')&& ifc(_b.o,'transform');});(function(){igk.winui.initClassControl("igk-hpane-container",function(q){let i=this;const data=i.o.getAttribute('igk-data');let options=igk.JSON.parse(data,i)||{};igk.winui.horizontalScrollPane.init(i,options);});})();})();(function(){function __colorPicker(p){var q=$igk(p);igk.appendProperties(this,{init:function(){var _r=q.select("#clr").getItemAt(0);var _g=q.select("#clg").getItemAt(0);var _b=q.select("#clb").getItemAt(0);var _o=igk.createNode("div");var e="igk-trackchange";var r=0,g=0,b=0;q.o.appendChild(_o.o);function _update_cl(){var txt="rgb("+ r+", "+ g+", "+ b+")";_o.setHtml(txt+" #"+ igk.system.convert.ToBase(r,16,2)+ igk.system.convert.ToBase(g,16,2)+ igk.system.convert.ToBase(b,16,2));_o.setCss({backgroundColor:txt});if(q.getAttribute("demo")){var gp=$igk(".igk-row").setCss({backgroundColor:txt});}}_r.postRegisterEvent(e,function(evt){r=parseInt(255*(evt.value / 100.0));_update_cl();});_g.postRegisterEvent(e,function(evt){g=parseInt(255*(evt.value / 100.0));_update_cl();});_b.postRegisterEvent(e,function(evt){b=parseInt(255*(evt.value / 100.0));_update_cl();});}});}function __circlecolorPicker(p){var RADIUS=110;var rRadius=255;var q=$igk(p);var m_cl={r:0,g:0,b:0 };var m_angle=0;var m_d=0;var r=q.select(".igk-circ-pan").getItemAt(0);var m_st=false;var cur=igk.createNode("div");var trackv=q.select(".igk-circ-v").getItemAt(0);var trackb=q.select(".igk-trb").getItemAt(0);var m_data=igk.JSON.parse(q.getAttribute("igk-data"));var tvalue=q.select("#clvalue").getItemAt(0);if(tvalue){tvalue.addClass("alignc");}trackb.o['trb']={trackv:trackv,update:function(v){this.trackv.setHtml(v);rRadius=parseInt(v*255 / 100);m_cl=__getColor(m_angle,m_d);__updateview();}};trackb.o.setAttribute("igk-trb-data","{update: function(d){ if (!d.bar.rep) d.bar.rep = d.bar.target.o['trb']; d.bar.rep.update(d.progress); } }");cur.setCss({border:"1px solid black",backgroundColor:"white",width:"4px",height:"4px",position:'absolute'});var ti=igk.createNode("div");ti.setCss({border:"1px solid #444",backgroundColor:"white",width:"100%",top:'50%',height:"1px",position:'absolute'});var tr=igk.createNode("div");tr.setCss({border:"1px solid #444",backgroundColor:"white",width:"1px",height:"100%",top:"0px",marginLeft:"50%",position:'absolute'});r.o.appendChild(cur.o);r.o.appendChild(tr.o);r.o.appendChild(ti.o);q.addEvent("igk-valuechange",{value:null,hexValue:null});igk.appendProperties(this,{init:function(){var W=r.getWidth();var H=r.getHeight();cur.setCss({"left":((W / 2))+"px","top":((H / 2))+"px"});}});function __getAngle(x1,y1,x2,y2){var dx,dy;dx=x2- x1;dy=y2- y1;if((dx==0.0)&&(dy==0.0)){return 0.0;}if(dx==0.0){if(dy>0){return(Math.PI / 2.0);}else return(-Math.PI / 2.0);}var angle=Math.atan2(dy,dx);if((dx<0)&&(dy<0))angle+=(2*Math.PI);return angle;}function __getColor(a,r){var h=(a*255 / 360.0);var s=(r / 110)*255.0;var v=rRadius;if(h<0)h=255+ h;var t={h:h,s:s,v:v};var m=igk.system.color.HSVtoColor(t.h,t.s,t.v);return m;}function __updateview(){var cl=m_cl;var txt="rgb("+ cl.r+", "+ cl.g+", "+ cl.b+")";if(q.getAttribute("demo")){var txt="rgb("+ cl.r+", "+ cl.g+", "+ cl.b+")";var gp=$igk(".igk-row").setCss({backgroundColor:txt});}var e=q.o["igk-valuechange"];e.value=txt;e.hexValue="#"+ igk.system.convert.ToBase(cl.r,16,2)+ igk.system.convert.ToBase(cl.g,16,2)+ igk.system.convert.ToBase(cl.b,16,2);if(tvalue !=null){tvalue.o.value=e.hexValue;}if(m_data && m_data.update){m_data.update.apply(q,[e]);}q.raiseEvent("igk-valuechange");};function __update(evt){if(!m_st)return;var l=r.getScreenLocation();var W=r.getWidth();var H=r.getHeight();var Cx=W / 2;var Cy=H / 2;var m_s=parseInt(Math.max(0,Math.min(evt.clientX- l.x,W))- Cx);var m_y=parseInt(Math.max(0,Math.min(evt.clientY- l.y,H))- Cy);var d=Math.sqrt((m_s*m_s)+ (m_y*m_y));var PI=3.1415926;m_angle=__getAngle(0,0,m_s,m_y)*180/ PI;d=Math.min(RADIUS,d);m_d=d;var loc={x:Cx- 2+ parseInt((d*Math.cos(m_angle*PI / 180))),y:Cy- 2+ parseInt((d*Math.sin(m_angle*PI / 180)))};cur.setCss({"left":loc.x+"px","top":loc.y+"px"});m_cl=__getColor(m_angle,d);__updateview();}r.reg_event("mousedown",function(evt){if(m_st)return;m_st=true;igk.winui.mouseCapture.setCapture(q.o);__update(evt);});r.reg_event("mousemove",function(evt){if(!m_st)return;__update(evt);});r.reg_event("mouseup",function(evt){igk.winui.mouseCapture.releaseCapture();if(!m_st)return;__update(evt);m_st=false;});}igk.system.createNS("igk.winui.components.colorpicker",{init:function(){var q=igk.getParentScript();if(q){var p=new __colorPicker(q);igk.ready(function(){p.init();})}}});igk.system.createNS("igk.winui.components.circleColorPicker",{init:function(){var q=igk.getParentScript();if(q){var p=new __circlecolorPicker(q);igk.ready(function(){p.init();})}}});})();(function(){function __calcobj(q,i){var self=this;var s=q.select("span").getItemAt(0);var defv=i.getAttribute("default-v")||i.o.value;if(typeof(defv)=="undefined")defv=0;i.reg_event("input",function(evt){evt.preventDefault();var t=Math.round((i.o.value- defv)*100)/ 100;s.rmClass("igk-danger");s.rmClass("igk-success");if(t>0){s.addClass("igk-success");}else{s.addClass("igk-danger");}s.setHtml(t);});igk.appendProperties(this,{toString:function(){return "igk:[#calc]"}});}igk.system.createNS("igk.calc",{init:function(q){if(!q)return;var i=q.select("#clValue").getItemAt(0);if(!i)return;return new __calcobj(q,i);}});igk.ready(function(){var e=$igk(".igk-calc").each(function(){igk.calc.init(this);return true;});igk.ctrl.registerReady(function(n,p){if(igk.system.regex.item_match_class("igk-calc",this)){igk.calc.init($igk(this));}});});})();(function(){function get_auto_height(q){var o=q.getComputedStyle('height');q.setCss({height:"auto"});var r=q.getComputedStyle('height');q.setCss({height:o});return r;}function __init_content(){this.setCss({height:"auto"});this.trans={maxHeight:this.getComputedStyle("height")};var q=this;if(!q.open){q.open=function(){var bck=q.getComputedStyle('transition');if(bck){q.setCss({"transition":'none'});}var h=get_auto_height(q);if(bck){q.setCss({"transition":bck});}q.setCss({height:h});};}if(!q.close){q.close=function(){q.setCss({height:"0px"});};}this.setCss({height:null});}function __click_h(evt){var q=this;var d="igk-collapse";var t="igk-toggle";var cf=$igk(q.o.parentNode).select(".igk-c").getItemAt(0);if(igk.system.regex.item_match_class(t,q.o)){q.rmClass(t);cf.close();}else{cf.open();q.addClass(t);}evt.stopPropagation();}function is_scrolling(q){var g=q.fn["sys://winui/accordeon"];if(g.owner.fn["sys://scrolling"]){delete(g.owner.fn["sys://scrolling"]);return 1;}return 0;};function __click(q){return function(evt){if(is_scrolling(q)){return;}__click_h.apply(q,[evt]);}}igk.system.createNS("igk.winui.accordeon",{init:function(){var q=$igk(igk.getParentScript());igk.ready(function(){q.select(".igk-c").each(function(){__init_content.apply(this);return true;});q.select(".igk-panel-heading").each(function(){var self=this;self.fn["sys://winui/accordeon"]={owner:q};this.reg_event("touchOrClick",__click(self));igk.ctrl.selectionmanagement.disable_selection(this.o);return true;});});var starttouch=0;function __binds(){if(!q.fn["sys://scrolling"]&& starttouch){q.fn["sys://scrolling"]=1;starttouch=0;}}igk.winui.reg_event(window,"scroll",function(){__binds();},true);igk.winui.reg_event(document,"scroll",function(){__binds();},true);$igk(".igk-parentscroll").reg_event("scroll",function(evt){__binds();},true);q.reg_event("igkTouchStart igkTouchMove",function(evt){if(evt.type=="touchstart")starttouch=0;if(!q.fn["sys://scrolling"]&& !starttouch){q.fn["sys://scrolling"]=0;starttouch=1;}},igk.features.supportPassive ?{passive:true}:false);}});})();"uses strict";(function(){igk.system.createNS("igk.services",{invoke:function(m,c){var uri=window.location.href.split('#')[0];function _sendRequest(){igk.ajx.postWebRequest(uri,m,"",function(xhr){if(this.isReady()){igk.winui.notify.showMsBox("Service : "+ m+"_response ",xhr.responseText);}});}if(c>0){igk.winui.notify.showMsBox("ServiceParam","/!\\sorry this service method : <b>"+ m+"</b>: required some parameter(s). if no parameter set correctly you will get an error.");}else _sendRequest();}});})();(function(){"uses strict";igk.system.createNS("igk.ctrl.cookieswarning",{close:function(id){var t=document.getElementById(id);$igk(t).setCss({opacity:"1"}).animate({opacity :0 },{duration:200,interval:20,update:function(){},complete:function(){t.parentNode.removeChild(t);igk.web.setcookies("igk-app-cookieswarning-inform","true");}});}});})();(function(){igk.system.createNS("igk.winui.articleviewer",{init:function(){var p=igk.getParentScript();if(!p)return;var h=igk.winui.articleviewer.initViewBox(p,"igk-article-viewer-box",true,false);return h;},initViewBox:function(target,classname,updatesize,withanimation){if((!target)||(!classname))return;var p=target;var m_sel=$igk(p).select("."+ classname);if(m_sel.getCount()<=0)return;var m_width=0;var m_height=0;var d=null;var m_withanimation=false;if(typeof(withanimation)==igk.constants.undef)m_withanimation=true;else m_withanimation=withanimation;var dummy=document.createElement("div");$igk(dummy).addClass(classname).setCss({display:"none"});var j=0;var m_blocks=new Array();$igk(p).setCss({overflow:"hidden",width:"100%"});function updateSize(autoAnimate){var columns=[];function getColumnInfo(index){if(columns[index])return columns[index];c={bottom:0 };columns.push(c);return c;};function getMaxHeight(){var h=0;for(var i=0;i<columns.length;i++){h=Math.max(h,columns[i].bottom);}return h;};if((p.clientWidth !=m_width)&&(m_blocks.length>0)){var c=m_blocks[0];var w=$igk(dummy).getPixel("width",c);var h=$igk(dummy).getPixel("height",c);var mLeft=$igk(dummy).getPixel("marginLeft");var mRight=$igk(dummy).getPixel("marginRight");var mTop=$igk(dummy).getPixel("marginTop");var mBottom=$igk(dummy).getPixel("marginBottom");var offsetx=mLeft;var offsety=mTop;m_width=p.clientWidth;var v_W=m_width- (mLeft+ mRight);var xs=Math.max(1,Math.floor(v_W / (w+ mRight+ mLeft)));var column=xs;var offsetx=0;if(column>1)offsetx=mLeft+ (m_width / 2)- (((w+ mRight+ mLeft)*column)/ 2);else{offsetx=(m_width / 2)- (((w- (mRight+ mLeft))*column)/ 2);w-=(mLeft+ mRight);}var j=0;var x=offsetx;var y=mTop;var item=null;var cinfo=0;for(var i=0;i<m_blocks.length;i++){cinfo=getColumnInfo(i% column);if((i>0)&&((i% column)==0)){x=offsetx;y+=(h+ mTop);j++;}item=m_blocks[i];h=$igk(item).getPixel("height",c);y=cinfo.bottom+ mTop;$igk(item).setCss({width:w+"px",height:h+"px",overflow:"auto",margin:"0px"});if(autoAnimate){igk.animation.animate(item,{left:x+"px",top:y+"px"},{duration:200,complete:function(){}});}else{$igk(item).setCss({left:x+"px",top:y+"px"});}x+=w+ mRight+ mLeft;cinfo.bottom=y+ h;}igk.animation.animate(p,{height:(getMaxHeight()+ mBottom)+"px"},{duration:200,complete:function(){if(m_width !=p.clientWidth){updateSize(p);return;}}});}};m_sel.each(function(){var d=this.owner;m_blocks[j]=d;$igk(d).setCss({position:"absolute",verticalAlign:"top"});j++;return true;});var m_eventContext=igk.window.RegEventContext(p,$igk(p));if(m_eventContext){m_eventContext.reg_window("resize",function(){updateSize(true);});}else{console.log("igk.winui.articleviewer ... event context failed");return;}var v_out={updateSize:updateSize};if(updatesize){igk.ctrl.bindPreloadDocument("articleviewer",function(){v_out.updateSize(m_withanimation);});}return v_out;}});})();(function(){igk.system.createNS("igk.google",{});igk.system.createNS("igk.google.controls",{addCircleWaiter:function(b){var n=igk.createNode("div");n.addClass("igk-google-circle-waiter");b.add(n);igk.ajx.fn.initnode(n.o);},addLineWaiter:function(b){var n=igk.createNode("div");n.addClass("igk-google-line-waiter");b.add(n);igk.ajx.fn.initnode(n.o);}});function __circle_waiter_init(s){var q=this;igk.appendProperties(q,{start:function(){if(_running)return;_do_anim();_running=1;},stop:function(){_running=false;}});var _running=true;var _dat=null;var _2PI=(2*Math.PI);var _3PI2=(Math.PI / 2)*3;var _10Deg=(30/ 360)*_2PI;var _ta=0;igk.appendProperties(this.data,{canva:null,dir:1,penWidth:2,oldClass:1,catchm:0,T1:0,T2:_3PI2,update:function(){var s=q.data.storyboard_1;if(q.data.catchm){q.data.catchm=0;s.setCss({width:"100px"});q.data.T2+=_3PI2;}else{q.data.catchm=1;q.data.T1=q.data.T2- _10Deg;s.setCss({width:"0px"});}},render:function(v,cl,of_set,bg){var w=igk.getNumber(this.canva.getComputedStyle("width"));var h=igk.getNumber(this.canva.getComputedStyle("height"));var cx=w / 2;var cy=h / 2;var penw=this.penWidth||4;var R=Math.min(w / 2,h / 2)- (penw / 2);var r=Math.min(w / 2,h / 2)- (penw / 2)- 10;this.canva.setAttribute("width",w);this.canva.setAttribute("height",h);var ctx=this.canva.o.getContext('2d');ctx.clearRect(0,0,w,h);ctx.strokeStyle=''+ cl;if(bg){ctx.beginPath();ctx.fillStyle="#ddd";ctx.arc(cx,cy,R,0,_2PI,false);ctx.closePath();ctx.fill();}ctx.lineWidth=penw;ctx.beginPath();var offset=-(Math.PI / 2)+ (v*_2PI);var _s=_getData();if(r>0){if(!this.catchm){ctx.arc(cx,cy,r,offset+ this.T1+ ((this.T2- this.T1- _10Deg)*of_set),offset+ this.T2,false);}else{ctx.arc(cx,cy,r,offset+ this.T1,offset+ this.T2+ (_3PI2*(1- of_set)),false);}}ctx.stroke();}});function _getData(){if(_dat==null){var _s=q.data.storyboard.getComputedStyle('content',':before');var _t=/^"((.)+)"$/i.exec(_s);_dat=igk.JSON.init_data({stop:'width',mode:1},(_t ? _t[1].replace(/\\\"/g,"\""):null),function(s){s.stop=(_t ? _t[1]:null)||'width';});q.data.penWidth=q.data.storyboard.getComputedStyle('border-size',':before');}return _dat;}this.data.canva=this.add("canvas").addClass("igk-canva-bg");this.data.storyboard=this.add("div").addClass("igk-anim-time-board i-1").reg_event("transitionend",function(evt){var _m=_getData();if((evt.target==q.data.storyboard.o)&&(evt.propertyName==_m.stop)){var _oc=q.data.oldClass;var _nc=((_oc+ 1)% 5)||1;if(q.data.dir==1){q.data.storyboard.setCss({'width':'0px'}).rpClass("igk-cl-"+ _oc,"igk-cl-"+ _nc);q.data.dir=-1;}else{q.data.storyboard.setCss({'width':'100px'}).rpClass("igk-cl-"+ _oc,"igk-cl-"+ _nc);q.data.dir=1;}q.data.oldClass=_nc;}}).reg_event("transitionstart",function(evt){}).setCss({"width":"0px","height":"0px"}).addClass("igk-cl-2").setHtml(" ");this.data.storyboard_1=this.add("div").addClass("igk-anim-time-board i-2").reg_event("transitionend",function(evt){var s=q.data.storyboard_1;if((evt.propertyName=="width")&&((evt.target==s.o))){q.data.update();}});function _do_anim(){if(!q.o.parentNode||!q.isOnDocument()){_running=false;return false;}q.data.storyboard .setCss({width:'100px',height:'100px'}).rpClass("igk-cl-2","igk-cl-1");q.data.storyboard_1 .setCss({width:'100px'});q.data.render(0,'transparent',0);igk.html.canva.animate(function(e){if(!q.o.parentNode){console.error("not animable no parent. stop animate canvas");return false;}if(!q.getisVisible()){return _running;}if(!q.data.end){var n=q.data.storyboard;var n1=q.data.storyboard_1;var x=igk.getNumber(n.getComputedStyle("width"));var y=igk.getNumber(n1.getComputedStyle("width"));var cl=n.getComputedStyle('color');if(q.data.dir==-1)x=100 - x;q.data.render(Math.round((x / 100.0)*100)/ 100,cl,Math.round((y / 100.0)*100)/ 100 );return _running;}q.data.render(1.0,"",1.0);return _running;});};setTimeout(_do_anim,1000);return true;};function __line_waiter_init(s){var q=this;var _ctx=null;var _data={};var _lstart=0;var _anim_id=0;if(q.remove){var f=q.remove;q.remove=function(){if(_anim_id)_anim_id.cancel();f.apply(q);};}igk.appendProperties(_data,{cur:q.add("div").setCss({right:(q.getWidth())+"px",left:"0px"}).addClass("cur"),end:0,running:1,getctx:function(){if(!_ctx){_ctx=this.canva.o.getContext('2d');}return _ctx;},render:function(){}});function _init_cur(){var _trans=_data.cur.getComputedStyle("transition");_data.cur.setCss({transition:'none',right:(q.getWidth())+"px",left:"0px"});_lstart=0;_data.cur.getComputedStyle("transition");_data.cur.setCss({transition:_trans,right:'0px'});};function _do_anim(){if(!q.o.parentNode)return false;_data.cur.setCss({right:"0px"});_anim_id=igk.html.canva.animate(function(e){if(!q.o.parentNode)return false;var _X=q.getWidth();var _x=igk.getNumber(_data.cur.getComputedStyle("right"));var _y=igk.getNumber(_data.cur.getComputedStyle("left"));if(_X>0){if(!_lstart &&((1- (_x / _X))>0.3)){_data.cur.setCss({left:_X+"px"});_lstart=1;}if(_lstart &&(_x<=0)&&(_y>=_X)){_init_cur();}}return _data.running;});};setTimeout(_do_anim,200);var _resizing=0;igk.winui.reg_event(window,'resize',function(){if(_resizing)return;_resizing=1;_init_cur();_resizing=0;});};igk.winui.initClassControl("igk-google-circle-waiter",__circle_waiter_init,{desc:"google circle waiter"});igk.winui.initClassControl("igk-google-line-waiter",__line_waiter_init,{desc:"google line waiter"});})();(function(){igk.system.createNS("igk.drawing.effect",{stackBlur:function(ctx,x,y,w,h,radius,iterations){boxBlurCanvasObjRGB(ctx,x,y,w,h,radius||2,iterations||2);}});})();(function(){function __init_google_button(){var q=this;this.reg_event("click",function(e){q.setAttribute("curx",'10px');q.setAttribute("cury",'10px');q.addClass("igk-show-cur");var cur=q.add("div");cur.addClass("cur");var loc=igk.winui.GetChildMouseLocation(q,e);var x=loc.x+"px";var y=loc.y+"px";$igk(cur).setCss({left:x,top:y,width:'0%',height:'0%'}).timeOut(200,function(){cur.addClass("trans").setCss({left:'0px',top:'0px',width:'100%',height:'100%'});});});}igk.winui.initClassControl("google-button",__init_google_button);})();(function(){function hierachilist(p){var tab=[];var rt=[{i:p,t:''}];var q=0;while((q=rt.pop())!=null){for(var u in q.i){tab[q.t+ u]=(q.t+ u).replace(/\./g," ");tab.push(q.t+ u);if(typeof(q.i[u])=="object"){rt.push({i:q.i[u],t:q.t+ u+"."});}}}return tab;}function _getProperty(n_h){var cl=igk.convert.toHtmlColor(n_h.getComputedStyle("color"));var disp=n_h.getComputedStyle("visibility");var ms=[];ms.push({color:cl});if(disp !="visible")ms.push({visibility:'off'});return ms;}function initDisplayStyle(map,t){var p={administrative:{country:1,land_parcel:1,locality:1,neighborhood:1,province:1},landscape:{man_made:1,natural:{terrain:1,landcoder:1}},poi:{attraction:1,business:1,government:1,medical:1,park:1,place_of_worship:1,school:1,sports_complex:1},road:{arterial:1,hightway:{controlled_access:1},local:1},transit:{line:1,station:{airport:1,bus:1,rail:1}},whater:1};var m={all:1,geometry:{fill:1,stroke:1},labels:{icon:1,text:{fill:1,stroke:1}}};var tab=hierachilist(p);var ptab=hierachilist(m);var styles=[];var dc=igk.convert.toHtmlColor(igk.css.getComputedSrcStyle(t,"","color"));var gc=34;var ok=1;var tset={};var pset={};var out=igk.createNode("div");var ti=1;var n_h=$igk(t).add("div").addClass("dispn");var ms=_getProperty(n_h);var bvjs=JSON.stringify(ms);for(var l=0;l<tab.length;l++){var ss=tab[l];for(var y=ptab.length- 1;y>=0;y--){var k=(ss+" "+ ptab[y]).replace(/\./g," ");var parent=ss.substr(0,ss.trim().lastIndexOf("."));n_h.o.className=k;ms=_getProperty(n_h);var vjs=JSON.stringify(ms);if(bvjs==vjs)continue;if(parent.length>0){if(tset[parent]==vjs){continue;}var dcb=0;while(parent.indexOf(".")!=-1){parent=parent.substr(0,parent.lastIndexOf("."));if(tset[parent]==vjs){dcb=1;break;}}if(dcb)continue;}else{tset[ss]=vjs;}out.add("div").setHtml((ti++)+": "+ ss+"=="+ k+":"+ vjs);styles.push({featureType:tab[l],elementType:ptab[y],stylers:ms});}}n_h.remove();var STYLE_LENGTH=2047;var v_ct=JSON.stringify(styles);t.parentNode.appendChild(out.o);}var m_maps=[];var m_sys=0;function _initmaps(){$igk(document).reg_event("transitionend",function(e){if("width|height".indexOf(e.propertyName)!=-1){for(var i=0;i<m_maps.length;i++){google.maps.event.trigger(m_maps[i],'resize');}}});};function _markerInfo(){var m_marks=[];igk.appendProperties(this,{clearAll:function(){for(var i=0;i<m_marks.length;i++){m_marks[i].setMap(null);}m_marks=[];},add:function(m){if(m_marks)m_marks.push(m);}});};function _refresh(m){google.maps.event.trigger(m,"resize");}igk.system.createNS("igk.google.maps",{getMapAtIndex:function(i){return m_maps[i];},getMapCount:function(){return m_maps.length;},refresh:function(i){var m=m_maps[i];if(m)google.maps.event.trigger(m,"resize");},addMarker:function(map,x,y,l,t){return new google.maps.Marker({position:{lat:x,lng:y},map:map,title:t||'title',label:l,icon:'https://developers.google.com/maps/documentation/javascript/examples/full/images/beachflag.png'});},setMarker:function(map,markers,opts){if(typeof(map)=='number'){map=m_maps[map];}if(!map)return;var v_cm=$igk(map);if(v_cm.markers){v_cm.markers.clearAll();}else{v_cm.markers=new _markerInfo();}var mxi=0,mxa=0,myi=0,mya=0;var bounds=0;for(var i=0;i<markers.length;i++){var m=markers[i];var mk=igk.google.maps.addMarker(map,parseFloat(m.lat),parseFloat(m.lng));mk.icon=m.icon;mk.title=m.title;mk.inf=m;if(opts && opts.click){mk.addListener('click',opts.click);}v_cm.markers.add(mk);if(i==0){mxi=m.lat;mxa=m.lat;myi=m.lng;mya=m.lng;bounds=new google.maps.LatLngBounds(m,m);}else{mxi=Math.min(mxi,m.lat);mxa=Math.max(mxa,m.lat);myi=Math.min(myi,m.lng);mya=Math.max(mya,m.lng);bounds.extend(mk.getPosition());}}var center={lat:mxi+ (mxa- mxi)/ 2.0,lng:myi+ (mya- myi)/ 2.0 };setTimeout(function(){map.fitBounds(bounds);map.setCenter(center);_refresh(map);},500);},initMap:function(t){t=t||igk.getParentScript();if(!t){console.debug('not found');return;}if(!m_sys){_initmaps();m_sys=1;}var q=$igk(t);var s=q.getAttribute("igk:data");var data=igk.initObj(igk.JSON.parse(s),{zoom:7,center:{lat:50.41438075875331,lng:4.904006734252908}});var map=new google.maps.Map(t,{zoom:data.zoom,center:data.center,disableDefaultUI:true});if(data.markers){var mxi=0,mxa=0,myi=0,mya=0;for(var i=0;i<data.markers.length;i++){var m=data.markers[i];var mk=igk.google.maps.addMarker(map,parseFloat(m.lat),parseFloat(m.lng));mk.icon=data.icons[m.idx]||m.icon||data.iconmark;mk.title=m.title;mk.addListener('click',(function(mk,data,m){return function(d){var d=igk.createNode('div');var c=$igk(m.target).first();d.add('h2').setHtml(mk.title);d.add('div').setHtml(c ? c.getHtml():"");var wnd=new google.maps.InfoWindow({content:d.getHtml()});wnd.open(map,this);};})(mk,data,m));if(i==0){mxi=m.lat;mxa=m.lat;myi=m.lng;mya=m.lng;}else{mxi=Math.min(mxi,m.lat);mxa=Math.max(mxa,m.lat);myi=Math.min(myi,m.lng);mya=Math.max(mya,m.lng);}}var center={lat:mxi+ (mxa- mxi)/ 2.0,lng:myi+ (mya- myi)/ 2.0 };map.setCenter(center);}m_maps.push(map);if(document.readyState !="complete"){igk.ready(function(){google.maps.event.trigger(map,"resize");});}if(data.styles){map.setOptions({styles:data.styles});}}});})();"uses strict";(function(){igk.system.createNS("igk.winui.canva",{initctrl :function(uri){var p=igk.getParentScript();if(!p||(p.tagName.toLowerCase()!='canvas'))return;function evalScript(text){var canva=p;var v_context=canva.getContext ? canva.getContext("2d"):null;if(v_context==null)return;try{(new Function(text)).apply(canva);}catch(ex){igk.winui.notify.showErrorInfo("Exception - evalScript","Error : <br />"+ex);}}window.igk.ajx.aget(uri,null,function(xhr){if(this.isReady()){evalScript.apply(p,new Array(xhr.responseText));}});}});})();})(window);