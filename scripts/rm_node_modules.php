<?php
// @command: balafon --run .test/scripts/rm_node_modules.php [dir]
// | --------------------------------------------------------------------
// | 
// | 
use IGK\System\Console\Logger;
$dir =  igk_getv($params, 0) ?? __DIR__."/Dev";
$count = 0;
igk_debug(1);
$files = igk_io_getfiles($dir, function($f)use(& $count){
    if (preg_match("/.+\/node_modules\/.+/", $f)){
        Logger::print('remove : '.$f. PHP_EOL);
        unlink($f);
        $count++;
    }
    return false;
}, true); 
igk_wln_e('remove files : '.$count);